<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>po_network ‚Ä¢ d3po</title><link rel="stylesheet" href="../menu.css"><link rel="stylesheet" href="../content.css"><!-- MathJax Configuration --><script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['\\[', '\\]'], ['$$', '$$']],
        processEscapes: true,
        processEnvironments: true,
        packages: {'[+]': ['ams', 'newcommand', 'configmacros']}
      },
      options: {
        ignoreHtmlClass: 'tex2jax_ignore',
        processHtmlClass: 'tex2jax_process'
      }
    };
  </script><script id="MathJax-script" async src="../js/tex-svg.js"></script></head><body>
<div class="main-container">
<div id="menu">
  <div>
    <img src="../man/figures/logo.svg" align="center" height="139" alt="d3po logo"></div>

  <div class="search-container">
    <input type="text" id="search-box" placeholder="Search..."></div>

  <div class="search-container">
    <button id="theme-toggle" title="Toggle dark mode" aria-label="Toggle dark mode">Toggle theme</button>
    <button id="font-decrease" title="Decrease font size" aria-label="Decrease font size">A-</button>
    <button id="font-increase" title="Increase font size" aria-label="Increase font size">A+</button>
  </div>

  <div class="submenu">
    <label style="border-bottom: 0;"><a style="padding-left: 0;" href="../index.html">Home üè†</a></label>
  </div>

  <div class="submenu">
    <label>Functions</label>
    <a href="../reference/daes.html">daes</a>
    <a href="../reference/po_box.html">po_box</a>
    <a href="../reference/po_treemap.html">po_treemap</a>
    <a href="../reference/po_pie.html">po_pie</a>
    <a href="../reference/po_donut.html">po_donut</a>
    <a href="../reference/po_area.html">po_area</a>
    <a href="../reference/po_bar.html">po_bar</a>
    <a href="../reference/po_line.html">po_line</a>
    <a href="../reference/po_scatter.html">po_scatter</a>
    <a href="../reference/po_tooltip.html">po_tooltip</a>
    <a href="../reference/po_format.html">po_format</a>
    <a href="../reference/po_labels.html">po_labels</a>
    <a href="../reference/po_font.html">po_font</a>
    <a href="../reference/po_theme.html">po_theme</a>
    <a href="../reference/po_download.html">po_download</a>
    <a href="../reference/po_network.html">po_network</a>
    <a href="../reference/po_geomap.html">po_geomap</a>
    <a href="../reference/d3po.html">d3po</a>
    <a href="../reference/d3po_output.html">d3po_output</a>
    <a href="../reference/render_d3po.html">render_d3po</a>
    <a href="../reference/d3po_proxy.html">d3po_proxy</a>
  </div>

  <div class="submenu">
    <label>Vignettes</label>
    <a href="../vignettes/examples.html">'d3po' worked examples</a>
  </div>

  <div class="submenu">
    <label>News</label>
    <a href="../news/index.html">Changelog</a>
  </div>
</div>
<div id="content">
<div class="content-wrapper">
        <div class="content-main">

<table style="width: 100%;"><tr><td>po_network {d3po}</td><td style="text-align: right;">R Documentation</td></tr></table><h2>Network</h2>

<h3>Description</h3>

<p>Draw a network graph showing relationships between entities.
Requires an igraph object with nodes (vertices) and links (edges).
Node size can represent counts or other metrics.
</p>


<h3>Usage</h3>

<pre><code class="language-R">po_network(d3po, ..., data = NULL, inherit_daes = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role="presentation"><tr><td><code id="d3po">d3po</code></td>
<td>
Either the output of <code>d3po()</code> or <code>d3po_proxy()</code>.
</td></tr><tr><td><code id="...">...</code></td>
<td>
Aesthetics, see <code>daes()</code>.
</td></tr><tr><td><code id="data">data</code></td>
<td>
Any dataset to use for plot, overrides data passed
to <code>d3po()</code>.
</td></tr><tr><td><code id="inherit_daes">inherit_daes</code></td>
<td>
Whether to inherit aesthetics previous specified.
</td></tr></table><h3>Value</h3>

<p>Appends nodes arguments to a network-specific 'htmlwidgets' object
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
  trade_network &lt;- d3po::trade[d3po::trade$year == 2023L, ]
  trade_network &lt;- aggregate(
    trade ~
      reporter_iso + partner_iso + reporter_continent + partner_continent,
    data = trade_network, FUN = sum
  )

  # subset to 10 largest connection per reporter country
  trade_network &lt;- do.call(
    rbind,
    lapply(
      split(trade_network, trade_network$reporter_iso),
      function(df) head(df[order(-df$trade), ], 10)
    )
  )

  # Create vertex (node) attributes for coloring and sizing
  # Get unique countries with their continents and trade volumes
  vertices &lt;- unique(rbind(
    data.frame(
      name = trade_network$reporter_iso,
      continent = trade_network$reporter_continent,
      stringsAsFactors = FALSE
    ),
    data.frame(
      name = trade_network$partner_iso,
      continent = trade_network$partner_continent,
      stringsAsFactors = FALSE
    )
  ))

  # Remove duplicates
  vertices &lt;- vertices[!duplicated(vertices$name), ]

  # Calculate total trade volume per country (as reporter)
  trade_volume &lt;- aggregate(trade ~ reporter_iso, data = trade_network, FUN = sum)
  colnames(trade_volume) &lt;- c("name", "trade_volume")

  # Merge trade volume with vertices
  vertices &lt;- merge(vertices, trade_volume, by = "name", all.x = TRUE)
  vertices$trade_volume[is.na(vertices$trade_volume)] &lt;- 0

  # Assign colors to continents
  my_pal &lt;- tintin::tintin_pal(option = "The Blue Lotus")(7)

  names(my_pal) &lt;- c(
    "Africa", "Antarctica", "Asia",
    "Europe", "North America", "Oceania", "South America"
  )

  # Add color column based on continent
  vertices$color &lt;- my_pal[vertices$continent]

  # Create igraph object with vertex attributes
  g &lt;- graph_from_data_frame(trade_network, directed = TRUE, vertices = vertices)

  # Create the network visualization
  d3po(g, width = 800, height = 600) %&gt;%
    po_network(daes(size = trade_volume, color = color, layout = "fr")) %&gt;%
    po_labels(title = "Trade Network by Country in 2023")
}

</code></pre>


</div>
        </div>
        <footer><p id="last-updated">Loading...</p>
</footer><script src="../js/footer.js"></script><script src="../js/theme.js"></script><script src="../js/search.js"></script><script src="../js/fontsize.js"></script></div>
</div>

</body></html>

