!function(){return function e(t,r,n){function a(o,s){if(!r[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){return a(t[o][1][e]||e)},c,c.exports,e,t,r,n)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}}()({1:[function(e,t,r){"use strict";r.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},r.toByteArray=function(e){for(var t,r=u(e),n=r[0],o=r[1],s=new i(function(e,t,r){return 3*(t+r)/4-r}(0,n,o)),l=0,c=o>0?n-4:n,d=0;d<c;d+=4)t=a[e.charCodeAt(d)]<<18|a[e.charCodeAt(d+1)]<<12|a[e.charCodeAt(d+2)]<<6|a[e.charCodeAt(d+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===o&&(t=a[e.charCodeAt(d)]<<2|a[e.charCodeAt(d+1)]>>4,s[l++]=255&t);1===o&&(t=a[e.charCodeAt(d)]<<10|a[e.charCodeAt(d+1)]<<4|a[e.charCodeAt(d+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},r.fromByteArray=function(e){for(var t,r=e.length,a=r%3,i=[],o=0,s=r-a;o<s;o+=16383)i.push(c(e,o,o+16383>s?s:o+16383));1===a?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===a&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],a=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)n[s]=o[s],a[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var a,i,o=[],s=t;s<r;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(i=a)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],2:[function(e,t,r){"use strict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(e){return(e>0)-(e<0)},r.abs=function(e){var t=e>>31;return(e^t)-t},r.min=function(e,t){return t^(e^t)&-(e<t)},r.max=function(e,t){return e^(e^t)&-(e<t)},r.isPow2=function(e){return!(e&e-1||!e)},r.log2=function(e){var t,r;return t=(e>65535)<<4,t|=r=((e>>>=t)>255)<<3,t|=r=((e>>>=r)>15)<<2,(t|=r=((e>>>=r)>3)<<1)|(e>>>=r)>>1},r.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},r.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},r.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},r.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var a=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,a=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--a;e[t]=n<<a&255}}(a),r.reverse=function(e){return a[255&e]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]},r.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},r.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},r.interleave3=function(e,t,r){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},r.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},{}],3:[function(e,t,r){(function(t){"use strict";var n=e("base64-js"),a=e("ieee754");r.Buffer=t,r.SlowBuffer=function(e){+e!=e&&(e=0);return t.alloc(+e)},r.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return Object.setPrototypeOf(r,t.prototype),r}function t(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return s(e,t,r)}function s(e,r,n){if("string"==typeof e)return function(e,r){"string"==typeof r&&""!==r||(r="utf8");if(!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=0|f(e,r),a=o(n),i=a.write(e,r);i!==n&&(a=a.slice(0,i));return a}(e,r);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(D(e,ArrayBuffer)||e&&D(e.buffer,ArrayBuffer))return function(e,r,n){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var a;a=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);return Object.setPrototypeOf(a,t.prototype),a}(e,r,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return t.from(a,r,n);var i=function(e){if(t.isBuffer(e)){var r=0|d(e.length),n=o(r);return 0===n.length?n:(e.copy(n,0,0,r),n)}if(void 0!==e.length)return"number"!=typeof e.length||P(e.length)?o(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return l(e),o(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function f(e,r){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||D(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,a=arguments.length>2&&!0===arguments[2];if(!a&&0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return I(e).length;default:if(i)return a?-1:N(e).length;r=(""+r).toLowerCase(),i=!0}}function p(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function h(e,r,n,a,i){if(0===e.length)return-1;if("string"==typeof n?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),P(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof r&&(r=t.from(r,a)),t.isBuffer(r))return 0===r.length?-1:v(e,r,n,a,i);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):v(e,[r],n,a,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,a){var i,o=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var c=-1;for(i=r;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*o}else-1!==c&&(i-=i-c),c=-1}else for(r+l>s&&(r=s-l),i=r;i>=0;i--){for(var d=!0,f=0;f<l;f++)if(u(e,i+f)!==u(t,f)){d=!1;break}if(d)return i}return-1}function g(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var i=t.length;n>i/2&&(n=i/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(P(s))return o;e[r+o]=s}return o}function m(e,t,r,n){return V(N(t,e.length-r),e,r,n)}function y(e,t,r,n){return V(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return y(e,t,r,n)}function b(e,t,r,n){return V(I(t),e,r,n)}function j(e,t,r,n){return V(function(e,t){for(var r,n,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,a=r%256,i.push(a),i.push(n);return i}(t,e.length-r),e,r,n)}function w(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function _(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var i,o,s,l,u=e[a],c=null,d=u>239?4:u>223?3:u>191?2:1;if(a+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[a+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[a+1],o=e[a+2],128==(192&i)&&128==(192&o)&&(l=(15&u)<<12|(63&i)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[a+1],o=e[a+2],s=e[a+3],128==(192&i)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&i)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),a+=d}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}(n)}r.kMaxLength=i,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)}(e,t,r)},t.allocUnsafe=function(e){return u(e)},t.allocUnsafeSlow=function(e){return u(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,r){if(D(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),D(r,Uint8Array)&&(r=t.from(r,r.offset,r.byteLength)),!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,a=r.length,i=0,o=Math.min(n,a);i<o;++i)if(e[i]!==r[i]){n=e[i],a=r[i];break}return n<a?-1:a<n?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var a=t.allocUnsafe(r),i=0;for(n=0;n<e.length;++n){var o=e[n];if(D(o,Uint8Array)&&(o=t.from(o)),!t.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(a,i),i+=o.length}return a},t.byteLength=f,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return _(this,t,r);case"ascii":return z(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return w(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t.prototype.compare=function(e,r,n,a,i){if(D(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===a&&(a=0),void 0===i&&(i=this.length),r<0||n>e.length||a<0||i>this.length)throw new RangeError("out of range index");if(a>=i&&r>=n)return 0;if(a>=i)return-1;if(r>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(a>>>=0),s=(n>>>=0)-(r>>>=0),l=Math.min(o,s),u=this.slice(a,i),c=e.slice(r,n),d=0;d<l;++d)if(u[d]!==c[d]){o=u[d],s=c[d];break}return o<s?-1:s<o?1:0},t.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},t.prototype.indexOf=function(e,t,r){return h(this,e,t,r,!0)},t.prototype.lastIndexOf=function(e,t,r){return h(this,e,t,r,!1)},t.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return m(this,e,t,r);case"ascii":return y(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return b(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function z(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function M(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=t;i<r;++i)a+=q(e[i]);return a}function O(e,t,r){for(var n=e.slice(t,r),a="",i=0;i<n.length;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function S(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function E(e,r,n,a,i,o){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(n+a>e.length)throw new RangeError("Index out of range")}function F(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(e,t,r,n,i){return t=+t,r>>>=0,i||F(e,0,r,4),a.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,i){return t=+t,r>>>=0,i||F(e,0,r,8),a.write(e,t,r,n,52,8),r+8}t.prototype.slice=function(e,r){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<e&&(r=e);var a=this.subarray(e,r);return Object.setPrototypeOf(a,t.prototype),a},t.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n},t.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},t.prototype.readUInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*t)),n},t.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=t,a=1,i=this[e+--n];n>0&&(a*=256);)i+=this[e+--n]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},t.prototype.readInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||S(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(e,t){e>>>=0,t||S(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||S(e,4,this.length),a.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||S(e,4,this.length),a.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||S(e,8,this.length),a.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||S(e,8,this.length),a.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||E(this,e,t,r,Math.pow(2,8*r)-1,0);var a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},t.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||E(this,e,t,r,Math.pow(2,8*r)-1,0);var a=r-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+r},t.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);E(this,e,t,r,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},t.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var a=Math.pow(2,8*r-1);E(this,e,t,r,a-1,-a)}var i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},t.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,r){return C(this,e,t,!0,r)},t.prototype.writeFloatBE=function(e,t,r){return C(this,e,t,!1,r)},t.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},t.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},t.prototype.copy=function(e,r,n,a){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),a||0===a||(a=this.length),r>=e.length&&(r=e.length),r||(r=0),a>0&&a<n&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-r<a-n&&(a=e.length-r+n);var i=a-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,n,a);else if(this===e&&n<r&&r<a)for(var o=i-1;o>=0;--o)e[o+r]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,a),r);return i},t.prototype.fill=function(e,r,n,a){if("string"==typeof e){if("string"==typeof r?(a=r,r=0,n=this.length):"string"==typeof n&&(a=n,n=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!t.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===e.length){var i=e.charCodeAt(0);("utf8"===a&&i<128||"latin1"===a)&&(e=i)}}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var o;if(r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=r;o<n;++o)this[o]=e;else{var s=t.isBuffer(e)?e:t.from(e,a),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%l]}return this};var T=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var r;t=t||1/0;for(var n=e.length,a=null,i=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function I(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function D(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function P(e){return e!=e}}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:10}],4:[function(e,t,r){"use strict";var n=e("./lib/thunk.js");function a(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function(e){var t=new a;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var i=0;i<r.length;++i){var o=r[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===o){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+r[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,n(t)}},{"./lib/thunk.js":6}],5:[function(e,t,r){"use strict";var n=e("uniq");function a(e,t,r){var n,a,i=e.length,o=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],u=[],c=0,d=0;for(n=0;n<i;++n)u.push(["i",n,"=0"].join(""));for(a=0;a<o;++a)for(n=0;n<i;++n)d=c,c=e[n],0===n?u.push(["d",a,"s",n,"=t",a,"p",c].join("")):u.push(["d",a,"s",n,"=(t",a,"p",c,"-s",d,"*t",a,"p",d,")"].join(""));for(u.length>0&&l.push("var "+u.join(",")),n=i-1;n>=0;--n)c=e[n],l.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(l.push(r),n=0;n<i;++n){for(d=c,c=e[n],a=0;a<o;++a)l.push(["p",a,"+=d",a,"s",n].join(""));s&&(n>0&&l.push(["index[",d,"]-=s",d].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function i(e,t,r){for(var n=e.body,a=[],i=[],o=0;o<e.args.length;++o){var s=e.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var d=t.offsetArgIndex.indexOf(o);c=t.offsetArgs[d].array,u="+q"+d;case"array":u="p"+c+u;var f="l"+o,p="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(a.push(["var ",f,"=",p,".get(",u,")"].join("")),n=n.replace(l,f),i.push([p,".set(",u,",",f,")"].join(""))):n=n.replace(l,[p,".get(",u,")"].join("")):n=n.replace(l,[p,"[",u,"]"].join("")):"generic"===r[c]?(a.push(["var ",f,"=",p,".get(",u,")"].join("")),n=n.replace(l,f),s.lvalue&&i.push([p,".set(",u,",",f,")"].join(""))):(a.push(["var ",f,"=",p,"[",u,"]"].join("")),n=n.replace(l,f),s.lvalue&&i.push([p,"[",u,"]=",f].join("")));else{for(var h=[s.name],v=[u],g=0;g<Math.abs(t.arrayBlockIndices[c]);g++)h.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(g+1)+"*t"+c+"b"+g);if(l=new RegExp(h.join(""),"g"),u=v.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[p,"[",u,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+t.scalarArgs.indexOf(o));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape")}}}return[a.join("\n"),n,i.join("\n")].join("\n").trim()}function o(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var a=e[n],i=a.match(/\d+/);i=i?i[0]:"",0===a.charAt(0)?t[n]="u"+a.charAt(1)+i:t[n]=a.charAt(0)+i,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}t.exports=function(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,s=new Array(e.arrayArgs.length),l=new Array(e.arrayArgs.length),u=0;u<e.arrayArgs.length;++u)l[u]=t[2*u],s[u]=t[2*u+1];var c=[],d=[],f=[],p=[],h=[];for(u=0;u<e.arrayArgs.length;++u){e.arrayBlockIndices[u]<0?(f.push(0),p.push(r),c.push(r),d.push(r+e.arrayBlockIndices[u])):(f.push(e.arrayBlockIndices[u]),p.push(e.arrayBlockIndices[u]+r),c.push(0),d.push(e.arrayBlockIndices[u]));for(var v=[],g=0;g<s[u].length;g++)f[u]<=s[u][g]&&s[u][g]<p[u]&&v.push(s[u][g]-f[u]);h.push(v)}var m=["SS"],y=["'use strict'"],x=[];for(g=0;g<r;++g)x.push(["s",g,"=SS[",g,"]"].join(""));for(u=0;u<e.arrayArgs.length;++u){for(m.push("a"+u),m.push("t"+u),m.push("p"+u),g=0;g<r;++g)x.push(["t",u,"p",g,"=t",u,"[",f[u]+g,"]"].join(""));for(g=0;g<Math.abs(e.arrayBlockIndices[u]);++g)x.push(["t",u,"b",g,"=t",u,"[",c[u]+g,"]"].join(""))}for(u=0;u<e.scalarArgs.length;++u)m.push("Y"+u);if(e.shapeArgs.length>0&&x.push("shape=SS.slice(0)"),e.indexArgs.length>0){var b=new Array(r);for(u=0;u<r;++u)b[u]="0";x.push(["index=[",b.join(","),"]"].join(""))}for(u=0;u<e.offsetArgs.length;++u){var j=e.offsetArgs[u],w=[];for(g=0;g<j.offset.length;++g)0!==j.offset[g]&&(1===j.offset[g]?w.push(["t",j.array,"p",g].join("")):w.push([j.offset[g],"*t",j.array,"p",g].join("")));0===w.length?x.push("q"+u+"=0"):x.push(["q",u,"=",w.join("+")].join(""))}var _=n([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for((x=x.concat(_)).length>0&&y.push("var "+x.join(",")),u=0;u<e.arrayArgs.length;++u)y.push("p"+u+"|=0");e.pre.body.length>3&&y.push(i(e.pre,e,l));var k=i(e.body,e,l),z=function(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}(h);z<r?y.push(function(e,t,r,n){for(var i=t.length,o=r.arrayArgs.length,s=r.blockSize,l=r.indexArgs.length>0,u=[],c=0;c<o;++c)u.push(["var offset",c,"=p",c].join(""));for(c=e;c<i;++c)u.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),u.push(["if(j",c,"<",s,"){"].join("")),u.push(["s",t[c],"=j",c].join("")),u.push(["j",c,"=0"].join("")),u.push(["}else{s",t[c],"=",s].join("")),u.push(["j",c,"-=",s,"}"].join("")),l&&u.push(["index[",t[c],"]=j",c].join(""));for(c=0;c<o;++c){for(var d=["offset"+c],f=e;f<i;++f)d.push(["j",f,"*t",c,"p",t[f]].join(""));u.push(["p",c,"=(",d.join("+"),")"].join(""))}for(u.push(a(t,r,n)),c=e;c<i;++c)u.push("}");return u.join("\n")}(z,h[0],e,k)):y.push(a(h[0],e,k)),e.post.body.length>3&&y.push(i(e.post,e,l)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+y.join("\n")+"\n----------");var A=[e.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",z,o(l)].join("");return new Function(["function ",A,"(",m.join(","),"){",y.join("\n"),"} return ",A].join(""))()}},{uniq:26}],6:[function(e,t,r){"use strict";var n=e("./compile.js");t.exports=function(e){var t=["'use strict'","var CACHED={}"],r=[],a=e.funcName+"_cwise_thunk";t.push(["return function ",a,"(",e.shimArgs.join(","),"){"].join(""));for(var i=[],o=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],l=[],u=[],c=0;c<e.arrayArgs.length;++c){var d=e.arrayArgs[c];r.push(["t",d,"=array",d,".dtype,","r",d,"=array",d,".order"].join("")),i.push("t"+d),i.push("r"+d),o.push("t"+d),o.push("r"+d+".join()"),s.push("array"+d+".data"),s.push("array"+d+".stride"),s.push("array"+d+".offset|0"),c>0&&(l.push("array"+e.arrayArgs[0]+".shape.length===array"+d+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),u.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+d+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}for(e.arrayArgs.length>1&&(t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),c=0;c<e.scalarArgs.length;++c)s.push("scalar"+e.scalarArgs[c]);return r.push(["type=[",o.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(n.bind(void 0,e))}},{"./compile.js":5}],7:[function(e,t,r){"use strict";t.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(e>0)return function(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,r,n){var a=0|t[n];if(a<=0)return[];var i,o=new Array(a);if(n===t.length-1)for(i=0;i<a;++i)o[i]=r;else for(i=0;i<a;++i)o[i]=e(t,r,n+1);return o}(e,t,0)}return[]}},{}],8:[function(e,t,r){t.exports=e("./lib/heap")},{"./lib/heap":9}],9:[function(e,t,r){(function(){var e,n,a,i,o,s,l,u,c,d,f,p,h,v,g,m,y;a=Math.floor,d=Math.min,n=function(e,t){return e<t?-1:e>t?1:0},c=function(e,t,r,i,o){var s;if(null==r&&(r=0),null==o&&(o=n),r<0)throw new Error("lo must be non-negative");for(null==i&&(i=e.length);r<i;)o(t,e[s=a((r+i)/2)])<0?i=s:r=s+1;return[].splice.apply(e,[r,r-r].concat(t)),t},s=function(e,t,r){return null==r&&(r=n),e.push(t),v(e,0,e.length-1,r)},o=function(e,t){var r,a;return null==t&&(t=n),r=e.pop(),e.length?(a=e[0],e[0]=r,g(e,0,t)):a=r,a},u=function(e,t,r){var a;return null==r&&(r=n),a=e[0],e[0]=t,g(e,0,r),a},l=function(e,t,r){var a;return null==r&&(r=n),e.length&&r(e[0],t)<0&&(t=(a=[e[0],t])[0],e[0]=a[1],g(e,0,r)),t},i=function(e,t){var r,i,o,s,l,u;for(null==t&&(t=n),l=[],i=0,o=(s=function(){u=[];for(var t=0,r=a(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)u.push(t);return u}.apply(this).reverse()).length;i<o;i++)r=s[i],l.push(g(e,r,t));return l},h=function(e,t,r){var a;if(null==r&&(r=n),-1!==(a=e.indexOf(t)))return v(e,0,a,r),g(e,a,r)},f=function(e,t,r){var a,o,s,u,c;if(null==r&&(r=n),!(o=e.slice(0,t)).length)return o;for(i(o,r),s=0,u=(c=e.slice(t)).length;s<u;s++)a=c[s],l(o,a,r);return o.sort(r).reverse()},p=function(e,t,r){var a,s,l,u,f,p,h,v,g;if(null==r&&(r=n),10*t<=e.length){if(!(l=e.slice(0,t).sort(r)).length)return l;for(s=l[l.length-1],u=0,p=(h=e.slice(t)).length;u<p;u++)r(a=h[u],s)<0&&(c(l,a,0,null,r),l.pop(),s=l[l.length-1]);return l}for(i(e,r),g=[],f=0,v=d(t,e.length);0<=v?f<v:f>v;0<=v?++f:--f)g.push(o(e,r));return g},v=function(e,t,r,a){var i,o,s;for(null==a&&(a=n),i=e[r];r>t&&a(i,o=e[s=r-1>>1])<0;)e[r]=o,r=s;return e[r]=i},g=function(e,t,r){var a,i,o,s,l;for(null==r&&(r=n),i=e.length,l=t,o=e[t],a=2*t+1;a<i;)(s=a+1)<i&&!(r(e[a],e[s])<0)&&(a=s),e[t]=e[a],a=2*(t=a)+1;return e[t]=o,v(e,l,t,r)},e=function(){function e(e){this.cmp=null!=e?e:n,this.nodes=[]}return e.push=s,e.pop=o,e.replace=u,e.pushpop=l,e.heapify=i,e.updateItem=h,e.nlargest=f,e.nsmallest=p,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return l(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return h(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),m=this,y=function(){return e},"function"==typeof define&&define.amd?define([],y):"object"==typeof r?t.exports=y():m.Heap=y()}).call(this)},{}],10:[function(e,t,r){r.read=function(e,t,r,n,a){var i,o,s=8*a-n-1,l=(1<<s)-1,u=l>>1,c=-7,d=r?a-1:0,f=r?-1:1,p=e[t+d];for(d+=f,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+e[t+d],d+=f,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=n;c>0;o=256*o+e[t+d],d+=f,c-=8);if(0===i)i=1-u;else{if(i===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),i-=u}return(p?-1:1)*o*Math.pow(2,i-n)},r.write=function(e,t,r,n,a,i){var o,s,l,u=8*i-a-1,c=(1<<u)-1,d=c>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,h=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*l-1)*Math.pow(2,a),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,a),o=0));a>=8;e[r+p]=255&s,p+=h,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[r+p]=255&o,p+=h,o/=256,u-=8);e[r+p-h]|=128*v}},{}],11:[function(e,t,r){"use strict";var n=e("bit-twiddle");function a(e){var t=(n.nextPow2(e+1)>>>1)-1,r=e-t;return n.nextPow2(r)-1>=t?t:(t>>>1)+r}function i(e,t){if(e<=0)return 0;var r=a(e);return t>r?i(e-r-1,t-r-1):t===r?n.log2(e):i(r,t)}r.root=a,r.begin=function(e){return 0},r.end=function(e){return e-1},r.height=i,r.prev=function(e,t){return Math.max(t-1,0)},r.next=function(e,t){return Math.min(t+1,e-1)},r.parent=function e(t,r){if(t<=0)return-1;var n,i=a(t);return r>i?(n=e(t-i-1,r-i-1))<0?i:n+i+1:r===i?-1:(n=e(i,r))<0?i:n},r.left=function e(t,r){if(t<=0)return 0;var n=a(t);return r>n?e(t-n-1,r-n-1)+n+1:r===n?a(r):e(n,r)},r.right=function e(t,r){if(t<=0)return 0;var n=a(t);return r>n?e(t-n-1,r-n-1)+n+1:r===n?a(t-n-1)+n+1:e(n,r)},r.leaf=function(e,t){return 0===i(e,t)},r.lo=function(e,t){e|=0,t|=0;for(var r=0;e>1;){var n=a(e);if(t>n)r+=n+1,e-=n+1,t-=n+1;else{if(t===n)break;e=n}}return r},r.hi=function(e,t){e|=0,t|=0;for(var r=0;e>1;){var n=a(e);if(t>n)r+=n+1,e-=n+1,t-=n+1;else{if(t===n){r+=e-1;break}e=n}}return r}},{"bit-twiddle":12}],12:[function(e,t,r){arguments[4][2][0].apply(r,arguments)},{dup:2}],13:[function(e,t,r){"use strict";t.exports=function(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}},{}],14:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],15:[function(e,t,r){"use strict";var n=e("cwise-compiler"),a={body:"",args:[],thisVars:[],localVars:[]};function i(e){if(!e)return a;for(var t=0;t<e.args.length;++t){var r=e.args[t];e.args[t]=0===t?{name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function o(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(e){return n({args:e.args,pre:i(e.pre),body:i(e.body),post:i(e.proc),funcName:e.funcName})}(e))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var t=s[e];r[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),r[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in l){var t=l[e];r[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),r[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in u){var t=u[e];r[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var t=c[e];r[t]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),r[t+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var d=["max","min","atan2","pow"];!function(){for(var e=0;e<d.length;++e){var t=d[e];r[t]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),r[t+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),r[t+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var f=["atan2","pow"];!function(){for(var e=0;e<f.length;++e){var t=f[e];r[t+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),r[t+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),r[t+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),r[t+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),r.any=n({args:["array"],pre:a,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=n({args:["array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=n({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":4}],16:[function(e,t,r){"use strict";var n=e("ndarray"),a=e("./doConvert.js");t.exports=function(e,t){for(var r=[],i=e,o=1;Array.isArray(i);)r.push(i.length),o*=i.length,i=i[0];return 0===r.length?n():(t||(t=n(new Float64Array(o),r)),a(t,e),t)}},{"./doConvert.js":17,ndarray:20}],17:[function(e,t,r){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":4}],18:[function(e,t,r){"use strict";var n=e("ndarray"),a=e("ndarray-ops"),i=e("typedarray-pool");r.clone=function(e){var t=e.dtype;"generic"!==t&&"array"!==t||(t="double");var r=i.malloc(e.size,t),o=n(r,e.shape);return a.assign(o,e),o},r.malloc=function(e,t){t||(t="double");for(var r=1,a=new Array(e.length),o=e.length-1;o>=0;--o)a[o]=r,r*=e[o];return n(i.malloc(r,t),e,a,0)},r.free=function(e){"generic"!==e.dtype&&"array"!==e.dtype&&i.free(e.data)},r.zeros=function(e,t){t||(t="double");for(var r=1,a=new Array(e.length),o=e.length-1;o>=0;--o)a[o]=r,r*=e[o];var s=i.malloc(r,t);for(o=0;o<r;++o)s[o]=0;return n(s,e,a,0)},r.ones=function(e,t){t||(t="double");for(var r=1,a=new Array(e.length),o=e.length-1;o>=0;--o)a[o]=r,r*=e[o];var s=i.malloc(r,t);for(o=0;o<r;++o)s[o]=1;return n(s,e,a,0)},r.eye=function(e,t){var r,a;t||(t="double");var o=1,s=new Array(e.length);for(r=e.length-1;r>=0;--r)s[r]=o,o*=e[r];var l=i.malloc(o,t);for(r=0;r<o;++r)l[r]=0;var u=1/0,c=0;for(r=e.length-1;r>=0;r--)c+=s[r],u=Math.min(u,e[r]);for(r=0,a=0;r<u;r++,a+=c)l[a]=1;return n(l,e,s,0)}},{ndarray:20,"ndarray-ops":15,"typedarray-pool":25}],19:[function(e,t,r){"use strict";t.exports=function(e,t,r){if(t|=0,0===e.dimension||e.shape[0]<=t||t<0)return null;var n=!!r,a=j(e.order,n,e.dtype);return n?a(e,t,r):a(e,t)},t.exports.compile=j;var n="a",a="K",i="C",o="d",s="o",l="R",u="T",c="L",d="H",f="X";function p(e){return"s"+e}function h(e){return"t"+e}function v(e){return"u"+e}function g(e){return"v"+e}function m(e){return"i"+e}function y(e){return"p"+e}function x(e){return"x"+e}var b={};function j(e,t,r){var j=e.join()+t+r,w=b[j];return w||(b[j]=function(e,t,r){var b=(e=function(e){var t=e.slice();return t.splice(e.indexOf(0),1),t.unshift(0),t}(e)).length,j="generic"===r,w="ndSelect"+r+e.join("_")+"_"+(t?"cmp":"lex"),_=[],k=[n,a];t&&k.push(i);for(var z=[o+"="+n+".data",s+"="+n+".offset|0",l+"=Math.random",u],A=0;A<2;++A)z.push(x(A)+"=0");for(A=0;A<b;++A)z.push(p(A)+"="+n+".shape["+A+"]|0",h(A)+"="+n+".stride["+A+"]|0",m(A)+"=0");for(A=1;A<b;++A)A>1?z.push(g(A)+"=("+h(A)+"-"+p(A-1)+"*"+h(A-1)+")|0",v(e[A])+"=("+h(e[A])+"-"+p(e[A-1])+"*"+h(e[A-1])+")|0"):z.push(g(A)+"="+h(A),v(e[A])+"="+h(e[A]));if(t)for(A=0;A<2;++A)z.push(y(A)+"="+n+".pick(0)");function M(t,r){_.push(x(0),"=",s,"+",h(e[0]),"*(",t,");",x(1),"=",s,"+",h(e[0]),"*(",r,");");for(var n=b-1;n>0;--n)_.push("for(",m(e[n]),"=0;",m(e[n]),"<",p(e[n]),";",m(e[n]),"++){");for(j?_.push(u,"=",o,".get(",x(0),");",o,".set(",x(0),",",o,".get(",x(1),"));",o,".set(",x(1),",",u,");"):_.push(u,"=",o,"[",x(0),"];",o,"[",x(0),"]=",o,"[",x(1),"];",o,"[",x(1),"]=",u,";"),n=1;n<b;++n)_.push(x(0),"+=",v(e[n]),";",x(1),"+=",v(e[n]),"}")}z.push(f+"=0",c+"=0",d+"="+p(e[0])+"-1"),_.push("while(",c,"<",d,"){",f,"=(",l,"()*(",d,"-",c,"+1)+",c,")|0;"),M(f,d),_.push(f,"=",c,";","for(",m(0),"=",c,";",m(0),"<",d,";",m(0),"++){"),function(r,n,a){if(t)_.push(y(0),".offset=",s,"+",h(e[0]),"*(",n,");",y(1),".offset=",s,"+",h(e[0]),"*(",a,");",r,"=",i,"(",y(0),",",y(1),");");else{_.push(x(0),"=",s,"+",h(0),"*(",n,");",x(1),"=",s,"+",h(0),"*(",a,");"),b>1&&_.push("_cmp:");for(var l=b-1;l>0;--l)_.push("for(",m(l),"=0;",m(l),"<",p(l),";",m(l),"++){");for(j?_.push(r,"=",o,".get(",x(0),")-",o,".get(",x(1),");"):_.push(r,"=",o,"[",x(0),"]-",o,"[",x(1),"];"),b>1&&_.push("if(",r,")break _cmp;"),l=1;l<b;++l)_.push(x(0),"+=",g(l),";",x(1),"+=",g(l),"}")}}(u,m(0),d),_.push("if(",u,"<0){"),M(f,m(0)),_.push(f,"++;"),_.push("}}"),M(f,d),_.push("if(",f,"===",a,"){",c,"=",f,";","break;","}else if(",a,"<",f,"){",d,"=",f,"-1;","}else{",c,"=",f,"+1;","}","}"),t?_.push(y(0),".offset=",s,"+",c,"*",h(0),";","return ",y(0),";"):_.push("return ",n,".pick(",c,");");var O=["'use strict';function ",w,"(",k,"){","var ",z.join(),";",_.join(""),"};return ",w].join("");return new Function(O)()}(e,t,r))}},{}],20:[function(e,t,r){var n=e("iota-array"),a=e("is-buffer"),i="undefined"!=typeof Float64Array;function o(e,t){return e[0]-t[0]}function s(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(o);var n=new Array(r.length);for(e=0;e<n.length;++e)n[e]=r[e][1];return n}function l(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var a="generic"===e;if(-1===t){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(i)()}if(0===t){i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(a?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(a?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",i)(u[e][0])}i=["'use strict'"];var o=n(t),l=o.map(function(e){return"i"+e}),c="this.offset+"+o.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),d=o.map(function(e){return"b"+e}).join(","),f=o.map(function(e){return"c"+e}).join(",");i.push("function "+r+"(a,"+d+","+f+",d){this.data=a","this.shape=["+d+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+o.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+r+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+l.join(",")+",v){"),a?i.push("return this.data.set("+c+",v)}"):i.push("return this.data["+c+"]=v}"),i.push("proto.get=function "+r+"_get("+l.join(",")+"){"),a?i.push("return this.data.get("+c+")}"):i.push("return this.data["+c+"]}"),i.push("proto.index=function "+r+"_index(",l.join(),"){return "+c+"}"),i.push("proto.hi=function "+r+"_hi("+l.join(",")+"){return new "+r+"(this.data,"+o.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+o.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var p=o.map(function(e){return"a"+e+"=this.shape["+e+"]"}),h=o.map(function(e){return"c"+e+"=this.stride["+e+"]"});i.push("proto.lo=function "+r+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+h.join(","));for(var v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'&&i"+v+">=0){d=i"+v+"|0;b+=c"+v+"*d;a"+v+"-=d}");i.push("return new "+r+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+l.join(",")+"){var "+o.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+o.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'){d=i"+v+"|0;if(d<0){c+=b"+v+"*(a"+v+"-1);a"+v+"=ceil(-a"+v+"/d)}else{a"+v+"=ceil(a"+v+"/d)}b"+v+"*=d}");i.push("return new "+r+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"b"+e}).join(",")+",c)}");var g=new Array(t),m=new Array(t);for(v=0;v<t;++v)g[v]="a[i"+v+"]",m[v]="b[i"+v+"]";i.push("proto.transpose=function "+r+"_transpose("+l+"){"+l.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+m.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+l+"){var a=[],b=[],c=this.offset");for(v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'&&i"+v+">=0){c=(c+this.stride["+v+"]*i"+v+")|0}else{a.push(this.shape["+v+"]);b.push(this.stride["+v+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+o.map(function(e){return"shape["+e+"]"}).join(",")+","+o.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(u[e],s)}var u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(e,t,r,n){if(void 0===e)return(0,u.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var o=t.length;if(void 0===r){r=new Array(o);for(var s=o-1,c=1;s>=0;--s)r[s]=c,c*=t[s]}if(void 0===n)for(n=0,s=0;s<o;++s)r[s]<0&&(n-=(t[s]-1)*r[s]);for(var d=function(e){if(a(e))return"buffer";if(i)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}(e),f=u[d];f.length<=o+1;)f.push(l(d,f.length-1));return(0,f[o+1])(e,t,r,n)}},{"iota-array":13,"is-buffer":14}],21:[function(require,module,exports){(function(global){"use strict";var numeric=void 0===exports?function(){}:exports;void 0!==global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var r,n,a;for(void 0===t&&(t=15),n=.5,r=new Date;;){for(a=n*=2;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;if(new Date-r>t)break}for(a=n;a>3;a-=4)e(),e(),e(),e();for(;a>0;)e(),a--;return 1e3*(3*n-1)/(new Date-r)},numeric._myIndexOf=function(e){var t,r=this.length;for(t=0;t<r;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){var t=[];return function e(r){var n;if(void 0===r)return t.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof r)return t.push('"'+r+'"'),!1;if("boolean"==typeof r)return t.push(r.toString()),!1;if("number"==typeof r){var a=function e(t){if(0===t)return"0";if(isNaN(t))return"NaN";if(t<0)return"-"+e(-t);if(isFinite(t)){var r=Math.floor(Math.log(t)/Math.log(10)),n=t/Math.pow(10,r),a=n.toPrecision(numeric.precision);return 10===parseFloat(a)&&(r++,a=(n=1).toPrecision(numeric.precision)),parseFloat(a).toString()+"e"+r.toString()}return"Infinity"}(r),i=r.toPrecision(numeric.precision),o=parseFloat(r.toString()).toString(),s=[a,i,o,parseFloat(i).toString(),parseFloat(o).toString()];for(n=1;n<s.length;n++)s[n].length<a.length&&(a=s[n]);return t.push(Array(numeric.precision+8-a.length).join(" ")+a),!1}if(null===r)return t.push("null"),!1;if("function"==typeof r){t.push(r.toString());var l=!1;for(n in r)r.hasOwnProperty(n)&&(l?t.push(",\n"):t.push("\n{"),l=!0,t.push(n),t.push(": \n"),e(r[n]));return l&&t.push("}\n"),!0}if(r instanceof Array){if(r.length>numeric.largeArray)return t.push("...Large Array..."),!0;for(l=!1,t.push("["),n=0;n<r.length;n++)n>0&&(t.push(","),l&&t.push("\n ")),l=e(r[n]);return t.push("]"),!0}t.push("{");l=!1;for(n in r)r.hasOwnProperty(n)&&(l&&t.push(",\n"),l=!0,t.push(n),t.push(": \n"),e(r[n]));return t.push("}"),!0}(e),t.join("")},numeric.parseDate=function(e){return function e(t){if("string"==typeof t)return Date.parse(t.replace(/-/g,"/"));if(!(t instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var r,n=[];for(r=0;r<t.length;r++)n[r]=e(t[r]);return n}(e)},numeric.parseFloat=function(e){return function e(t){if("string"==typeof t)return parseFloat(t);if(!(t instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var r,n=[];for(r=0;r<t.length;r++)n[r]=e(t[r]);return n}(e)},numeric.parseCSV=function(e){var t,r,n,a=e.split("\n"),i=[],o=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,l=0;for(r=0;r<a.length;r++){var u,c=(a[r]+",").match(o);if(c.length>0){for(i[l]=[],t=0;t<c.length;t++)u=(n=c[t]).substr(0,n.length-1),s.test(u)?i[l][t]=parseFloat(u):i[l][t]=u;l++}}return i},numeric.toCSV=function(e){var t,r,n,a,i,o=numeric.dim(e);for(n=o[0],o[1],i=[],t=0;t<n;t++){for(a=[],r=0;r<n;r++)a[r]=e[t][r].toString();i[t]=a.join(", ")}return i.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length);var n,a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],i=-1;e.length;for(n=t;n<r;n++)i=i>>>8^a[255&(i^e[n])];return-1^i}var r,n,a,i,o,s,l,u,c,d,f=e[0].length,p=e[0][0].length,h=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,p>>24&255,p>>16&255,p>>8&255,255&p,f>>24&255,f>>16&255,f>>8&255,255&f,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(d=t(h,12,29),h[29]=d>>24&255,h[30]=d>>16&255,h[31]=d>>8&255,h[32]=255&d,r=1,n=0,l=0;l<f;l++){for(l<f-1?h.push(0):h.push(1),o=3*p+1+(0===l)&255,s=3*p+1+(0===l)>>8&255,h.push(o),h.push(s),h.push(255&~o),h.push(255&~s),0===l&&h.push(0),u=0;u<p;u++)for(a=0;a<3;a++)n=(n+(r=(r+(o=(o=e[a][l][u])>255?255:o<0?0:Math.round(o)))%65521))%65521,h.push(o);h.push(0)}return c=(n<<16)+r,h.push(c>>24&255),h.push(c>>16&255),h.push(c>>8&255),h.push(255&c),i=h.length-41,h[33]=i>>24&255,h[34]=i>>16&255,h[35]=i>>8&255,h[36]=255&i,d=t(h,37),h.push(d>>24&255),h.push(d>>16&255),h.push(d>>8&255),h.push(255&d),h.push(0),h.push(0),h.push(0),h.push(0),h.push(73),h.push(69),h.push(78),h.push(68),h.push(174),h.push(66),h.push(96),h.push(130),"data:image/png;base64,"+function(e){var t,r,n,a,i,o,s,l=e.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="";for(t=0;t<l;t+=3)i=((3&(r=e[t]))<<4)+((n=e[t+1])>>4),o=((15&n)<<2)+((a=e[t+2])>>6),s=63&a,t+1>=l?o=s=64:t+2>=l&&(s=64),c+=u.charAt(r>>2)+u.charAt(i)+u.charAt(o)+u.charAt(s);return c}(h)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t;return"object"==typeof e?"object"==typeof(t=e[0])?"object"==typeof t[0]?numeric._dim(e):[e.length,t.length]:[e.length]:[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,r){var n,a;if(!(t instanceof Array&&r instanceof Array))return!1;if((a=t.length)!==r.length)return!1;for(n=0;n<a;n++)if(t[n]!==r[n]){if("object"!=typeof t[n])return!1;if(!e(t[n],r[n]))return!1}return!0},numeric.rep=function(e,t,r){void 0===r&&(r=0);var n,a=e[r],i=Array(a);if(r===e.length-1){for(n=a-2;n>=0;n-=2)i[n+1]=t,i[n]=t;return-1===n&&(i[0]=t),i}for(n=a-1;n>=0;n--)i[n]=numeric.rep(e,t,r+1);return i},numeric.dotMMsmall=function(e,t){var r,n,a,i,o,s,l,u,c,d,f;for(i=e.length,o=t.length,s=t[0].length,l=Array(i),r=i-1;r>=0;r--){for(u=Array(s),c=e[r],a=s-1;a>=0;a--){for(d=c[o-1]*t[o-1][a],n=o-2;n>=1;n-=2)f=n-1,d+=c[n]*t[n][a]+c[f]*t[f][a];0===n&&(d+=c[0]*t[0][a]),u[a]=d}l[r]=u}return l},numeric._getCol=function(e,t,r){var n;for(n=e.length-1;n>0;--n)r[n]=e[n][t],r[--n]=e[n][t];0===n&&(r[0]=e[0][t])},numeric.dotMMbig=function(e,t){var r,n,a,i=numeric._getCol,o=t.length,s=Array(o),l=e.length,u=t[0].length,c=new Array(l),d=numeric.dotVV;for(--o,n=--l;-1!==n;--n)c[n]=Array(u);for(n=--u;-1!==n;--n)for(i(t,n,s),a=l;-1!==a;--a)0,r=e[a],c[a][n]=d(r,s);return c},numeric.dotMV=function(e,t){var r,n=e.length,a=(t.length,Array(n)),i=numeric.dotVV;for(r=n-1;r>=0;r--)a[r]=i(e[r],t);return a},numeric.dotVM=function(e,t){var r,n,a,i,o,s,l;for(a=e.length,i=t[0].length,o=Array(i),n=i-1;n>=0;n--){for(s=e[a-1]*t[a-1][n],r=a-2;r>=1;r-=2)l=r-1,s+=e[r]*t[r][n]+e[l]*t[l][n];0===r&&(s+=e[0]*t[0][n]),o[n]=s}return o},numeric.dotVV=function(e,t){var r,n,a=e.length,i=e[a-1]*t[a-1];for(r=a-2;r>=1;r-=2)n=r-1,i+=e[r]*t[r]+e[n]*t[n];return 0===r&&(i+=e[0]*t[0]),i},numeric.dot=function(e,t){var r=numeric.dim;switch(1e3*r(e).length+r(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,r,n,a,i=e.length,o=Array(i);for(t=i-1;t>=0;t--){for(a=Array(i),r=t+2,n=i-1;n>=r;n-=2)a[n]=0,a[n-1]=0;for(n>t&&(a[n]=0),a[t]=e[t],n=t-1;n>=1;n-=2)a[n]=0,a[n-1]=0;0===n&&(a[0]=0),o[t]=a}return o},numeric.getDiag=function(e){var t,r=Math.min(e.length,e[0].length),n=Array(r);for(t=r-1;t>=1;--t)n[t]=e[t][t],n[--t]=e[t][t];return 0===t&&(n[0]=e[0][0]),n},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,r){void 0===r&&(r="");var n,a,i=[],o=/\[i\]$/,s="",l=!1;for(n=0;n<e.length;n++)o.test(e[n])?s=a=e[n].substring(0,e[n].length-3):a=e[n],"ret"===a&&(l=!0),i.push(a);return i[e.length]="_s",i[e.length+1]="_k",i[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(l?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,i)},numeric.pointwise2=function(e,t,r){void 0===r&&(r="");var n,a,i=[],o=/\[i\]$/,s="",l=!1;for(n=0;n<e.length;n++)o.test(e[n])?s=a=e[n].substring(0,e[n].length-3):a=e[n],"ret"===a&&(l=!0),i.push(a);return i[e.length]="var _n = "+s+".length;\nvar i"+(l?"":", ret = Array(_n)")+";\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,i)},numeric._biforeach=function e(t,r,n,a,i){var o;if(a!==n.length-1)for(o=n[a]-1;o>=0;o--)e("object"==typeof t?t[o]:t,"object"==typeof r?r[o]:r,n,a+1,i);else i(t,r)},numeric._biforeach2=function e(t,r,n,a,i){if(a===n.length-1)return i(t,r);var o,s=n[a],l=Array(s);for(o=s-1;o>=0;--o)l[o]=e("object"==typeof t?t[o]:t,"object"==typeof r?r[o]:r,n,a+1,i);return l},numeric._foreach=function e(t,r,n,a){var i;if(n!==r.length-1)for(i=r[n]-1;i>=0;i--)e(t[i],r,n+1,a);else a(t)},numeric._foreach2=function e(t,r,n,a){if(n===r.length-1)return a(t);var i,o=r[n],s=Array(o);for(i=o-1;i>=0;i--)s[i]=e(t[i],r,n+1,a);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var r,n,a="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(a="var "+t+" = Math."+t+";\n",r=function(e,r,n){return e+" = "+t+"("+r+","+n+")"},n=function(e,r){return e+" = "+t+"("+e+","+r+")"}):(r=function(e,r,n){return e+" = "+r+" "+t+" "+n},n=numeric.opseq.hasOwnProperty(e+"eq")?function(e,r){return e+" "+t+"= "+r}:function(e,r){return e+" = "+e+" "+t+" "+r}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),a),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),a),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),a),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+n("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],n("ret[i]","x[i]"),a),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],n("ret[i]","x"),a),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(a="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(a="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",a),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",a),numeric[e]=Function("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=Function("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,r,n,a,i,o,s,l=numeric.dim(e),u=Math.abs,c=l[0],d=l[1],f=numeric.clone(e),p=numeric.identity(c);for(o=0;o<d;++o){var h=-1,v=-1;for(i=o;i!==c;++i)(s=u(f[i][o]))>v&&(h=i,v=s);for(r=f[h],f[h]=f[o],f[o]=r,a=p[h],p[h]=p[o],p[o]=a,e=r[o],s=o;s!==d;++s)r[s]/=e;for(s=d-1;-1!==s;--s)a[s]/=e;for(i=c-1;-1!==i;--i)if(i!==o){for(t=f[i],n=p[i],e=t[o],s=o+1;s!==d;++s)t[s]-=r[s]*e;for(s=d-1;s>0;--s)n[s]-=a[s]*e,n[--s]-=a[s]*e;0===s&&(n[0]-=a[0]*e)}}return p},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var r,n,a,i,o,s,l,u,c=t[0],d=1,f=numeric.clone(e);for(n=0;n<c-1;n++){for(a=n,r=n+1;r<c;r++)Math.abs(f[r][n])>Math.abs(f[a][n])&&(a=r);for(a!==n&&(l=f[a],f[a]=f[n],f[n]=l,d*=-1),i=f[n],r=n+1;r<c;r++){for(s=(o=f[r])[n]/i[n],a=n+1;a<c-1;a+=2)u=a+1,o[a]-=i[a]*s,o[u]-=i[u]*s;a!==c&&(o[a]-=i[a]*s)}if(0===i[n])return 0;d*=i[n]}return d*f[n][n]},numeric.transpose=function(e){var t,r,n,a,i,o=e.length,s=e[0].length,l=Array(s);for(r=0;r<s;r++)l[r]=Array(o);for(t=o-1;t>=1;t-=2){for(a=e[t],n=e[t-1],r=s-1;r>=1;--r)(i=l[r])[t]=a[r],i[t-1]=n[r],(i=l[--r])[t]=a[r],i[t-1]=n[r];0===r&&((i=l[0])[t]=a[0],i[t-1]=n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)l[r][0]=n[r],l[--r][0]=n[r];0===r&&(l[0][0]=n[0])}return l},numeric.negtranspose=function(e){var t,r,n,a,i,o=e.length,s=e[0].length,l=Array(s);for(r=0;r<s;r++)l[r]=Array(o);for(t=o-1;t>=1;t-=2){for(a=e[t],n=e[t-1],r=s-1;r>=1;--r)(i=l[r])[t]=-a[r],i[t-1]=-n[r],(i=l[--r])[t]=-a[r],i[t-1]=-n[r];0===r&&((i=l[0])[t]=-a[0],i[t-1]=-n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)l[r][0]=-n[r],l[--r][0]=-n[r];0===r&&(l[0][0]=-n[0])}return l},numeric._random=function e(t,r){var n,a,i=t[r],o=Array(i);if(r===t.length-1){for(a=Math.random,n=i-1;n>=1;n-=2)o[n]=a(),o[n-1]=a();return 0===n&&(o[0]=a()),o}for(n=i-1;n>=0;n--)o[n]=e(t,r+1);return o},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,r){if(void 0===r&&(r=Math.max(Math.round(t-e)+1,1)),r<2)return 1===r?[e]:[];var n,a=Array(r);for(n=--r;n>=0;n--)a[n]=(n*t+(r-n)*e)/r;return a},numeric.getBlock=function(e,t,r){var n=numeric.dim(e);return function e(a,i){var o,s=t[i],l=r[i]-s,u=Array(l);if(i===n.length-1){for(o=l;o>=0;o--)u[o]=a[o+s];return u}for(o=l;o>=0;o--)u[o]=e(a[o+s],i+1);return u}(e,0)},numeric.setBlock=function(e,t,r,n){var a=numeric.dim(e);return function e(n,i,o){var s,l=t[o],u=r[o]-l;if(o===a.length-1)for(s=u;s>=0;s--)n[s+l]=i[s];for(s=u;s>=0;s--)e(n[s+l],i[s],o+1)}(e,n,0),e},numeric.getRange=function(e,t,r){var n,a,i,o,s=t.length,l=r.length,u=Array(s);for(n=s-1;-1!==n;--n)for(u[n]=Array(l),i=u[n],o=e[t[n]],a=l-1;-1!==a;--a)i[a]=o[r[a]];return u},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var r,n,a,i,o,s=t[0],l=t[1];for(r=0,n=0,a=0;a<s;++a)r+=e[a][0].length;for(i=0;i<l;++i)n+=e[0][i][0].length;var u=Array(r);for(a=0;a<r;++a)u[a]=Array(n);var c,d,f,p,h,v=0;for(a=0;a<s;++a){for(c=n,i=l-1;-1!==i;--i)for(c-=(o=e[a][i])[0].length,f=o.length-1;-1!==f;--f)for(h=o[f],d=u[v+f],p=h.length-1;-1!==p;--p)d[c+p]=h[p];v+=e[a][0].length}return u},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var r=numeric.dim(e),n=numeric.dim(t);if(1!==r.length||1!==n.length)throw new Error("numeric: tensor product is only defined for vectors");var a,i,o,s,l=r[0],u=n[0],c=Array(l);for(i=l-1;i>=0;i--){for(a=Array(u),s=e[i],o=u-1;o>=3;--o)a[o]=s*t[o],a[--o]=s*t[o],a[--o]=s*t[o],a[--o]=s*t[o];for(;o>=0;)a[o]=s*t[o],--o;c[i]=a}return c},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,r,n,a){var i;numeric.indexOf;if("string"!=typeof a)for(i in a="",numeric)numeric.hasOwnProperty(i)&&(e.indexOf(i)>=0||t.indexOf(i)>=0||r.indexOf(i)>=0||n.indexOf(i)>=0)&&i.length>1&&(a+="var "+i+" = numeric."+i+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+a+"\nif(x.y) {  if(y.y) {    return new numeric.T("+n+");\n  }\n  return new numeric.T("+r+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var r=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,r),t(numeric.neg(this.y),r))}return new T(t(1,this.x))},numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var t=numeric.div;return this.y?new numeric.T(t(this.x,e.x),t(this.y,e.x)):new numeric.T(t(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),e(r)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),numeric.negtranspose(r)):new numeric.T(e(t))},numeric.Tunop=function(e,t,r){return"string"!=typeof r&&(r=""),Function("var x = this;\n"+r+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if(void 0===e.y)return new numeric.T(numeric.inv(e.x));var t,r,n,a,i,o,s,l,u,c,d,f,p,h,v,g,m,y,x=e.x.length,b=numeric.identity(x),j=numeric.rep([x,x],0),w=numeric.clone(e.x),_=numeric.clone(e.y);for(u=0;u<x;u++){for(f=(h=w[u][u])*h+(v=_[u][u])*v,d=u,c=u+1;c<x;c++)(p=(h=w[c][u])*h+(v=_[c][u])*v)>f&&(d=c,f=p);for(d!==u&&(y=w[u],w[u]=w[d],w[d]=y,y=_[u],_[u]=_[d],_[d]=y,y=b[u],b[u]=b[d],b[d]=y,y=j[u],j[u]=j[d],j[d]=y),t=w[u],r=_[u],i=b[u],o=j[u],h=t[u],v=r[u],c=u+1;c<x;c++)g=t[c],m=r[c],t[c]=(g*h+m*v)/f,r[c]=(m*h-g*v)/f;for(c=0;c<x;c++)g=i[c],m=o[c],i[c]=(g*h+m*v)/f,o[c]=(m*h-g*v)/f;for(c=u+1;c<x;c++){for(n=w[c],a=_[c],s=b[c],l=j[c],h=n[u],v=a[u],d=u+1;d<x;d++)g=t[d],m=r[d],n[d]-=g*h-m*v,a[d]-=m*h+g*v;for(d=0;d<x;d++)g=i[d],m=o[d],s[d]-=g*h-m*v,l[d]-=m*h+g*v}}for(u=x-1;u>0;u--)for(i=b[u],o=j[u],c=u-1;c>=0;c--)for(s=b[c],l=j[c],h=w[c][u],v=_[c][u],d=x-1;d>=0;d--)g=i[d],m=o[d],s[d]-=h*g-v*m,l[d]-=h*m+v*g;return new numeric.T(b,j)},numeric.T.prototype.get=function(e){var t,r=this.x,n=this.y,a=0,i=e.length;if(n){for(;a<i;)r=r[t=e[a]],n=n[t],a++;return new numeric.T(r,n)}for(;a<i;)r=r[t=e[a]],a++;return new numeric.T(r)},numeric.T.prototype.set=function(e,t){var r,n=this.x,a=this.y,i=0,o=e.length,s=t.x,l=t.y;if(0===o)return l?this.y=l:a&&(this.y=void 0),this.x=n,this;if(l){for(a||(a=numeric.rep(numeric.dim(n),0),this.y=a);i<o-1;)n=n[r=e[i]],a=a[r],i++;return n[r=e[i]]=s,a[r]=l,this}if(a){for(;i<o-1;)n=n[r=e[i]],a=a[r],i++;return n[r=e[i]]=s,s instanceof Array?a[r]=numeric.rep(numeric.dim(s),0):a[r]=0,this}for(;i<o-1;)n=n[r=e[i]],i++;return n[r=e[i]]=s,this},numeric.T.prototype.getRows=function(e,t){var r,n,a=t-e+1,i=Array(a),o=this.x,s=this.y;for(r=e;r<=t;r++)i[r-e]=o[r];if(s){for(n=Array(a),r=e;r<=t;r++)n[r-e]=s[r];return new numeric.T(i,n)}return new numeric.T(i)},numeric.T.prototype.setRows=function(e,t,r){var n,a=this.x,i=this.y,o=r.x,s=r.y;for(n=e;n<=t;n++)a[n]=o[n-e];if(s)for(i||(i=numeric.rep(numeric.dim(a),0),this.y=i),n=e;n<=t;n++)i[n]=s[n-e];else if(i)for(n=e;n<=t;n++)i[n]=numeric.rep([o[n-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,r=this.y;return r?new numeric.T(t[e],r[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var r=this.x,n=this.y,a=t.x,i=t.y;return r[e]=a,i?(n||(n=numeric.rep(numeric.dim(r),0),this.y=n),n[e]=i):n&&(n=numeric.rep([a.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var r=this.x,n=this.y,a=numeric.getBlock;return n?new numeric.T(a(r,e,t),a(n,e,t)):new numeric.T(a(r,e,t))},numeric.T.prototype.setBlock=function(e,t,r){r instanceof numeric.T||(r=new numeric.T(r));var n=this.x,a=this.y,i=numeric.setBlock,o=r.x,s=r.y;if(s)return a||(this.y=numeric.rep(numeric.dim(this),0),a=this.y),i(n,e,t,o),i(a,e,t,s),this;i(n,e,t,o),a&&i(a,e,t,numeric.rep(numeric.dim(o),0))},numeric.T.rep=function(e,t){var r=numeric.T;t instanceof r||(t=new r(t));var n=t.x,a=t.y,i=numeric.rep;return a?new r(i(e,n),i(e,a)):new r(i(e,n))},numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,r=e.y,n=numeric.diag;return r?new numeric.T(n(t),n(r)):new numeric.T(n(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,r=this.y;return r?new e.T(e.getDiag(t),e.getDiag(r)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),r=(e[0]>=0?1:-1)*numeric.norm2(e);t[0]+=r;var n=numeric.norm2(t);if(0===n)throw new Error("eig: internal error");return numeric.div(t,n)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var r,n,a,i,o,s,l,u,c,d,f=t[0],p=numeric.clone(e),h=numeric.identity(f);for(n=0;n<f-2;n++){for(i=Array(f-n-1),r=n+1;r<f;r++)i[r-n-1]=p[r][n];if(numeric.norm2(i)>0){for(o=numeric.house(i),s=numeric.getBlock(p,[n+1,n],[f-1,f-1]),l=numeric.tensor(o,numeric.dot(o,s)),r=n+1;r<f;r++)for(u=p[r],c=l[r-n-1],a=n;a<f;a++)u[a]-=2*c[a-n];for(s=numeric.getBlock(p,[0,n+1],[f-1,f-1]),l=numeric.tensor(numeric.dot(s,o),o),r=0;r<f;r++)for(u=p[r],c=l[r],a=n+1;a<f;a++)u[a]-=2*c[a-n-1];for(s=Array(f-n-1),r=n+1;r<f;r++)s[r-n-1]=h[r];for(l=numeric.tensor(o,numeric.dot(o,s)),r=n+1;r<f;r++)for(d=h[r],c=l[r-n-1],a=0;a<f;a++)d[a]-=2*c[a]}}return{H:p,Q:h}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){void 0===t&&(t=1e4),e=numeric.clone(e);numeric.clone(e);var r,n,a,i,o,s,l,u,c,d,f,p,h,v,g,m,y,x,b=numeric.dim(e)[0],j=numeric.identity(b);if(b<3)return{Q:j,B:[[0,b-1]]};var w=numeric.epsilon;for(x=0;x<t;x++){for(m=0;m<b-1;m++)if(Math.abs(e[m+1][m])<w*(Math.abs(e[m][m])+Math.abs(e[m+1][m+1]))){var _=numeric.QRFrancis(numeric.getBlock(e,[0,0],[m,m]),t),k=numeric.QRFrancis(numeric.getBlock(e,[m+1,m+1],[b-1,b-1]),t);for(p=Array(m+1),g=0;g<=m;g++)p[g]=j[g];for(h=numeric.dot(_.Q,p),g=0;g<=m;g++)j[g]=h[g];for(p=Array(b-m-1),g=m+1;g<b;g++)p[g-m-1]=j[g];for(h=numeric.dot(k.Q,p),g=m+1;g<b;g++)j[g]=h[g-m-1];return{Q:j,B:_.B.concat(numeric.add(k.B,m+1))}}var z,A,M;if(a=e[b-2][b-2],i=e[b-2][b-1],o=e[b-1][b-2],u=a+(s=e[b-1][b-1]),l=a*s-i*o,c=numeric.getBlock(e,[0,0],[2,2]),u*u>=4*l)z=.5*(u+Math.sqrt(u*u-4*l)),A=.5*(u-Math.sqrt(u*u-4*l)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,z+A)),numeric.diag(numeric.rep([3],z*A)));else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,u)),numeric.diag(numeric.rep([3],l)));for(r=[c[0][0],c[1][0],c[2][0]],n=numeric.house(r),p=[e[0],e[1],e[2]],h=numeric.tensor(n,numeric.dot(n,p)),g=0;g<3;g++)for(f=e[g],v=h[g],y=0;y<b;y++)f[y]-=2*v[y];for(p=numeric.getBlock(e,[0,0],[b-1,2]),h=numeric.tensor(numeric.dot(p,n),n),g=0;g<b;g++)for(f=e[g],v=h[g],y=0;y<3;y++)f[y]-=2*v[y];for(p=[j[0],j[1],j[2]],h=numeric.tensor(n,numeric.dot(n,p)),g=0;g<3;g++)for(d=j[g],v=h[g],y=0;y<b;y++)d[y]-=2*v[y];for(m=0;m<b-2;m++){for(y=m;y<=m+1;y++)if(Math.abs(e[y+1][y])<w*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){_=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),k=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[b-1,b-1]),t);for(p=Array(y+1),g=0;g<=y;g++)p[g]=j[g];for(h=numeric.dot(_.Q,p),g=0;g<=y;g++)j[g]=h[g];for(p=Array(b-y-1),g=y+1;g<b;g++)p[g-y-1]=j[g];for(h=numeric.dot(k.Q,p),g=y+1;g<b;g++)j[g]=h[g-y-1];return{Q:j,B:_.B.concat(numeric.add(k.B,y+1))}}for(M=Math.min(b-1,m+3),r=Array(M-m),g=m+1;g<=M;g++)r[g-m-1]=e[g][m];for(n=numeric.house(r),p=numeric.getBlock(e,[m+1,m],[M,b-1]),h=numeric.tensor(n,numeric.dot(n,p)),g=m+1;g<=M;g++)for(f=e[g],v=h[g-m-1],y=m;y<b;y++)f[y]-=2*v[y-m];for(p=numeric.getBlock(e,[0,m+1],[b-1,M]),h=numeric.tensor(numeric.dot(p,n),n),g=0;g<b;g++)for(f=e[g],v=h[g],y=m+1;y<=M;y++)f[y]-=2*v[y-m-1];for(p=Array(M-m),g=m+1;g<=M;g++)p[g-m-1]=j[g];for(h=numeric.tensor(n,numeric.dot(n,p)),g=m+1;g<=M;g++)for(d=j[g],v=h[g-m-1],y=0;y<b;y++)d[y]-=2*v[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var r,n,a,i,o,s,l,u,c,d,f,p,h,v,g,m,y=numeric.toUpperHessenberg(e),x=numeric.QRFrancis(y.H,t),b=numeric.T,j=e.length,w=x.B,_=numeric.dot(x.Q,numeric.dot(y.H,numeric.transpose(x.Q))),k=new b(numeric.dot(x.Q,y.Q)),z=w.length,A=Math.sqrt;for(n=0;n<z;n++)if((r=w[n][0])===w[n][1]);else{if(i=r+1,o=_[r][r],s=_[r][i],l=_[i][r],u=_[i][i],0===s&&0===l)continue;(d=(c=-o-u)*c-4*(o*u-s*l))>=0?((g=(o-(f=c<0?-.5*(c-A(d)):-.5*(c+A(d))))*(o-f)+s*s)>(m=l*l+(u-f)*(u-f))?(h=(o-f)/(g=A(g)),v=s/g):(h=l/(m=A(m)),v=(u-f)/m),a=new b([[v,-h],[h,v]]),k.setRows(r,i,a.dot(k.getRows(r,i)))):(f=-.5*c,p=.5*A(-d),(g=(o-f)*(o-f)+s*s)>(m=l*l+(u-f)*(u-f))?(h=(o-f)/(g=A(g+p*p)),v=s/g,f=0,p/=g):(h=l/(m=A(m+p*p)),v=(u-f)/m,f=p/m,p=0),a=new b([[v,-h],[h,v]],[[f,p],[p,-f]]),k.setRows(r,i,a.dot(k.getRows(r,i))))}var M=k.dot(e).dot(k.transjugate()),O=(j=e.length,numeric.T.identity(j));for(i=0;i<j;i++)if(i>0)for(n=i-1;n>=0;n--){var S=M.get([n,n]),E=M.get([i,i]);numeric.neq(S.x,E.x)||numeric.neq(S.y,E.y)?(f=M.getRow(n).getBlock([n],[i-1]),p=O.getRow(i).getBlock([n],[i-1]),O.set([i,n],M.get([n,i]).neg().sub(f.dot(p)).div(S.sub(E)))):O.setRow(i,O.getRow(n))}for(i=0;i<j;i++)f=O.getRow(i),O.setRow(i,f.div(f.norm2()));return O=O.transpose(),O=k.transjugate().dot(O),{lambda:M.getDiag(),E:O}},numeric.ccsSparse=function(e){var t,r,n,a=e.length,i=[];for(r=a-1;-1!==r;--r)for(n in t=e[r]){for(n=parseInt(n);n>=i.length;)i[i.length]=0;0!==t[n]&&i[n]++}var o=i.length,s=Array(o+1);for(s[0]=0,r=0;r<o;++r)s[r+1]=s[r]+i[r];var l=Array(s[o]),u=Array(s[o]);for(r=a-1;-1!==r;--r)for(n in t=e[r])0!==t[n]&&(i[n]--,l[s[n]+i[n]]=r,u[s[n]+i[n]]=t[n]);return[s,l,u]},numeric.ccsFull=function(e){var t,r,n,a,i=e[0],o=e[1],s=e[2],l=numeric.ccsDim(e),u=l[0],c=l[1],d=numeric.rep([u,c],0);for(t=0;t<c;t++)for(n=i[t],a=i[t+1],r=n;r<a;++r)d[o[r]][t]=s[r];return d},numeric.ccsTSolve=function(e,t,r,n,a){var i,o,s,l,u,c,d,f=e[0],p=e[1],h=e[2],v=f.length-1,g=Math.max,m=0;function y(e){var t;if(0===r[e]){for(r[e]=1,t=f[e];t<f[e+1];++t)y(p[t]);a[m]=e,++m}}for(void 0===n&&(r=numeric.rep([v],0)),void 0===n&&(n=numeric.linspace(0,r.length-1)),void 0===a&&(a=[]),i=n.length-1;-1!==i;--i)y(n[i]);for(a.length=m,i=a.length-1;-1!==i;--i)r[a[i]]=0;for(i=n.length-1;-1!==i;--i)o=n[i],r[o]=t[o];for(i=a.length-1;-1!==i;--i){for(o=a[i],s=f[o],l=g(f[o+1],s),u=s;u!==l;++u)if(p[u]===o){r[o]/=h[u];break}for(d=r[o],u=s;u!==l;++u)(c=p[u])!==o&&(r[c]-=d*h[u])}return r},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,r,n,a,i){var o,s,l,u=0,c=a.length,d=this.k,f=this.k1,p=this.j;if(0===n[e])for(n[e]=1,p[0]=e,d[0]=s=t[e],f[0]=l=t[e+1];;)if(s>=l){if(a[c]=p[u],0===u)return;++c,s=d[--u],l=f[u]}else 0===n[o=i[r[s]]]?(n[o]=1,d[u]=s,p[++u]=o,s=t[o],f[u]=l=t[o+1]):++s},numeric.ccsLPSolve=function(e,t,r,n,a,i,o){var s,l,u,c,d,f,p,h,v,g=e[0],m=e[1],y=e[2],x=(g.length,t[0]),b=t[1],j=t[2];for(l=x[a],u=x[a+1],n.length=0,s=l;s<u;++s)o.dfs(i[b[s]],g,m,r,n,i);for(s=n.length-1;-1!==s;--s)r[n[s]]=0;for(s=l;s!==u;++s)r[c=i[b[s]]]=j[s];for(s=n.length-1;-1!==s;--s){for(d=g[c=n[s]],f=g[c+1],p=d;p<f;++p)if(i[m[p]]===c){r[c]/=y[p];break}for(v=r[c],p=d;p<f;++p)(h=i[m[p]])!==c&&(r[h]-=v*y[p])}return r},numeric.ccsLUP1=function(e,t){var r,n,a,i,o,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],d=[numeric.rep([u+1],0),[],[]],f=c[0],p=c[1],h=c[2],v=d[0],g=d[1],m=d[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve,j=(Math.max,Math.abs),w=numeric.linspace(0,u-1),_=numeric.linspace(0,u-1),k=new numeric.ccsDFS(u);for(void 0===t&&(t=1),r=0;r<u;++r){for(b(c,e,y,x,r,_,k),i=-1,o=-1,n=x.length-1;-1!==n;--n)(a=x[n])<=r||(s=j(y[a]))>i&&(o=a,i=s);for(j(y[r])<t*i&&(n=w[r],i=w[o],w[r]=i,_[i]=r,w[o]=n,_[n]=o,i=y[r],y[r]=y[o],y[o]=i),i=f[r],o=v[r],l=y[r],p[i]=w[r],h[i]=1,++i,n=x.length-1;-1!==n;--n)s=y[a=x[n]],x[n]=0,y[a]=0,a<=r?(g[o]=a,m[o]=s,++o):(p[i]=w[a],h[i]=s/l,++i);f[r+1]=i,v[r+1]=o}for(n=p.length-1;-1!==n;--n)p[n]=_[p[n]];return{L:c,U:d,P:w,Pinv:_}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,r,n,a,i,o){var s,l,u,c=0,d=a.length,f=this.k,p=this.k1,h=this.j;if(0===n[e])for(n[e]=1,h[0]=e,f[0]=l=t[i[e]],p[0]=u=t[i[e]+1];;){if(isNaN(l))throw new Error("Ow!");if(l>=u){if(a[d]=i[h[c]],0===c)return;++d,l=f[--c],u=p[c]}else 0===n[s=r[l]]?(n[s]=1,f[c]=l,h[++c]=s,l=t[s=i[s]],p[c]=u=t[s+1]):++l}},numeric.ccsLPSolve0=function(e,t,r,n,a,i,o,s){var l,u,c,d,f,p,h,v,g,m=e[0],y=e[1],x=e[2],b=(m.length,t[0]),j=t[1],w=t[2];for(u=b[a],c=b[a+1],n.length=0,l=u;l<c;++l)s.dfs(j[l],m,y,r,n,i,o);for(l=n.length-1;-1!==l;--l)r[o[d=n[l]]]=0;for(l=u;l!==c;++l)r[d=j[l]]=w[l];for(l=n.length-1;-1!==l;--l){for(v=o[d=n[l]],f=m[d],p=m[d+1],h=f;h<p;++h)if(y[h]===v){r[v]/=x[h];break}for(g=r[v],h=f;h<p;++h)r[y[h]]-=g*x[h];r[v]=g}},numeric.ccsLUP0=function(e,t){var r,n,a,i,o,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],d=[numeric.rep([u+1],0),[],[]],f=c[0],p=c[1],h=c[2],v=d[0],g=d[1],m=d[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve0,j=(Math.max,Math.abs),w=numeric.linspace(0,u-1),_=numeric.linspace(0,u-1),k=new numeric.ccsDFS0(u);for(void 0===t&&(t=1),r=0;r<u;++r){for(b(c,e,y,x,r,_,w,k),i=-1,o=-1,n=x.length-1;-1!==n;--n)(a=x[n])<=r||(s=j(y[w[a]]))>i&&(o=a,i=s);for(j(y[w[r]])<t*i&&(n=w[r],i=w[o],w[r]=i,_[i]=r,w[o]=n,_[n]=o),i=f[r],o=v[r],l=y[w[r]],p[i]=w[r],h[i]=1,++i,n=x.length-1;-1!==n;--n)s=y[w[a=x[n]]],x[n]=0,y[w[a]]=0,a<=r?(g[o]=a,m[o]=s,++o):(p[i]=w[a],h[i]=s/l,++i);f[r+1]=i,v[r+1]=o}for(n=p.length-1;-1!==n;--n)p[n]=_[p[n]];return{L:c,U:d,P:w,Pinv:_}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,r){var n=numeric.ccsDim(e),a=n[0],i=n[1];void 0===t?t=numeric.linspace(0,a-1):"number"==typeof t&&(t=[t]),void 0===r?r=numeric.linspace(0,i-1):"number"==typeof r&&(r=[r]);var o,s,l,u,c=t.length,d=r.length,f=numeric.rep([i],0),p=[],h=[],v=[f,p,h],g=e[0],m=e[1],y=e[2],x=numeric.rep([a],0),b=0,j=numeric.rep([a],0);for(s=0;s<d;++s){var w=g[u=r[s]],_=g[u+1];for(o=w;o<_;++o)j[l=m[o]]=1,x[l]=y[o];for(o=0;o<c;++o)j[t[o]]&&(p[b]=o,h[b]=x[t[o]],++b);for(o=w;o<_;++o)j[l=m[o]]=0;f[s+1]=b}return v},numeric.ccsDot=function(e,t){var r,n,a,i,o,s,l,u,c,d,f,p=e[0],h=e[1],v=e[2],g=t[0],m=t[1],y=t[2],x=numeric.ccsDim(e),b=numeric.ccsDim(t),j=x[0],w=(x[1],b[1]),_=numeric.rep([j],0),k=numeric.rep([j],0),z=Array(j),A=numeric.rep([w],0),M=[],O=[],S=[A,M,O];for(a=0;a!==w;++a){for(i=g[a],o=g[a+1],c=0,n=i;n<o;++n)for(d=m[n],f=y[n],s=p[d],l=p[d+1],r=s;r<l;++r)0===k[u=h[r]]&&(z[c]=u,k[u]=1,c+=1),_[u]=_[u]+v[r]*f;for(o=(i=A[a])+c,A[a+1]=o,n=c-1;-1!==n;--n)f=i+n,r=z[n],M[f]=r,O[f]=_[r],k[r]=0,_[r]=0;A[a+1]=A[a]+c}return S},numeric.ccsLUPSolve=function(e,t){var r=e.L,n=e.U,a=(e.P,t[0]),i=!1;"object"!=typeof a&&(a=(t=[[0,t.length],numeric.linspace(0,t.length-1),t])[0],i=!0);var o,s,l,u,c,d,f=t[1],p=t[2],h=r[0].length-1,v=a.length-1,g=numeric.rep([h],0),m=Array(h),y=numeric.rep([h],0),x=Array(h),b=numeric.rep([v+1],0),j=[],w=[],_=numeric.ccsTSolve,k=0;for(o=0;o<v;++o){for(c=0,l=a[o],u=a[o+1],s=l;s<u;++s)d=e.Pinv[f[s]],x[c]=d,y[d]=p[s],++c;for(x.length=c,_(r,y,g,x,m),s=x.length-1;-1!==s;--s)y[x[s]]=0;if(_(n,g,y,m,x),i)return y;for(s=m.length-1;-1!==s;--s)g[m[s]]=0;for(s=x.length-1;-1!==s;--s)d=x[s],j[k]=d,w[k]=y[d],y[d]=0,++k;b[o+1]=k}return[b,j,w]},numeric.ccsbinop=function(e,t){return void 0===t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,r=e[0],n=e[1],a=e[2],i=numeric.sup(n)+1,o=r.length,s=numeric.rep([i],0),l=Array(o),u=Array(o),c=numeric.rep([i],0);for(t=0;t<o;++t)c[n[t]]++;for(t=0;t<i;++t)s[t+1]=s[t]+c[t];var d,f,p=s.slice(0);for(t=0;t<o;++t)l[d=p[f=n[t]]]=r[t],u[d]=a[t],p[f]=p[f]+1;return[s,l,u]},numeric.ccsGather=function(e){var t,r,n,a,i,o=e[0],s=e[1],l=e[2],u=o.length-1,c=s.length,d=Array(c),f=Array(c),p=Array(c);for(i=0,t=0;t<u;++t)for(n=o[t],a=o[t+1],r=n;r!==a;++r)f[i]=t,d[i]=s[r],p[i]=l[r],++i;return[d,f,p]},numeric.sdim=function e(t,r,n){if(void 0===r&&(r=[]),"object"!=typeof t)return r;var a;for(a in void 0===n&&(n=0),n in r||(r[n]=0),t.length>r[n]&&(r[n]=t.length),t)t.hasOwnProperty(a)&&e(t[a],r,n+1);return r},numeric.sclone=function e(t,r,n){void 0===r&&(r=0),void 0===n&&(n=numeric.sdim(t).length);var a,i=Array(t.length);if(r===n-1){for(a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);return i}for(a in t)t.hasOwnProperty(a)&&(i[a]=e(t[a],r+1,n));return i},numeric.sdiag=function(e){var t,r,n=e.length,a=Array(n);for(t=n-1;t>=1;t-=2)r=t-1,a[t]=[],a[t][t]=e[t],a[r]=[],a[r][r]=e[r];return 0===t&&(a[0]=[],a[0][0]=e[t]),a},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,r,n,a=[];e.length;for(t in e)if(e.hasOwnProperty(t))for(r in n=e[t])n.hasOwnProperty(r)&&("object"!=typeof a[r]&&(a[r]=[]),a[r][t]=n[r]);return a},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var r,n,a,i,o,s,l,u=e.length,c=(t.length,numeric.stranspose(t)),d=c.length,f=Array(u);for(a=u-1;a>=0;a--){for(l=[],r=e[a],o=d-1;o>=0;o--){for(i in s=0,n=c[o],r)r.hasOwnProperty(i)&&i in n&&(s+=r[i]*n[i]);s&&(l[o]=s)}f[a]=l}return f},numeric.sdotMV=function(e,t){var r,n,a,i,o=e.length,s=Array(o);for(n=o-1;n>=0;n--){for(a in i=0,r=e[n])r.hasOwnProperty(a)&&t[a]&&(i+=r[a]*t[a]);i&&(s[n]=i)}return s},numeric.sdotVM=function(e,t){var r,n,a,i,o=[];for(r in e)if(e.hasOwnProperty(r))for(n in a=t[r],i=e[r],a)a.hasOwnProperty(n)&&(o[n]||(o[n]=0),o[n]+=i*a[n]);return o},numeric.sdotVV=function(e,t){var r,n=0;for(r in e)e[r]&&t[r]&&(n+=e[r]*t[r]);return n},numeric.sdot=function(e,t){var r=numeric.sdim(e).length,n=numeric.sdim(t).length;switch(1e3*r+n){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+r+" and "+n)}},numeric.sscatter=function(e){var t,r,n,a,i=e[0].length,o=e.length,s=[];for(r=i-1;r>=0;--r)if(e[o-1][r]){for(a=s,n=0;n<o-2;n++)a[t=e[n][r]]||(a[t]=[]),a=a[t];a[e[n][r]]=e[n+1][r]}return s},numeric.sgather=function e(t,r,n){var a,i,o;for(i in void 0===r&&(r=[]),void 0===n&&(n=[]),a=n.length,t)if(t.hasOwnProperty(i))if(n[a]=parseInt(i),"number"==typeof(o=t[i])){if(o){if(0===r.length)for(i=a+1;i>=0;--i)r[i]=[];for(i=a;i>=0;--i)r[i].push(n[i]);r[a+1].push(o)}}else e(o,r,n);return n.length>a&&n.pop(),r},numeric.cLU=function(e){var t,r,n,a,i,o,s=e[0],l=e[1],u=e[2],c=s.length,d=0;for(t=0;t<c;t++)s[t]>d&&(d=s[t]);d++;var f,p=Array(d),h=Array(d),v=numeric.rep([d],1/0),g=numeric.rep([d],-1/0);for(n=0;n<c;n++)t=s[n],(r=l[n])<v[t]&&(v[t]=r),r>g[t]&&(g[t]=r);for(t=0;t<d-1;t++)g[t]>g[t+1]&&(g[t+1]=g[t]);for(t=d-1;t>=1;t--)v[t]<v[t-1]&&(v[t-1]=v[t]);for(t=0;t<d;t++)h[t]=numeric.rep([g[t]-v[t]+1],0),p[t]=numeric.rep([t-v[t]],0),t-v[t]+1,g[t]-t+1;for(n=0;n<c;n++)h[t=s[n]][l[n]-v[t]]=u[n];for(t=0;t<d-1;t++)for(a=t-v[t],x=h[t],r=t+1;v[r]<=t&&r<d;r++)if(i=t-v[r],o=g[t]-t,f=(b=h[r])[i]/x[a]){for(n=1;n<=o;n++)b[n+i]-=f*x[n+a];p[r][t-v[r]]=f}var m,y,x=[],b=[],j=[],w=[],_=[],k=[];for(c=0,m=0,t=0;t<d;t++){for(a=v[t],i=g[t],y=h[t],r=t;r<=i;r++)y[r-a]&&(x[c]=t,b[c]=r,j[c]=y[r-a],c++);for(y=p[t],r=a;r<t;r++)y[r-a]&&(w[m]=t,_[m]=r,k[m]=y[r-a],m++);w[m]=t,_[m]=t,k[m]=1,m++}return{U:[x,b,j],L:[w,_,k]}},numeric.cLUsolve=function(e,t){var r,n,a=e.L,i=e.U,o=numeric.clone(t),s=a[0],l=a[1],u=a[2],c=i[0],d=i[1],f=i[2],p=c.length,h=(s.length,o.length);for(n=0,r=0;r<h;r++){for(;l[n]<r;)o[r]-=u[n]*o[l[n]],n++;n++}for(n=p-1,r=h-1;r>=0;r--){for(;d[n]>r;)o[r]-=f[n]*o[d[n]],n--;o[r]/=f[n],n--}return o},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var r,n,a,i=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,r){return t>=e[0]/2||r<e[1]/2};break;default:t=function(e,t){return!0}}for(a=0,r=1;r<e[0]-1;r++)for(n=1;n<e[1]-1;n++)t(r,n)&&(i[r][n]=a,a++);return i},numeric.cdelsq=function(e){var t,r,n,a,i,o=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),l=s[0],u=s[1],c=[],d=[],f=[];for(t=1;t<l-1;t++)for(r=1;r<u-1;r++)if(!(e[t][r]<0)){for(n=0;n<4;n++)a=t+o[n][0],i=r+o[n][1],e[a][i]<0||(c.push(e[t][r]),d.push(e[a][i]),f.push(-1));c.push(e[t][r]),d.push(e[t][r]),f.push(4)}return[c,d,f]},numeric.cdotMV=function(e,t){var r,n,a,i=e[0],o=e[1],s=e[2],l=i.length;for(a=0,n=0;n<l;n++)i[n]>a&&(a=i[n]);for(a++,r=numeric.rep([a],0),n=0;n<l;n++)r[i[n]]+=s[n]*t[o[n]];return r},numeric.Spline=function(e,t,r,n,a){this.x=e,this.yl=t,this.yr=r,this.kl=n,this.kr=a},numeric.Spline.prototype._at=function(e,t){var r,n,a,i=this.x,o=this.yl,s=this.yr,l=this.kl,u=this.kr,c=numeric.add,d=numeric.sub,f=numeric.mul;r=d(f(l[t],i[t+1]-i[t]),d(s[t+1],o[t])),n=c(f(u[t+1],i[t]-i[t+1]),d(s[t+1],o[t]));var p=(a=(e-i[t])/(i[t+1]-i[t]))*(1-a);return c(c(c(f(1-a,o[t]),f(a,s[t+1])),f(r,p*(1-a))),f(n,p*a))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,r,n,a=this.x,i=a.length,o=Math.floor;for(t=0,r=i-1;r-t>1;)a[n=o((t+r)/2)]<=e?t=n:r=n;return this._at(e,t)}i=e.length;var s,l=Array(i);for(s=i-1;-1!==s;--s)l[s]=this.at(e[s]);return l},numeric.Spline.prototype.diff=function(){var e,t,r,n=this.x,a=this.yl,i=this.yr,o=this.kl,s=this.kr,l=a.length,u=o,c=s,d=Array(l),f=Array(l),p=numeric.add,h=numeric.mul,v=numeric.div,g=numeric.sub;for(e=l-1;-1!==e;--e)t=n[e+1]-n[e],r=g(i[e+1],a[e]),d[e]=v(p(h(r,6),h(o[e],-4*t),h(s[e+1],-2*t)),t*t),f[e+1]=v(p(h(r,-6),h(o[e],2*t),h(s[e+1],4*t)),t*t);return new numeric.Spline(n,u,c,d,f)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],r=this.x,n=this.yl,a=this.yr,i=this.kl,o=this.kr;"number"==typeof n[0]&&(n=[n],a=[a],i=[i],o=[o]);var s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E=n.length,F=r.length-1,C=(t=Array(E),Math.sqrt);for(s=0;s!==E;++s){for(c=n[s],d=a[s],f=i[s],p=o[s],h=[],l=0;l!==F;l++){for(l>0&&d[l]*c[l]<0&&h.push(r[l]),w=r[l+1]-r[l],r[l],m=c[l],y=d[l+1],v=f[l]/w,x=(g=p[l+1]/w)+3*m+2*v-3*y,b=3*(g+v+2*(m-y)),(j=e(v-g+3*(m-y))+12*g*m)<=0?_=(k=x/b)>r[l]&&k<r[l+1]?[r[l],k,r[l+1]]:[r[l],r[l+1]]:(k=(x-C(j))/b,z=(x+C(j))/b,_=[r[l]],k>r[l]&&k<r[l+1]&&_.push(k),z>r[l]&&z<r[l+1]&&_.push(z),_.push(r[l+1])),M=_[0],k=this._at(M,l),u=0;u<_.length-1;u++)if(O=_[u+1],z=this._at(O,l),0!==k)if(0===z||k*z>0)M=O,k=z;else{for(var B=0;!((S=(k*O-z*M)/(k-z))<=M||S>=O);)if((A=this._at(S,l))*z>0)O=S,z=A,-1===B&&(k*=.5),B=-1;else{if(!(A*k>0))break;M=S,k=A,1===B&&(z*=.5),B=1}h.push(S),M=_[u+1],k=this._at(M,l)}else h.push(M),M=O,k=z;0===z&&h.push(O)}t[s]=h}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,r,n){var a,i=e.length,o=[],s=[],l=[],u=numeric.sub,c=numeric.mul,d=numeric.add;for(a=i-2;a>=0;a--)s[a]=e[a+1]-e[a],l[a]=u(t[a+1],t[a]);"string"!=typeof r&&"string"!=typeof n||(r=n="periodic");var f=[[],[],[]];switch(typeof r){case"undefined":o[0]=c(3/(s[0]*s[0]),l[0]),f[0].push(0,0),f[1].push(0,1),f[2].push(2/s[0],1/s[0]);break;case"string":o[0]=d(c(3/(s[i-2]*s[i-2]),l[i-2]),c(3/(s[0]*s[0]),l[0])),f[0].push(0,0,0),f[1].push(i-2,0,1),f[2].push(1/s[i-2],2/s[i-2]+2/s[0],1/s[0]);break;default:o[0]=r,f[0].push(0),f[1].push(0),f[2].push(1)}for(a=1;a<i-1;a++)o[a]=d(c(3/(s[a-1]*s[a-1]),l[a-1]),c(3/(s[a]*s[a]),l[a])),f[0].push(a,a,a),f[1].push(a-1,a,a+1),f[2].push(1/s[a-1],2/s[a-1]+2/s[a],1/s[a]);switch(typeof n){case"undefined":o[i-1]=c(3/(s[i-2]*s[i-2]),l[i-2]),f[0].push(i-1,i-1),f[1].push(i-2,i-1),f[2].push(1/s[i-2],2/s[i-2]);break;case"string":f[1][f[1].length-1]=0;break;default:o[i-1]=n,f[0].push(i-1),f[1].push(i-1),f[2].push(1)}o="number"!=typeof o[0]?numeric.transpose(o):[o];var p=Array(o.length);if("string"==typeof r)for(a=p.length-1;-1!==a;--a)p[a]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(f)),o[a]),p[a][i-1]=p[a][0];else for(a=p.length-1;-1!==a;--a)p[a]=numeric.cLUsolve(numeric.cLU(f),o[a]);return p="number"==typeof t[0]?p[0]:numeric.transpose(p),new numeric.Spline(e,t,t,p,p)},numeric.fftpow2=function e(t,r){var n=t.length;if(1!==n){var a,i,o=Math.cos,s=Math.sin,l=Array(n/2),u=Array(n/2),c=Array(n/2),d=Array(n/2);for(i=n/2,a=n-1;-1!==a;--a)c[--i]=t[a],d[i]=r[a],--a,l[i]=t[a],u[i]=r[a];e(l,u),e(c,d),i=n/2;var f,p,h,v=-6.283185307179586/n;for(a=n-1;-1!==a;--a)-1===--i&&(i=n/2-1),p=o(f=v*a),h=s(f),t[a]=l[i]+p*c[i]-h*d[i],r[a]=u[i]+p*d[i]+h*c[i]}},numeric._ifftpow2=function e(t,r){var n=t.length;if(1!==n){var a,i,o=Math.cos,s=Math.sin,l=Array(n/2),u=Array(n/2),c=Array(n/2),d=Array(n/2);for(i=n/2,a=n-1;-1!==a;--a)c[--i]=t[a],d[i]=r[a],--a,l[i]=t[a],u[i]=r[a];e(l,u),e(c,d),i=n/2;var f,p,h,v=6.283185307179586/n;for(a=n-1;-1!==a;--a)-1===--i&&(i=n/2-1),p=o(f=v*a),h=s(f),t[a]=l[i]+p*c[i]-h*d[i],r[a]=u[i]+p*d[i]+h*c[i]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,r,n){var a,i,o,s,l;for(numeric.fftpow2(e,t),numeric.fftpow2(r,n),a=e.length-1;-1!==a;--a)i=e[a],s=t[a],o=r[a],l=n[a],e[a]=i*o-s*l,t[a]=i*l+s*o;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,r=this.x,n=this.y,a=r.length,i=Math.log,o=i(2),s=Math.ceil(i(2*a-1)/o),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),d=Math.cos,f=Math.sin,p=-3.141592653589793/a,h=numeric.rep([l],0),v=numeric.rep([l],0);Math.floor(a/2);for(e=0;e<a;e++)h[e]=r[e];if(void 0!==n)for(e=0;e<a;e++)v[e]=n[e];for(u[0]=1,e=1;e<=l/2;e++)t=p*e*e,u[e]=d(t),c[e]=f(t),u[l-e]=d(t),c[l-e]=f(t);var g=new numeric.T(h,v),m=new numeric.T(u,c);return g=g.mul(m),numeric.convpow2(g.x,g.y,numeric.clone(m.x),numeric.neg(m.y)),(g=g.mul(m)).x.length=a,g.y.length=a,g},numeric.T.prototype.ifft=function(){var e,t,r=this.x,n=this.y,a=r.length,i=Math.log,o=i(2),s=Math.ceil(i(2*a-1)/o),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),d=Math.cos,f=Math.sin,p=3.141592653589793/a,h=numeric.rep([l],0),v=numeric.rep([l],0);Math.floor(a/2);for(e=0;e<a;e++)h[e]=r[e];if(void 0!==n)for(e=0;e<a;e++)v[e]=n[e];for(u[0]=1,e=1;e<=l/2;e++)t=p*e*e,u[e]=d(t),c[e]=f(t),u[l-e]=d(t),c[l-e]=f(t);var g=new numeric.T(h,v),m=new numeric.T(u,c);return g=g.mul(m),numeric.convpow2(g.x,g.y,numeric.clone(m.x),numeric.neg(m.y)),(g=g.mul(m)).x.length=a,g.y.length=a,g.div(a)},numeric.gradient=function(e,t){var r=t.length,n=e(t);if(isNaN(n))throw new Error("gradient: f(x) is a NaN!");var a,i,o,s,l,u,c,d,f,p=Math.max,h=numeric.clone(t),v=Array(r),g=(numeric.div,numeric.sub,p=Math.max,Math.abs),m=Math.min,y=0;for(a=0;a<r;a++)for(var x=p(1e-6*n,1e-8);;){if(++y>20)throw new Error("Numerical gradient fails");if(h[a]=t[a]+x,i=e(h),h[a]=t[a]-x,o=e(h),h[a]=t[a],isNaN(i)||isNaN(o))x/=16;else{if(v[a]=(i-o)/(2*x),s=t[a]-x,l=t[a],u=t[a]+x,c=(i-n)/x,d=(n-o)/x,f=p(g(v[a]),g(n),g(i),g(o),g(s),g(l),g(u),1e-8),!(m(p(g(c-v[a]),g(d-v[a]),g(c-d))/f,x/f)>.001))break;x/=16}}return v},numeric.uncmin=function(e,t,r,n,a,i,o){var s=numeric.gradient;void 0===o&&(o={}),void 0===r&&(r=1e-8),void 0===n&&(n=function(t){return s(e,t)}),void 0===a&&(a=1e3);var l,u,c=(t=numeric.clone(t)).length,d=e(t);if(isNaN(d))throw new Error("uncmin: f(x0) is a NaN!");var f=Math.max,p=numeric.norm2;r=f(r,numeric.epsilon);var h,v,g,m,y,x,b,j,w,_,k=o.Hinv||numeric.identity(c),z=numeric.dot,A=(numeric.inv,numeric.sub),M=numeric.add,O=numeric.tensor,S=numeric.div,E=numeric.mul,F=numeric.all,C=numeric.isFinite,B=numeric.neg,T=0,q="";for(v=n(t);T<a;){if("function"==typeof i&&i(T,t,d,v,k)){q="Callback returned true";break}if(!F(C(v))){q="Gradient has Infinity or NaN";break}if(!F(C(h=B(z(k,v))))){q="Search direction has Infinity or NaN";break}if((_=p(h))<r){q="Newton step smaller than tol";break}for(w=1,u=z(v,h),y=t;T<a&&!(w*_<r)&&(y=M(t,m=E(h,w)),(l=e(y))-d>=.1*w*u||isNaN(l));)w*=.5,++T;if(w*_<r){q="Line search step size smaller than tol";break}if(T===a){q="maxit reached during line search";break}j=z(x=A(g=n(y),v),m),b=z(k,x),k=A(M(k,E((j+z(x,b))/(j*j),O(m,m))),S(M(O(b,m),O(m,b)),j)),t=y,d=l,v=g,++T}return{solution:t,f:d,gradient:v,invHessian:k,iterations:T,message:q}},numeric.Dopri=function(e,t,r,n,a,i,o){this.x=e,this.y=t,this.f=r,this.ymid=n,this.iterations=a,this.events=o,this.message=i},numeric.Dopri.prototype._at=function(e,t){function r(e){return e*e}var n,a,i,o,s,l,u,c,d,f=this.x,p=this.y,h=this.f,v=this.ymid,g=(f.length,Math.floor,numeric.add),m=numeric.mul,y=numeric.sub;return n=f[t],a=f[t+1],o=p[t],s=p[t+1],i=n+.5*(a-n),l=v[t],u=y(h[t],m(o,1/(n-i)+2/(n-a))),c=y(h[t+1],m(s,1/(a-i)+2/(a-n))),g(g(g(g(m(o,(d=[r(e-a)*(e-i)/r(n-a)/(n-i),r(e-n)*r(e-a)/r(n-i)/r(a-i),r(e-n)*(e-i)/r(a-n)/(a-i),(e-n)*r(e-a)*(e-i)/r(n-a)/(n-i),(e-a)*r(e-n)*(e-i)/r(n-a)/(a-i)])[0]),m(l,d[1])),m(s,d[2])),m(u,d[3])),m(c,d[4]))},numeric.Dopri.prototype.at=function(e){var t,r,n,a=Math.floor;if("number"!=typeof e){var i=e.length,o=Array(i);for(t=i-1;-1!==t;--t)o[t]=this.at(e[t]);return o}var s=this.x;for(t=0,r=s.length-1;r-t>1;)s[n=a(.5*(t+r))]<=e?t=n:r=n;return this._at(e,t)},numeric.dopri=function(e,t,r,n,a,i,o){void 0===a&&(a=1e-6),void 0===i&&(i=1e3);var s,l,u,c,d,f,p,h,v,g,m,y,x,b=[e],j=[r],w=[n(e,r)],_=[],k=[.075,.225],z=[44/45,-56/15,32/9],A=[19372/6561,-25360/2187,64448/6561,-212/729],M=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],O=[35/384,0,500/1113,125/192,-2187/6784,11/84],S=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],E=[.2,.3,.8,8/9,1,1],F=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],C=0,B=(t-e)/10,T=0,q=numeric.add,N=numeric.mul,I=(Math.max,Math.min),V=Math.abs,D=numeric.norminf,P=Math.pow,U=numeric.any,R=numeric.lt,L=numeric.and,H=(numeric.sub,new numeric.Dopri(b,j,w,_,-1,""));for("function"==typeof o&&(m=o(e,r));e<t&&T<i;)if(++T,e+B>t&&(B=t-e),s=n(e+E[0]*B,q(r,N(.2*B,w[C]))),l=n(e+E[1]*B,q(q(r,N(k[0]*B,w[C])),N(k[1]*B,s))),u=n(e+E[2]*B,q(q(q(r,N(z[0]*B,w[C])),N(z[1]*B,s)),N(z[2]*B,l))),c=n(e+E[3]*B,q(q(q(q(r,N(A[0]*B,w[C])),N(A[1]*B,s)),N(A[2]*B,l)),N(A[3]*B,u))),d=n(e+E[4]*B,q(q(q(q(q(r,N(M[0]*B,w[C])),N(M[1]*B,s)),N(M[2]*B,l)),N(M[3]*B,u)),N(M[4]*B,c))),f=n(e+B,v=q(q(q(q(q(r,N(w[C],B*O[0])),N(l,B*O[2])),N(u,B*O[3])),N(c,B*O[4])),N(d,B*O[5]))),(g="number"==typeof(p=q(q(q(q(q(N(w[C],B*F[0]),N(l,B*F[2])),N(u,B*F[3])),N(c,B*F[4])),N(d,B*F[5])),N(f,B*F[6])))?V(p):D(p))>a){if(e+(B=.2*B*P(a/g,.25))===e){H.msg="Step size became too small";break}}else{if(_[C]=q(q(q(q(q(q(r,N(w[C],B*S[0])),N(l,B*S[2])),N(u,B*S[3])),N(c,B*S[4])),N(d,B*S[5])),N(f,B*S[6])),b[++C]=e+B,j[C]=v,w[C]=f,"function"==typeof o){var Y,X,G=e,J=e+.5*B;if(y=o(J,_[C-1]),U(x=L(R(m,0),R(0,y)))||(G=J,m=y,y=o(J=e+B,v),x=L(R(m,0),R(0,y))),U(x)){for(var Q,W,K=0,Z=1,$=1;;){if("number"==typeof m)X=($*y*G-Z*m*J)/($*y-Z*m);else for(X=J,h=m.length-1;-1!==h;--h)m[h]<0&&y[h]>0&&(X=I(X,($*y[h]*G-Z*m[h]*J)/($*y[h]-Z*m[h])));if(X<=G||X>=J)break;W=o(X,Y=H._at(X,C-1)),U(Q=L(R(m,0),R(0,W)))?(J=X,y=W,x=Q,$=1,-1===K?Z*=.5:Z=1,K=-1):(G=X,m=W,Z=1,1===K?$*=.5:$=1,K=1)}return v=H._at(.5*(e+X),C-1),H.f[C]=n(X,Y),H.x[C]=X,H.y[C]=Y,H.ymid[C-1]=v,H.events=x,H.iterations=T,H}}e+=B,r=v,m=y,B=I(.8*B*P(a/g,.25),4*B)}return H.iterations=T,H},numeric.LU=function(e,t){t=t||!1;var r,n,a,i,o,s,l,u,c,d=Math.abs,f=e.length,p=f-1,h=new Array(f);for(t||(e=numeric.clone(e)),a=0;a<f;++a){for(l=a,c=d((s=e[a])[a]),n=a+1;n<f;++n)c<(i=d(e[n][a]))&&(c=i,l=n);for(h[a]=l,l!=a&&(e[a]=e[l],e[l]=s,s=e[a]),o=s[a],r=a+1;r<f;++r)e[r][a]/=o;for(r=a+1;r<f;++r){for(u=e[r],n=a+1;n<p;++n)u[n]-=u[a]*s[n],u[++n]-=u[a]*s[n];n===p&&(u[n]-=u[a]*s[n])}}return{LU:e,P:h}},numeric.LUsolve=function(e,t){var r,n,a,i,o,s=e.LU,l=s.length,u=numeric.clone(t),c=e.P;for(r=l-1;-1!==r;--r)u[r]=t[r];for(r=0;r<l;++r)for(a=c[r],c[r]!==r&&(o=u[r],u[r]=u[a],u[a]=o),i=s[r],n=0;n<r;++n)u[r]-=u[n]*i[n];for(r=l-1;r>=0;--r){for(i=s[r],n=r+1;n<l;++n)u[r]-=u[n]*i[n];u[r]/=i[r]}return u},numeric.solve=function(e,t,r){return numeric.LUsolve(numeric.LU(e,r),t)},numeric.echelonize=function(e){var t,r,n,a,i,o,s,l,u=numeric.dim(e),c=u[0],d=u[1],f=numeric.identity(c),p=Array(c),h=Math.abs,v=numeric.diveq;for(e=numeric.clone(e),t=0;t<c;++t){for(n=0,i=e[t],o=f[t],r=1;r<d;++r)h(i[n])<h(i[r])&&(n=r);for(p[t]=n,v(o,i[n]),v(i,i[n]),r=0;r<c;++r)if(r!==t){for(l=(s=e[r])[n],a=d-1;-1!==a;--a)s[a]-=i[a]*l;for(s=f[r],a=c-1;-1!==a;--a)s[a]-=o[a]*l}}return{I:f,A:e,P:p}},numeric.__solveLP=function(e,t,r,n,a,i,o){var s,l,u,c,d=numeric.sum,f=(numeric.log,numeric.mul),p=numeric.sub,h=numeric.dot,v=numeric.div,g=numeric.add,m=e.length,y=r.length,x=!1,b=1,j=(numeric.transpose(t),numeric.svd,numeric.transpose),w=(numeric.leq,Math.sqrt),_=Math.abs,k=(numeric.muleq,numeric.norminf,numeric.any,Math.min),z=numeric.all,A=numeric.gt,M=Array(m),O=Array(y),S=(numeric.rep([y],1),numeric.solve),E=p(r,h(t,i)),F=h(e,e);for(u=0;u<a;++u){var C,B;for(C=y-1;-1!==C;--C)O[C]=v(t[C],E[C]);var T=j(O);for(C=m-1;-1!==C;--C)M[C]=d(T[C]);b=.25*_(F/h(e,M));var q=100*w(F/h(M,M));for((!isFinite(b)||b>q)&&(b=q),c=g(e,f(b,M)),l=h(T,O),C=m-1;-1!==C;--C)l[C][C]+=1;B=S(l,v(c,b),!0);var N=v(E,h(t,B)),I=1;for(C=y-1;-1!==C;--C)N[C]<0&&(I=k(I,-.999*N[C]));if(s=p(i,f(B,I)),!z(A(E=p(r,h(t,s)),0)))return{solution:i,message:"",iterations:u};if(i=s,b<n)return{solution:s,message:"",iterations:u};if(o){var V=h(e,c),D=h(t,c);for(x=!0,C=y-1;-1!==C;--C)if(V*D[C]<0){x=!1;break}}else x=!(i[m-1]>=0);if(x)return{solution:s,message:"Unbounded",iterations:u}}return{solution:i,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(e,t,r,n,a){var i=e.length,o=r.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),l=numeric.dot,u=(numeric.div,numeric.add,numeric.rep([i],0).concat([1])),c=numeric.rep([o,1],-1),d=numeric.blockMatrix([[t,c]]),f=r,p=numeric.rep([i],0).concat(Math.max(0,numeric.sup(numeric.neg(r)))+1),h=numeric.__solveLP(u,d,f,n,a,p,!1),v=numeric.clone(h.solution);if(v.length=i,numeric.inf(s(r,l(t,v)))<0)return{solution:NaN,message:"Infeasible",iterations:h.iterations};var g=numeric.__solveLP(e,t,r,n,a-h.iterations,v,!0);return g.iterations+=h.iterations,g},numeric.solveLP=function(e,t,r,n,a,i,o){if(void 0===o&&(o=1e3),void 0===i&&(i=numeric.epsilon),void 0===n)return numeric._solveLP(e,t,r,i,o);var s,l=n.length,u=n[0].length,c=t.length,d=numeric.echelonize(n),f=numeric.rep([u],0),p=d.P,h=[];for(s=p.length-1;-1!==s;--s)f[p[s]]=1;for(s=u-1;-1!==s;--s)0===f[s]&&h.push(s);var v=numeric.getRange,g=numeric.linspace(0,l-1),m=numeric.linspace(0,c-1),y=v(n,g,h),x=v(t,m,p),b=v(t,m,h),j=numeric.dot,w=numeric.sub,_=j(x,d.I),k=w(b,j(_,y)),z=w(r,j(_,a)),A=Array(p.length),M=Array(h.length);for(s=p.length-1;-1!==s;--s)A[s]=e[p[s]];for(s=h.length-1;-1!==s;--s)M[s]=e[h[s]];var O=w(M,j(A,j(d.I,y))),S=numeric._solveLP(O,k,z,i,o),E=S.solution;if(E!=E)return S;var F=j(d.I,w(a,j(y,E))),C=Array(e.length);for(s=p.length-1;-1!==s;--s)C[p[s]]=F[s];for(s=h.length-1;-1!==s;--s)C[h[s]]=E[s];return{solution:C,message:S.message,iterations:S.iterations}},numeric.MPStoLP=function(e){e instanceof String&&e.split("\n");var t,r,n,a,i=0,o=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=e.length,l=0,u={},c=[],d=0,f={},p=0,h=[],v=[],g=[];function m(r){throw new Error("MPStoLP: "+r+"\nLine "+t+": "+e[t]+"\nCurrent state: "+o[i]+"\n")}for(t=0;t<s;++t){var y=(n=e[t]).match(/\S*/g),x=[];for(r=0;r<y.length;++r)""!==y[r]&&x.push(y[r]);if(0!==x.length){for(r=0;r<o.length&&n.substr(0,o[r].length)!==o[r];++r);if(r<o.length){if(i=r,1===r&&(a=x[1]),6===r)return{name:a,c:h,A:numeric.transpose(v),b:g,rows:u,vars:f}}else switch(i){case 0:case 1:m("Unexpected line");case 2:switch(x[0]){case"N":0===l?l=x[1]:m("Two or more N rows");break;case"L":u[x[1]]=d,c[d]=1,g[d]=0,++d;break;case"G":u[x[1]]=d,c[d]=-1,g[d]=0,++d;break;case"E":u[x[1]]=d,c[d]=0,g[d]=0,++d;break;default:m("Parse error "+numeric.prettyPrint(x))}break;case 3:f.hasOwnProperty(x[0])||(f[x[0]]=p,h[p]=0,v[p]=numeric.rep([d],0),++p);var b=f[x[0]];for(r=1;r<x.length;r+=2)if(x[r]!==l){var j=u[x[r]];v[b][j]=(c[j]<0?-1:1)*parseFloat(x[r+1])}else h[b]=parseFloat(x[r+1]);break;case 4:for(r=1;r<x.length;r+=2)g[u[x[r]]]=(c[u[x[r]]]<0?-1:1)*parseFloat(x[r+1]);break;case 5:break;case 6:m("Internal error")}}}m("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,r,n,a,i,o){function s(e){var t,n,a=this,i=e.length,o=0,s=a.i=a.j=a.m=0;for(a.S=[],a.c=[],i||(e=[i++]);o<r;)a.S[o]=o++;for(o=0;o<r;o++)s=u(s+(t=a.S[o])+e[o%i]),n=a.S[s],a.S[o]=n,a.S[s]=t;a.g=function(e){var t=a.S,n=u(a.i+1),i=t[n],o=u(a.j+i),s=t[o];t[n]=s,t[o]=i;for(var l=t[u(i+s)];--e;)n=u(n+1),s=t[o=u(o+(i=t[n]))],t[n]=s,t[o]=i,l=l*r+t[u(i+s)];return a.i=n,a.j=o,l},a.g(r)}function l(e,t,r,n){for(e+="",r=0,n=0;n<e.length;n++)t[u(n)]=u((r^=19*t[u(n)])+e.charCodeAt(n));for(n in e="",t)e+=String.fromCharCode(t[n]);return e}function u(e){return e&r-1}t.seedrandom=function(n,u){var c,d=[];return n=l(function e(t,r,n,a,i){n=[];i=typeof t;if(r&&"object"==i)for(a in t)if(a.indexOf("S")<5)try{n.push(e(t[a],r-1))}catch(e){}return n.length?n:t+("string"!=i?"\0":"")}(u?[n,e]:arguments.length?n:[(new Date).getTime(),e,window],3),d),l((c=new s(d)).S,e),t.random=function(){for(var e=c.g(6),t=o,n=0;e<a;)e=(e+n)*r,t*=r,n=c.g(1);for(;e>=i;)e/=2,t/=2,n>>>=1;return(e+n)/t},n},o=t.pow(r,6),a=t.pow(2,a),i=2*a,l(t.random(),e)}([],numeric.seedrandom,256,0,52),function(e){function t(e){if("object"!=typeof e)return e;var r,n=[],a=e.length;for(r=0;r<a;r++)n[r+1]=t(e[r]);return n}function r(e){if("object"!=typeof e)return e;var t,n=[],a=e.length;for(t=1;t<a;t++)n[t-1]=r(e[t]);return n}function n(e,t,r,n,a,i,o,s,l,u,c,d,f,p,h,v){var g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T,q,N,I,V,D,P,U,R;O=Math.min(n,u),y=2*n+O*(O+5)/2+2*u+1,D=1e-60;do{P=1+.1*(D+=D),U=1+.2*D}while(P<=1||U<=1);for(g=1;g<=n;g+=1)h[g]=t[g];for(g=n+1;g<=y;g+=1)h[g]=0;for(g=1;g<=u;g+=1)d[g]=0;if(b=[],0===v[1]){if(function(e,t,r,n){var a,i,o,s,l,u;for(i=1;i<=r;i+=1){if(n[1]=i,u=0,(o=i-1)<1){if((u=e[i][i]-u)<=0)break;e[i][i]=Math.sqrt(u)}else{for(s=1;s<=o;s+=1){for(l=e[s][i],a=1;a<s;a+=1)l-=e[a][i]*e[a][s];l/=e[s][s],e[s][i]=l,u+=l*l}if((u=e[i][i]-u)<=0)break;e[i][i]=Math.sqrt(u)}n[1]=0}}(e,0,n,b),0!==b[1])return void(v[1]=2);!function(e,t,r,n){var a,i,o,s;for(i=1;i<=r;i+=1){for(s=0,a=1;a<i;a+=1)s+=e[a][i]*n[a];n[i]=(n[i]-s)/e[i][i]}for(o=1;o<=r;o+=1)for(n[i=r+1-o]=n[i]/e[i][i],s=-n[i],a=1;a<i;a+=1)n[a]=n[a]+s*e[a][i]}(e,0,n,t),function(e,t,r){var n,a,i,o,s;for(i=1;i<=r;i+=1){for(e[i][i]=1/e[i][i],s=-e[i][i],n=1;n<i;n+=1)e[n][i]=s*e[n][i];if(r<(o=i+1))break;for(a=o;a<=r;a+=1)for(s=e[i][a],e[i][a]=0,n=1;n<=i;n+=1)e[n][a]=e[n][a]+s*e[n][i]}}(e,0,n)}else{for(m=1;m<=n;m+=1)for(a[m]=0,g=1;g<=m;g+=1)a[m]=a[m]+e[g][m]*t[g];for(m=1;m<=n;m+=1)for(t[m]=0,g=m;g<=n;g+=1)t[m]=t[m]+e[m][g]*a[g]}for(i[1]=0,m=1;m<=n;m+=1)for(a[m]=t[m],i[1]=i[1]+h[m]*a[m],h[m]=0,g=m+1;g<=n;g+=1)e[g][m]=0;for(i[1]=-i[1]/2,v[1]=0,S=(z=(k=(A=(_=(w=n)+n)+O)+O+1)+O*(O+1)/2)+u,g=1;g<=u;g+=1){for(F=0,m=1;m<=n;m+=1)F+=o[m][g]*o[m][g];h[S+g]=Math.sqrt(F)}function L(){for(p[1]=p[1]+1,y=z,g=1;g<=u;g+=1){for(y+=1,F=-s[g],m=1;m<=n;m+=1)F+=o[m][g]*a[m];if(Math.abs(F)<D&&(F=0),g>c)h[y]=F;else if(h[y]=-Math.abs(F),F>0){for(m=1;m<=n;m+=1)o[m][g]=-o[m][g];s[g]=-s[g]}}for(g=1;g<=f;g+=1)h[z+d[g]]=0;for(M=0,E=0,g=1;g<=u;g+=1)h[z+g]<E*h[S+g]&&(M=g,E=h[z+g]/h[S+g]);return 0===M?999:0}function H(){for(g=1;g<=n;g+=1){for(F=0,m=1;m<=n;m+=1)F+=e[m][g]*o[m][M];h[g]=F}for(x=w,g=1;g<=n;g+=1)h[x+g]=0;for(m=f+1;m<=n;m+=1)for(g=1;g<=n;g+=1)h[x+g]=h[x+g]+e[g][m]*h[m];for(I=!0,g=f;g>=1;g-=1){for(F=h[g],x=(y=k+g*(g+3)/2)-g,m=g+1;m<=f;m+=1)F-=h[y]*h[_+m],y+=m;if(F/=h[x],h[_+g]=F,d[g]<c)break;if(F<0)break;I=!1,j=g}if(!I)for(C=h[A+j]/h[_+j],g=1;g<=f&&!(d[g]<c)&&!(h[_+g]<0);g+=1)(E=h[A+g]/h[_+g])<C&&(C=E,j=g);for(F=0,g=w+1;g<=w+n;g+=1)F+=h[g]*h[g];if(Math.abs(F)<=D){if(I)return v[1]=1,999;for(g=1;g<=f;g+=1)h[A+g]=h[A+g]-C*h[_+g];return h[A+f+1]=h[A+f+1]+C,700}for(F=0,g=1;g<=n;g+=1)F+=h[w+g]*o[g][M];for(B=-h[z+M]/F,V=!0,I||C<B&&(B=C,V=!1),g=1;g<=n;g+=1)a[g]=a[g]+B*h[w+g],Math.abs(a[g])<D&&(a[g]=0);for(i[1]=i[1]+B*F*(B/2+h[A+f+1]),g=1;g<=f;g+=1)h[A+g]=h[A+g]-B*h[_+g];if(h[A+f+1]=h[A+f+1]+B,!V){for(F=-s[M],m=1;m<=n;m+=1)F+=a[m]*o[m][M];if(M>c)h[z+M]=F;else if(h[z+M]=-Math.abs(F),F>0){for(m=1;m<=n;m+=1)o[m][M]=-o[m][M];s[M]=-s[M]}return 700}for(d[f+=1]=M,y=k+(f-1)*f/2+1,g=1;g<=f-1;g+=1)h[y]=h[g],y+=1;if(f===n)h[y]=h[n];else{for(g=n;g>=f+1&&0!==h[g]&&(T=Math.max(Math.abs(h[g-1]),Math.abs(h[g])),q=Math.min(Math.abs(h[g-1]),Math.abs(h[g])),E=h[g-1]>=0?Math.abs(T*Math.sqrt(1+q*q/(T*T))):-Math.abs(T*Math.sqrt(1+q*q/(T*T))),T=h[g-1]/E,q=h[g]/E,1!==T);g-=1)if(0===T)for(h[g-1]=q*E,m=1;m<=n;m+=1)E=e[m][g-1],e[m][g-1]=e[m][g],e[m][g]=E;else for(h[g-1]=E,N=q/(1+T),m=1;m<=n;m+=1)E=T*e[m][g-1]+q*e[m][g],e[m][g]=N*(e[m][g-1]+E)-e[m][g],e[m][g-1]=E;h[y]=h[f]}return 0}function Y(){if(0===h[x=(y=k+j*(j+1)/2+1)+j])return 798;if(T=Math.max(Math.abs(h[x-1]),Math.abs(h[x])),q=Math.min(Math.abs(h[x-1]),Math.abs(h[x])),E=h[x-1]>=0?Math.abs(T*Math.sqrt(1+q*q/(T*T))):-Math.abs(T*Math.sqrt(1+q*q/(T*T))),T=h[x-1]/E,q=h[x]/E,1===T)return 798;if(0===T){for(g=j+1;g<=f;g+=1)E=h[x-1],h[x-1]=h[x],h[x]=E,x+=g;for(g=1;g<=n;g+=1)E=e[g][j],e[g][j]=e[g][j+1],e[g][j+1]=E}else{for(N=q/(1+T),g=j+1;g<=f;g+=1)E=T*h[x-1]+q*h[x],h[x]=N*(h[x-1]+E)-h[x],h[x-1]=E,x+=g;for(g=1;g<=n;g+=1)E=T*e[g][j]+q*e[g][j+1],e[g][j+1]=N*(e[g][j]+E)-e[g][j+1],e[g][j]=E}return 0}function X(){for(x=y-j,g=1;g<=j;g+=1)h[x]=h[y],y+=1,x+=1;return h[A+j]=h[A+j+1],d[j]=d[j+1],(j+=1)<f?797:0}function G(){return h[A+f]=h[A+f+1],h[A+f+1]=0,d[f]=0,f-=1,p[2]=p[2]+1,0}for(f=0,p[1]=0,p[2]=0,R=0;;){if(999===(R=L()))return;for(;0!==(R=H());){if(999===R)return;if(700===R)if(j===f)G();else{for(;Y(),797===(R=X()););G()}}}}numeric.solveQP=function(e,a,i,o,s,l){e=t(e),a=t(a),i=t(i);var u,c,d,f,p,h=[],v=[],g=[],m=[],y=[];if(s=s||0,l=l?t(l):[void 0,0],o=o?t(o):[],c=e.length-1,d=i[1].length-1,!o)for(u=1;u<=d;u+=1)o[u]=0;for(u=1;u<=d;u+=1)v[u]=0;for(f=Math.min(c,d),u=1;u<=c;u+=1)g[u]=0;for(h[1]=0,u=1;u<=2*c+f*(f+5)/2+2*d+1;u+=1)m[u]=0;for(u=1;u<=2;u+=1)y[u]=0;return n(e,a,0,c,g,h,i,o,0,d,s,v,0,y,m,l),p="",1===l[1]&&(p="constraints are inconsistent, no solution!"),2===l[1]&&(p="matrix D in quadratic function is not positive definite!"),{solution:r(g),value:r(h),unconstrained_solution:r(a),iterations:r(y),iact:r(v),message:p}}}(),numeric.svd=function(e){var t,r=numeric.epsilon,n=1e-64/r,a=0,i=0,o=0,s=0,l=0,u=numeric.clone(e),c=u.length,d=u[0].length;if(c<d)throw"Need more rows than columns";var f=new Array(d),p=new Array(d);for(i=0;i<d;i++)f[i]=p[i]=0;var h=numeric.rep([d,d],0);function v(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var g=0,m=0,y=0,x=0,b=0,j=0,w=0;for(i=0;i<d;i++){for(f[i]=m,w=0,l=i+1,o=i;o<c;o++)w+=u[o][i]*u[o][i];if(w<=n)m=0;else for(g=u[i][i],m=Math.sqrt(w),g>=0&&(m=-m),y=g*m-w,u[i][i]=g-m,o=l;o<d;o++){for(w=0,s=i;s<c;s++)w+=u[s][i]*u[s][o];for(g=w/y,s=i;s<c;s++)u[s][o]+=g*u[s][i]}for(p[i]=m,w=0,o=l;o<d;o++)w+=u[i][o]*u[i][o];if(w<=n)m=0;else{for(g=u[i][i+1],m=Math.sqrt(w),g>=0&&(m=-m),y=g*m-w,u[i][i+1]=g-m,o=l;o<d;o++)f[o]=u[i][o]/y;for(o=l;o<c;o++){for(w=0,s=l;s<d;s++)w+=u[o][s]*u[i][s];for(s=l;s<d;s++)u[o][s]+=w*f[s]}}(b=Math.abs(p[i])+Math.abs(f[i]))>x&&(x=b)}for(i=d-1;-1!=i;i+=-1){if(0!=m){for(y=m*u[i][i+1],o=l;o<d;o++)h[o][i]=u[i][o]/y;for(o=l;o<d;o++){for(w=0,s=l;s<d;s++)w+=u[i][s]*h[s][o];for(s=l;s<d;s++)h[s][o]+=w*h[s][i]}}for(o=l;o<d;o++)h[i][o]=0,h[o][i]=0;h[i][i]=1,m=f[i],l=i}for(i=d-1;-1!=i;i+=-1){for(l=i+1,m=p[i],o=l;o<d;o++)u[i][o]=0;if(0!=m){for(y=u[i][i]*m,o=l;o<d;o++){for(w=0,s=l;s<c;s++)w+=u[s][i]*u[s][o];for(g=w/y,s=i;s<c;s++)u[s][o]+=g*u[s][i]}for(o=i;o<c;o++)u[o][i]=u[o][i]/m}else for(o=i;o<c;o++)u[o][i]=0;u[i][i]+=1}for(r*=x,s=d-1;-1!=s;s+=-1)for(var _=0;_<50;_++){var k=!1;for(l=s;-1!=l;l+=-1){if(Math.abs(f[l])<=r){k=!0;break}if(Math.abs(p[l-1])<=r)break}if(!k){a=0,w=1;var z=l-1;for(i=l;i<s+1&&(g=w*f[i],f[i]=a*f[i],!(Math.abs(g)<=r));i++)for(y=v(g,m=p[i]),p[i]=y,a=m/y,w=-g/y,o=0;o<c;o++)b=u[o][z],j=u[o][i],u[o][z]=b*a+j*w,u[o][i]=-b*w+j*a}if(j=p[s],l==s){if(j<0)for(p[s]=-j,o=0;o<d;o++)h[o][s]=-h[o][s];break}if(_>=49)throw"Error: no convergence.";for(x=p[l],m=v(g=(((b=p[s-1])-j)*(b+j)+((m=f[s-1])-(y=f[s]))*(m+y))/(2*y*b),1),g=g<0?((x-j)*(x+j)+y*(b/(g-m)-y))/x:((x-j)*(x+j)+y*(b/(g+m)-y))/x,a=1,w=1,i=l+1;i<s+1;i++){for(m=f[i],b=p[i],y=w*m,m*=a,j=v(g,y),f[i-1]=j,g=x*(a=g/j)+m*(w=y/j),m=-x*w+m*a,y=b*w,b*=a,o=0;o<d;o++)x=h[o][i-1],j=h[o][i],h[o][i-1]=x*a+j*w,h[o][i]=-x*w+j*a;for(j=v(g,y),p[i-1]=j,g=(a=g/j)*m+(w=y/j)*b,x=-w*m+a*b,o=0;o<c;o++)b=u[o][i-1],j=u[o][i],u[o][i-1]=b*a+j*w,u[o][i]=-b*w+j*a}f[l]=0,f[s]=g,p[s]=x}for(i=0;i<p.length;i++)p[i]<r&&(p[i]=0);for(i=0;i<d;i++)for(o=i-1;o>=0;o--)if(p[o]<p[i]){for(a=p[o],p[o]=p[i],p[i]=a,s=0;s<u.length;s++)t=u[s][i],u[s][i]=u[s][o],u[s][o]=t;for(s=0;s<h.length;s++)t=h[s][i],h[s][i]=h[s][o],h[s][o]=t;i=o}return{U:u,S:p,V:h}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(e,t,r){!function(){"use strict";function e(e,t,r){var n=t.x,a=t.y,i=r.x-n,o=r.y-a;if(0!==i||0!==o){var s=((e.x-n)*i+(e.y-a)*o)/(i*i+o*o);s>1?(n=r.x,a=r.y):s>0&&(n+=i*s,a+=o*s)}return(i=e.x-n)*i+(o=e.y-a)*o}function r(t,r){var n=t.length-1,a=[t[0]];return function t(r,n,a,i,o){for(var s,l=i,u=n+1;u<a;u++){var c=e(r[u],r[n],r[a]);c>l&&(s=u,l=c)}l>i&&(s-n>1&&t(r,n,s,i,o),o.push(r[s]),a-s>1&&t(r,s,a,i,o))}(t,0,n,r,a),a.push(t[n]),a}function n(e,t,n){if(e.length<=2)return e;var a=void 0!==t?t*t:1;return e=r(e=n?e:function(e,t){for(var r,n,a,i,o,s=e[0],l=[s],u=1,c=e.length;u<c;u++)r=e[u],a=s,i=void 0,o=void 0,i=(n=r).x-a.x,o=n.y-a.y,i*i+o*o>t&&(l.push(r),s=r);return s!==r&&l.push(r),l}(e,a),a)}"function"==typeof define&&define.amd?define(function(){return n}):void 0!==t?(t.exports=n,t.exports.default=n):"undefined"!=typeof self?self.simplify=n:window.simplify=n}()},{}],23:[function(e,t,r){"use strict";t.exports=function(e){var t,r,d;if(Array.isArray(e)){if(0===(t=e.length))return new f(null,null,0,0);r=e[0].length,d=n(l.mallocDouble(t*(r+1)),[t,r+1]),i(e,d.hi(t,r))}else{t=e.shape[0],r=e.shape[1];var p=e.dtype;p="int8"===p||"int16"===p||"int32"===p?"int32":"uint8"===p||"uint8_clamped"===p||"buffer"===p||"uint16"===p||"uint32"===p?"uint32":"float32"===p?"float32":"float64",d=n(l.malloc(t*(r+1),p),[t,r+1]),o.assign(d.hi(t,r),e)}for(var v=0;v<t;++v)d.set(v,r,v);var g=s.malloc([t,r],e.dtype),m=l.mallocInt32(t),y=0,x=g.data,b=d.data,j=(c.log2(c.nextPow2(t)),a.compile(d.order,!0,d.dtype)),w=new h;w.push(d);for(;y<t;){var _=w.pop(),k=_,z=0|k.shape[0];if(z>1){var A,M=c.log2(y+1)%r,O=u.root(z);A=j(k,O,function(e,t){return e.get(M)-t.get(M)});for(var S=g.index(y,0),E=A.offset,v=0;v<r;++v)x[S++]=b[E++];m[y]=b[E],y+=1,w.push(k.hi(O)),z>2&&w.push(k.lo(O+1))}else{for(var E=k.offset,S=g.index(y,0),v=0;v<r;++v)x[S+v]=b[E++];m[y]=b[E],y+=1}}return l.free(d.data),new f(g,m,t,r)},t.exports.deserialize=function(e){var t=e.p,r=e.i;if(t){for(var a=t.length,i=l.mallocFloat64(a),o=0;o<a;++o)i[o]=t[o];for(var s=r.length,u=l.mallocInt32(s),o=0;o<s;++o)u[o]=r[o];var c=a/s|0;return new f(n(i,[s,c]),u,s,c)}return new f(null,null,0,e.d)};var n=e("ndarray"),a=e("ndarray-select"),i=e("ndarray-pack"),o=e("ndarray-ops"),s=e("ndarray-scratch"),l=e("typedarray-pool"),u=e("inorder-tree-layout"),c=e("bit-twiddle"),d=e("./lib/heap.js");function f(e,t,r,n){this.points=e,this.ids=t,this.dimension=n,this.length=r}var p=f.prototype;function h(){this.data=[],this.offset=0}p.serialize=function(){return this.length>0?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},p.range=function(e,t,r){var n=this.length;if(!(n<1)){for(var a=this.dimension,o=0;o<a;++o)if(t[o]<e[o])return;var u,d=this.points,f=this.ids,p=s.malloc([n,2,a]),h=l.mallocInt32(n),v=p.data,g=d.data,m=1,y=0;for(h[0]=0,i(e,p.pick(0,0)),i(t,p.pick(0,1));y<m;){var x=h[y],b=c.log2(x+1)%a,j=p.index(y,0,0),w=p.index(y,1,0),_=d.index(x,0),k=!0;for(o=0;o<a;++o){var z=g[_+o];if(z<v[j+o]||v[w+o]<z){k=!1;break}}if(k&&void 0!==(u=r(f[x])))break;var A=g[_+b],M=v[w+b],O=v[j+b];if(O<=A){var S=2*x+1;if(S<n){h[m]=S;var E=p.index(m,0,0);for(o=0;o<a;++o)v[E+o]=v[j+o];var F=p.index(m,1,0);for(o=0;o<a;++o)v[F+o]=v[w+o];v[F+b]=Math.min(M,A),m+=1}}if(A<=M){var C=2*(x+1);if(C<n){h[m]=C;for(E=p.index(m,0,0),o=0;o<a;++o)v[E+o]=v[j+o];for(F=p.index(m,1,0),o=0;o<a;++o)v[F+o]=v[w+o];v[E+b]=Math.max(O,A),m+=1}}y+=1}return s.free(p),l.free(h),u}},p.rnn=function(e,t,r){if(!(t<0)){var n=this.length;if(!(n<1)){var a,i=this.dimension,o=this.points,u=this.ids,d=s.malloc([n,i]),f=l.mallocInt32(n),p=d.data,h=o.data,v=1,g=0,m=t*t;f[0]=0;for(var y=0;y<i;++y)d.set(0,y,0);for(;g<v;){var x=f[g],b=o.index(x,0),j=0;for(y=0;y<i;++y)j+=Math.pow(e[y]-h[b+y],2);if(j<=m&&void 0!==(a=r(u[x])))break;var w=c.log2(x+1)%i,_=0,k=d.index(g,0);for(y=0;y<i;++y)y!==w&&(_+=p[k+y]);var z=e[w],A=h[b+w],M=p[k+w],O=M,S=M;z<A?S=Math.max(M,Math.pow(A-z,2)):O=Math.max(M,Math.pow(A-z,2));var E=S+_;if(O+_<=m){var F=2*x+1;if(F<n){f[v]=F;var C=d.index(v,0);for(y=0;y<i;++y)p[C+y]=p[k+y];p[C+w]=O,v+=1}}if(E<=m){var B=2*(x+1);if(B<n){f[v]=B;for(C=d.index(v,0),y=0;y<i;++y)p[C+y]=p[k+y];p[C+w]=S,v+=1}}g+=1}return s.free(d),l.free(f),a}}},p.nn=function(e,t){var r=this.length;if(r<1)return-1;if("number"==typeof t){if(t<0)return-1}else t=1/0;var n=this.dimension,a=this.points,i=a.data,o=l.mallocFloat64(n),s=new d(r,n+1),u=s.index,f=s.data;u[0]=0;for(var p=0;p<=n;++p)f[p]=0;s.count+=1;for(var h=-1,v=t;s.count>0&&!(f[0]>=v);){var g=u[0],m=a.index(g,0),y=0;for(p=0;p<n;++p)y+=Math.pow(e[p]-i[m+p],2);y<v&&(v=y,h=g);var x=c.log2(g+1)%n,b=0;for(p=0;p<n;++p){var j=f[p+1];p!==x&&(b+=j),o[p]=j}var w=e[x],_=i[m+x],k=o[x],z=k,A=k;w<_?A=Math.max(k,Math.pow(_-w,2)):z=Math.max(k,Math.pow(_-w,2));var M=z+b,O=A+b;if(s.pop(),M<v){var S=2*g+1;if(S<r){u[F=s.count]=S,f[C=F*(n+1)]=M;for(p=1;p<=n;++p)f[C+p]=o[p-1];f[C+x+1]=z,s.push()}}if(O<v){var E=2*(g+1);if(E<r){var F,C;u[F=s.count]=E,f[C=F*(n+1)]=O;for(p=1;p<=n;++p)f[C+p]=o[p-1];f[C+x+1]=A,s.push()}}}return l.freeFloat64(o),s.dispose(),h<0?-1:this.ids[h]},p.knn=function(e,t,r){if("number"==typeof r){if(r<0)return[]}else r=1/0;var n=this.length;if(n<1)return[];if("number"==typeof t){if(t<=0)return[];t=0|Math.min(t,n)}else t=n;var a=this.ids,i=this.dimension,o=this.points,s=o.data,u=l.mallocFloat64(i),f=new d(t,1),p=f.index,h=f.data,v=new d(n,i+1),g=v.index,m=v.data;g[0]=0;for(var y=0;y<=i;++y)m[y]=0;v.count+=1;for(var x=r;v.count>0&&!(m[0]>=x);){var b=g[0],j=o.index(b,0),w=0;for(y=0;y<i;++y)w+=Math.pow(e[y]-s[j+y],2);if(w<x){f.count>=t&&f.pop();var _=f.count;p[_]=b,h[_]=-w,f.push(),f.count>=t&&(x=-h[0])}var k=c.log2(b+1)%i,z=0;for(y=0;y<i;++y){var A=m[y+1];y!==k&&(z+=A),u[y]=A}var M=e[k],O=s[j+k],S=u[k],E=S,F=S;M<O?F=Math.max(S,Math.pow(O-M,2)):E=Math.max(S,Math.pow(O-M,2));var C=E+z,B=F+z;if(v.pop(),C<x){var T=2*b+1;if(T<n){g[N=v.count]=T,m[I=N*(i+1)]=C;for(y=1;y<=i;++y)m[I+y]=u[y-1];m[I+k+1]=E,v.push()}}if(B<x){var q=2*(b+1);if(q<n){var N,I;g[N=v.count]=q,m[I=N*(i+1)]=B;for(y=1;y<=i;++y)m[I+y]=u[y-1];m[I+k+1]=F,v.push()}}}l.freeFloat64(u),v.dispose();var V=new Array(f.count);for(a=this.ids,y=f.count-1;y>=0;--y)V[y]=a[p[0]],f.pop();return f.dispose(),V},p.dispose=function(){l.free(this.points.data),l.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0},h.prototype.size=function(){return this.data.length-this.offset},h.prototype.push=function(e){return this.data.push(e)},h.prototype.pop=function(){if(0!==this.size()){var e=this.data[this.offset];return this.offset++,this.data.length>1024&&2*this.offset>this.data.length&&(this.data=this.data.slice(this.offset),this.offset=0),e}}},{"./lib/heap.js":24,"bit-twiddle":2,"inorder-tree-layout":11,ndarray:20,"ndarray-ops":15,"ndarray-pack":16,"ndarray-scratch":18,"ndarray-select":19,"typedarray-pool":25}],24:[function(e,t,r){"use strict";t.exports=i;var n=e("typedarray-pool");function a(e){return 1&e?e-1>>1:(e>>1)-1}function i(e,t){this.count=0,this.dataSize=t,this.index=n.mallocInt32(e),this.data=n.mallocFloat64(e*t)}var o=i.prototype;o.heapSwap=function(e,t){var r=this.data,n=this.index,a=this.dataSize,i=n[e];n[e]=n[t],n[t]=i;for(var o=a*e,s=a*t,l=0;l<a;++l){var u=r[o];r[o]=r[s],r[s]=u,o+=1,s+=1}},o.heapUp=function(e){for(var t=this.dataSize,r=(this.index,this.data),n=r[t*e];e>0;){var i=a(e);if(i>=0)if(n<r[t*i]){this.heapSwap(e,i),e=i;continue}break}},o.heapDown=function(e){for(var t=this.dataSize,r=(this.index,this.data),n=this.count,a=r[t*e];;){var i=a,o=2*e+1,s=2*(e+1),l=e;if(o<n){var u=r[t*o];u<i&&(l=o,i=u)}if(s<n)r[t*s]<i&&(l=s);if(l===e)break;this.heapSwap(e,l),e=l}},o.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},o.push=function(){this.heapUp(this.count),this.count+=1},o.dispose=function(){n.freeInt32(this.index),n.freeFloat64(this.data)}},{"typedarray-pool":25}],25:[function(e,t,r){(function(t,n){"use strict";var a=e("bit-twiddle"),i=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s=t.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=i([32,0])),s.BUFFER||(s.BUFFER=i([32,0]));var l=s.DATA,u=s.BUFFER;function c(e){if(e){var t=e.length||e.byteLength,r=a.log2(t);l[r].push(e)}}function d(e){e=a.nextPow2(e);var t=a.log2(e),r=l[t];return r.length>0?r.pop():new ArrayBuffer(e)}function f(e){return new Uint8Array(d(e),0,e)}function p(e){return new Uint16Array(d(2*e),0,e)}function h(e){return new Uint32Array(d(4*e),0,e)}function v(e){return new Int8Array(d(e),0,e)}function g(e){return new Int16Array(d(2*e),0,e)}function m(e){return new Int32Array(d(4*e),0,e)}function y(e){return new Float32Array(d(4*e),0,e)}function x(e){return new Float64Array(d(8*e),0,e)}function b(e){return o?new Uint8ClampedArray(d(e),0,e):f(e)}function j(e){return new DataView(d(e),0,e)}function w(e){e=a.nextPow2(e);var t=a.log2(e),r=u[t];return r.length>0?r.pop():new n(e)}r.free=function(e){if(n.isBuffer(e))u[a.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|a.log2(t);l[r].push(e)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=function(e){c(e.buffer)},r.freeArrayBuffer=c,r.freeBuffer=function(e){u[a.log2(e.length)].push(e)},r.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return d(e);switch(t){case"uint8":return f(e);case"uint16":return p(e);case"uint32":return h(e);case"int8":return v(e);case"int16":return g(e);case"int32":return m(e);case"float":case"float32":return y(e);case"double":case"float64":return x(e);case"uint8_clamped":return b(e);case"buffer":return w(e);case"data":case"dataview":return j(e);default:return null}return null},r.mallocArrayBuffer=d,r.mallocUint8=f,r.mallocUint16=p,r.mallocUint32=h,r.mallocInt8=v,r.mallocInt16=g,r.mallocInt32=m,r.mallocFloat32=r.mallocFloat=y,r.mallocFloat64=r.mallocDouble=x,r.mallocUint8Clamped=b,r.mallocDataView=j,r.mallocBuffer=w,r.clearCache=function(){for(var e=0;e<32;++e)s.UINT8[e].length=0,s.UINT16[e].length=0,s.UINT32[e].length=0,s.INT8[e].length=0,s.INT16[e].length=0,s.INT32[e].length=0,s.FLOAT[e].length=0,s.DOUBLE[e].length=0,s.UINT8C[e].length=0,l[e].length=0,u[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":2,buffer:3,dup:7}],26:[function(e,t,r){"use strict";t.exports=function(e,t,r){return 0===e.length?e:t?(r||e.sort(t),function(e,t){for(var r=1,n=e.length,a=e[0],i=e[0],o=1;o<n;++o)if(i=a,t(a=e[o],i)){if(o===r){r++;continue}e[r++]=a}return e.length=r,e}(e,t)):(r||e.sort(),function(e){for(var t=1,r=e.length,n=e[0],a=e[0],i=1;i<r;++i,a=n)if(a=n,(n=e[i])!==a){if(i===t){t++;continue}e[t++]=n}return e.length=t,e}(e))}},{}],27:[function(e,t,r){(function(){var r;r=e("../color/sort.js"),t.exports=function(e,t,n,a,i,o,s){var l,u,c;for(a||(a="asc"),i instanceof Array||(i=[i]),n instanceof Array||(n=[n]),o&&void 0!==s&&"number"!=typeof s&&(s=o.id.nesting.indexOf(s)),c=0,l=0;l<n.length&&(u=n[l],e=o&&e.d3po&&e.d3po.sortKeys?e.d3po.sortKeys[u]:e[u],t=o&&t.d3po&&t.d3po.sortKeys?t.d3po.sortKeys[u]:t[u],0===(c=o&&i.indexOf(u)>=0?r(e,t):e<t?-1:1)&&l!==n.length-1);)l++;return"asc"===a?c:-c}}).call(this)},{"../color/sort.js":44}],28:[function(e,t,r){(function(){t.exports=function(e,t){var r;return e instanceof Array&&(r=null==t?t:t.constructor,e.indexOf(t)>=0||e.indexOf(r)>=0)}}).call(this)},{}],29:[function(e,t,r){(function(){var r,n;r=e("./comparator.js"),n=e("../core/fetch/sort.js"),t.exports=function(e,t,a,i,o,s){var l,u,c,d;if(!e||e.length<=1)return e||[];if(o)for(t||(t=o.order.value||o.size.value||o.id.value),a||(a=o.order.sort.value),i||(i=o.color.value||[]),c=0,d=e.length;c<d;c++)(l=e[c]).d3po||(l.d3po={}),u="d3po"in l&&"d3po"in l.d3po?l.d3po:l,l.d3po.sortKeys=n(o,u,t,i,s);return e.sort(function(e,n){return r(e,n,t,a,i,o,s)})}}).call(this)},{"../core/fetch/sort.js":61,"./comparator.js":27}],30:[function(e,t,r){(function(){t.exports=function(e,t){return void 0===t?e:!1===t?[]:t instanceof Array?t:(e instanceof Array||(e=[]),e.indexOf(t)>=0?e.splice(e.indexOf(t),1):e.push(t),e)}}).call(this)},{}],31:[function(e,t,r){(function(){var e;(e=function(t){var r,n,a,i;if(t in(i=e.tested))return i[t];for(n=0,a=!1;n<document.styleSheets.length;){if((r=document.styleSheets[n]).href&&r.href.indexOf(t)>=0){a=!0;break}n++}return a}).tested={},t.exports=e}).call(this)},{}],32:[function(e,t,r){t.exports=/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent)},{}],33:[function(e,t,r){(function(){var r,n;r=e("./ie.js"),n=e("./touch.js"),t.exports=n?{click:"touchend",down:"touchstart",up:"touchend",over:r?"mouseenter":"mouseover",out:r?"mouseleave":"mouseout",move:"mousemove"}:{click:"click",down:"mousedown",up:"mouseup",over:r?"mouseenter":"mouseover",out:r?"mouseleave":"mouseout",move:"mousemove"}}).call(this)},{"./ie.js":32,"./touch.js":38}],34:[function(e,t,r){(function(){var e;e=function(){var t;return t="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":"",e=function(){return t},t},t.exports=e}).call(this)},{}],35:[function(e,t,r){(function(){t.exports="rtl"===d3.select("html").attr("dir")}).call(this)},{}],36:[function(e,t,r){t.exports={y:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},x:function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}}},{}],37:[function(e,t,r){(function(){var e;e=function(){var t,r,n,a,i;return(t=document.createElement("p")).style.width="100%",t.style.height="200px",(r=document.createElement("div")).style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.visibility="hidden",r.style.width="200px",r.style.height="150px",r.style.overflow="hidden",r.appendChild(t),document.body.appendChild(r),a=t.offsetWidth,r.style.overflow="scroll",a===(i=t.offsetWidth)&&(i=r.clientWidth),document.body.removeChild(r),e=function(){return n},n=a-i},t.exports=e}).call(this)},{}],38:[function(e,t,r){(function(){t.exports=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}).call(this)},{}],39:[function(e,t,r){(function(){t.exports=function(e){var t;return(t=d3.hsl(e)).l>.45&&(t.s>.8&&(t.s=.8),t.l=.45),t.formatHex()}}).call(this)},{}],40:[function(e,t,r){(function(){t.exports=function(e,t){var r;return void 0===t&&(t=.5),t=(1-(r=d3.hsl(e)).l)*t,r.l+=t,r.s-=t,r.formatHex()}}).call(this)},{}],41:[function(e,t,r){(function(){t.exports=function(e,t,r,n){var a,i,o;return r||(r=1),n||(n=1),e=d3.rgb(e),t=d3.rgb(t),o=(r*e.r+n*t.r-r*n*t.r)/(r+n-r*n),i=(r*e.g+n*t.g-r*n*t.g)/(r+n-r*n),a=(r*e.b+n*t.b-r*n*t.b)/(r+n-r*n),d3.rgb(o,i,a).formatHex()}}).call(this)},{}],42:[function(e,t,r){(function(){var r;r=e("./scale.js"),t.exports=function(e,t){var n;return n=e||Math.floor(20*Math.random()),(t=t||r)(n)}}).call(this)},{"./scale.js":43}],43:[function(e,t,r){(function(){t.exports=d3.scaleOrdinal().range(["#bf3251","#5c57d9","#d6c650","#406662","#872a41","#1c26b3","#d05555","#549e95","#993f7b","#dc8e7a","#ede788","#7485aa","#4d6fd0","#635b56","#7454a6","#a8c380","#8abdb6","#74c0e2","#bcd8af","#a1aafb","#a17cb0","#d1a1bc"])}).call(this)},{}],44:[function(e,t,r){(function(){t.exports=function(e,t){var r,n;return r=d3.hsl(e),n=d3.hsl(t),(e=0===r.s?361:r.h)===(t=0===n.s?361:n.h)?r.l-n.l:e-t}}).call(this)},{}],45:[function(e,t,r){(function(){t.exports=function(e){var t;return(299*(t=d3.rgb(e)).r+587*t.g+114*t.b)/1e3>=128?"#444444":"#f7f7f7"}}).call(this)},{}],46:[function(e,t,r){(function(){t.exports=function(e){var t,r;return 0===(e=(e+="").replace(RegExp(" ","g"),"")).indexOf("rgb")&&(e=e.split("(")[1].split(")")[0].split(",").slice(0,3).join(",")),0===e.indexOf("hsl")&&(e=e.split(",")[2].split(")")[0]),t=d3.rgb(e).formatHex(),r=["black","#000","#000000","0%","0,0,0"].indexOf(e)>=0,"#000000"!==t||r}}).call(this)},{}],47:[function(e,t,r){(function(){var r,n,a;r=e("../../client/ie.js"),a=e("./wiki.js"),(n=function(e,t,n){n=n||"",r||"undefined"!=typeof InstallTrigger?console.log("[ d3po ] "+t):0===e.indexOf("group")?console[e]("%c[ d3po ]%c "+t,"font-weight: 800;color: #b35c1e;margin-left: 0px;","font-weight: 400;"+n):console[e]("%c"+t,n+"font-weight: 400;")}).comment=function(e){this("log",e,"color:#aaa;")},n.error=function(e,t){this("groupCollapsed","ERROR: "+e,"font-weight:800;color:#D74B03;"),this.stack(),this.wiki(t),this.groupEnd()},n.group=function(e){this("group",e,"color:#888;")},n.groupCollapsed=function(e){this("groupCollapsed",e,"color:#888;")},n.groupEnd=function(){r||console.groupEnd()},n.log=function(e){this("log",e,"color:#444444;")},n.stack=function(){var e,t,n,a,i;r||(e=new Error).stack&&(a=(a=e.stack.split("\n")).filter(function(e){return 0!==e.indexOf("Error")&&e.indexOf("d3po.js:")<0&&e.indexOf("d3po.min.js:")<0})).length&&a[0].length&&(n=window.chrome?"at ":"@",(i=a[0]).indexOf(n)>=0&&(i=i.split(n)[1]),3===(a=i.split(":")).length&&a.pop(),this("log","line "+a.pop()+" of "+(t=(t=a.join(":").split("/"))[t.length-1])+": "+i,"color:#D74B03;"))},n.time=function(e){r||console.time(e)},n.timeEnd=function(e){r||console.timeEnd(e)},n.warning=function(e,t){this("groupCollapsed",e,"color:#888;"),this.stack(),this.wiki(t),this.groupEnd()},n.wiki=function(e){e&&(e in a&&(e=d3po.repo+"wiki/"+a[e]),this("log","documentation: "+e,"color:#aaa;"))},t.exports=n}).call(this)},{"../../client/ie.js":32,"./wiki.js":48}],48:[function(e,t,r){(function(){t.exports={active:"Visualizations#active",aggs:"Visualizations#aggs",alt:"Forms#alt",attrs:"Visualizations#attrs",axes:"Visualizations#axes",background:"Visualizations#background",color:"Visualizations#color",cols:"Visualizations#cols",config:"Visualizations#config",container:"Visualizations#container",coords:"Visualizations#coords",csv:"Visualizations#csv",data:"Visualizations#data",depth:"Visualizations#depth",descs:"Visualizations#descs",dev:"Visualizations#dev",draw:"Visualizations#draw",edges:"Visualizations#edges",error:"Visualizations#error",focus:"Visualizations#focus",font:"Visualizations#font",footer:"Visualizations#footer",format:"Visualizations#format",height:"Visualizations#height",history:"Visualizations#history",hover:"Forms#hover",icon:"Visualizations#icon",id:"Visualizations#id",keywords:"Forms#keywords",labels:"Visualizations#labels",legend:"Visualizations#legend",links:"Visualizations#links",margin:"Visualizations#margin",messages:"Visualizations#messages",method:"Methods",mouse:"Visualizations#mouse",nodes:"Visualizations#nodes",open:"Forms#open",order:"Visualizations#order",remove:"Forms#remove",search:"Forms#search",select:"Forms#select",selectAll:"Forms#selectAll",shape:"Visualizations#shape",size:"Visualizations#size",temp:"Visualizations#temp",text:"Visualizations#text",time:"Visualizations#time",timeline:"Visualizations#timeline",timing:"Visualizations#timing",title:"Visualizations#title",tooltip:"Visualizations#tooltip",total:"Visualizations#total",type:"Visualizations#type",ui:"Visualizations#ui",width:"Visualizations#width",x:"Visualizations#x",y:"Visualizations#y",zoom:"Visualizations#zoom"}}).call(this)},{}],49:[function(e,t,r){var n=e("../../util/buckets.js"),a=e("../fetch/value.js"),i=e("../console/print.js");t.exports=function(e){if(e.dev.value&&i.time("getting color data range"),e.color.domain.value)var t=e.color.domain.value;else{t=[];e.data.pool.forEach(function(r){var n=parseFloat(a(e,r,e.color.value));"number"==typeof n&&!isNaN(n)&&t.indexOf(n)<0&&t.push(n)})}if(e.dev.value&&i.timeEnd("getting color data range"),t.length>1){if(e.dev.value&&i.time("calculating color scale"),(t=d3.extent(t))[0]<0&&t[1]>0)3==(r=e.color.range).length&&(t.push(t[1]),t[1]=0);else if(t[1]>0&&t[0]>=0){var r=e.color.heatmap;t=n(t,r.length)}else{r=e.color.range.slice(0);t[0]<0?r.pop():r.shift()}e.color.valueScale=d3.scaleSqrt().domain(t).range(r).interpolate(d3.interpolateRgb),e.dev.value&&i.timeEnd("calculating color scale")}else e.color.valueScale=null}},{"../../util/buckets.js":202,"../console/print.js":47,"../fetch/value.js":63}],50:[function(e,t,r){var n=e("../fetch/value.js"),a=e("../console/print.js"),i=e("../../object/validate.js");t.exports=function(e,t){e.dev.value&&a.time("filtering data");var r=d3.keys(e.data.keys||{});"attrs"in e&&(r=r.concat(d3.keys(e.attrs.keys||{}))),t=t.filter(function(t){return null!==n(e,t,e.id.value)});var o=e.types[e.type.value].requirements||[];e.data.filters.forEach(function(a){r.indexOf(e[a].value)>=0&&o.indexOf(a)>=0&&(t=t.filter(function(t){var r=n(e,t,e[a].value);return"y"===a&&e.y2.value&&null===r?r=n(e,t,e.y2.value):"x"===a&&e.x2.value&&null===r&&(r=n(e,t,e.x2.value)),"size"===a?"number"==typeof r:null!==r}))});var s=e.data.solo.length?"solo":"mute";return e.data[s].length?e.data[s].forEach(function(r){function o(t){var n=e[r][s].value,a=!1;return n.forEach(function(e){"function"==typeof e?a=e(t):e===t&&(a=!0)}),"solo"===s?a:!a}function l(t,a){if(!a&&e[r].nesting){var s=e[r].nesting;i(s)&&(s=d3.values(s));for(var l=0;l<s.length;l++){var u=t.filter(function(t){return o(n(e,t,s[l]))});u.length&&(t=u)}}else t=t.filter(function(t){return o(n(e,t,e[r].value))});return t}t=l(t),"id"===r&&("nodes"in e&&e.nodes.value&&(e.dev.value&&a.time("filtering nodes"),e.nodes.restricted=l(e.nodes.value),e.dev.value&&a.timeEnd("filtering nodes")),"edges"in e&&e.edges.value&&(e.dev.value&&a.time("filtering edges"),e.edges.restricted=e.edges.value.filter(function(t){return 2===l([t[e.edges.source],t[e.edges.target]]).length}),e.dev.value&&a.timeEnd("filtering edges")))}):"nodes"in e&&(e.nodes.restricted=void 0,e.edges.restricted=void 0),e.dev.value&&a.timeEnd("filtering data"),t}},{"../../object/validate.js":170,"../console/print.js":47,"../fetch/value.js":63}],51:[function(e,t,r){var n=e("./nest.js"),a=e("./multiformat.js"),i=e("../fetch/value.js"),o=e("../console/print.js"),s=e("../../util/uniques.js");t.exports=function(e){var t;if(e.data.time={values:[]},e.time&&e.time.value){e.dev.value&&(t="analyzing time periods",o.time(t)),e.data.time.values=s(e.data.value,e.time.value,i,e),e.data.time.values.sort(function(e,t){return e-t});var r=[];e.data.time.values.forEach(function(t,n){if(0!==n){var a=e.data.time.values[n-1];r.push(t-a),n===e.data.time.values.length-1&&(e.data.time.total=t-e.data.time.values[0])}}),r=d3.min(r),e.data.time.step=r;var l=["Milliseconds","Seconds","Minutes","Hours","Date","Month","FullYear"],u=[1e3,60,60,24,30,12,1];e.data.time.periods=l;var c=function(t,r,n){return e.data.time.stepDivider||(arr=u.slice(0,n),arr.length?e.data.time.stepDivider=arr.reduce(function(e,t){return e*t}):e.data.time.stepDivider=1),Math.round(Math.floor(r-t)/e.data.time.stepDivider)},d=e.data.time.total;l.forEach(function(t,n){var a="Date"===t?28:u[n];if(!e.data.time.stepType&&(n===l.length-1||Math.round(r)<a)){e.data.time.stepType=t;var i=e.data.time.values[0],o=e.data.time.values[e.data.time.values.length-1];e.data.time.stepIntervals=c(i,o,n)}!e.data.time.totalType&&(n===l.length-1||Math.round(d)<a)&&(e.data.time.totalType=t),r/=a,d/=a}),e.data.time.values.forEach(function(t,r){if(0!==r){var n=e.data.time.values[0];e.data.time.dataSteps.push(c(n,t,l.indexOf(e.data.time.stepType)))}else e.data.time.dataSteps=[0]});var f=e.time.format.value,p=e.format.locale.value,h=[function(e){return e.getMilliseconds()},function(e){return e.getSeconds()},function(e){return e.getMinutes()},function(e){return e.getHours()},function(e){return 1!=e.getDate()},function(e){return e.getMonth()},function(e){return!0}];e.data.time.functions=h;var v=function(e,t,r){return e===t?r&&p.timeFormat[e+"Small"]?p.timeFormat[e+"Small"]:p.timeFormat[e]:l.indexOf(e)>=4||l.indexOf(t)<=3?p.timeFormat[t+"-"+e]:(n="Date"===t?p.timeFormat[t]:p.timeFormat[t+"-Date"],"Hours"===e?n+" "+p.timeFormat[e]:n+" "+p.timeFormat["Hours-"+e]);var n};if(e.data.time.getFormat=v,f)"string"==typeof f?e.data.time.format=d3.timeFormatLocale(p.format).format(f):"function"==typeof f?e.data.time.format=f:f instanceof Array&&(e.data.time.format=a(d3.timeFormatLocale(p.format),f)),e.data.time.multiFormat=e.data.time.format;else{for(var g=e.data.time.stepType,m=e.data.time.totalType,y=[],x=l.indexOf(g);x<=l.indexOf(m);x++){var b=x-1<l.indexOf(g)?l[x]:l[x-1],j=l[x]===b&&g!==m,w=v(b,l[x],j);y.push([w,h[x]])}e.data.time.format=d3.timeFormatLocale(p.format).format(v(g,m)),y.length>1?(y[y.length-1][1]=function(e){return!0},e.data.time.multiFormat=a(d3.timeFormatLocale(p.format),y)):e.data.time.multiFormat=e.data.time.format}e.data.time.ticks=[];for(var _=d3.min(e.data.time.values),k=d3.max(e.data.time.values),z=0;z<=e.data.time.stepIntervals;z++){var A=new Date(_);A["set"+e.data.time.stepType](A["get"+e.data.time.stepType]()+z),A<=k&&e.data.time.ticks.push(A)}e.dev.value&&o.timeEnd(t)}if(e.dev.value&&(t="nesting data by time and depths",o.time(t)),e.data.nested={},0===e.data.time.values.length)e.data.nested.all={},e.id.nesting.forEach(function(t,r){var a=e.id.nesting.slice(0,r+1);e.data.nested.all[t]=n(e,e.data.value,a)});else{var M=e.data.value.reduce(function(t,r){var n=i(e,r,e.time.value).getTime();return n in t||(t[n]=[]),t[n].push(r),t},{});e.data.time.values.forEach(function(t){var r=t.getTime();e.data.nested[r]={},e.id.nesting.forEach(function(t,a){var i=e.id.nesting.slice(0,a+1);e.data.nested[r][t]=n(e,M[r],i)})})}e.dev.value&&o.timeEnd(t)}},{"../../util/uniques.js":208,"../console/print.js":47,"../fetch/value.js":63,"./multiformat.js":55,"./nest.js":56}],52:[function(e,t,r){(function(){var r;r=e("../fetch/value.js"),t.exports=function(e,t,n){var a,i,o,s,l,u,c,d,f,p;if(i=d3.nest(),e.id.grouping.value)for(void 0===n&&(n=e.id.nesting),o=s=0,u=n.length;s<u;o=++s)d=n[o],o<e.depth.value&&function(t){i.key(function(n){return r(e,n.d3po,t)})}(d);for(f=[],l=0,c=t.length;l<c;l++)a=t[l],(p=e.size.value?r(e,a,e.size.value):1)&&"number"==typeof p&&p>0&&(delete a.d3po.r,delete a.d3po.x,delete a.d3po.y,f.push({d3po:a,id:a[e.id.value],value:p}));return i.entries(f)}}).call(this)},{"../fetch/value.js":63}],53:[function(e,t,r){(function(){var r,n,a=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};r=e("../console/print.js"),n=e("../../object/validate.js"),t.exports=function(e,t){var i,o,s,l,u,c,d,f,p;if(d=t+" key analysis",e.dev.value&&r.time(d),e[t].keys={},i=function(r){var o,s,l,u,c,d,f;if(r instanceof Array){for(c=[],s=0,u=r.length;s<u;s++)o=r[s],c.push(i(o));return c}if(n(r)){for(l in d=[],r)f=r[l],0===l.indexOf("d3po")||a.call(e[t].keys,l)>=0||null===f?d.push(void 0):d.push(e[t].keys[l]=typeof f);return d}},n(e[t].value))for(o in l=d3.keys(e[t].value).length===e.id.nesting.length,u=e[t].value)if(f=u[o],l&&e.id.nesting.indexOf(o)>=0&&n(f))for(s in f)p=f[s],i(p);else i(f);else for(o in c=e[t].value)f=c[o],i(f);if(e.dev.value)return r.time(d)}}).call(this)},{"../../object/validate.js":170,"../console/print.js":47}],54:[function(e,t,r){(function(){var r,n,a;r=e("../../viz/helpers/d3functions/filetypes.js"),n=e("../console/print.js"),a=e("../../object/validate.js"),t.exports=function(e,t,i){var o,s,l;return(o=e.dev.value)&&n.time("loading "+t),l=e[t].url,e[t].filetype.value?s=e[t].filetype.value:(s=(s=l.slice(l.length-5).split(".")).length>1&&s[1])?("txt"===s&&(s="text"),e[t].filetype.accepted.indexOf(s)<0&&(s="json")):s="json",("dsv"===s?function(r){return d3.dsv(e[t].delimiter.value,r)}:r.fromString(s))(l).then(function(r){var n,i;if("function"==typeof e[t].callback){if(i=e[t].callback(r))if(a(i)&&t in i)for(n in i)n in e&&(e[n].value=i[n]);else e[t].value=i}else e[t].value=r;["json"].indexOf(s)<0&&e[t].value.forEach(function(e){var t;for(n in t=[],e)isNaN(e[n])?"false"===e[n].toLowerCase()?t.push(e[n]=!1):"true"===e[n].toLowerCase()?t.push(e[n]=!0):"null"===e[n].toLowerCase()?t.push(e[n]=null):"undefined"===e[n].toLowerCase()?t.push(e[n]=void 0):t.push(void 0):t.push(e[n]=parseFloat(e[n]));return t}),e[t].changed=!0,e[t].loaded=!0}).catch(function(t){e.error.internal='Could not load data from: "'+l+'"'}).then(function(e){return o&&n.timeEnd("loading "+t),i()})}}).call(this)},{"../../object/validate.js":170,"../../viz/helpers/d3functions/filetypes.js":213,"../console/print.js":47}],55:[function(e,t,r){t.exports=function(e,t){return function(r){return e.format(function(e){let r=0,n=!1,a="%c";for(;!n&&r<t.length;)(n=t[r][1](e))&&(a=t[r][0]),r++;return a}(r))(r)}}},{}],56:[function(e,t,r){var n=e("../../viz/helpers/d3functions/aggs.js"),a=e("../fetch/value.js"),i=e("../../object/validate.js"),o=e("../../util/uniques.js"),s=function(e,t){var r=[];return function e(n){n instanceof Array?n.forEach(e):i(n)&&t in n&&(n[t]instanceof Array?n[t].forEach(e):r.push(n))}(e),r},l=function(e){var t=[];return function e(r){for(var n=0;n<r.length;n++){var a=r[n];a&&(a.constructor===Array?e(a):t.push(a))}}(e),o(t)},u=function(e){return e.values&&e.values.length?(e.children=e.values.map(function(e){return u(e)}),delete e.values,e):e.values?e.values:e};t.exports=function(e,t,r,i){void 0===i&&(i=!0);var c=d3.nest(),d=[],f="temp"in e?["active","temp","total"]:[];r.length?r.forEach(function(t,r){c.key(function(r){return a(e,r,t)})}):c.key(function(e){return!0}),i&&e.axes&&e.axes.discrete&&(!e.time||e[e.axes.discrete].value!==e.time.value)&&c.key(function(t){return a(e,t,e[e.axes.discrete].value)});var p=r.length&&e.id.nesting.indexOf(r[r.length-1])>=0,h=r.length&&p?r.length-1:0;p?e.id.nesting[h]:e.depth.value;c.rollup(function(t){if(1===t.length&&"d3po"in t[0])return d.push(t[0]),t[0];t=t.reduce(function(e,t){return t.values instanceof Array?e.concat(t.values):(e.push(t),e)},[]);var i={d3po:{data:{},depth:h}};if(d3.sum(t,function(e){return"d3po"in e&&e.d3po.merged?1:0})===t.length)for(var u=0;u<t.length;u++){var c=t[u];i.d3po.merged||(i.d3po.merged=[]),i.d3po.merged=i.d3po.merged.concat(c.d3po.merged),c.d3po.text&&(i.d3po.text=c.d3po.text)}for(var p=0;p<f.length;p++){var v=f[p],g=e.aggs&&e.aggs.value[m]?e.aggs.value[m]:"sum";"d3po"in t[0]&&v in t[0].d3po?i.d3po[v]=d3.sum(t,function(e){return e.d3po[v]}):i.d3po[v]="function"==typeof g?g(t):n.fromString(g)(t,function(t){var r="total"===v?1:0;return e[v].value&&"number"!=typeof(r=a(e,t,e[v].value))&&(r=r?1:0),r})}for(var m in e.data.keys){if(m in i.d3po.data)i[m]=i.d3po[m];else{var y=e.aggs&&e.aggs.value[m]?e.aggs.value[m]:"sum",x=typeof y,b=e.data.keys[m],j=e.id.nesting.indexOf(m)>=0,w="time"in e&&m===e.time.value;if(m in i.d3po.data)i[m]=i.d3po[m];else if("function"===x)i[m]=e.aggs.value[m](t);else if(w)i[m]=l(o(t,m));else if(e.axes&&e.axes.discrete&&e[e.axes.discrete].value===m)i[m]=o(t,m);else if("number"!==b||"string"!==x||j){var _=s(t,m),k=1===_.length?_[0][m]:o(_,m);1===_.length?i[m]=k:k&&k.length?(k instanceof Array||(k=[k]),j&&e.id.nesting.indexOf(m)>h?i[m]=_:i[m]=k):j&&e.id.nesting.indexOf(m)-1>=h&&(!("endPoint"in i.d3po)||i.d3po.endPoint>h)&&(i.d3po.endPoint=h)}else{var z=t.map(function(e){return e[m]});(z=z.filter(function(e){return typeof e===b})).length&&(i[m]=n.fromString(y)(z))}}m in i&&i[m]instanceof Array&&1===i[m].length&&(i[m]=i[m][0])}for(var A=0;A<r.length;A++){var M=r[A];M in i||(i[M]=a(e,t[0],M))}return d.push(i),i});var v=function(t,n,a){if(t.children){for(var i in"number"==e.data.keys[r[n]]&&(t.key=parseFloat(t.key)),a[r[n]]=t.key,delete t.key,a)t[i]=a[i];n++,t.children.forEach(function(e){v(e,n,a)})}};return c=c.entries(t).map(u).map(function(e){return v(e,0,{}),e}),d}},{"../../object/validate.js":170,"../../util/uniques.js":208,"../../viz/helpers/d3functions/aggs.js":210,"../fetch/value.js":63}],57:[function(e,t,r){var n=e("../../viz/helpers/d3functions/aggs.js"),a=e("../../array/sort.js"),i=e("./nest.js"),o=e("../fetch/value.js"),s=(e("../fetch/color.js"),e("../fetch/text.js"));t.exports=function(e,t,r){var l;if("number"==typeof(l=!1===e.size.threshold.value?0:"number"==typeof e.size.threshold.value?e.size.threshold.value:"function"==typeof e.size.threshold.value?e.size.threshold.value(e):"number"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold:"function"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold(e):.02)&&l>0){var u=[],c=0===e.depth.value?0:{},d=[],f=[],p=[],h={},v=d3.nest();r&&v.key(function(t){return o(e,t,r)}),v.rollup(function(t){var a=t.length;e.aggs.value[e.size.value]?"function"==typeof e.aggs.value[e.size.value]?a=e.aggs.value[e.size.value](t):"string"==typeof e.aggs.value[e.size.value]&&(a=n.fromString(e.aggs.value[e.size.value])(t,function(t){return o(e,t,e.size.value)})):a=d3.sum(t,function(t){return o(e,t,e.size.value)});var i=r?o(e,t[0],r):"all";return h[i]=a,a}).entries(t),t.forEach(function(t){var n=o(e,t,e.id.value),a=o(e,t,e.size.value),i=r?o(e,t,r):"all";if(a/h[i]>=l&&u.indexOf(n)<0&&(u.push(n),e.depth.value)){var s=o(e,t,e.id.nesting[e.depth.value-1]);f.indexOf(s)<0&&f.push(s)}});var g=t.filter(function(t){var r=o(e,t,e.id.value),n=u.indexOf(r)>=0,a=e.depth.value?o(e,t,e.id.nesting[e.depth.value-1]):null;if(null!==a&&f.indexOf(a)<0&&p.indexOf(a)<0&&p.push(a),!n){var i=o(e,t,e.size.value);i>0&&(0===e.depth.value?i>c&&(c=i):(a in c||(c[a]=0),i>c[a]&&(c[a]=i)),d.push(t))}return n});if(d.length>1){d=a(d,e.size.value,"desc",[],e);var m=e.id.nesting.slice(0,e.depth.value);e.types[e.type.value].requirements.indexOf(e.axes.discrete)>=0&&m.push(e[e.axes.discrete].value);var y=i(e,d,m);y.forEach(function(t){var r,n=e.id.nesting[e.depth.value-1],a=o(e,t,n);(children=n?d.filter(function(t){return o(e,t,n)===a}):d,children.length>1)&&(e.id.nesting.forEach(function(r,n){if(e.depth.value==n){var a=t[r];t[r]="string"==typeof a?"d3po_other_"+a:"d3po_other"}else n>e.depth.value&&delete t[r]}),e.color.value&&"string"===e.color.type&&(0===e.depth.value?t[e.color.value]=e.color.missing:t[e.color.value]=o(e,a,e.color.value,n)),e.icon.value&&(t[e.icon.value]=o(e,a,e.icon.value,n)),a&&(t.d3po.depth=e.depth.value),0===e.depth.value?(r=e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),r+=" < "+e.format.value(c,{key:e.size.value,vars:e})):(r=(r=s(e,t,e.depth.value-1)).length?r[0].split(" < ")[0]:e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),p.indexOf(a)<0&&(r+=" < "+e.format.value(c[a],{key:e.size.value,vars:e}))),p.indexOf(a)<0&&(r+=" ("+e.format.value(100*l,{key:"share",vars:e})+")"),t.d3po.threshold=c,t.d3po.merged=children,e.text.value&&(t[e.text.value]=r),t.d3po.text=r)})}else y=d;return g.concat(y)}return t}},{"../../array/sort.js":29,"../../viz/helpers/d3functions/aggs.js":210,"../fetch/color.js":59,"../fetch/text.js":62,"../fetch/value.js":63,"./nest.js":56}],58:[function(e,t,r){(function(){var r,n;r=e("./multiformat.js"),n=e("../../font/sizes.js"),t.exports=function(e,t){var a,i,o,s,l,u,c,d,f,p,h,v,g,m,y,x,b,j;if(j=t.values||e.data.time.ticks,m=t.style||{},l=t.limit||e.width.value,y={},d=e.data.time.periods,g=e.data.time.stepType,x=e.data.time.totalType,o=e.data.time.functions,s=e.data.time.getFormat,u=e.format.locale.value.format,e.time.format.value)y.format=e.data.time.format,y.values=j,y.sizes=n(j.map(function(e){return y.format(e)}),m);else for(c=d.indexOf(g);c<=d.indexOf(x);){if(b=j.filter(function(e){var t,r;if(c===d.indexOf(g))return!0;if(t=!0,r=c-1,c<0)return!0;for(;r>=d.indexOf(g)&&t;)t=!o[r](e),r--;return t}),d[c]===x)i=d3.timeFormatLocale(u).format(s(d[c],x));else{for(f=c,i=[];f<=d.indexOf(x);)p=f-1<d.indexOf(g)?f:f-1,p=d[p],v=d[f]===p&&g!==x,a=s(p,d[f],v),i.push([a,o[f]]),f++;i[i.length-1][1]=function(){return!0},i=r(d3.timeFormatLocale(u),i)}if(h=n(b.map(function(e){return i(e)}),m),d3.sum(h,function(e){return e.width})<l||c===d.indexOf(x)){y.format=i,y.values=b,y.sizes=h;break}c++}return y}}).call(this)},{"../../font/sizes.js":100,"./multiformat.js":55}],59:[function(e,t,r){(function(){var r,n,a,i,o,s,l;r=e("./value.js"),i=e("../../color/random.js"),s=e("../../color/validate.js"),l=e("../../object/validate.js"),o=e("../../util/uniques.js"),t.exports=function(e,t,i){var s,u,c,d,f;if(l(t)&&"d3po"in t&&"color"in t.d3po)return t.d3po.color;if(void 0===i&&(i=e.id.value),"number"==typeof i&&(i=e.id.nesting[i]),e.color.value){for(c=[],d=e.id.nesting.indexOf(i);d>=0;){if(u=e.id.nesting[d],1===(f=o(t,e.color.value,r,e,u)).length&&(f=f[0]),!(f instanceof Array)&&null!=f){s=n(e,t,f,i),c.indexOf(s)<0&&c.push(s);break}d--}return 1===c.length?c[0]:e.color.missing}return a(e,t,i)},n=function(e,t,r,n){return r?e.color.valueScale?e.color.valueScale(r):s(r)?r:a(e,r,n):e.color.value&&"function"==typeof e.color.valueScale?e.color.valueScale(0):a(e,t,n)},a=function(e,t,n){return l(t)&&(t=r(e,t,n)),t instanceof Array&&(t=t[0]),i(t,e.color.scale.value)}}).call(this)},{"../../color/random.js":42,"../../color/validate.js":46,"../../object/validate.js":170,"../../util/uniques.js":208,"./value.js":63}],60:[function(e,t,r){var n=e("../data/filter.js"),a=e("../data/nest.js"),i=e("../console/print.js"),o=e("../../string/format.js"),s=e("../../string/list.js");t.exports=function(e,t,r){if(!e.data.value)return[];void 0===r&&(r=e.depth.value);var l=e.id.nesting[r];if(!t||t instanceof Array||(t=[t]),!t&&"time"in e){t=[];var u=e.time.solo.value.length?"solo":"mute",c=e.time[u].value;if(c.length){t=[];for(var d=0;d<c.length;d++){var f=c[d];if("function"==typeof f)for(var p=0;p<e.data.time.values.length;p++){var h=e.data.time.values[p].getTime();f(h)&&t.push(h)}else if(f.constructor===Date)t.push(new Date(f).getTime());else{4===(f+="").length&&parseInt(f)+""===f&&(f+="/01/01");var v=new Date(f);"Invalid Date"!==v&&t.push(v.getTime())}}"mute"===u&&(t=e.data.time.values.filter(function(e){return t.indexOf(e.getTime())<0}))}else t.push("all")}else t=["all"];if(t.indexOf("all")>=0&&e.data.time.values.length){t=e.data.time.values.slice(0);for(var g=0;g<t.length;g++)t[g]=t[g].getTime()}var m=[e.type.value,l,r].concat(e.data.filters).concat(t),y=e.data.solo.length?"solo":"mute",x=d3.keys(e.data.cache),b=e.types[e.type.value].filter||void 0;if(e.data[y].length)for(var j=0;j<e.data[y].length;j++){var w=e.data[y][j],_=e[w][y].value.slice(0);_.unshift(w),_.unshift(y),m=m.concat(_)}e.axes&&e.axes.discrete&&m.push(e.axes.discrete),m=m.join("_"),e.data.cacheID=m;for(var k,z=0;z<x.length;z++){if(x[z].split("_").slice(1).join("_")===m){m=(new Date).getTime()+"_"+m,e.data.cache[m]=e.data.cache[x[z]],delete e.data.cache[x[z]];break}}if(e.data.cache[m])return e.dev.value&&i.comment("data already cached"),k=e.data.cache[m].data,"nodes"in e&&(e.nodes.restricted=e.data.cache[m].nodes,e.edges.restricted=e.data.cache[m].edges),"function"==typeof b&&(k=b(e,k)),k;var A=[];if(k=[],e.data.value&&e.data.value.length)for(var M=0;M<t.length;M++){var O=t[M];e.data.nested[O]?k=k.concat(e.data.nested[O][l]):A.push(O)}if(0===k.length&&A.length&&!e.error.internal){A.length>1&&(A=d3.extent(A)),A=(A=A.map(function(t){return e.data.time.format(new Date(t))})).join(" - ");var S=e.format.locale.value.error.dataYear,E=e.format.locale.value.ui.and;A=s(A,E),e.error.internal=o(S,A),e.time.missing=!0}else{if(e.time&&(e.time.missing=!1),t.length>1){var F=!1;if(["x","y","x2","y2"].forEach(function(t){e[t].value===e.time.value&&"discrete"===e[t].scale.value&&(F=!0)}),!F){var C=e.id.nesting.slice(0,r+1);k=a(e,k,C)}}k=k?n(e,k):[],20===x.length&&(x.sort(),delete e.data.cache[x[0]]),m=(new Date).getTime()+"_"+m,e.data.cache[m]={data:k},"nodes"in e&&(e.data.cache[m].nodes=e.nodes.restricted,e.data.cache[m].edges=e.edges.restricted),"function"==typeof b&&(k=b(e,k)),e.dev.value&&i.comment("storing data in cache")}return k}},{"../../string/format.js":171,"../../string/list.js":172,"../console/print.js":47,"../data/filter.js":50,"../data/nest.js":56}],61:[function(e,t,r){(function(){var r,n,a,i;r=e("../../viz/helpers/d3functions/aggs.js"),i=e("./value.js"),n=e("./color.js"),a=e("./text.js"),t.exports=function(e,t,o,s,l){var u,c,d,f,p,h;for(o instanceof Array||(o=[o]),s instanceof Array||(s=[s]),e&&(void 0===l?l=e.id.value:"number"!=typeof l&&(l=e.id.nesting.indexOf(l))),p={},c=0,f=o.length;c<f;c++)d=o[c],h=e?s.indexOf(d)>=0?n(e,t,l):d===e.text.value?a(e,t,l):3===d3.keys(t).length&&t.d3po&&t.key&&t.values?i(e,t.values.map(function(e){return e.d3po}),d,l):i(e,t,d,l):t[d],[e.data.keys[d],e.attrs.keys[d]].indexOf("number")>=0?((u=e.order.agg.value||e.aggs.value[d]||"sum").constructor===String&&(u=r.fromString(u)),h instanceof Array||(h=[h]),h=u(h)):(h instanceof Array&&(h=h[0]),h="string"==typeof h?h.toLowerCase():h),p[d]=h;return p}}).call(this)},{"../../viz/helpers/d3functions/aggs.js":210,"./color.js":59,"./text.js":62,"./value.js":63}],62:[function(e,t,r){var n=e("./value.js"),a=e("../../object/validate.js"),i=e("../../util/uniques.js");t.exports=function(e,t,r){"number"!=typeof r&&(r=e.depth.value);var o,s=e.id.nesting[r];e.text.nesting&&a(e.text.nesting)?o=e.text.nesting[s]?e.text.nesting[s]:e.text.value:(o=[],e.text.value&&r===e.depth.value&&o.push(e.text.value),o.push(s)),o instanceof Array||(o=[o]);var l=[];if(a(t)&&"d3po"in t&&t.d3po.text)l.push(t.d3po.text.toString()),l.push(e.format.value(t.d3po.text.toString(),{vars:e,data:t}));else{var u=a(t)?t:void 0;u&&t[e.id.value]instanceof Array?t=t[e.id.value]:t instanceof Array||(t=[t]),o.forEach(function(r){var a=i(t,r,n,e,s);a.length&&(a.length>1&&(a=a.filter(function(e){return e instanceof Array||"string"==typeof e&&e.indexOf(" < ")<0})),1===(a=a.map(function(t){return t instanceof Array?(t=t.filter(function(e){return e})).map(function(t){return e.format.value(t.toString(),{vars:e,data:u,key:r})}):t?e.format.value(t.toString(),{vars:e,data:u,key:r}):void 0})).length&&(a=a[0]),l.push(a))})}return l}},{"../../object/validate.js":170,"../../util/uniques.js":208,"./value.js":63}],63:[function(e,t,r){(function(){var r,n,a,i,o,s,l,u,c,d;c=e("../../object/validate.js"),u=e("../../util/uniques.js"),l=function(e,t,i,o){var s,l,d,f;if(l=c(t),"function"==typeof i&&l)return i(t,e);if(l){if(i in t)return t[i];if(s=e.data.cacheID+"_"+o,r(t,s,e),i in t.d3po.data[s])return t.d3po.data[s][i];if(o in t)t=t[o];else{if(!(e.id.value in t))return null;if(t=t[e.id.value],o!==i&&(d=a(e,t,o,e.id.value)),null==d&&(d=n(e,t,o,e.id.value)),null==d)return null;if(o===i)return d;t=d}}return t instanceof Array&&!c(t[0])&&(t=u(t)),t instanceof Array&&c(t[0])&&(f=u(t,i)).length?f:(f=a(e,t,i,o))?f:f=n(e,t,i,o)},a=function(e,t,r,n){var a;return e.data.viz instanceof Array&&r in e.data.keys&&(a=u(s(e.data.viz,t,n),r)),a&&a.length?a:null},n=function(e,t,r,n){var a,i,o,l;if("attrs"in e&&e.attrs.value&&r in e.attrs.keys)if((a=c(e.attrs.value)&&n in e.attrs.value?e.attrs.value[n]:e.attrs.value)instanceof Array){if((o=u(s(a,t,n),r)).length)return o}else if(t instanceof Array){if((a=[function(){var e,r,n;if(i in a){for(n=[],e=0,r=t.length;e<r;e++)i=t[e],n.push(a[i]);return n}}()]).length&&(l=u(a,r)).length)return l}else if(t in a)return a[t][r];return null},s=function(e,t,r){return t instanceof Array?e.filter(function(e){return t.indexOf(e[r])>=0}):e.filter(function(e){return e[r]===t})},r=function(e,t,r){return"d3po"in e||(e.d3po={}),"data"in e.d3po||(e.d3po.data={}),!(r.data.changed||r.attrs&&r.attrs.changed)&&t in e.d3po.data||(e.d3po.data[t]={}),e},d=function(e,t,r,n,a){var i,o,s,l,u,d,f;if(null===a)return a;d="time"in e&&e.time.value===n,a instanceof Array||(a=[a]);for(s=l=0,u=a.length;l<u;s=++l)f=a[s],d&&null!==f&&f.constructor!==Date&&(4===(f+="").length&&parseInt(f)+""===f&&(f+="/01/01"),"Invalid Date"!==(o=new Date(f))&&(a[s]=o));return 1===a.length&&(a=a[0]),null===a||!c(t)||"string"!=typeof n||n in t||(i=e.data.cacheID+"_"+r,t.d3po.data[i][n]=a),a},o=function(e,t,r,n){var a,i,o,s,f;for(f=[],i=0,o=t.length;i<o;i++)a=t[i],c(a)?(s=l(e,a,r,n),f.push(d(e,a,n,r,s))):f.push(a);return"number"!=typeof f[0]&&(f=u(f)),1===f.length?f[0]:f},i=function(e,t,r,n){var a,i;return r?"number"==typeof r?r:(a=c(t),n||(n=e.id.value),a&&t.values instanceof Array?i=o(e,t.values,r,n):a&&t[r]instanceof Array?i=o(e,t[r],r,n):t instanceof Array?i=o(e,t,r,n):(i=l(e,t,r,n),i=d(e,t,n,r,i)),i):null},t.exports=i}).call(this)},{"../../object/validate.js":170,"../../util/uniques.js":208}],64:[function(e,t,r){(function(){t.exports=function(e){var t,r,n;for(var a in["div","svg"].indexOf(e)<0&&(e="div"),r={position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden",display:"block"},t="div"===e?{}:{position:"absolute"},n=d3.select("body").selectAll(e+".d3po_tester").data([0]).join(e).classed("d3po_tester",!0),r)n.style(a,r[a]);for(var a in t)n.attr(a,t[a]);return n}}).call(this)},{}],65:[function(e,t,r){t.exports={dev:{accepted:"{0}    {1}     : {2}.",noChange:"   {0}     .",noContainer:"     {0}.",of:"",oldStyle:"    {0}  .{1}().",sameEdge:"             {0}.",set:"  {0}.",setLong:"  {0}  {1}.",setContainer:"     .container()."},error:{accepted:"{0}  {1}    {2}     : {3}.",connections:"     {0}.",data:"  .",dataYear:"   {0}.",lib:"    {0}    {1}.",libs:"    {0}   : {1}.",method:"   {0}   {1}.",methods:"   {0}   : {1}."},lowercase:[],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:"",height:"",labels:"",legend:"",margin:"",messages:" ",order:"",search:"",shape:"",size:"",style:"",temp:" ",text:"",time:"",timeline:" ",total:" ",type:"",width:"",x:" ",y:" ",zoom:"",mode:"",mute:"",solo:""},time:["","","","",""],visualization:{bubbles:"",chart:" ",geomap:" ",line:"  ",network:"",rings:"",scatter:"  ",stacked:"  ",treemap:"  ",bar:"  ",box:"  ",paths:"",pie:"  ",table:""},ui:{and:"",back:"",collapse:" ",error:"",expand:" ",loading:" ...",more:"{0} ",moreInfo:"   ",noResults:"    {0}.",primary:"  ",share:"",total:"",values:"",including:" ",or:"",iqr:"   {0}",max:" ",min:" ",percentile:" {0}",tukey_bottom:" ",tukey_top:" ",quartile_first:" ",quartile_third:" ",median:""},message:{data:"  ",draw:"  ",initializing:" {0}",loading:" ",tooltipReset:"   ",ui:"  "},uppercase:[]}},{}],66:[function(e,t,r){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," "],dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},error:{accepted:"{0} ist kein gltiger {1} fr {2}-Darstellungen. Benutzen Sie bitte: {3}.",connections:"Keine Verbindungen verfgbar fr {0}.",data:"Keine Daten verfgbar",dataYear:"Fr {0} sind keine Daten verfgbar.",lib:"{0}-Darstellungen erfordern das Laden der Bibliothek {1}.",libs:"{0}-Darstellungen erfordern das Laden folgender Bibliotheken: {1}.",method:"{0}-Darstellungen erfordern die Methode {1}.",methods:"Weitere Einstellungen fr folgende Methoden {1} sind bei {0}-Darstellungen erforderlich."},lowercase:["ein","ein","und","wie","bei","aber","durch","fr","von","wenn","in","in","in der Nhe","noch","von","auf","auf","oder","pro","das","die","zu","mit","ber","gegen","gegen."],method:{active:"aktive Segmente",color:"Farbe",depth:"Tiefe",dev:"ausfhrlich",focus:"Fokus",icon:"Symbol",id:"Kennung",height:"Hhe",labels:"Beschriftungen",legend:"Legende",margin:"Rand",messages:"Statusmeldungen",order:"Reihenfolge",search:"Suche",shape:"Form",size:"Gre",style:"Stil",temp:"temporre Segmente",text:"Text",time:"Zeit",timeline:"Zeitleiste",total:"Segmente gesamt",type:"Typ",width:"Breite",x:"x-Achse",y:"y-Achse",zoom:"Zoom",mode:"Modus",mute:"ausblenden",solo:"isolieren"},time:["Datum","Tag","Monat","Zeit","Jahr"],visualization:{bubbles:"Blasen",chart:"Diagramm",geomap:"Karte",line:"Liniendiagramm",network:"Netzwerk",rings:"Ringe",scatter:"Punktdiagramm",stacked:"Gestapelte Flche",treemap:"Baumdiagramm",bar:"Balkendiagramm",box:"Boxplot",paths:"Pfade",pie:"Kreisdiagramm",table:"Tabelle"},ui:{and:"und",back:"zurck",collapse:"Zum Ausblenden klicken",error:"Fehler",expand:"Zum Einblenden klicken",loading:"Lade...",more:"{0} weitere",moreInfo:"Fr zustzliche Informationen klicken",noResults:"Keine Ergebnisse fr {0} gefunden.",primary:"Primre Verbindungen",share:"verteilung",total:"gesamt",values:"Werte",including:"einschlielich",or:"oder",iqr:"Interquartilsabstnde {0}",max:"Maximalwert",min:"Minimalwert",percentile:"Perzentil P{0}",tukey_bottom:"Unterer Ausreier",tukey_top:"Oberer Ausreier",quartile_first:"Unteres Quartil Q1",quartile_third:"Oberes Quartil Q3",median:"Medianwert"},message:{data:"analysiere Daten",draw:"Darstellung wird gerendert",initializing:"initialisiere {0}",loading:"Daten werden geladen",tooltipReset:"Tooltips zurcksetzen",ui:"aktualisiere Oberflche"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","BIP","HVAC","ID","IT","FuE","TV","UI"]}},{}],67:[function(e,t,r){(function(){t.exports={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",methods:"{0} visualizations require setting the following methods: {1}."},format:{decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%A, %B %-d, %Y %X",date:"%-m/%-d/%Y",time:"%I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",mute:"hide",order:"order",search:"search",shape:"shape",size:"size",solo:"isolate",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],timeFormat:{FullYear:"%Y",Month:"%B",MonthSmall:"%b",Date:"%A %-d",DateSmall:"%-d",Hours:"%I %p",Minutes:"%I:%M",Seconds:"%Ss",Milliseconds:"%Lms","FullYear-Month":"%b %Y","FullYear-Date":"%-m/%-d/%Y","Month-Date":"%b %-d","Hours-Minutes":"%I:%M %p","Hours-Seconds":"%I:%M:%S %p","Hours-Milliseconds":"%H:%M:%S.%L","Minutes-Seconds":"%I:%M:%S %p","Minutes-Milliseconds":"%H:%M:%S.%L","Seconds-Milliseconds":"%H:%M:%S.%L"},ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",iqr:"interquartile range for {0}",loading:"loading...",max:"maximum",median:"median",min:"minimum",more:"{0} more",moreInfo:"click for more info",or:"or",noResults:"no results matching {0}.",percentile:"{0} percentile",primary:"primary connections",quartile_first:"first quartile",quartile_third:"third quartile",share:"share",total:"total",tukey_bottom:"bottom tukey",tukey_top:"top tukey",values:"values"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","ER","GDP","HVAC","ID","IT","PCP","R&D","TV","UI"],visualization:{bar:"Bar Chart",box:"Box Plot",bubbles:"Bubbles",chart:"Chart",geomap:"Geo Map",line:"Line Plot",network:"Network",paths:"Paths",pie:"Pie Chart",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",table:"Table",treemap:"Tree Map"}}}).call(this)},{}],68:[function(e,t,r){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," "],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],shortDays:["dom","lun","mar","mi","jue","vie","sb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},dev:{accepted:"{0} no es un valor aceptado para {1}, por favor utilice uno de los siguientes: {2}.",noChange:"{0} no se actualiza porque no cambi.",noContainer:"no se puede encontrar un contenedor en la pgina correspondiente a {0}.",of:"de",oldStyle:"propiedades de estilo para {0} ahora se han incorporado directamente en. {1} ().",sameEdge:"los vnculos no se pueden enlazar con si mismos. eliminando automticamente el vnculo {0} que se autorreferencia.",set:"{0} se ha establecido.",setLong:"{0} ha sido establecido a {1}.",setContainer:"defina un div contenedor utilizando .container ()"},error:{accepted:"{0} no es un {1} aceptado para visualizaciones de {2}, por favor utilice uno de los siguientes: {3}.",connections:"no hay conexiones disponibles para {0}.",data:"No hay datos disponibles",dataYear:"no hay datos disponibles para {0}.",lib:"{0} visualizaciones requieren cargar las siguientes libreras: {1}.",libs:"{0} visualizaciones requieren cargar las siguientes libreras: {1}.",method:"{0} visualizaciones requieren establecer el mtodo {1}.",methods:"{0} visualizaciones requieren establecer los siguientes mtodos: {1}."},lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],method:{active:"segmentos activos",color:"color",depth:"profundidad",dev:"detallado",focus:"foco",icon:"cono",id:"id",height:"alto",labels:"rtulo",legend:"leyenda",margin:"margen",messages:"mensajes de estado",order:"orden",search:"bsqueda",shape:"forma",size:"tamao",style:"estilo",temp:"segmentos temporales",text:"texto",time:"tiempo",timeline:"lnea de tiempo",total:"segmentos totales",type:"tipo",width:"anchura",x:"eje x",y:"eje Y",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"aislar"},time:["fecha","da","mes","hora","ao"],visualization:{bubbles:"Burbujas",chart:"Grfico",geomap:"Mapa",line:"Grfico de linea",network:"Red",rings:"Anillos",scatter:"Grfico De Dispersin",stacked:"rea Apilada",treemap:"Tree Map",bar:"Grfico De Barras",box:"Diagrama de Cajas",paths:"Caminos",pie:"Grfico de Pastel",table:"Tabla"},ui:{and:"y",back:"atrs",collapse:"click para cerrar",error:"error",expand:"haga clic para ampliar",loading:"Cargando ...",more:"{0} ms",moreInfo:"clic para ms informacin",noResults:"no se encontraron resultados para {0}.",primary:"relaciones principales",share:"participacin",total:"total",values:"valores",including:"Incluyendo",or:"o",iqr:"rango intercuartil para {0}",max:"mximo",min:"mnimo",percentile:"{0} percentil",tukey_bottom:"Tukey inferior",tukey_top:"la parte superior de Tukey",quartile_first:"primer cuartil",quartile_third:"tercer cuartil",median:"mediana"},message:{data:"analizando los datos",draw:"visualizando",initializing:"inicializando {0}",loading:"cargando datos",tooltipReset:"restableciendo las descripciones emergentes",ui:"actualizando la interfaz de usuario"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","UI"]}},{}],69:[function(e,t,r){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," "],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."]},dev:{accepted:"{0} n'est pas une option valide pour {1}, les valeurs possibles sont: {2}.",noChange:"{0} n'a pas t mis  jour car inchang.",noContainer:"impossible de trouver un contenant correspondant  {0}.",of:"de",oldStyle:"les proprits de {0} ont t imbriques dans .{1}().",sameEdge:"un arc ne peut pas boucler sur lui mme. L'auto-rfrence est automatiquement limine {0}.",set:"{0} a t mis  jour.",setLong:"{0} a t mis  jour  {1}.",setContainer:"merci de choisir un div qui utilise .container()"},error:{accepted:"{0} n'est pas correct {1} pour {2} visualisations, merci d'utilisez une des options suivantes: {3}.",connections:"Pas de connections disponibles pour {0}.",data:"Pas de donnes disponibles",dataYear:"Pas de donnes disponibles pour {0}.",lib:"La visualisation de {0} ncessite le chargement de la librairie {1}.",libs:"La visualisation de {0} ncessite le chargement des librairies {1}.",method:"La visualisation du {0} exige la dfinition de {1}.",methods:"La visualisation du {0} exige les dfinitions de {1}."},lowercase:["un","une","de","des","et","mais","les","ou","pour","avec","comme","par","vers","si","dans","prs","ni","dessus","que","le","la","via","sinon","alors"],method:{active:"segments actifs",color:"couleur",depth:"profondeur",dev:"verbeux",focus:"focus",icon:"cone",id:"id",height:"hauteur",labels:"labels",legend:"lgende",margin:"marge",messages:"messages",order:"ordre",search:"recherche",shape:"format",size:"taille",style:"style",temp:"segments temporaires",text:"texte",time:"temps",timeline:"ligne temporelle",total:"segments totaux",type:"type",width:"largeur",x:"axe x",y:"axe y",zoom:"zoom",mode:"mode",mute:"cacher",solo:"isoler"},time:["anne","date","jour","heure","mois"],visualization:{bubbles:"Bulles",chart:"Graphique",geomap:"Carte",line:"Courbes",network:"Rseau",rings:"Anneaux",scatter:"Nuage de points",stacked:"Aires empiles",treemap:"Arbre",bar:"Diagramme en barres",box:"Botes  Moustaches",paths:"Chemins",pie:"Camembert",table:"Table"},ui:{and:"et",back:"retour",collapse:"clic pour rduire",error:"erreur",expand:"clic pour agrandir",loading:"chargement ...",more:"plus {0}",moreInfo:"clic pour plus d'information",noResults:"pas de rsultat correspondant  {0}.",primary:"connections primaires",share:"part",total:"total",values:"valeurs",including:"incluant",or:"ou",iqr:"gamme interquartile pour {0}",max:"maximum",min:"le minimum",percentile:"{0} percentile",tukey_bottom:"tukey bas",tukey_top:"top tukey",quartile_first:"premier quartile",quartile_third:"le troisime quartile",median:"mdian"},message:{data:"analyse des donnes",draw:"trac en cours",initializing:"Initialisation {0}",loading:"chargement",tooltipReset:"rinitialisation des bulles",ui:"rafraichissement de l'interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","IT","TV","UI"]}},{}],70:[function(e,t,r){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["",""],dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["1","2","3","4","5","6","7","8","9","10","11","12"],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]},error:{accepted:"{0}  {1} {2}       : {3}.",connections:"{0}   .",data:" ",dataYear:"{0}   .",lib:"{0}  {1}   .",libs:"{0}       : {1}.",method:"{0}   {1}   .",methods:"{0}      : {1}."},lowercase:[""],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:"",height:"",labels:"",legend:"",margin:"",messages:" ",order:"",search:"",shape:"",size:"",style:"",temp:" ",text:"",time:"",timeline:" ",total:" ",type:"",width:"",x:"X ",y:"Y ",zoom:"",mode:"",mute:"",solo:""},time:["","","","",""],visualization:{bubbles:" ",chart:"",geomap:"",line:" ",network:" ",rings:"",scatter:"",stacked:"  ",treemap:" ",bar:" ",box:" ",paths:"",pie:" ",table:""},ui:{and:"",back:"",collapse:" ",error:"",expand:" ",loading:"  ...",more:"{0} ",moreInfo:"   ",noResults:"   {0}.",primary:" ",share:"",total:"",values:"",including:"... ",or:"",iqr:"    {0}",max:"",min:"",percentile:"{0}  ",tukey_bottom:" Tukey",tukey_top:" Tukey",quartile_first:"1 ",quartile_third:"3 ",median:""},message:{data:"  ",draw:"  ",initializing:" {0}",loading:"  ",tooltipReset:" ",ui:"UI  "},uppercase:["CEO"," ","   (CFO)","CFO","CNC","COO","","CPU","CPU","GDP","HVAC","ID","IT","R & D","TV","UI"]}},{}],71:[function(e,t,r){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," ."],dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},error:{accepted:"{0}     {1} {2} ,      : {3}.",connections:"     {0}.",data:" ",dataYear:"     {0}.",lib:"{0}      {1} .",libs:"{0}      : {1}.",method:"{0}     {1} .",methods:"{0}      : {1}."},lowercase:["a","","","","","","","",""],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:"",height:"",labels:"",legend:"",margin:"",messages:"  ",order:" ",search:"",shape:"",size:"",style:"",temp:" ",text:"",time:"",timeline:"",total:" ",type:"",width:"",x:"x ",y:"Y ",zoom:"",mode:"",mute:" ",solo:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geomap:" ",line:" ",network:"",rings:"",scatter:" ",stacked:" ",treemap:"    ",bar:" ",box:" ",paths:"",pie:" ",table:""},ui:{and:"",back:"",collapse:"    ",error:"",expand:"  ",loading:"  ...",more:"{0} ",moreInfo:"   ",noResults:"       {0}.",primary:" ",share:"",total:"",values:"",including:"",or:"",iqr:"interquartile   {0}",max:"",min:"",percentile:"{0} ",tukey_bottom:" Tukey",tukey_top:" Tukey",quartile_first:" ",quartile_third:" ",median:""},message:{data:"  ",draw:"  ",initializing:" {0}",loading:"  ",tooltipReset:"  ",ui:"   "},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"]}},{}],72:[function(e,t,r){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},dev:{accepted:"{0} no  um valor vlido para {1}, por favor use um dos seguintes procedimentos: {2}.",noChange:"{0} no foi atualizado porque ele no mudou.",noContainer:"No foi possvel encontrar um local na pgina correspondente a {0}.",of:"do",oldStyle:"propriedades de estilo para {0} j foram incorporados diretamente no. {1} ().",sameEdge:"bordas no podem vincular a si mesmos. removendo automaticamente borda de auto-referncia {0}.",set:"{0} foi definido.",setLong:"{0} foi definido para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} no  um {1} reconhecido para visualizaes {2}, favor usar um dos seguintes procedimentos: {3}.",connections:"No h conexes disponveis para {0}.",data:"No h dados disponveis",dataYear:"No h dados disponveis para {0}.",lib:"A visualizao {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualizao {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualizao {0} exige a definio do mtodo {1}.",methods:"A visualizao {0} exige a definio dos mtodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"cone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"mensagens de status",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporrios",text:"texto",time:"Tempo",timeline:"cronograma",total:"segmentos totais",type:"digitar",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"isolar"},time:["data","dia","ms","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Grfico",geomap:"Mapa",line:"Grfico de Linha",network:"Rede",rings:"Anis",scatter:"disperso",stacked:"Evoluo",treemap:"Tree Map",bar:"Grfico de Barras",box:"box Plot",paths:"caminhos",pie:"Carta de torta",table:"Mesa"},ui:{and:"e",back:"voltar",collapse:"clique para entrar em colapso",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"Clique para mais informaes",noResults:"nenhum resultado para {0}.",primary:"conexes primrias",share:"participao",total:"total",values:"valores",including:"Incluindo",or:"ou",iqr:"intervalo interquartil para {0}",max:"mximo",min:"mnimo",percentile:"{0} percentil",tukey_bottom:"tukey bottom",tukey_top:"tukey topo",quartile_first:"primeiro quartil",quartile_third:"terceiro quartil",median:"mediana"},message:{data:"analisando dados",draw:"desenhando visualizao",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","P&D","TV","IU"]}},{}],73:[function(e,t,r){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},error:{accepted:"{0} no  uma {1} vlida para a visualizao {2}, por favor escolha uma das seguintes: {3}.",connections:"no existem ligaes disponveis para {0}.",data:"no existem dados disponveis",dataYear:"no existem dados disponveis para {0}.",lib:"a visualizao {0} necessita que a biblioteca {1} seja carregada.",libs:"a visualizao {0} necessita que as seguintes bibliotecas sejam carregadas: {1}.",method:"A visualizao {0} exige a definio do mtodo {1}.",methods:"A visualizao {0} exige a definio dos seguintes mtodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"cone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"estado",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporrios",text:"texto",time:"tempo",timeline:"linha temporal",total:"segmentos totais",type:"digitar",width:"largura",x:"eixo dos xx",y:"eixo dos yy",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"isolar"},time:["data","dia","ms","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Diagrama",geomap:"Mapa",line:"Grfico de Linha",network:"Grafo",rings:"Anis",scatter:"Grfico de Disperso",stacked:"Grfico de rea",treemap:"Tree Map",bar:"Grfico de Barras",box:"Diagrama de Caixa e Bigodes",paths:"caminhos",pie:"Grfico de Setores",table:"Mesa"},ui:{and:"e",back:"voltar",collapse:"Clique para colapsar",error:"erro",expand:"clique para expandir",loading:"a carregar ...",more:"mais {0}",moreInfo:"Clique para mais informaes",noResults:"nenhum resultado para {0}.",primary:"ligaes principais",share:"proporo",total:"total",values:"valores",including:"Incluindo",or:"ou",iqr:"intervalo interquartil para {0}",max:"mximo",min:"mnimo",percentile:"{0} percentil",tukey_bottom:"tukey bottom",tukey_top:"tukey topo",quartile_first:"primeiro quartil",quartile_third:"terceiro quartil",median:"mediana"},message:{data:"a analisar os dados",draw:"a desenhar a visualizao",initializing:"a inicializar {0}",loading:"a carregar os dados",tooltipReset:"a actualizar as caixas de informao",ui:"a actualizar o interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","IU"]}},{}],74:[function(e,t,r){t.exports={format:{decimal:",",thousands:"",grouping:[3],currency:[""," ."],dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},error:{accepted:"{0}    {1}  {2} , ,     : {3}.",connections:" ,   {0}.",data:" ",dataYear:"   {0}.",lib:"{0}    {1} .",libs:"{0}     : {1}.",method:"{0}    {1} .",methods:"{0}     : {1}."},lowercase:["","","","","",""," ","","","","","","","","","",""," ","",""],method:{active:" ",color:"",depth:"",dev:"",focus:"",icon:"",id:" ",height:"",labels:"",legend:"",margin:"",messages:"  ",order:"",search:"",shape:"",size:"",style:"",temp:" ",text:"",time:"",timeline:"",total:" ",type:"",width:"",x:" ",y:" Y",zoom:"",mode:"",mute:"",solo:""},time:[""," ","","",""],visualization:{bubbles:"",chart:"",geomap:" Geo",line:" ",network:"",rings:"",scatter:"Scatter Plot",stacked:"Stacked ",treemap:" ",bar:"",box:"Box ",paths:"",pie:" ",table:""},ui:{and:" ",back:"",collapse:",  ",error:"",expand:",  ",loading:" ...",more:"{0} ",moreInfo:"    ",noResults:" ,  {0}.",primary:" ",share:"",total:"",values:"",including:"  ",or:"",iqr:"   {0}",max:"",min:"",percentile:"{0} ",tukey_bottom:" ",tukey_top:" ",quartile_first:" ",quartile_third:" ",median:""},message:{data:" ",draw:" ",initializing:" {0}",loading:" ",tooltipReset:"  ",ui:"  "},uppercase:["ID"]}},{}],75:[function(e,t,r){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["",""],dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:[""," pm"],days:["pazar","pazartesi","sal","aramba","perembe","cuma","cumartesi"],shortDays:["pazar","pazartesi","sal","aramba","perembe","cuma","cumartesi"],months:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],shortMonths:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},dev:{accepted:"{0} {1}, aadakilerden birini kullann ltfen iin kabul deer deildir: {2}.",noChange:"{0} o deimedi nk gncelletirildi.",noContainer:"sayfa eletirme {0} zerine bir kap bulamyorum.",of:"arasnda",oldStyle:"{0} imdi dorudan gml olan stil zellikleri. {1} ().",sameEdge:"kenarlar kendilerine balayamazsnz. otomatik olarak kendi kendine referans kenar {0} kaldrlyor.",set:"{0} kurulmutur.",setLong:"{0} {1} olarak ayarland.",setContainer:") (.container Kullanarak bir kapsayc div tanmlamak ltfen"},error:{accepted:"{0} deildir kabul edilen {1} {2} grsel, aadakilerden birini kullann ltfen iin: {3}.",connections:"iin hibir balant {0}.",data:"uygun veri yoktur",dataYear:"iin uygun veri yoktur {0}.",lib:"{0} grselletirme {1} kitapl yklemesinde gerektirir.",libs:"{0} grsel aadaki kitaplklar yklemek gerektirir: {1}.",method:"{0} grselletirme {1} yntemini ayarlama gerektirir.",methods:"{0} grsel aadaki yntemleri ayar gerektirir: {1}."},lowercase:["A","bir","ve benzeri gibi","en ancak tarafndan iin","IF blgesi iine yakn","ne","ve","zerinde","ya da","bu","her zerine","iin olan ile","vs vs."],method:{active:"aktif blmler",color:"renk",depth:"derinlik",dev:"gereksiz szlerle dolu",focus:"odak",icon:"ikon",id:"D",height:"ykseklik",labels:"katmanlar",legend:"lejant",margin:"kenar",messages:"durum iletileri",order:"sipari",search:"arama",shape:"ekil",size:"boyut",style:"stil",temp:"geici segmentler",text:"Metin",time:"zaman",timeline:"zaman izelgesi",total:"toplam segmentler",type:"tip",width:"genilik",x:"x ekseni",y:"y ekseni",zoom:"yaknlatrma",mode:"kip",mute:"sakla",solo:"solo"},time:["tarih","gn","ay","saat","yl"],visualization:{bubbles:"baloncuklar",chart:"Grafik",geomap:"corafi Harita",line:"izgi Arsa",network:"A",rings:"halkalar",scatter:"Dalm grafii",stacked:"ylm Alan",treemap:"aa Haritas",bar:"Bar grafik",box:"kutu Grafii",paths:"yollar",pie:"Pasta grafik",table:"tablo"},ui:{and:"ve",back:"geri",collapse:"daraltmak iin tklayn",error:"hata",expand:"Geniletmek iin tklayn",loading:"Ykleniyor...",more:"{0} tane daha",moreInfo:"Daha fazla bilgi iin tklayn",noResults:"Eleen sonu yok {0}.",primary:"ncelikli balantlar",share:"payla",total:"Genel Toplam",values:"deerler",including:"dahil olmak zere",or:"veya",iqr:"iin eyrekler aras aralk {0}",max:"maksimum",min:"asgari",percentile:"{0} yzdelik",tukey_bottom:"alt tukey",tukey_top:"st tukey",quartile_first:"ilk eyrek",quartile_third:"nc eyrek",median:"medyan"},message:{data:"analiz verisi",draw:"izim grselletirme",initializing:"balatlyor {0}",loading:"veri ykleniyor",tooltipReset:"ipular sfrlama",ui:"gncelleme ui"},uppercase:["CEO","CEO'lar","CFO","CFO","CNC","COO","COO","CPU","CPU","GSYH","HVAC","kimlik","biliim","Ar-Ge","TV","UI"]}},{}],76:[function(e,t,r){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["",""],dateTime:"%A %B %e %Y %X",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},error:{accepted:"{0}{2}{1}, {3}.",connections:"{0}",data:"",dataYear:"{0}",lib:"{0}{1}",libs:"{0}{1}",method:"{0}{1}",methods:"{0}{1}"},lowercase:["","","","","...","","","","","..."],method:{active:"",color:"",depth:"",dev:"",focus:"",icon:"",id:"",height:"",labels:"",legend:"",margin:"",messages:"",order:"",search:"",shape:"",size:"",style:"",temp:"",text:"",time:"",timeline:"",total:"",type:"",width:"",x:"X",y:"Y",zoom:"",mode:"",mute:"",solo:""},time:["","","","",""],visualization:{bubbles:"",chart:"",geomap:"",line:"",network:"",rings:"",scatter:"",stacked:"",treemap:"",bar:"",box:"",paths:"",pie:"",table:""},ui:{and:"",back:"",collapse:"",error:"",expand:"",loading:"...",more:"{0}",moreInfo:"",noResults:"{0}",primary:"",share:"",total:"",values:"",including:"",or:"",iqr:"{0}",max:"",min:"",percentile:"{0}",tukey_bottom:"",tukey_top:"",quartile_first:"",quartile_third:"",median:""},message:{data:"",draw:"",initializing:"{0}",loading:"",tooltipReset:"",ui:"UI"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","","",""]}},{}],77:[function(e,t,r){(function(){t.exports={ar_SA:e("./languages/ar_SA.js"),de_DE:e("./languages/de_DE.js"),en_US:e("./languages/en_US.js"),es_ES:e("./languages/es_ES.js"),fr_FR:e("./languages/fr_FR.js"),ko_KR:e("./languages/ko_KR.js"),mk_MK:e("./languages/mk_MK.js"),pt_BR:e("./languages/pt_BR.js"),pt_PT:e("./languages/pt_PT.js"),ru_RU:e("./languages/ru_RU.js"),zh_CN:e("./languages/tr_TR.js"),zh_CN:e("./languages/zh_CN.js")}}).call(this)},{"./languages/ar_SA.js":65,"./languages/de_DE.js":66,"./languages/en_US.js":67,"./languages/es_ES.js":68,"./languages/fr_FR.js":69,"./languages/ko_KR.js":70,"./languages/mk_MK.js":71,"./languages/pt_BR.js":72,"./languages/pt_PT.js":73,"./languages/ru_RU.js":74,"./languages/tr_TR.js":75,"./languages/zh_CN.js":76}],78:[function(e,t,r){(function(){var r,n,a,i,o,s,l,u,c;n=e("../../util/copy.js"),o=e("../console/print.js"),s=e("./process/detect.js"),l=e("./set.js"),u=e("../../string/format.js"),c=e("../../object/validate.js"),t.exports=function(e,t){var r,o,s;for(r in s=[],t)o=t[r],e[r]=n(o),e[r].initialized=i(e,e[r],r),s.push(e.self[r]=a(e,r));return s},i=function(e,t,r,n){var a;for(a in t.previous=!1,t.changed=!1,t.initialized=!1,t.callback=!1,"init"in t&&!("value"in t)&&(t.value=t.init(e),delete t.init),"process"in t&&(t.value=s(e,t,t.value)),t)"global"===a?r in e||(e[r]=[]):"value"!==a&&c(t[a])&&i(e,t[a],a,r);return!0},a=function(e,t){return function(n,a){var i,s,l,d,f,p,h,v;if("function"==typeof(i="accepted"in e[t]?e[t].accepted:null)&&(i=i(e)),i instanceof Array||(i=[i]),n===Object)return e[t];if(!arguments.length&&i.indexOf(void 0)<0)return"value"in e[t]?e[t].value:e[t];if("style"===t&&"object"==typeof n)for(p in v=e.format.locale.value.dev.oldStyle,n)o.warning(u(v,'"'+p+'"',p),p),e.self[p](n[p]);if("font"===t)for(d in"string"==typeof n&&(n={family:n}),h=!0,l=function(e,t,r,n){c(e[r])&&t in e[r]&&(c(e[r][t])?e[r][t].process?e[r][t].value=e[r][t].process(n):e[r][t].value=n:e[r][t]=n)},s=function(e,t,r){var n;if(c(e)){if(h)for(n in e)l(e,t,n,r);else"font"in e&&l(e,t,"font",r);for(n in h=!1,e)s(e[n],t,r)}},n)f=n[d],"secondary"!==d&&(c(f)&&(f=f.value),f&&s(e,d,f));return r(e,t,e,t,n),"function"==typeof a&&(e[t].callback=a),!1===e[t].chainable?e[t].value:e.self}},r=function(e,t,n,a,i){var o,s,u,d;if(["accepted","changed","initialized","previous","process"].indexOf(a)<0)if(d=c(i),u=c(n[a])&&"objectAccess"in n[a]&&!1===n[a].objectAccess,o=d&&(u||!("value"in i)&&(!c(n[a])||!(d3.keys(i)[0]in n[a]))),null===i||!d||o)l(e,t,n,a,i);else if(d)for(s in i)r(e,t,n[a],s,i[s])}}).call(this)},{"../../object/validate.js":170,"../../string/format.js":171,"../../util/copy.js":205,"../console/print.js":47,"./process/detect.js":86,"./set.js":92}],79:[function(e,t,r){(function(){t.exports=function(e){return e||(e=!1),{accepted:[!1,Array,Function,Number,Object,String],callback:{accepted:[!1,Function],value:!1},global:e,process:Array,value:[]}}}).call(this)},{}],80:[function(e,t,r){(function(){var r;r=e("../../../client/rtl.js"),t.exports=function(e){var t;return t=["left","center","right"],!1===e&&t.unshift(!1),t.indexOf(e)<0&&(e="left"),{accepted:t,process:function(e){return r?"left"===e?"right":"right"===e?"left":e:e},value:e}}}).call(this)},{"../../../client/rtl.js":35}],81:[function(e,t,r){(function(){t.exports=function(e){var t;return t=["line-through","none","overline","underline"],!1===e&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}}).call(this)},{}],82:[function(e,t,r){(function(){var r,n;n=e("../../../font/validate.js"),r=["Fira Sans","sans-serif"],t.exports=function(e){return void 0===e&&(e=r),{process:n,value:e}}}).call(this)},{"../../../font/validate.js":101}],83:[function(e,t,r){(function(){t.exports=function(e){var t;return t=["top","middle","bottom"],!1===e&&t.unshift(!1),t.indexOf(e)<0&&(e="bottom"),{accepted:t,mapping:{top:"0ex",middle:"0.5ex",bottom:"1ex"},process:function(e){return this.text=e,this.mapping[e]},value:e}}}).call(this)},{}],84:[function(e,t,r){(function(){t.exports=function(e){var t;return t=["capitalize","lowercase","none","uppercase"],!1===e&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}}).call(this)},{}],85:[function(e,t,r){(function(){t.exports=function(e,t,r){var n;return t.history&&t.history.reset(),e.constructor===String?e.indexOf("/")>=0?(r.url=e,[]):(n=d3.selectAll(e)).size()?n:(e.indexOf(".")>=0&&(r.url=e),[]):e}}).call(this)},{}],86:[function(e,t,r){(function(){var r,n;r=e("../../../util/copy.js"),n=e("../../../array/update.js"),t.exports=function(e,t,a){return t.process===Array?n(r(t.value),a):"object"==typeof t.process&&"string"==typeof a?t.process[a]:"function"==typeof t.process?t.process(a,e,t):a}}).call(this)},{"../../../array/update.js":30,"../../../util/copy.js":205}],87:[function(e,t,r){(function(){var r;r=e("../../../client/css.js"),t.exports=function(e,t,n){return!1===e||e.indexOf("fa-")<0||0===e.indexOf("fa-")&&r("font-awesome")?e:n.fallback}}).call(this)},{"../../../client/css.js":31}],88:[function(e,t,r){(function(){t.exports=function(e,t){var r,n,a,i,o,s,l,u,c,d,f,p,h;if("string"==typeof e){for(r=n=0,o=(e=e.split(" ")).length;n<o;r=++n)h=e[r],e[r]=parseFloat(h,10);e=1===e.length?e[0]:2===e.length?{top:e[0],right:e[1],bottom:e[0],left:e[1]}:3===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[1]}:4===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[3]}:0}if(p=["top","right","bottom","left"],"number"==typeof e)for(a=0,s=p.length;a<s;a++)t[f=p[a]]=e;else for(i=0,l=p.length;i<l;i++)t[f=p[i]]=e[f];for(t.css="",d=[],r=c=0,u=p.length;c<u;r=++c)f=p[r],r&&(t.css+=" "),d.push(t.css+=t[f]+"px");return d}}).call(this)},{}],89:[function(e,t,r){(function(){var r,n,a,i;r=e("../../array/contains.js"),n=e("../../string/format.js"),a=e("../../string/list.js"),i=e("../console/print.js"),t.exports=function(e,t,o,s,l){var u,c,d,f,p,h,v,g;if("function"==typeof t&&(t=t(e)),t instanceof Array||(t=[t]),!1===(c=r(t,o))&&void 0!==o){for(h=[],g=JSON.stringify(o),"string"!=typeof o&&(g='"'+g+'"'),f=0,p=t.length;f<p;f++)"string"==typeof(u=t[f])?h.push('"'+u+'"'):"function"==typeof u?h.push(u.toString().split("()")[0].substring(9)):void 0===u?h.push("undefined"):h.push(JSON.stringify(u));h=a(h,e.format.locale.value.ui.or),e.type&&["mode","shape"].indexOf(s)>=0?(v=e.format.locale.value.error.accepted,d=e.format.locale.value.visualization[e.type.value]||e.type.value,i.warning(n(v,g,s,d,h),s)):(v=e.format.locale.value.dev.accepted,i.warning(n(v,g,l,h),s))}return!c}}).call(this)},{"../../array/contains.js":28,"../../string/format.js":171,"../../string/list.js":172,"../console/print.js":47}],90:[function(e,t,r){(function(){t.exports=function(e){var t;return(t=["auto","optimizeSpeed","crispEdges","geometricPrecision"]).indexOf(e)>=0||(e="crispEdges"),{accepted:t,value:e}}}).call(this)},{}],91:[function(e,t,r){(function(){var r,n;n=e("../../object/validate.js"),r=function(e,t){var a;for(a in e.changed&&(e.changed=!1),"draw"===t&&(e.frozen=!1,e.update=!0,e.first=!1),e)a.indexOf("d3po")<0&&n(e[a])&&r(e[a],a)},t.exports=r}).call(this)},{"../../object/validate.js":170}],92:[function(e,t,r){(function(){var r,n,a,i,o,s,l,u,c;r=e("../../util/copy.js"),n=e("../../util/d3selection.js"),c=e("../../object/validate.js"),a=e("../../object/merge.js"),i=e("../console/print.js"),o=e("./process/detect.js"),s=e("./rejected.js"),l=e("../../string/format.js"),u=e("../../array/update.js"),t.exports=function(e,t,d,f,p){var h,v,g,m,y,x,b,j,w,_,k,z,A,M;if(z="value"!==f&&f&&f!==t?'"'+f+'" '+e.format.locale.value.dev.of+" ."+t+"()":"."+t+"()",h="value"===f&&"accepted"in d?d.accepted:c(d[f])&&"accepted"in d[f]?d[f].accepted:[p],!s(e,h,p,t,z)){if(c(d[f])&&"value"in d[f]&&(_=f,d=d[f],f="value"),"value"===f&&"process"in d&&(p=o(e,d,p)),d[f]instanceof Array||d[f]!==p||void 0===p){if(d.changed=!0,d.loaded&&(d.loaded=!1),"history"in e&&"draw"!==t&&((v=r(d)).method=t,e.history.chain.push(v)),d.previous=d[f],"id"in e&&"value"===f&&"nesting"in d)if("id"!==t){if("object"!=typeof d.nesting&&(d.nesting={}),c(p)){for(x in p)"string"==typeof p[x]&&(p[x]=[p[x]]);d.nesting=a(d.nesting,p),e.id.value in d.nesting||(d.nesting[e.id.value]=p[d3.keys(p)[0]])}else p instanceof Array?d.nesting[e.id.value]=p:d.nesting[e.id.value]=[p];d[f]=d.nesting[e.id.value][0]}else p instanceof Array?(d.nesting=p,"depth"in e&&e.depth.value<p.length?d[f]=p[e.depth.value]:(d[f]=p[0],"depth"in e&&(e.depth.value=0))):(d[f]=p,d.nesting=[p],"depth"in e&&(e.depth.value=0));else"depth"===t?(p>=e.id.nesting.length?e.depth.value=e.id.nesting.length-1:e.depth.value=p<0?0:p,e.id.value=e.id.nesting[e.depth.value],"object"==typeof e.text.nesting&&(w=e.text.nesting[e.id.value])&&(e.text.nesting[e.id.value]="string"==typeof w?[w]:w,e.text.value=w instanceof Array?w[0]:w)):c(d[f])&&c(p)?d[f]=a(d[f],p):d[f]=p;"value"===f&&d.global&&(y=d[f].length>0,(b=_||f)in e&&(y&&e.data[b].indexOf(t)<0||!y&&e.data[b].indexOf(t)>=0)&&(e.data[b]=u(e.data[b],t))),"value"===f&&d.dataFilter&&e.data&&e.data.filters.indexOf(t)<0&&e.data.filters.push(t),e.dev.value&&d.changed&&void 0!==d[f]&&(j=d[f]instanceof Array&&d[f].length>10,m=n(d[f]),A="function"==typeof d[f],null!==(M=j||m||A?null:"string"==typeof d[f]?d[f]:JSON.stringify(d[f]))&&M.length<260?(k=e.format.locale.value.dev.setLong,i.log(l(k,z,'"'+M+'"'))):(k=e.format.locale.value.dev.set,i.log(l(k,z))))}else k=e.format.locale.value.dev.noChange,e.dev.value&&i.comment(l(k,z));"value"===f&&d.callback&&!d.url&&(g="function"==typeof d.callback?d.callback:d.callback.value)&&g(p,e.self)}}}).call(this)},{"../../array/update.js":30,"../../object/merge.js":169,"../../object/validate.js":170,"../../string/format.js":171,"../../util/copy.js":205,"../../util/d3selection.js":206,"../console/print.js":47,"./process/detect.js":86,"./rejected.js":89}],93:[function(e,t,r){var n=e("../console/print.js"),a=e("../../string/format.js");t.exports=function(e){if(e.dev.value){var t="analyzing edges list";n.time(t)}var r=e.types[e.type.value].requirements;r instanceof Array||(r=[r]);var i=r.indexOf("nodes")>=0&&!e.nodes.value;if(i){e.nodes.value=[];var o=[];e.nodes.changed=!0}e.edges.value.forEach(function(t){["source","target"].forEach(function(r){var n=typeof t[e.edges[r]];if("object"!==n)if("number"!==n||i||"number"===e.data.keys[e.id.value])if(i&&o.indexOf(t[e.edges[r]])>=0)t[e.edges[r]]=e.nodes.value.filter(function(n){return n[e.id.value]===t[e.edges[r]]})[0];else{var a={};a[e.id.value]=t[e.edges[r]],t[e.edges[r]]=a}else t[e.edges[r]]=e.nodes.value[t[e.edges[r]]];var s=t[e.edges[r]];i&&o.indexOf(s[e.id.value])<0&&(o.push(s[e.id.value]),e.nodes.value.push(s))}),"keys"in e.data||(e.data.keys={}),e.id.value in e.data.keys||(e.data.keys[e.id.value]=typeof t[e.edges.source][e.id.value])}),e.edges.value=e.edges.value.filter(function(t){var r=t[e.edges.source][e.id.value];if(r===t[e.edges.target][e.id.value]){var i=e.format.locale.value.dev.sameEdge;return n.warning(a(i,'"'+r+'"'),"edges"),!1}return!0}),e.edges.linked=!0,e.dev.value&&n.timeEnd(t)}},{"../../string/format.js":171,"../console/print.js":47}],94:[function(e,t,r){var n=e("./hideelement.js");t.exports=function(e){var t=[e.color.value,e.icon.value,e.keywords.value,e.alt.value,"style"];function r(e,r){[].forEach.call(r.attributes,function(t){if(/^data-/.test(t.name)){var r=t.name.substr(5).replace(/-(.)/g,function(e,t){return t.toUpperCase()});e[r]=t.value}}),t.forEach(function(t){null!==r.getAttribute(t)&&(e[t]=r.getAttribute(t))})}e.text.value||e.self.text("text"),t=t.concat(e.id.nesting),e.self.data({element:e.data.value});var a=e.data.element.value.node().tagName.toLowerCase(),i=e.data.element.value.attr("type"),o=[];if("select"===a){var s=e.data.element.value.node().id;s&&e.self.container({id:s}),e.data.element.value.selectAll("option").each(function(t,n){var a={};if(a.text=d3.select(this).text(),r(a,this),o.push(a),this.selected)for(n=e.id.nesting.length-1;n>=0;n--){var i=e.id.nesting[n];if(i in a){e.self.focus(a[i]);break}}})}else if("input"===a&&"radio"===i){var l=e.data.element.value.node().getAttribute("name");l&&e.self.container({id:l}),e.data.element.value.each(function(t,a){var i={};r(i,this);var s=i[e.id.value]||this.id||!1;if(s&&isNaN(parseFloat(s))){var l=d3.select("label[for="+s+"]");l.empty()||(i.text=l.html(),l.call(n))}o.push(i),this.checked&&e.self.focus(i[e.id.value])})}!e.focus.value.length&&o.length&&(e.data.element.value.node().selectedIndex=0,e.self.focus(o[0][e.id.value]));var u=d3.select("legend[for="+e.container.id+"]");u.empty()||(e.self.title(u.html()),u.call(n));var c=!!e.container.value&&e.container.value.node().tagName.toLowerCase();return!1!==e.container.value&&"body"!==c||(e.container.value=d3.select(e.data.element.value.node().parentNode)),e.data.element.value.call(n),o}},{"./hideelement.js":95}],95:[function(e,t,r){t.exports=function(e){e.style("position","absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important")}},{}],96:[function(e,t,r){var n=e("../console/print.js");t.exports=function(e){if("network"===e.type.value){if(e.dev.value){var t="analyzing node positions";n.time(t)}if(e.nodes.value.filter(function(e){return"number"==typeof e.x&&"number"==typeof e.y}).length===e.nodes.value.length)e.nodes.positions=!0;else{var r=d3.forceLink(e.edges.value),a=e.edges.strength.value;a&&("string"==typeof a?r.strength(function(e){return e[a]}):r.strength(a));for(var i=d3.forceSimulation(e.nodes.value).force("center",d3.forceCenter([e.width.viz/2,e.height.viz/2])).force("links",r),o=50;o>0&&(i.tick(),!(i.alpha()<.01));--o);i.stop(),e.nodes.positions=!0}e.dev.value&&n.timeEnd(t)}}},{"../console/print.js":47}],97:[function(e,t,r){(function(){var r;r=e("numeric"),t.exports=function(e,t){var n,a,i,o,s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z;for(null==t&&(t={}),null==t.maxDegree&&(t.maxDegree=5),n=e.length,y=Number.MAX_VALUE,s=null,i=function(){var r,n,a;for(a=[],c=r=1,n=t.maxDegree+1;1<=n?r<n:r>n;c=1<=n?++r:--r)a.push(function(){var t,r,n;for(n=[],r=0,t=e.length;r<t;r++)m=e[r],n.push(Math.pow(m[0],c));return n}());return a}(),k=function(){var t,r,n;for(n=[],t=0,r=e.length;t<r;t++)m=e[t],n.push(m[1]);return n}(),f=v=0,x=1<<t.maxDegree;0<=x?v<x:v>x;f=0<=x?++v:--v){for(o=[function(){var e,t,r;for(r=[],e=0,t=n;0<=t?e<t:e>t;0<=t?++e:--e)r.push(1);return r}()],d=[0],p=g=0,b=t.maxDegree;0<=b?g<b:g>b;p=0<=b?++g:--g)(f&1<<p)>0&&(o.push(i[p]),d.push(p+1));a=r.transpose(o),h=d.length,l=r.dot(r.dot(r.inv(r.dot(o,a)),o),k),z=r.dot(a,l),j=r.sub(k,z),w=(_=r.dot(j,j))/(n-h),(u=-2*(-.5*n*Math.log(2*Math.PI)-.5*n*Math.log(w)-_/(2*w))+h*(Math.log(n)-Math.log(2*Math.PI)))<y&&(y=u,s=[d,l,z])}return s}}).call(this)},{numeric:21}],98:[function(e,t,r){(function(){var r;r=e("static-kdtree"),t.exports=function(e,t){var n,a,i,o,s,l,u,c,d,f,p;return null==t&&(t=10),p=r(e),u=function(){var r,n,a;for(a=[],r=0,n=e.length;r<n;r++)c=e[r],a.push(p.knn(c,t+1).slice(1));return a}(),f=function(t,r){var n,a,i,o,s,l;for(n=e[t],a=e[r],o=0,t=s=0,l=n.length;0<=l?s<l:s>l;t=0<=l?++s:--s)o+=(i=n[t]-a[t])*i;return o},o=function(){var r,n,i;for(i=[],a=r=0,n=e.length;0<=n?r<n:r>n;a=0<=n?++r:--r)i.push(f(a,u[a][t-1]));return i}(),d=function(e,t){return Math.max(f(e,t),o[t])},s=function(e){var r,n,a,i,o;for(i=0,n=0,a=(o=u[e]).length;n<a;n++)r=o[n],i+=d(e,r);return t/i},l=function(){var t,r,n;for(n=[],a=t=0,r=e.length;0<=r?t<r:t>r;a=0<=r?++t:--t)n.push(s(a));return n}(),function(){var r,o,s,c,d,f;for(f=[],a=r=0,c=e.length;0<=c?r<c:r>c;a=0<=c?++r:--r){for(n=0,o=0,s=(d=u[a]).length;o<s;o++)i=d[o],n+=l[i];n/=t,f.push([a,n/l[a]])}return f}().sort(function(e,t){return t[1]-e[1]})}}).call(this)},{"static-kdtree":23}],99:[function(e,t,r){(function(){t.exports=function(e){var t,r;return r=d3.median(e),t=d3.median(e.map(function(e){return Math.abs(e-r)})),e.map(function(e,n){return[n,Math.abs(e-r)/t]}).sort(function(e,t){return t[1]-e[1]})}}).call(this)},{}],100:[function(e,t,r){(function(){var r;r=e("../core/font/tester.js"),t.exports=function(e,t,n){var a,i,o,s,l,u,c;n||(n={}),t=t||{},u=n.parent||r("svg").append("text"),s=[],e instanceof Array||(e=[e]),c=u.selectAll("tspan").data(e),a={left:"0px",position:"absolute",top:"0px",x:0,y:0},l=0,"letter-spacing"in t&&(l=parseFloat(t["letter-spacing"]),delete t["letter-spacing"]),o=function(e){var t;return t=0,l&&(t=(d3.select(e).text().length-1)*l),e.getComputedTextLength()+t},i=function(e){return e.parentNode.getBBox().height||e.getBoundingClientRect().height};var d=c.enter().append("tspan").text(String);for(var f in styles)d.style(f,t[f]);for(var f in attrs)d.attr(f,a[f]);return d.each(function(e){if("function"==typeof n.mod)return n.mod(this)}).each(function(e){var t,r,n;return(t=d3.select(this).selectAll("tspan")).size()?(n=[],t.each(function(){return n.push(o(this))}),n=d3.max(n)):n=o(this),r=i(this),s.push({height:r,text:e,width:n})}),c.remove(),n.parent||u.remove(),s}}).call(this)},{"../core/font/tester.js":64}],101:[function(e,t,r){(function(){var r,n;r=e("../core/font/tester.js"),(n=function(e){var t,a,i,o,s,l,u,c,d,f,p,h,v;for(e instanceof Array||(e=e.split(",")),o=0,l=e.length;o<l;o++)e[o].trim();if((i=e.join(", "))in(t=n.complete))return t[i];for(f=function(e){return h.append("span").style("font-family",e).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")},p=function(e,t){var r,n,a;return n=(r=f(e)).node().offsetWidth,a=t.node().offsetWidth,r.remove(),n!==a},h=r("div"),c=f("monospace"),d=f("sans-serif"),s=0,u=e.length;s<u;s++)if((v=p((a=e[s])+",monospace",c))||(v=p(a+",sans-serif",d)),v){v=a;break}return v||(v="sans-serif"),c.remove(),d.remove(),t[i]=v,v}).complete={},t.exports=n}).call(this)},{"../core/font/tester.js":64}],102:[function(e,t,r){var n=e("../array/sort.js"),a=e("../core/methods/attach.js"),i=e("../core/data/format.js"),o=e("../core/data/keys.js"),s=e("../core/data/load.js"),l=e("../core/fetch/data.js"),u=e("../client/ie.js"),c=e("../core/methods/reset.js"),d=e("../core/console/print.js");t.exports=function(){var t={types:{auto:e("./types/auto.js"),button:e("./types/button/button.js"),drop:e("./types/drop/drop.js"),toggle:e("./types/toggle.js")},self:function(e){var r=t.data.value instanceof Array&&t.data.value.length>t.data.large;if(t.draw.timing=t.draw.first||r||u?0:t.timing.ui,t.data.value instanceof Array){if(t.dev.value&&d.group('drawing "'+t.type.value+'"'),t.data.changed&&(t.data.cache={},o(t,"data"),i(t)),t.data.viz=l(t),t.data.sort.value&&(t.data.changed||t.order.changed||t.order.sort.changed)&&n(t.data.viz,t.order.value||t.text.value,t.order.sort.value,t.color.value,t),!1===t.focus.value&&["auto","button"].indexOf(t.type.value)<0){var a=t.data.element.value;if(a&&"select"===a.node().tagName.toLowerCase()){var f=a.property("selectedIndex");f=f<0?0:f;var p=a.selectAll("option")[0][f],h=p.getAttribute("data-"+t.id.value)||p.getAttribute(t.id.value);h&&(t.focus.value=h)}!1===t.focus.value&&t.data.viz.length&&(t.focus.value=t.data.viz[0][t.id.value]),t.dev.value&&!1!==t.focus.value&&d.log('"value" set to "'+t.focus.value+'"')}var v=function(e,r){r="number"!=typeof r?1===t.id.nesting.length?0:t.id.nesting.length-1:r;var n=t.id.nesting[r];return r>0&&(!(n in e)||e[n]instanceof Array)?v(e,r-1):n};if(t.data.changed){"auto"===t.search.value?t.data.viz.length>10?(t.search.enabled=!0,t.dev.value&&d.log("Search enabled.")):(t.search.enabled=!1,t.dev.value&&d.log("Search disabled.")):t.search.enabled=t.search.value;var g=t.data.element.value?t.data.element.value.node().tagName.toLowerCase():"";if(t.data.element.value&&"select"===g){var m=[];for(var y in t.data.nested.all)m=m.concat(t.data.nested.all[y]);options=t.data.element.value.selectAll("option").data(m,function(e){var t=!!e&&v(e);return!!(e&&t in e)&&e[t]}),options.exit().remove(),options.enter().append("option"),options.each(function(e){var r=v(e),n=r===t.id.value?t.text.value||t.id.value:!0!==t.text.nesting&&r in t.text.nesting?t.text.nesting[r]:r;for(var a in e)"object"!=typeof e[a]&&(a===n&&d3.select(this).html(e[a]),["alt","value"].indexOf(a)>=0?d3.select(this).attr(a,e[a]):d3.select(this).attr("data-"+a,e[a]));e[r]===t.focus.value?this.selected=!0:this.selected=!1})}}else if(t.focus.changed&&t.data.element.value){if("select"===t.data.element.value.node().tagName.toLowerCase())t.data.element.value.selectAll("option").each(function(e){e[v(e)]===t.focus.value?this.selected=!0:this.selected=!1});else"radio"===t.data.element.value.attr("type").toLowerCase()&&t.data.element.value.each(function(e){this.value===t.focus.value?this.checked=!0:this.checked=!1})}if("auto"!==t.type.value){if(!t.container.ui){t.container.ui=t.container.value.selectAll("div#d3po_"+t.type.value+"_"+t.container.id).data(["container"]);var x=t.data.element.value?t.data.element.value[0][0]:null;if(x)if(x.id)x="#"+x.id;else{var b=x.getAttribute(t.id.value)?t.id.value:"data-"+t.id.value;x=x.getAttribute(b)?"["+b+"="+x.getAttribute(b)+"]":null}t.container.ui.enter().insert("div",x).attr("id","d3po_"+t.type.value+"_"+t.container.id).style("position","relative").style("overflow","visible").style("vertical-align","top")}t.container.ui.style("display",t.ui.display.value),t.container.ui.transition().duration(t.draw.timing).style("margin",t.ui.margin.css);var j=t.container.ui.selectAll("div.d3po_title").data(t.title.value?[t.title.value]:[]);j.enter().insert("div","#d3po_"+t.type.value+"_"+t.container.id).attr("class","d3po_title").style("display","inline-block"),j.style("color",t.font.color).style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("padding",t.ui.padding.css).style("border-color","transparent").style("border-style","solid").style("border-width",t.ui.border+"px").text(String).each(function(e){t.margin.left=this.offsetWidth})}if(t.data.value.length){var w=t.format.locale.value.visualization[t.type.value];t.dev.value&&d.time("drawing "+w),t.types[t.type.value](t),t.dev.value&&d.timeEnd("drawing "+w)}else!t.data.url||t.data.loaded&&!t.data.stream||s(t,"data",t.self.draw);t.dev.value&&d.timeEnd("total draw time"),c(t)}}};return a(t,{active:e("./methods/active.js"),alt:e("./methods/alt.js"),color:e("./methods/color.js"),config:e("./methods/config.js"),container:e("./methods/container.js"),data:e("./methods/data.js"),depth:e("./methods/depth.js"),dev:e("./methods/dev.js"),draw:e("./methods/draw.js"),focus:e("./methods/focus.js"),font:e("./methods/font.js"),format:e("./methods/format.js"),height:e("./methods/height.js"),history:e("./methods/history.js"),hover:e("./methods/hover.js"),icon:e("./methods/icon.js"),id:e("./methods/id.js"),keywords:e("./methods/keywords.js"),margin:e("./methods/margin.js"),open:e("./methods/open.js"),order:e("./methods/order.js"),remove:e("./methods/remove.js"),search:e("./methods/search.js"),select:e("./methods/select.js"),selectAll:e("./methods/selectall.js"),text:e("./methods/text.js"),timing:e("./methods/timing.js"),title:e("./methods/title.js"),type:e("./methods/type.js"),ui:e("./methods/ui.js"),width:e("./methods/width.js")}),t.self}},{"../array/sort.js":29,"../client/ie.js":32,"../core/console/print.js":47,"../core/data/format.js":51,"../core/data/keys.js":53,"../core/data/load.js":54,"../core/fetch/data.js":60,"../core/methods/attach.js":78,"../core/methods/reset.js":91,"./methods/active.js":103,"./methods/alt.js":104,"./methods/color.js":105,"./methods/config.js":106,"./methods/container.js":107,"./methods/data.js":108,"./methods/depth.js":109,"./methods/dev.js":110,"./methods/draw.js":111,"./methods/focus.js":112,"./methods/font.js":113,"./methods/format.js":114,"./methods/height.js":115,"./methods/history.js":116,"./methods/hover.js":117,"./methods/icon.js":118,"./methods/id.js":119,"./methods/keywords.js":120,"./methods/margin.js":121,"./methods/open.js":122,"./methods/order.js":123,"./methods/remove.js":124,"./methods/search.js":125,"./methods/select.js":126,"./methods/selectall.js":127,"./methods/text.js":128,"./methods/timing.js":129,"./methods/title.js":130,"./methods/type.js":131,"./methods/ui.js":132,"./methods/width.js":133,"./types/auto.js":134,"./types/button/button.js":135,"./types/drop/drop.js":140,"./types/toggle.js":157}],103:[function(e,t,r){(function(){e("../../core/methods/filter.js"),t.exports={accepted:[!1,Array,Function,Number,String],value:!1}}).call(this)},{"../../core/methods/filter.js":79}],104:[function(e,t,r){(function(){var r;r=e("../../core/methods/filter.js"),t.exports={accepted:[!1,Array,Function,Object,String],mute:r(!0),solo:r(!0),value:"alt"}}).call(this)},{"../../core/methods/filter.js":79}],105:[function(e,t,r){(function(){t.exports={accepted:[String],value:"color"}}).call(this)},{}],106:[function(e,t,r){(function(){t.exports={accepted:[Object],objectAccess:!1,process:function(e,t){var r,n;for(r in e)n=e[r],r in t.self&&t.self[r](n);return e},value:{}}}).call(this)},{}],107:[function(e,t,r){(function(){var r;r=e("../../util/d3selection.js"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return!1===e?d3.select("body"):r(e)?e:e instanceof Array?d3.select(e[0][0]):(this.selector=e,d3.select(e))},value:d3.select("body")}}).call(this)},{"../../util/d3selection.js":206}],108:[function(e,t,r){var n=e("../../util/d3selection.js"),a=e("../../core/methods/process/data.js");t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},element:{process:function(e,t){var r=!1;return n(e)?r=e:"string"!=typeof e||d3.select(e).empty()||(r=d3.select(e)),r&&t.self.container(d3.select(r.node().parentNode)),r},value:!1},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],large:400,mute:[],process:function(e,t){return"default"===t.container.id&&e.length&&t.self.container({id:"default"+e.length}),a(e,t,this)},solo:[],sort:{accepted:[Boolean],value:!1},value:!1}},{"../../core/methods/process/data.js":85,"../../util/d3selection.js":206}],109:[function(e,t,r){(function(){t.exports={accepted:[Number],value:0}}).call(this)},{}],110:[function(e,t,r){(function(){t.exports={accepted:[Boolean],value:!1}}).call(this)},{}],111:[function(e,t,r){var n=e("../../util/d3selection.js"),a=e("../../core/parse/hideelement.js"),i=e("../../core/parse/element.js"),o=e("../../core/console/print.js"),s=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(!1===this.initialized)return this.initialized=!0,e;if(!t.data.value||t.data.value instanceof Array&&!n(t.data.value)?t.data.element.value&&t.data.element.value.call(a):t.data.value=i(t),void 0===e&&"function"==typeof this.value&&(e=this.value),!1===t.container.value){var r=t.format.locale.value.dev.setContainer;o.warning(r,"container")}else if(t.container.value.empty()){r=t.format.locale.value.dev.noContainer;var l=t.container.selector||"";o.warning(s(r,'"'+l+'"'),"container")}else t.dev.value&&o.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var u={};t.history.chain.forEach(function(e){var t=e.method;delete e.method,u[t]=e}),e(u),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.js":47,"../../core/parse/element.js":94,"../../core/parse/hideelement.js":95,"../../string/format.js":171,"../../util/d3selection.js":206}],112:[function(e,t,r){(function(){t.exports={accepted:[!1,Number,String],process:function(e,t){var r,n,a,i,o,s,l,u,c,d;if((n=t.data.element.value)&&["string","number"].indexOf(typeof e)>=0)if(a=n.node().tagName.toLowerCase(),i=n.attr("type"),"select"===a)for(o=s=0,u=(d=n.selectAll("option")).length;s<u;o=++s)(r=d[o])&&r[t.id.value]===e&&(n.node().selectedIndex=o);else if("input"===a&&"radio"===i)for(l=0,c=n.length;l<c;l++)r=n[l],this.checked=r&&r[t.id.value]===e;return e},value:!1}}).call(this)},{}],113:[function(e,t,r){(function(){var r,n,a,i;a=e("../../core/methods/font/family.js"),r=e("../../core/methods/font/align.js"),n=e("../../core/methods/font/decoration.js"),i=e("../../core/methods/font/transform.js"),t.exports={align:r(),color:"#444444",decoration:n(),family:a(),secondary:{align:r(),color:"#444444",decoration:n(),family:a(),size:12,spacing:0,transform:i(),weight:200},size:12,spacing:0,transform:i(),weight:200}}).call(this)},{"../../core/methods/font/align.js":80,"../../core/methods/font/decoration.js":81,"../../core/methods/font/family.js":82,"../../core/methods/font/transform.js":84}],114:[function(e,t,r){(function(){var r,n,a,i;r=e("../../number/format.js"),n=e("../../core/locale/locale.js"),a=e("../../object/merge.js"),i=e("../../string/title.js"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},locale:{accepted:function(){return d3.keys(n)},process:function(e){var t;return"en_US",t=n.en_US,"en_US"!==e&&(t=a(t,n[e])),this.language=e,t},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,a;return t||(t={}),(a=t.vars||{}).time&&a.time.value&&t.key===a.time.value?(n=e.constructor===Date?e:new Date(e),a.data.time.format(n)):"number"==typeof e?(this.number.value||r)(e,t):"string"==typeof e?(this.text.value||i)(e,t):JSON.stringify(e)}}}).call(this)},{"../../core/locale/locale.js":77,"../../number/format.js":168,"../../object/merge.js":169,"../../string/title.js":174}],115:[function(e,t,r){(function(){t.exports={accepted:[!1,Number],max:600,secondary:!1,value:!1}}).call(this)},{}],116:[function(e,t,r){(function(){t.exports={back:function(){if(this.states.length)return this.states.pop()()},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[]}}).call(this)},{}],117:[function(e,t,r){(function(){t.exports={accepted:[Boolean,Number,String],value:!1}}).call(this)},{}],118:[function(e,t,r){(function(){var r;r=e("../../core/methods/process/icon.js"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:r,rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:r,rotate:0,value:!1},drop:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:r,rotate:0,value:"fa-angle-down"},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:r,rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:r,rotate:0,value:"fa-check"},style:{accepted:[Object,String],value:"default"},value:"icon"}}).call(this)},{"../../core/methods/process/icon.js":87}],119:[function(e,t,r){(function(){var r;r=e("../../core/methods/filter.js"),t.exports={accepted:[Array,String],dataFilter:!0,mute:r(!0),nesting:["value"],solo:r(!0),value:"value"}}).call(this)},{"../../core/methods/filter.js":79}],120:[function(e,t,r){(function(){var r;r=e("../../core/methods/filter.js"),t.exports={accepted:[!1,Array,Function,Object,String],mute:r(!0),solo:r(!0),value:"keywords"}}).call(this)},{"../../core/methods/filter.js":79}],121:[function(e,t,r){(function(){var r;r=e("../../core/methods/process/margin.js"),t.exports={accepted:[Number,Object,String],process:function(e){var t;return void 0===e&&(e=this.value),t=e,r(e,this),t},value:0}}).call(this)},{"../../core/methods/process/margin.js":88}],122:[function(e,t,r){(function(){t.exports={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}}).call(this)},{}],123:[function(e,t,r){(function(){t.exports={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],value:"asc"},value:!1}}).call(this)},{}],124:[function(e,t,r){(function(){t.exports={accepted:[void 0,Function],process:function(e,t){this.initialized&&t.container.ui.remove(),delete t.container.ui},value:void 0}}).call(this)},{}],125:[function(e,t,r){(function(){t.exports={accepted:["auto",Boolean],process:function(e){return"Boolean"==typeof e&&(this.enabled=e),e},term:"",value:"auto"}}).call(this)},{}],126:[function(e,t,r){(function(){t.exports={accepted:[String],chainable:!1,process:function(e,t){var r;return(r=t.container.value)&&e?r.select(e):e},value:void 0}}).call(this)},{}],127:[function(e,t,r){(function(){t.exports={accepted:[String],chainable:!1,process:function(e,t){var r;return(r=t.container.value)&&e?r.selectAll(e):e},value:void 0}}).call(this)},{}],128:[function(e,t,r){(function(){var r;r=e("../../core/methods/filter.js"),t.exports={accepted:[!1,String],nesting:!0,mute:r(!0),solo:r(!0),secondary:{accepted:[!1,String],nesting:!0,value:!1},value:!1}}).call(this)},{"../../core/methods/filter.js":79}],129:[function(e,t,r){(function(){t.exports={mouseevents:60,ui:200}}).call(this)},{}],130:[function(e,t,r){(function(){var r,n,a,i;r=e("../../core/methods/font/decoration.js"),n=e("../../core/methods/font/family.js"),i=e("../../core/methods/font/transform.js"),a=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:r(),family:n(),size:16,transform:i(),weight:400},link:!1,process:function(e,t){var r;return 0===t.container.id.indexOf("default")&&e&&(r=a(e).toLowerCase(),t.self.container({id:r})),e},value:!1}}).call(this)},{"../../core/methods/font/decoration.js":81,"../../core/methods/font/family.js":82,"../../core/methods/font/transform.js":84,"../../string/strip.js":173}],131:[function(e,t,r){(function(){t.exports={accepted:function(e){return d3.keys(e.types)},value:"auto"}}).call(this)},{}],132:[function(e,t,r){(function(){var r,n,a,i,o;a=e("../../core/methods/font/family.js"),r=e("../../core/methods/font/align.js"),n=e("../../core/methods/font/decoration.js"),i=e("../../core/methods/process/margin.js"),o=e("../../core/methods/font/transform.js"),t.exports={align:r("center"),border:1,color:{primary:{process:function(e,t){var r;return r=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(r).darker(.75).formatHex()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:r("center"),color:"#444",decoration:n(),family:a(),size:11,transform:o(),weight:200},margin:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,i(e,this),t},value:5},padding:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,i(e,this),t},value:5}}}).call(this)},{"../../core/methods/font/align.js":80,"../../core/methods/font/decoration.js":81,"../../core/methods/font/family.js":82,"../../core/methods/font/transform.js":84,"../../core/methods/process/margin.js":88}],133:[function(e,t,r){(function(){t.exports={accepted:[!1,Number],secondary:!1,value:!1}}).call(this)},{}],134:[function(e,t,r){t.exports=function(e){var t=e.data.value.length;1===t?e.self.type("button").draw():t<5?e.self.type("toggle").draw():e.self.type("drop").draw()}},{}],135:[function(e,t,r){(function(){t.exports=function(t){var r,n,a,i,o,s,l,u;return s=e("../../../core/console/print.js"),a=e("./functions/color.js"),i=e("./functions/icons.js"),o=e("./functions/mouseevents.js"),l=e("./functions/style.js"),r=t.container.ui.selectAll("div.d3po_node").data(t.data.viz,function(e){return e[t.id.value]}),t.dev.value&&s.time("enter"),r.enter().append("div").attr("class","d3po_node").call(a,t).call(l,t).call(i,t).call(o,t),t.dev.value&&s.timeEnd("enter"),t.draw.update||t.draw.timing?(t.dev.value&&s.time("ordering"),r.order(),t.dev.value&&s.timeEnd("ordering"),u=r):(n=[t.focus.previous,t.focus.value,t.hover.previous,t.hover.value].filter(function(e){return e}),u=r.filter(function(e){return n.indexOf(e[t.id.value])>=0})),t.dev.value&&s.time("update"),u.classed("d3po_button_active",function(e){return t.focus.value===e[t.id.value]}),t.draw.timing?u.transition().duration(t.draw.timing).call(a,t).call(l,t):u.call(a,t).call(l,t),u.call(i,t).call(o,t),t.dev.value&&s.timeEnd("update"),r.exit().remove()}}).call(this)},{"../../../core/console/print.js":47,"./functions/color.js":136,"./functions/icons.js":137,"./functions/mouseevents.js":138,"./functions/style.js":139}],136:[function(e,t,r){(function(){t.exports=function(t,r){var n,a;return n=e("../../../../color/legible.js"),e("../../../../color/lighter.js"),a=e("../../../../color/text.js"),t.style("background-color",function(e){var t;return t=r.focus.value===e[r.id.value]?r.ui.color.secondary.value:r.ui.color.primary.value,r.hover.value===e[r.id.value]&&(t=d3.rgb(t).darker(.15).formatHex()),t}).style("color",function(e){var t,i,o;return o=r.focus.value===e[r.id.value]?.75:1,!(e[r.icon.value]&&r.data.viz.length<r.data.large)&&e[r.color.value]?i=n(e[r.color.value]):(t=r.focus.value===e[r.id.value]?r.ui.color.secondary.value:r.ui.color.primary.value,r.hover.value===e[r.id.value]&&(t=d3.rgb(t).darker(.15).formatHex()),i=a(t)),"rgba("+(i=d3.rgb(i)).r+","+i.g+","+i.b+","+o+")"}).style("border-color",r.ui.color.secondary.value)}}).call(this)},{"../../../../color/legible.js":39,"../../../../color/lighter.js":40,"../../../../color/text.js":45}],137:[function(e,t,r){var n=e("../../../../client/prefix.js"),a=e("../../../../client/rtl.js");t.exports=function(e,t){var r="right"===t.font.align.value&&!a||a&&"right"===t.font.align.value;e.each(function(e,i){var o=["label"];e[t.icon.value]&&t.data.viz.length<=t.data.large&&o.push("icon");var s=t.icon.button.value;e[t.id.value]===t.focus.value&&t.icon.select.value?(s=t.icon.select.value,o.push("selected")):s&&!1!==e.d3po.icon&&o.push("selected");var l=0,u=d3.select(this).selectAll("div.d3po_button_element").data(o,function(e){return e});u.enter().append("div").style("display",function(e){return"label"===e?"block":"absolute"}),u.order().attr("class",function(e){var t="";return"selected"===e&&0===s.indexOf("fa-")&&(t=" fa "+s),"d3po_button_element d3po_button_"+e+t}).html(function(r){if("label"===r){var n=t.text.value&&t.text.value in e&&!(e[t.text.value]instanceof Array)?t.text.value:t.id.value;return t.format.value(e[n])}return"selected"===r&&s.indexOf("fa-")<0?s:""}).style("background-image",function(r){return"icon"===r?"url('"+e[t.icon.value]+"')":"none"}).style("background-color",function(r){return"icon"===r&&"knockout"===e.style?e[t.color.value]||t.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(e){return"label"===e?t.font.align.value:"center"}).style("position",function(e){return"label"==e?"static":"absolute"}).style("width",function(e){return"label"===e?"auto":(l=t.height.value?t.height.value-(t.ui.padding.top+t.ui.padding.bottom)-2*t.ui.border:t.font.size+t.ui.border)+"px"}).style("height",function(e){return"icon"===e?l+"px":"auto"}).style("margin-top",function(e){if("label"===e)return"0px";if(this.offsetHeight||this.getBoundingClientRect().height)var r=this.offsetHeight||this.getBoundingClientRect().height;else if("selected"===e)r=t.font.size;else r=l;return-r/2+"px"}).style("top",function(e){return"label"===e?"auto":"50%"}).style("left",function(e){return"icon"===e&&!r||"selected"===e&&r?t.ui.padding.left+"px":"auto"}).style("right",function(e){return"icon"===e&&r||"selected"===e&&!r?t.ui.padding.right+"px":"auto"}).style(n()+"transition",function(e){return"selected"===e?t.draw.timing/1e3+"s":"none"}).style(n()+"transform",function(e){var r="selected"===e?t.icon.select.rotate:"none";return"string"==typeof r?r:"rotate("+r+"deg)"}).style("opacity",function(e){return"selected"===e?t.icon.select.opacity:1}),u.exit().remove();var c=d3.select(this).selectAll(".d3po_button_label");if(l>0){var d=t.ui.padding;d=3===o.length?d.top+"px "+(2*d.right+l)+"px "+d.bottom+"px "+(2*d.left+l)+"px":o.indexOf("icon")>=0&&!a||o.indexOf("selected")>=0&&a?d.top+"px "+d.right+"px "+d.bottom+"px "+(2*d.left+l)+"px":d.top+"px "+(2*d.right+l)+"px "+d.bottom+"px "+d.left+"px",c.style("padding",d)}else c.style("padding",t.ui.padding.css);if("number"==typeof t.width.value){var f=t.width.value;f-=parseFloat(c.style("padding-left"),10),f-=parseFloat(c.style("padding-right"),10),f-=2*t.ui.border,f+="px"}else f="auto";c.style("width",f)})}},{"../../../../client/prefix.js":34,"../../../../client/rtl.js":35}],138:[function(e,t,r){(function(){t.exports=function(t,r,n){var a,i;return n=e("./color.js"),a=e("../../../../client/pointer.js"),i=e("../../../../client/ie.js"),t.on(a.over,function(e,t){return r.self.hover(e[r.id.value]),i||!r.draw.timing?d3.select(this).style("cursor","pointer").call(n,r):d3.select(this).style("cursor","pointer").transition().duration(r.timing.mouseevents).call(n,r)}).on(a.out,function(e){return r.self.hover(!1),i||!r.draw.timing?d3.select(this).style("cursor","auto").call(n,r):d3.select(this).style("cursor","auto").transition().duration(r.timing.mouseevents).call(n,r)}).on(a.click,function(e){return!1!==r.focus.value?r.self.focus(e[r.id.value]).draw():r.focus.callback?r.focus.callback(e,r.self):void 0})}}).call(this)},{"../../../../client/ie.js":32,"../../../../client/pointer.js":33,"./color.js":136}],139:[function(e,t,r){t.exports=function(e,t){e.style("position","relative").style("margin",t.ui.margin.css).style("display",t.ui.display.value).style("border-style","solid").style("border-width",t.ui.border+"px").style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("letter-spacing",t.font.spacing+"px")}},{}],140:[function(e,t,r){(function(){t.exports=function(t){var r,n,a,i,o,s,l,u,c,d,f;return a=e("./functions/element.js"),i=e("./functions/keyboard.js"),f=e("./functions/window.js"),d=e("./functions/width.js"),r=e("./functions/button.js"),l=e("./functions/selector.js"),u=e("./functions/title.js"),s=e("./functions/search.js"),o=e("./functions/list.js"),n=e("./functions/data.js"),c=e("./functions/update.js"),t.margin.top=0,t.margin.title=0,a(t),i(t),f(t),d(t),r(t),l(t),u(t),s(t),o(t),n(t),c(t)}}).call(this)},{"./functions/button.js":143,"./functions/data.js":144,"./functions/element.js":145,"./functions/keyboard.js":148,"./functions/list.js":149,"./functions/search.js":151,"./functions/selector.js":152,"./functions/title.js":153,"./functions/update.js":154,"./functions/width.js":155,"./functions/window.js":156}],141:[function(e,t,r){t.exports=function(e,t,r){var n=[];if((r=r||e.active.value)instanceof Array)for(var a=0;a<r.length;a++)n.push(this(e,t,r[a]));else{var i=typeof r;"number"===i?n.push(e.depth.value===r):"function"===i?n.push(r(t)):n.push(t===r)}return n.indexOf(!0)>=0}},{}],142:[function(e,t,r){var n=e("../../../../core/console/print.js");t.exports=function(e){e.dev.value&&n.time("rotating arrow");var t="&#x276f;"===e.icon.drop.value?90:0;if(e.open.value!=e.open.flipped.value)var r=180+t;else r=t;e.container.button.icon({select:{opacity:e.open.value?.5:1,rotate:r}}).draw(),e.dev.value&&n.timeEnd("rotating arrow")}},{"../../../../core/console/print.js":47}],143:[function(e,t,r){var n=e("../../../../util/copy.js"),a=e("../../../../client/pointer.js"),i=e("../../../form.js"),o=e("../../../../core/console/print.js");t.exports=function(e){if("button"in e.container||(e.dev.value&&o.time("creating main button"),e.container.button=i().container(e.container.ui).type("button").ui({margin:0}),e.dev.value&&o.timeEnd("creating main button")),e.focus.changed||e.data.changed||e.depth.changed){var t=e.depth.value,r=n(e.data.value.filter(function(r){for(var n=!1,a=0;a<e.id.nesting.length;a++){var i=e.id.nesting[a];if(n=i in r&&r[i]===e.focus.value){t=a;break}}return n})[0]);r||(r=e.container.button.data()[0]||e.data.viz[0]),e.container.button.data([r]).id(e.id.nesting).depth(t)}var s=!0===e.hover.value&&e.focus.value;e.container.button.draw({update:e.draw.update}).focus("").font(e.font).format(e.format).hover(s).icon({button:e.icon.drop.value,select:e.icon.drop.value,value:e.icon.value}).text(e.text.value).timing({ui:e.draw.timing}).ui({border:e.ui.border,color:e.ui.color,padding:e.ui.padding.css}).width(e.width.value).draw();var l=e.container.button.container(Object).ui;e.margin.top+=l.node().offsetHeight||l.node().getBoundingClientRect().height,l.on(a.click,function(){e.self.open(!e.open.value).draw()})}},{"../../../../client/pointer.js":33,"../../../../core/console/print.js":47,"../../../../util/copy.js":205,"../../../form.js":102}],144:[function(e,t,r){var n=e("../../../../string/format.js"),a=e("../../../../string/strip.js");t.exports=function(e){if(e.data.url&&!e.data.loaded){var t={};t[e.text.value||e.id.value]=e.format.value(e.format.locale.value.ui.loading),e.data.filtered=[t],e.data.changed="loading"!==e.data.lastFilter,e.data.lastFilter="loading"}else if(e.open.value)if(e.search.term){var r=a(e.search.term).split("_"),i=[e.id.value,e.text.value,e.alt.value,e.keywords.value];i=i.filter(function(e){return e}),r=r.filter(function(e){return""!==e});var o=[],s=[],l=[],u=[];if(e.id.nesting.forEach(function(t){u=u.concat(e.data.nested.all[t])}),u.forEach(function(t){var n=!1;i.forEach(function(i){if(!n&&i in t&&"string"==typeof t[i]){var u=t[i].toLowerCase();if([e.text.value,e.id.value].indexOf(i)>=0&&0===u.indexOf(e.search.term))o.push(t),n=!0;else if(u.indexOf(e.search.term)>=0)s.push(t),n=!0;else{var c=a(u).split("_");for(var d in c){if(n)break;for(var f in r)if(0===c[d].indexOf(r[f])){l.push(t),n=!0;break}}}}})}),e.data.filtered=d3.merge([o,s,l]),e.data.filtered.forEach(function(e,t){e.d3po_order=t}),e.data.changed=!0,e.data.lastFilter="search",0===e.data.filtered.length){var c={},d=e.format.value(e.format.locale.value.ui.noResults);c[e.text.value||e.id.value]=n(d,'"'+e.search.term+'"'),e.data.filtered=[c]}}else e.data.filtered=e.data.viz,e.data.changed="viz"!==e.data.lastFilter,e.data.lastFilter="viz",e.id.nesting.length>1&&e.depth.value<e.id.nesting.length-1&&(e.data.filtered=e.data.filtered.filter(function(t){return"endPoint"in t.d3po&&t.d3po.endPoint===e.depth.value&&(t.d3po.icon=!1),!0}),e.data.changed="depth"!==e.data.lastFilter,e.data.lastFilter="depth");else e.data.filtered=[]}},{"../../../../string/format.js":171,"../../../../string/strip.js":173}],145:[function(e,t,r){(function(){t.exports=function(e){if(e.data.element.value)return e.data.element.value.on("focus."+e.container.id,function(){return e.self.hover(!0).draw()}),e.data.element.value.on("blur."+e.container.id,function(){if(!e.search.enabled||d3.event.relatedTarget!==e.container.value.select("input").node())return e.self.open(!1).hover(!1).draw()}),e.data.element.value.on("change."+e.container.id,function(){return e.self.focus(this.value).draw()}),e.data.element.value.on("keydown.cancel_"+e.container.id,function(){if(9!==d3.event.keyCode)return d3.event.preventDefault()})}}).call(this)},{}],146:[function(e,t,r){t.exports=function(e){var t=e.height.secondary,r=e.container.button.container().node().getBoundingClientRect(),n=window.innerHeight-r.bottom-2*e.ui.border-e.ui.margin.top-e.ui.margin.bottom-e.ui.padding.top-e.ui.padding.bottom;n<3*r.height&&(n=r.top-10,e.self.open({flipped:!0})),"number"!=typeof t&&(t=n),t>e.height.max&&(t=e.height.max),e.self.height({secondary:t})}},{}],147:[function(e,t,r){(function(){var r,n,a,i;r=e("./active.js"),n=e("../../../../util/copy.js"),a=e("../../../form.js"),i=e("../../../../core/console/print.js"),t.exports=function(e){var t,o,s;e.open.value&&(e.dev.value&&i.time("updating list items"),"items"in e.container||(e.container.items=a().container(e.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1)),o=e.draw.timing?e.data.large:1,(s=n(e.order)).value=e.search.term.length?"d3po_order":e.order.value,t=e.depth.value===e.id.nesting.length-1,(e.focus.changed||!1===e.container.items.focus())&&e.container.items.focus(e.focus.value,function(t){var n,a,i,o;a=e.data.filtered.filter(function(r){return r[e.id.value]===t})[0],e.depth.value<e.id.nesting.length-1&&e.id.nesting[e.depth.value+1]in a?(i=e.depth.value,o=e.id.solo.value,e.history.states.push(function(){return e.self.depth(i).id({solo:o}).draw()}),e.self.depth(e.depth.value+1).id({solo:[t]}).draw()):(e.depth.changed||e.self.open(!1),(n=t!==e.focus.value)&&e.active.value&&(n=r(e,t)),n&&e.self.focus(t).draw())}),e.container.items.active(e.active.value).data({large:o,sort:e.data.sort.value,value:e.data.filtered}).draw({update:e.draw.update}).font(e.font.secondary).format(e.format).hover(e.hover.value).id(e.id.value).icon({button:!t&&e.icon.next,select:!!t&&e.icon.select,value:e.icon.value}).order(s).text(e.text.secondary.value||e.text.value).timing({ui:e.draw.timing}).ui({color:{primary:1===e.id.nesting.length?e.ui.color.primary.value:e.ui.color.secondary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding.css}).draw(),e.dev.value&&i.timeEnd("updating list items"))}}).call(this)},{"../../../../core/console/print.js":47,"../../../../util/copy.js":205,"../../../form.js":102,"./active.js":141}],148:[function(e,t,r){(function(){t.exports=function(e){return d3.select(window).on("keydown."+e.container.id,function(){var t,r,n,a,i,o,s,l,u,c,d,f;if(l=d3.event.keyCode,e.open.value||!0===e.hover.value){for(c=!0===e.hover.value?"focus":"hover",o=!1,i=s=0,u=(d=e.data.filtered).length;s<u;i=++s)if(d[i][e.id.value]===e[c].value){o=i;break}if(9===l&&e.open.value&&(!e.search.enabled||e.search.enabled&&!d3.event.shiftKey))return e.self.open(!1).hover(!1).draw();if([38,40].indexOf(l)>=0)return!1===o?o=0:38===l?e.open.value&&(o<=0?o=e.data.filtered.length-1:o-=1):40===l&&e.open.value&&(o>=e.data.filtered.length-1?o=0:o+=1),a="boolean"!=typeof e.hover.value?e.data.filtered[o][e.id.value]:e.focus.value,e.self.hover(a).open(!0).draw();if(13===l)return"boolean"!=typeof e.hover.value?(t=e.data.filtered.filter(function(t){return t[e.id.value]===e.hover.value})[0],(r=e.depth.value)<e.id.nesting.length-1&&e.id.nesting[r+1]in t?(f=e.id.solo.value,n=function(){return e.self.depth(r).id({solo:f}).draw()},e.history.states.push(n),e.self.depth(e.depth.value+1).id({solo:[e.hover.value]}).draw()):e.self.focus(e.hover.value).hover(!0).draw()):e.self.hover(e.focus.value).open(!0).draw();if(27===l){if(e.open.value)return e.self.open(!1).hover(!0).draw();if(!0===e.hover.value)return e.self.hover(!1).draw()}}})}}).call(this)},{}],149:[function(e,t,r){var n=e("../../../../core/console/print.js");t.exports=function(e){e.dev.value&&n.time("populating list"),e.container.list=e.container.selector.selectAll("div.d3po_drop_list").data(["list"]),e.container.list.enter().append("div").attr("class","d3po_drop_list").attr("id","d3po_drop_list_"+e.container.id).style("overflow-y","auto").style("overflow-x","hidden"),e.dev.value&&n.timeEnd("populating list")}},{"../../../../core/console/print.js":47}],150:[function(e,t,r){var n=e("../../../../core/console/print.js");t.exports=function(e){if(e.open.value){e.dev.value&&n.time("calculating height");var t=!1;if("none"==e.container.selector.style("display"))t=!0;t&&e.container.selector.style("display","block");var r=e.container.selector.style("height"),a=e.container.selector.property("scrollTop"),i=e.container.list.style("max-height"),o=e.container.list.property("scrollTop");e.container.selector.style("height","auto"),e.container.list.style("max-height","200000px"),e.container.listHeight=parseFloat(e.container.selector.style("height"),10),e.container.list.style("max-height",i).property("scrollTop",o),e.container.selector.style("height",r).property("scrollTop",a);var s=!1;if(e.container.listHeight>e.height.secondary&&(e.container.listHeight=e.height.secondary,s=!0),t&&e.container.selector.style("display","none"),e.dev.value&&n.timeEnd("calculating height"),s){e.dev.value&&n.time("calculating scroll position");var l=e.container.list.select("div").selectAll("div.d3po_node"),u=l[0][0],c="boolean"!=typeof e.hover.value?e.hover.value:e.focus.value;l.each(function(t,r){t[e.id.value]===c&&(u=this)});t=!1;"none"===e.container.selector.style("display")&&(t=!0,e.container.selector.style("display","block"));var d=u.offsetTop,f=u.offsetHeight||u.getBoundingClientRect().height,p=e.container.list.property("scrollTop");t&&e.container.selector.style("display","none"),t||e.data.changed||e.depth.changed?e.container.listScroll=d:(e.container.listScroll=p,d<p?e.container.listScroll=d:d+f>p+e.height.secondary-e.search.height&&(e.container.listScroll=d-(e.height.secondary-f-e.search.height))),e.dev.value&&n.timeEnd("calculating scroll position")}else e.container.listScroll=0}else e.container.listScroll=e.container.list.property("scrollTop"),e.container.listHeight=0}},{"../../../../core/console/print.js":47}],151:[function(e,t,r){var n=e("../../../../client/prefix.js"),a=e("../../../../core/console/print.js");t.exports=function(t){t.dev.value&&a.time("creating search");var r=e("./data.js"),i=e("./items.js"),o=e("./update.js");function s(e){e.style("padding",t.ui.padding.css).style("display","block").style("background-color",d3.rgb(t.ui.color.primary.value).darker(.15).formatHex())}function l(e){var r=t.width.secondary-2*t.ui.padding.left-2*t.ui.padding.right+2*t.ui.border;e.style("padding",t.ui.padding.left/2+t.ui.padding.right/2+"px").style("width",r+"px").style("border-width","0px").style("font-family",t.font.secondary.family.value).style("font-size",t.font.secondary.size+"px").style("font-weight",t.font.secondary.weight).style("text-align",t.font.secondary.align).style("outline","none").style(n()+"border-radius","0").attr("placeholder",t.format.value(t.format.locale.value.method.search))}t.container.search=t.container.selector.selectAll("div.d3po_drop_search").data(t.search.enabled?["search"]:[]),t.draw.timing?(t.container.search.transition().duration(t.draw.timing).call(s),t.container.search.select("input").transition().duration(t.draw.timing).call(l)):(t.container.search.call(s),t.container.search.select("input").call(l)),t.container.search.enter().insert("div","#d3po_drop_list_"+t.container.id).attr("class","d3po_drop_search").attr("id","d3po_drop_search_"+t.container.id).call(s).append("input").attr("id","d3po_drop_input_"+t.container.id).style("-webkit-appearance","none").call(l),t.container.search.select("input").on("keyup."+t.container.id,function(e){var n=this.value;t.search.term!==n&&(t.search.term=n,r(t),i(t),o(t))}),t.container.search.exit().remove();var u=t.container.selector.style("display");t.container.selector.style("display","block"),t.search.height=t.search.enabled?t.container.search.node().offsetHeight||t.container.search.node().getBoundingClientRect().height:0,t.container.selector.style("display",u),t.search.enabled&&(t.margin.title+=t.search.height),t.dev.value&&a.timeEnd("creating search")}},{"../../../../client/prefix.js":34,"../../../../core/console/print.js":47,"./data.js":144,"./items.js":147,"./update.js":154}],152:[function(e,t,r){t.exports=function(e){e.container.selector=e.container.ui.selectAll("div.d3po_drop_selector").data(["selector"]),e.container.selector.enter().append("div").attr("class","d3po_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden"),e.container.selector.style("padding",e.ui.border+"px")}},{}],153:[function(e,t,r){var n=e("../../../../client/pointer.js"),a=e("../../../../color/lighter.js"),i=e("../../../../core/console/print.js"),o=e("../../../../color/text.js");t.exports=function(e){if(e.open.value){e.dev.value&&i.time("creating title and back button");var t=1===e.id.solo.value.length&&e.depth.value>0,r=t,s=e.container.button.data(Object).viz[0];r=!0;for(var l=0;l<e.id.nesting.length;l++){var u=e.id.nesting[l];if(u in s&&s[u]===e.focus.value){r=!1;break}}function c(t){t.style("padding",e.ui.padding.css).style("display","block").style("background-color",e.ui.color.secondary.value).style("font-family",e.font.secondary.family.value).style("font-size",e.font.secondary.size+"px").style("font-weight",e.font.secondary.weight).style("text-align",e.font.secondary.align).style("color",o(e.ui.color.secondary.value))}function d(t){if(!t.empty()){var r=0===e.icon.back.value.indexOf("fa-")?" fa "+e.icon.back.value:"";r="d3po_drop_back"+r;var n=0===e.icon.back.value.indexOf("fa-")?"":e.icon.back.value;t.style("position","absolute").attr("class",r).style("top",e.ui.padding.top+e.font.secondary.size/2/2.5+"px").html(n)}}function f(t){var n=r?e.focus.value:e.format.locale.value.ui.back;t.text(e.format.value(n)).style("padding","0px "+(e.ui.padding.left+e.ui.padding.right)+"px")}e.container.title=e.container.selector.selectAll("div.d3po_drop_title").data(t?["title"]:[]),e.draw.timing?(e.container.title.transition().duration(e.draw.timing).call(c),e.container.title.select("div.d3po_drop_title_text").transition().duration(e.draw.timing).call(f)):(e.container.title.call(c),e.container.title.select("div.d3po_drop_title_text").call(f)),e.container.title.select("span.d3po_drop_back").call(d);var p=e.container.title.enter().insert("div","#d3po_drop_list_"+e.container.id).attr("class","d3po_drop_title").attr("id","d3po_drop_title_"+e.container.id).call(c);p.append("span").attr("id","d3po_drop_back_"+e.container.id).attr("class","d3po_drop_back").call(d),p.append("div").attr("id","d3po_drop_title_text_"+e.container.id).attr("class","d3po_drop_title_text").call(f),e.container.title.on(n.over,function(t,r){var n=a(e.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("background-color",n).style("color",o(n))}).on(n.out,function(t){var r=e.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("background-color",r).style("color",o(r))}).on(n.click,function(t){e.history.back()}),e.container.title.exit().remove(),t&&(e.margin.title+=e.container.title.node().offsetHeight||e.container.title.node().getBoundingClientRect().height),e.dev.value&&i.timeEnd("creating title and back button")}}},{"../../../../client/pointer.js":33,"../../../../color/lighter.js":40,"../../../../color/text.js":45,"../../../../core/console/print.js":47}],154:[function(e,t,r){var n=e("./items.js"),a=e("./height.js"),i=e("../../../../core/console/print.js"),o=e("./scroll.js"),s=e("./arrow.js");t.exports=function(e){function t(t){var r=e.open.flipped.value;t.style("top",function(){return r?"auto":e.margin.top-e.ui.border+"px"}).style("bottom",function(){return r?e.margin.top+e.ui.border+"px":"auto"})}function r(r){r.style("left",function(){return"left"===e.font.align.value?e.margin.left+"px":"center"===e.font.align.value?e.margin.left-(e.width.secondary-e.width.value)/2+"px":"auto"}).style("right",function(){return"right"===e.font.align.value?"0px":"auto"}).style("height",e.container.listHeight+"px").style("padding",e.ui.border+"px").style("background-color",e.ui.color.secondary.value).style("z-index",function(){return e.open.value?"9999":"-1"}).style("width",e.width.secondary-2*e.ui.border+"px").style("opacity",e.open.value?1:0).call(t)}function l(r){r.style("display",e.open.value?null:"none").call(t),e.search.enabled&&e.open.value&&e.container.selector.select("div.d3po_drop_search input").node().focus()}e.draw.timing?e.container.ui.transition().duration(e.draw.timing).each("start",function(){e.open.value&&d3.select(this).style("z-index",9999)}).style("margin",e.ui.margin.css).each("end",function(){e.open.value||d3.select(this).style("z-index","auto")}):e.container.ui.style("margin",e.ui.margin.css).style("z-index",function(){return e.open.value?9999:"auto"}),n(e),a(e),o(e),s(e),e.dev.value&&i.time("drawing list");var u,c=e.open.value?e.height.secondary-e.margin.title:0;if(e.draw.timing){e.container.selector.transition().duration(e.draw.timing).each("start",function(){d3.select(this).style("display",e.open.value?"block":null)}).call(r).each("end",function(){d3.select(this).transition().duration(e.draw.timing).call(l)}),e.container.list.transition().duration(e.draw.timing).style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").tween("scroll",(u=e.container.listScroll,function(){var e=d3.interpolateNumber(this.scrollTop,u);return function(t){this.scrollTop=e(t)}}))}else e.container.selector.call(r).call(l),e.container.list.style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").property("scrollTop",e.container.listScroll);e.dev.value&&i.timeEnd("drawing list")}},{"../../../../core/console/print.js":47,"./arrow.js":142,"./height.js":146,"./items.js":147,"./scroll.js":150}],155:[function(e,t,r){var n=e("../../../../util/copy.js"),a=e("../../../../core/font/tester.js"),i=e("../../../form.js"),o=e("../../../../core/console/print.js"),s=e("../../../../object/validate.js");t.exports=function(e){var t=[];for(var r in e.data.nested.all){var l=e.data.nested.all[r],u=s(e.text.nesting)&&r in e.text.nesting?e.text.nesting[r][0]:r;[e.id.value,e.text.value].indexOf(u)<0&&(l=n(l)).forEach(function(t){t[e.text.value||e.id.value]=t[u]}),t=t.concat(l)}function c(r){var n="primary"===r?"value":r,s="value"===n?e.icon.drop.value:e.icon.select.value||e.icon.drop.value,l="value"===n?e.text.value:e.text.secondary.value||e.text.value,u="value"===n?e.font:e.font.secondary;e.dev.value&&o.time("calculating "+r+" width");var c=i().container(a()).data({large:9999,value:t}).draw({update:!1}).font(u).format(e.format).icon({button:s,value:e.icon.value}).id(e.id.value).timing({ui:0}).text(l||e.id.value).type("button").ui({border:"primary"===r?e.ui.border:0,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(!1).draw(),d=[];c.selectAll("div.d3po_node").each(function(e){d.push(this.offsetWidth+1)}).remove();var f={};f[n]=d3.max(d),e.self.width(f),e.dev.value&&o.timeEnd("calculating "+r+" width")}"number"!=typeof e.width.value&&c("primary"),"number"!=typeof e.width.secondary&&(e.text.secondary.value&&e.text.value!==e.text.secondary.value?c("secondary"):e.self.width({secondary:e.width.value}))}},{"../../../../core/console/print.js":47,"../../../../core/font/tester.js":64,"../../../../object/validate.js":170,"../../../../util/copy.js":205,"../../../form.js":102}],156:[function(e,t,r){var n=e("../../../../util/child.js"),a=function(e,t){if(void 0===t)t=window;d3.select(t).on("click."+e.container.id,function(){var t=d3.event.target||d3.event.toElement,r=t.parentNode;r&&["d3po_node","d3po_drop_title"].indexOf(r.className)>=0&&(t=r.parentNode),t&&r&&!n(e.container.ui,t)&&(e.open.value||e.hover.value)&&e.self.open(!1).hover(!1).draw()});try{var r=window.parent.location.host===window.location.host}catch(e){r=!1}r&&t.self!==window.top&&a(e,t.parent)};t.exports=a},{"../../../../util/child.js":203}],157:[function(e,t,r){var n=e("../form.js");t.exports=function(e){"buttons"in e.container||(e.container.buttons=n().container(e.container.ui).type("button"));var t=e.data.viz.length,r=!!e.width.value&&e.width.value/t,a=e.container.ui.selectAll("div.d3po_toggle").data(e.data.viz,function(t){return t[e.id.value]});a.exit().remove(),a.enter().append("div").attr("class","d3po_toggle").style("display","inline-block").style("vertical-align","top"),a.order().each(function(t){"form"in t.d3po||(t.d3po.form=n().container(d3.select(this)));var a=e.id.nesting.length>e.depth.value?e.id.nesting[e.depth.value+1]:e.id.value;t[a]instanceof Array?t.d3po.form.container({id:e.container.id+"_"+t[e.id.value]}).data(t[a]).id(e.id.nesting.slice(1)).type("drop"):t.d3po.form.data([t]).id(e.id.value).type("button"),t.d3po.form.color(e.color).focus(e.focus.value,function(t){t!==e.focus.value&&e.self.focus(t).draw()}).hover(e.hover.value).icon({select:!1,value:e.icon.value}).font(e.font).format(e.format).order(e.order).text(e.text.value).ui({border:e.ui.border,color:e.ui.color,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(r).draw()}),e.data.element.value&&e.data.element.value.on("focus."+e.container.id,function(){e.self.focus(this.value).hover(this.value).draw()}).on("blur."+e.container.id,function(){e.self.hover(!1).draw()})}},{"../form.js":102}],158:[function(e,t,r){(function(){var r,n,a,i,o,s,l,u,c,d,f;d=e("simplify-js"),t.exports=function(e,t){var n,i,s,l,c,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T,q,N,I,V,D,P,U,R,L,H,Y,X,G,J,Q,W,K,Z,$,ee,te,re,ne,ae,ie,oe,se,le,ue,ce,de,fe,pe,he,ve,ge,me;if(e.length<3)return null;if(y=[],.5,5,null==t&&(t={}),null==t.maxAspectRatio&&(t.maxAspectRatio=15),null==t.minWidth&&(t.minWidth=0),null==t.minHeight&&(t.minHeight=0),null==t.tolerance&&(t.tolerance=.02),null==t.nTries&&(t.nTries=20),null!=t.angle&&(t.angle instanceof Array?c=t.angle:"number"==typeof t.angle?c=[t.angle]:"string"!=typeof t.angle||isNaN(t.angle)||(c=[Number(t.angle)])),null==c&&(c=d3.range(-90,95,5)),null!=t.aspectRatio&&(t.aspectRatio instanceof Array?h=t.aspectRatio:"number"==typeof t.aspectRatio?h=[t.aspectRatio]:"string"!=typeof t.aspectRatio||isNaN(t.aspectRatio)||(h=[Number(t.aspectRatio)])),null!=t.origin&&t.origin instanceof Array&&(X=t.origin[0]instanceof Array?t.origin:[t.origin]),0===(p=Math.abs(d3.polygonArea(e))))return null;if(U=($=d3.extent(e,function(e){return e[0]}))[0],N=$[1],R=(ee=d3.extent(e,function(e){return e[1]}))[0],I=ee[1],pe=Math.min(N-U,I-R)*t.tolerance,fe=function(){var t,r,n;for(n=[],t=0,r=e.length;t<r;t++)G=e[t],n.push({x:G[0],y:G[1]});return n}(),pe>0&&(fe=d(fe,pe),e=function(){var e,t,r;for(r=[],e=0,t=fe.length;e<t;e++)G=fe[e],r.push([G.x,G.y]);return r}()),t.vdebug&&y.push({type:"simplify",poly:e}),U=(te=d3.extent(e,function(e){return e[0]}))[0],N=te[1],[[U,R=(re=d3.extent(e,function(e){return e[1]}))[0]],[N,R],[N,I=re[1]],[U,I]],g=(ne=[N-U,I-R])[0],v=ne[1],ve=Math.min(g,v)/50,null==X)for(X=[],m=d3.polygonCentroid(e),a(m,e)&&X.push(m);X.length<t.nTries;)ce=Math.random()*g+U,de=Math.random()*v+R,a(ue=[ce,de],e)&&X.push(ue);for(t.vdebug&&y.push({type:"origins",points:X}),F=0,T=null,w=0,A=c.length;w<A;w++)for(l=-(s=c[w])*Math.PI/180,t.vdebug&&y.push({type:"angle",angle:s}),b=_=0,M=X.length;_<M;b=++_)for(H=X[b],Q=(ae=r(e,H,l))[0],K=ae[1],J=(ie=r(e,H,l+Math.PI/2))[0],W=ie[1],L=[],null!=Q&&null!=K&&L.push([(Q[0]+K[0])/2,(Q[1]+K[1])/2]),null!=J&&null!=W&&L.push([(J[0]+W[0])/2,(J[1]+W[1])/2]),t.vdebug&&y.push({type:"modifOrigin",idx:b,p1W:Q,p2W:K,p1H:J,p2H:W,modifOrigins:L}),k=0,O=L.length;k<O;k++)if(Y=L[k],t.vdebug&&y.push({type:"origin",cx:Y[0],cy:Y[1]}),Q=(oe=r(e,Y,l))[0],K=oe[1],null!==Q&&null!==K&&(P=Math.min(f(Y,Q),f(Y,K)),q=2*Math.sqrt(P),J=(se=r(e,Y,l+Math.PI/2))[0],W=se[1],null!==J&&null!==W&&(D=Math.min(f(Y,J),f(Y,W)),!(q*(B=2*Math.sqrt(D))<F))))for(null!=h?i=h:(V=Math.max(1,t.minWidth/B,F/(B*B)),C=Math.min(t.maxAspectRatio,q/t.minHeight,q*q/F),i=d3.range(V,C+.5,.5)),E=0,S=i.length;E<S;E++)if(n=i[E],z=Math.max(t.minWidth,Math.sqrt(F*n)),!((le=Math.min(q,B*n))*B<F))for(le-z>=ve&&t.vdebug&&y.push({type:"aRatio",aRatio:n});le-z>=ve;)x=(he=(z+le)/2)/n,ge=Y[0],me=Y[1],Z=u(Z=[[ge-he/2,me-x/2],[ge+he/2,me-x/2],[ge+he/2,me+x/2],[ge-he/2,me+x/2]],l,Y),o(Z,e)?(j=!0,F=he*x,T={cx:ge,cy:me,width:he,height:x,angle:s},z=he):(j=!1,le=he),t.vdebug&&y.push({type:"rectangle",cx:ge,cy:me,width:he,height:x,areaFraction:he*x/p,angle:s,insidePoly:j});return[T,F,y]},f=function(e,t){var r,n;return(r=t[0]-e[0])*r+(n=t[1]-e[1])*n},s=function(e,t,r){var n,a,i,o;return n=(o=t[1]<r[1]?[t,r]:[r,t])[0],a=o[1],e[1]!==a[1]&&e[1]!==n[1]||(e[1]+=Number.MIN_VALUE),!(e[1]>a[1]||e[1]<n[1])&&(!(e[0]>n[0]&&e[0]>a[0])&&(e[0]<n[0]&&e[0]<a[0]||(i=(a[1]-n[1])/(a[0]-n[0]),(e[1]-n[1])/(e[0]-n[0])>i)))},a=function(e,t){var r,n,a,i,o;for(i=-1,n=t[(o=t.length)-1],a=0;++i<o;)r=n,n=t[i],s(e,r,n)&&a++;return a%2!=0},i=function(e,t,r){var n,a;return 1e-9,n=e[0],a=e[1],!(n<Math.min(t[0],r[0])-1e-9||n>Math.max(t[0],r[0])+1e-9||a<Math.min(t[1],r[1])-1e-9||a>Math.max(t[1],r[1])+1e-9)},n=function(e,t,r,n){var a,i,o,s,l,u,c;return 1e-9,s=e[0]-t[0],u=e[1]-t[1],l=r[0]-n[0],o=s*(c=r[1]-n[1])-u*l,Math.abs(o)<1e-9?null:[((a=e[0]*t[1]-e[1]*t[0])*l-(i=r[0]*n[1]-r[1]*n[0])*s)/o,(a*c-i*u)/o]},c=function(e,t,r,a){var o;return null!=(o=n(e,t,r,a))&&(i(o,e,t)&&i(o,r,a))},o=function(e,t){var r,n,i,o,s,l,u,d;for(s=-1,u=e.length,d=t.length,i=e[u-1];++s<u;)for(r=i,i=e[s],l=-1,o=t[d-1];++l<d;)if(n=o,o=t[l],c(r,i,n,o))return!1;return a(e[0],t)},l=function(e,t,r){var n,a,i,o;return null==r&&(r=[0,0]),i=e[0]-r[0],o=e[1]-r[1],[(n=Math.cos(t))*i-(a=Math.sin(t))*o+r[0],a*i+n*o+r[1]]},u=function(e,t,r){var n,a,i,o;for(o=[],n=0,a=e.length;n<a;n++)i=e[n],o.push(l(i,t,r));return o},r=function(e,t,r){var a,o,s,l,u,c,d,p,h,v,g,m,y,x;for(1e-9,y=(t=[t[0]+1e-9*Math.cos(r),t[1]+1e-9*Math.sin(r)])[0],x=t[1],g=[y+Math.cos(r),x+Math.sin(r)],c=0,Math.abs(g[0]-y)<1e-9&&(c=1),u=-1,o=e[(h=e.length)-1],d=Number.MAX_VALUE,p=Number.MAX_VALUE,s=null,l=null;++u<h;)a=o,o=e[u],null!=(v=n(t,g,a,o))&&i(v,a,o)&&(m=f(t,v),v[c]<t[c]?m<d&&(d=m,s=v):v[c]>t[c]&&m<p&&(p=m,l=v));return[s,l]}}).call(this)},{"simplify-js":22}],159:[function(e,t,r){(function(){t.exports=function(e,t,r){var n,a,i,o;return a={x:0,y:0},e<0&&(e=2*Math.PI+e),"square"===r?(i=Math.PI/180*45,e<=Math.PI?e<Math.PI/2?e<i?(a.x+=t,o=Math.tan(e)*t,a.y+=o):(a.y+=t,n=t/Math.tan(e),a.x+=n):e<Math.PI-i?(a.y+=t,n=t/Math.tan(Math.PI-e),a.x-=n):(a.x-=t,o=Math.tan(Math.PI-e)*t,a.y+=o):e<3*Math.PI/2?e<i+Math.PI?(a.x-=t,o=Math.tan(e-Math.PI)*t,a.y-=o):(a.y-=t,n=t/Math.tan(e-Math.PI),a.x-=n):e<2*Math.PI-i?(a.y-=t,n=t/Math.tan(2*Math.PI-e),a.x+=n):(a.x+=t,o=Math.tan(2*Math.PI-e)*t,a.y-=o)):(a.x+=t*Math.cos(e),a.y+=t*Math.sin(e)),a}}).call(this)},{}],160:[function(e,t,r){(function(){var r;r=e("../geom/offset.js"),t.exports=function(e){var t,n,a,i,o,s,l,u,c,d,f,p,h,v;if(!e)return[];for(u=[],a=0,o=(e=e.slice(1).slice(0,-1).split(/L|A/)).length;a<o;a++)if(1===(l=(l=e[a]).split(" ")).length)u.push(l[0].split(",").map(function(e){return parseFloat(e)}));else{for(c=u[u.length-1],i=l.pop().split(",").map(function(e){return parseFloat(e)}),d=parseFloat(l.shift().split(",")[0]),v=Math.sqrt(Math.pow(i[0]-c[0],2)+Math.pow(i[1]-c[1],2)),t=Math.acos((d*d+d*d-v*v)/(2*d*d)),"1"===l[1].split(",")[0]&&(t=2*Math.PI-t),f=t/(2*Math.PI)*(d*Math.PI*2)/5,p=Math.atan2(-c[1],-c[0])-Math.PI,n=h=t/f;n<t;)s=r(p+n,d),u.push([s.x,s.y]),n+=h;u.push(i)}return u}}).call(this)},{"../geom/offset.js":159}],161:[function(e,t,r){(function(){var r;(r={}).version="0.1.0",r.repo="https://github.com/pachamaltese/d3po/",r.array={comparator:e("./array/comparator.js"),contains:e("./array/contains.js"),sort:e("./array/sort.js"),update:e("./array/update.js")},r.client={css:e("./client/css.js"),ie:e("./client/ie.js"),pointer:e("./client/pointer.js"),prefix:e("./client/prefix.js"),rtl:e("./client/rtl.js"),scroll:e("./client/scroll.js"),scrollbar:e("./client/scrollbar.js"),touch:e("./client/touch.js")},r.color={legible:e("./color/legible.js"),lighter:e("./color/lighter.js"),mix:e("./color/mix.js"),random:e("./color/random.js"),scale:e("./color/scale.js"),sort:e("./color/sort.js"),text:e("./color/text.js"),validate:e("./color/validate.js")},r.data={bestRegress:e("./data/bestregression.js"),lof:e("./data/lof.js"),mad:e("./data/mad.js")},r.font={sizes:e("./font/sizes.js"),validate:e("./font/validate.js")},r.form=e("./form/form.js"),r.geom={largestRect:e("./geom/largestrectangle.js"),offset:e("./geom/offset.js"),path2poly:e("./geom/path2poly.js")},r.network={cluster:e("./network/cluster.js"),distance:e("./network/distance.js"),normalize:e("./network/normalize.js"),shortestPath:e("./network/shortestpath.js"),smallestGap:e("./network/smallestgap.js"),subgraph:e("./network/subgraph.js")},r.number={format:e("./number/format.js")},r.object={merge:e("./object/merge.js"),validate:e("./object/validate.js")},r.string={format:e("./string/format.js"),list:e("./string/list.js"),strip:e("./string/strip.js"),title:e("./string/title.js")},r.textwrap=e("./textwrap/textwrap.js"),r.tooltip={create:e("./tooltip/create.js"),move:e("./tooltip/move.js"),remove:e("./tooltip/remove.js")},r.util={buckets:e("./util/buckets.js"),child:e("./util/child.js"),closest:e("./util/closest.js"),copy:e("./util/copy.js"),d3selection:e("./util/d3selection.js"),dataurl:e("./util/dataurl.js"),uniques:e("./util/uniques.js")},r.viz=e("./viz/viz.js"),e("./client/css.js"),e("./core/console/print.js"),"undefined"!=typeof window&&(window.d3po=r),t.exports=r}).call(this)},{"./array/comparator.js":27,"./array/contains.js":28,"./array/sort.js":29,"./array/update.js":30,"./client/css.js":31,"./client/ie.js":32,"./client/pointer.js":33,"./client/prefix.js":34,"./client/rtl.js":35,"./client/scroll.js":36,"./client/scrollbar.js":37,"./client/touch.js":38,"./color/legible.js":39,"./color/lighter.js":40,"./color/mix.js":41,"./color/random.js":42,"./color/scale.js":43,"./color/sort.js":44,"./color/text.js":45,"./color/validate.js":46,"./core/console/print.js":47,"./data/bestregression.js":97,"./data/lof.js":98,"./data/mad.js":99,"./font/sizes.js":100,"./font/validate.js":101,"./form/form.js":102,"./geom/largestrectangle.js":158,"./geom/offset.js":159,"./geom/path2poly.js":160,"./network/cluster.js":162,"./network/distance.js":163,"./network/normalize.js":164,"./network/shortestpath.js":165,"./network/smallestgap.js":166,"./network/subgraph.js":167,"./number/format.js":168,"./object/merge.js":169,"./object/validate.js":170,"./string/format.js":171,"./string/list.js":172,"./string/strip.js":173,"./string/title.js":174,"./textwrap/textwrap.js":198,"./tooltip/create.js":199,"./tooltip/move.js":200,"./tooltip/remove.js":201,"./util/buckets.js":202,"./util/child.js":203,"./util/closest.js":204,"./util/copy.js":205,"./util/d3selection.js":206,"./util/dataurl.js":207,"./util/uniques.js":208,"./viz/viz.js":337}],162:[function(e,t,r){(function(){var r;r=e("./normalize.js"),t.exports=function(e,t){var n,a,i,o,s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F;if(p=[],null==t&&(t={}),(null==t.nodes||"object"!=typeof t.nodes)&&(e=(S=r(e,t))[0],null===(t=S[1])))return null;for(v in t.distance,A=t.nodeid,F=t.startpoint,f=t.endpoint,O={},M=t.nodes)O[v]={node:M[v].node,degree:0};for(w=0,j={},h=0,x=e.length;h<x;h++)n=A(F(d=e[h])),a=A(f(d)),n in j||(j[n]={}),a in j||(j[a]={}),a in j[n]||(j[n][a]=0,j[a][n]=0,w++,O[n].degree+=1,O[a].degree+=1);for(v in l={},0,O)z=O[v],l[v]={score:z.degree/(2*w),nodes:[v]};for(n in j)for(a in j[n])j[n][a]=1/(2*w)-O[n].degree*O[a].degree/(4*w*w);for(g=0;g<1e3;){for(n in c=-1,_=void 0,k=void 0,j)for(a in j[n])j[n][a]>c&&(c=j[n][a],_=n,k=a);if(c<0)break;for(y in j[_])y!==k&&(y in j[k]?j[k][y]+=j[_][y]:j[k][y]=j[_][y]-2*l[k].score*l[y].score,j[y][k]=j[k][y]),delete j[y][_];for(y in j[k])y in j[_]||y===k||(j[k][y]-=2*l[_].score*l[y].score,j[y][k]=j[k][y]);for(m=0,b=(E=l[_].nodes).length;m<b;m++)z=E[m],l[k].nodes.push(z);l[k].score+=l[_].score,t.vdebug&&p.push({type:"merge",father:k,child:_,nodes:l[k].nodes}),delete l[_],delete j[_],c,g++}return(s=function(){var e;for(i in e=[],l)u=l[i],e.push([i,u.nodes.length]);return e}()).sort(function(e,t){return t[1]-e[1]}),[function(){var e,t,r;for(r=[],e=0,t=s.length;e<t;e++)o=s[e],r.push(l[o[0]].nodes);return r}(),p]}}).call(this)},{"./normalize.js":164}],163:[function(e,t,r){(function(){t.exports=function(e,t){var r,n;return e instanceof Array||(e=[e.x,e.y]),t instanceof Array||(t=[t.x,t.y]),r=Math.abs(e[0]-t[0]),n=Math.abs(e[1]-t[1]),Math.sqrt(r*r+n*n)}}).call(this)},{}],164:[function(e,t,r){(function(){var r;r=e("../core/console/print.js"),t.exports=function(e,t){var n,a,i,o,s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B;if(E=t.source,C=t.target,o=t.directed,s=t.distance,A=t.nodeid,F=t.startpoint,c=t.endpoint,n=t.K,B=t.vdebug,o||(o=!1),null==n&&(n=1),null==A?A=function(e){return e}:"string"==typeof A&&(A=function(e){return function(t){return t[e]}}(A)),null!=E&&"object"==typeof E&&(E=A(E)),null!=C&&"object"==typeof C&&(C=A(C)),null==F?F=function(e){return e.source}:"string"==typeof F&&(F=function(e){return function(t){return t[e]}}(F)),null==c?c=function(e){return e.target}:"string"==typeof c&&(c=function(e){return function(t){return t[e]}}(c)),null==s)s=function(e){return 1};else if("number"==typeof s)s=function(e){return function(t){return e}}(s);else if("string"==typeof s)s=function(e){return function(t){return t[e]}}(s);else if(s instanceof Array){for(u={},f=m=0,b=e.length;m<b;f=++m)l=e[f],a=A(F(l)),i=A(c(l)),u[a+"_"+i]=s[f];s=function(e){return a=A(F(e)),i=A(c(e)),u[a+"_"+i]}}for(M={},y=0,j=e.length;y<j;y++){for(l=e[y],k=F(l),z=c(l),v=A(k),g=A(z),x=0,w=(O=[k,z]).length;x<w;x++)(p=A(_=O[x]))in M||(M[p]={node:_,outedges:[]});M[v].outedges.push(l),o||M[g].outedges.push(l)}return d=null,0===e.length?d="The length of edges is 0":n<0?d="K can not have negative value":null==s(e[0])?d="Check the distance function/attribute":null==F(e[0])?d="Check the startpoint function/attribute":null==c(e[0])?d="Check the endpoint function/attribute":null==(h=A(F(e[0])))||"string"!=(S=typeof h)&&"number"!==S?d="Check the nodeid function/attribute":null==E||E in M?null==C||C in M||(d="The target is not in the graph"):d="The source is not in the graph",null!=d?(r.error(d),null):[e,{source:E,target:C,directed:o,distance:s,nodeid:A,startpoint:F,endpoint:c,K:n,nodes:M,vdebug:B}]}}).call(this)},{"../core/console/print.js":47}],165:[function(e,t,r){(function(){var r,n;r=e("heap"),n=e("./normalize.js"),t.exports=function(e,t,a){var i,o,s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C;if(null==a&&(a={}),a.source=t,(null==a.nodes||"object"!=typeof a.nodes)&&(k=n(e,a),e=k[0],null===(a=k[1])))return null;for(g in t=a.source,E=a.target,u=a.directed,c=a.distance,j=a.nodeid,S=a.startpoint,f=a.endpoint,i=a.K,w=a.nodes)w[g].count=0;for(h=new r(function(e,t){return e.distance-t.distance}),C={},null==E&&(C[t]=!0),h.push({edge:null,target:t,distance:0}),b=0,O=[];!h.empty()&&(b=Math.max(b,h.size()),w[F=(_=h.pop()).target].count++,null==E?O.push(_):F===E&&O.push(_),O.length!==i);)if(w[F].count<=i)for(v=0,y=(z=w[F].outedges).length;v<y;v++){if(o=j(S(d=z[v])),l=j(f(d)),u||l!==F||(o=(A=[l,o])[0],l=A[1]),null==E){if(C[l])continue;C[l]=!0}s=_.distance+c(d),h.push({edge:d,previous:_,target:l,distance:s})}for(p=function(t){for(e=[];null!=t.edge;)e.push(t.edge),t=t.previous;return e.reverse()},m=0,x=O.length;m<x;m++)M=O[m],null!=E&&(delete M.target,M.edges=p(M)),delete M.edge,delete M.previous;return O}}).call(this)},{"./normalize.js":164,heap:8}],166:[function(e,t,r){(function(){var r;r=e("./distance.js"),t.exports=function(e,t){var n;return t||(t={}),n=[],d3.quadtree().x(function(e){return t.accessor?t.accessor(e)[0]:e[0]}).y(function(e){return t.accessor?t.accessor(e)[1]:e[1]}).addData(e).visit(function(e){var a,i,o,s,l,u,c,d;if(!e.leaf)for(a=0,o=(c=e.nodes).length;a<o;a++)if((l=c[a])&&l.point)if(t.origin)n.push(r(l,t));else for(i=0,s=(d=e.nodes).length;i<s;i++)(u=d[i])&&u.point&&u.point!==l.point&&n.push(r(l,u));return!1}),t.all?n.sort(function(e,t){return e-t}):d3.min(n)}}).call(this)},{"./distance.js":163}],167:[function(e,t,r){(function(){var r;r=e("./normalize.js"),t.exports=function(e,t,n){var a,i,o,s,l,u,c,d,f,p,h,v;return null==n&&(n={}),n.source=t,null!=n.nodes&&"object"==typeof n.nodes||(p=r(e,n),e=p[0],null!==(n=p[1]))?(t=n.source,o=n.directed,s=n.distance,d=n.nodeid,h=n.startpoint,u=n.endpoint,a=n.K,f=n.nodes,(v={})[t]=!0,(i=function(e,t){var r,n,l,c,p,g,m,y,x;for(x=[],c=0,p=(m=f[e].outedges).length;c<p;c++)l=m[c],r=d(h(l)),n=d(u(l)),o||n!==e||(r=(y=[n,r])[0],n=y[1]),n in v?x.push(void 0):(g=t+s(l))<=a?(v[n]=!0,x.push(i(n,g))):x.push(void 0);return x})(t,0),{nodes:function(){var e;for(c in e=[],v)e.push(f[c].node);return e}(),edges:function(){var t,r,n;for(n=[],t=0,r=e.length;t<r;t++)l=e[t],d(h(l))in v&&d(u(l))in v&&n.push(l);return n}()}):null}}).call(this)},{"./normalize.js":164}],168:[function(e,t,r){(function(){var r;r=e("../core/locale/languages/en_US.js"),t.exports=function(e,t){var n,a,i,o,s,l,u,c,d,f;return null==e||!1===e?"":(t||(t={}),d=(l="locale"in t?t.locale:r).time.slice(),a=d3.formatLocale(l.format),t||(t={}),f=t.vars||{},i=t.key,o=!("labels"in t)||t.labels,s=e.toString().split(".")[0].length,f.time&&f.time.value&&d.push(f.time.value),"string"==typeof i&&d.indexOf(i.toLowerCase())>=0?u=e:"share"===i?(u=0===e?0:e>=100?a.format(",f")(e):e>99?a.format(".3g")(e):a.format(".2g")(e),u+="%"):e<10&&e>-10?(c=1,(s=e.toString().split(".")).length>1&&(c=d3.min([parseFloat(s[1]).toString().length,2]),-1<e&&e<1||(c+=1+(s[1].length-parseFloat(s[1]).toString().length))),u=a.format("."+c+"g")(e)):u=s>3?a.formatPrefix(".3g",e)(e).replace("G","B"):3===s?a.format(",f")(e):0===e?0:e===parseInt(e,10)?a.format(".2")(e):a.format(".3g")(e),u.length>2&&""+u.indexOf(".0")===u.length-2&&(u=u.slice(0,u.length-2)),o&&i&&"format"in f&&i in f.format.affixes.value?(n=f.format.affixes.value[i])[0]+u+n[1]:u)}}).call(this)},{"../core/locale/languages/en_US.js":67}],169:[function(e,t,r){(function(){var r,n;r=e("../util/d3selection.js"),n=e("./validate.js"),t.exports=function(e,t){var a,i;return a=function(e,t,i){var o,s,l;for(o in s=[],e)void 0!==(l=e[o])?!i&&n(l)?("object"!=typeof t[o]&&(t[o]={}),s.push(a(l,t[o],0===o.indexOf("d3po")))):!r(l)&&l instanceof Array?s.push(t[o]=l.slice(0)):s.push(t[o]=l):s.push(void 0);return s},i={},e&&a(e,i),t&&a(t,i),i}}).call(this)},{"../util/d3selection.js":206,"./validate.js":170}],170:[function(e,t,r){(function(){t.exports=function(e){return e&&e.constructor===Object}}).call(this)},{}],171:[function(e,t,r){t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.unkeyed_index=0,t.replace(/\{(\w*)\}/g,function(r,n){if(""===n&&(n=t.unkeyed_index,t.unkeyed_index++),n==+n)return"undefined"!==e[n]?e[n]:r;for(var a=0;a<e.length;a++)if("object"==typeof e[a]&&void 0!==e[a][n])return e[a][n];return r}.bind(t))}},{}],172:[function(e,t,r){(function(){var r,n;r=e("./format.js"),n=e("../core/locale/languages/en_US.js").ui,t.exports=function(e,t,a,i){var o;return e instanceof Array?(e=e.slice(0),t||(t=n.and),i||(i=n.moreText),2===e.length?e.join(" "+t+" "):(a&&e.length>a&&(o=e.length-a+1,(e=e.slice(0,a-1))[a-1]=r(i,o)),e.length>1&&(e[e.length-1]=t+" "+e[e.length-1]),e.join(", "))):e}}).call(this)},{"../core/locale/languages/en_US.js":67,"./format.js":171}],173:[function(e,t,r){t.exports=function(e){var t=[[/[\300-\305]/g,"A"],[/[\340-\345]/g,"a"],[/[\306]/g,"AE"],[/[\346]/g,"ae"],[/[\337]/g,"B"],[/[\307]/g,"C"],[/[\347]/g,"c"],[/[\320\336\376]/g,"D"],[/[\360]/g,"d"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\322-\326\330]/g,"O"],[/[\362-\366\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\327]/g,"x"],[/[\335]/g,"Y"],[/[\375\377]/g,"y"]];return""+e.toString().replace(/[^A-Za-z0-9\-_]/g,function(e){if(" "===e)return"-";for(var r=!1,n=0;n<t.length;n++)if(new RegExp(t[n][0]).test(e)){r=t[n][1];break}return r||""})}},{}],174:[function(e,t,r){(function(){var r;r=e("../core/locale/languages/en_US.js"),t.exports=function(e,t){var n,a,i,o;return e?(t||(t={}),t.key,"."===e.charAt(e.length-1)?e.charAt(0).toUpperCase()+e.substr(1):(i="locale"in this?this.locale.value:r,o=i.lowercase.map(function(e){return e.toLowerCase()}),a=(a=i.uppercase).concat(a.map(function(e){return e+"s"})),n=a.map(function(e){return e.toLowerCase()}),e.replace(/[^\s!-#%&(-\x2A,-:;\x3F@\x5B-\x5D_\x7B}\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]*/g,function(t,r){var i;return t?(i=n.indexOf(t.toLowerCase()))>=0?a[i]:o.indexOf(t.toLowerCase())>=0&&0!==r&&r!==e.length-1?t.toLowerCase():t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():""}))):""}}).call(this)},{"../core/locale/languages/en_US.js":67}],175:[function(e,t,r){(function(){var r,n;r=e("./foreign.js"),n=e("./tspan.js"),t.exports=function(e){e.text.html.value?r(e):n(e)}}).call(this)},{"./foreign.js":176,"./tspan.js":179}],176:[function(e,t,r){(function(){t.exports=function(e){var t,r,n,a,i;n=(i=e.container.value).attr("font-family")||i.style("font-family"),t=e.align.value||i.attr("text-anchor")||i.style("text-anchor"),r=i.attr("fill")||i.style("fill"),a=i.attr("opacity")||i.style("opacity"),t="end"===t?"right":"middle"===t?"center":"left",d3.select(i.node().parentNode).append("foreignObject").attr("width",e.width.value+"px").attr("height",e.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",n).style("font-size",e.size.value[1]+"px").style("color",r).style("text-align",t).style("opacity",a).text(e.text.current)}}).call(this)},{}],177:[function(e,t,r){(function(){t.exports=function(e){var t,r,n,a,i,o,s,l,u,c;if(o=(a=(r=e.container.value).node().previousElementSibling)?a.tagName.toLowerCase():"",a&&(a=d3.select(a)),e.container.x=e.x.value||parseFloat(r.attr("x"),10),e.container.y=e.y.value||parseFloat(r.attr("y"),10),a&&(e.shape.accepted.indexOf(o)>=0&&e.self.shape(o),"rect"===o?(u=parseFloat(a.attr("x"),10)||0,c=parseFloat(a.attr("y"),10)||0,!1===e.padding.value&&(t=Math.abs(u-e.container.x))&&e.self.padding(t),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||(l=parseFloat(a.attr("width")),e.self.width(l)),e.height.value||(n=parseFloat(a.attr("height")),e.self.height(n))):"circle"===o?(i=parseFloat(a.attr("r"),10),u=parseFloat(a.attr("cx"),10)||0,u-=i,c=parseFloat(a.attr("cy"),10)||0,c-=i,!1===e.padding.value&&(t=Math.abs(u-e.container.x))&&e.self.padding(t),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||e.self.width(2*i,10),e.height.value||e.self.height(2*i,10)):(e.width.value||e.self.width(500),e.height.value||e.self.height(500))),e.container.x||(e.container.x=0),e.container.y||(e.container.y=0),e.width.inner=e.width.value-2*e.padding.value,e.height.inner=e.height.value-2*e.padding.value,s=r.attr("font-size")||r.style("font-size"),s=parseFloat(s,10),e.container.fontSize=s,e.container.dy=parseFloat(r.attr("dy"),10),!e.size.value)return e.resize.value?e.self.size([4,80]):e.self.size([s/2,s])}}).call(this)},{}],178:[function(e,t,r){(function(){t.exports=function(e){var t;if(e.text.value||(t=e.container.value.text())&&(t.indexOf("tspan")>=0&&(t.replace(/\<\/tspan\>\<tspan\>/g," "),t.replace(/\<\/tspan\>/g,""),t.replace(/\<tspan\>/g,"")),t=(t=t.replace(/(\r\n|\n|\r)/gm,"")).replace(/^\s+|\s+$/g,""),e.self.text(t)),e.text.value instanceof Array?e.text.phrases=e.text.value.filter(function(e){return["string","number"].indexOf(typeof e)>=0}):e.text.phrases=[e.text.value+""],!e.align.value)return e.container.align=e.container.value.style("text-anchor")||e.container.value.attr("text-anchor")}}).call(this)},{}],179:[function(e,t,r){(function(){var r;r=e("../../client/rtl.js"),t.exports=function(e){var t,n,a,i,o,s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C;return f=function(t){return(!v||t?e.container.value.append("tspan"):e.container.value.insert("tspan","tspan")).attr("x",S+"px").attr("dy",n+"px").style("baseline-shift","0%").attr("dominant-baseline","alphabetic")},d=-90===e.rotate.value||90===e.rotate.value,A=d?e.height.inner:e.width.inner,s=d?e.width.inner:e.height.inner,E="end"===(t="circle"===e.shape.value?"middle":e.align.value||e.container.align||"start")||"start"===t&&r?A:"middle"===t?A/2:0,z=e.valign.value||"top",S=e.container.x+E,i=e.resize.value?e.size.value[1]:e.container.fontSize||e.size.value[0],n=e.container.dy||1.1*i,w=null,h=null,M=null,v=!1,C=0,"circle"===e.shape.value&&("middle"===z?C=s/n%1*n/2:"end"===z&&(C=s/n%1*n)),e.container.value.attr("text-anchor",t).attr("font-size",i+"px").style("font-size",i+"px").attr("x",e.container.x).attr("y",e.container.y),k=function(){if(w.remove(),v?(l++,w=e.container.value.select("tspan")):(l--,w=d3.select(e.container.value.node().lastChild)),!w.empty())return M=w.text().match(/[^\s-]+-?/g),a()},u=function(){var t;return"circle"===e.shape.value?((t=(l-1)*n+C)>s/2&&(t+=n),2*Math.sqrt(t*(A/2*2-t))):A},a=function(){var t,r;return M&&M.length?(t=(r=M.pop()).charAt(r.length-1),1===r.length&&e.text.split.value.indexOf(r)>=0?a():(e.text.split.value.indexOf(t)>=0&&(r=r.substr(0,r.length-1)),w.text(M.join(" ")+" "+r+"..."),w.node().getComputedTextLength()>u()?a():void 0)):k()},p=function(t){var r,n,a,i;if(r=w.text(),i="",v){if(" "===(i=e.text.current.charAt(e.text.current.length-h.length-1)))for(a="",n=2;" "===i;)a+=" ",i=e.text.current.charAt(e.text.current.length-h.length-n),n++;else a="";h=t+a+h,w.text(t+a+r)}else{if(" "===(i=e.text.current.charAt(h.length)))for(a="",n=1;" "===i;)a+=" ",i=e.text.current.charAt(h.length+n),n++;else a="";h+=a+t,w.text(r+a+t)}if(Math.floor(w.node().getComputedTextLength())>u()||"\n"===i)return w.text(r),r.length&&(w=f()),w.text(t),v?l--:l++},j=1,l=null,c=null,(O=function(){var t,r,a,i,o,u;for(e.container.value.text("").html(""),M=e.text.words.slice(),v&&M.reverse(),h="",w=f(!0),l=j,r=0,a=M.length;r<a;r++){if(u=M[r],l*n>s){k();break}for(p(u),o=!0;o;){for(i=e.text.current.charAt(h.length),t=1;" "===i;)i=e.text.current.charAt(h.length+t),t++;(o=e.text.split.value.indexOf(i)>=0)&&p(i)}}return l*n>s&&k(),c=Math.abs(l-j)+1})(),c=0,e.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return c++}),"circle"===e.shape.value&&(b=s-c*n)>n&&("middle"===z?(j=1+(b/n/2>>0),O()):"bottom"===z&&(v=!0,j=s/n>>0,O())),c=0,e.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return c++}),"top"===z?F=0:(o=c*n,F="middle"===z?s/2-o/2:s-o),_="translate(0,"+(F-=.2*n)+")",180===e.rotate.value||-180===e.rotate.value?(y=e.container.x+A/2,x=e.container.y+s/2):(g=e.rotate.value<0?A:s,y=e.container.x+g/2,x=e.container.y+g/2),m="rotate("+e.rotate.value+", "+y+", "+x+")",e.container.value.attr("transform",m+_)}}).call(this)},{"../../client/rtl.js":35}],180:[function(e,t,r){(function(){var r,n,a,i;r=e("./flow.js"),n=e("../../font/sizes.js"),i=function(e){var t;e.text.phrases.length&&(e.text.current=e.text.phrases.shift()+"",e.text.words=e.text.current.match(e.text.split.break),(t=e.text.current.charAt(0))!==e.text.words[0].charAt(0)&&(e.text.words[0]=t+e.text.words[0]),e.container.value.html(""),e.resize.value?a(e):r(e))},t.exports=i,a=function(e){var t,a,o,s,l,u,c,d,f,p,h,v,g,m,y,x,b;for(b=[],c=0;c<e.text.words.length;)t=c===e.text.words.length-1?"":" ",b.push(e.text.words[c]+t),c++;y=(p=-90===e.rotate.value||90===e.rotate.value)?e.height.inner:e.width.inner,l=p?e.width.inner:e.height.inner,h=Math.floor(e.size.value[1]),d="circle"===e.shape.value?.75*y:y,g=n(b,{"font-size":h+"px"},{parent:e.container.value}),f=d3.max(g,function(e){return e.width}),a=1.165+y/l*.11,m=d3.sum(g,function(t){var r;return r=e.container.dy||1.2*h,t.width*r})*a,s="circle"===e.shape.value?Math.PI*Math.pow(y/2,2):d*l,(f>d||m>s)&&(o=Math.sqrt(s/m),x=d/f,v=d3.min([o,x]),h=d3.max([e.size.value[0],Math.floor(h*v)])),u=Math.floor(.8*l),h>u&&(h=u),f*(h/e.size.value[1])<=d?(h!==e.size.value[1]&&e.self.size([e.size.value[0],h]),r(e)):i(e)}}).call(this)},{"../../font/sizes.js":100,"./flow.js":175}],181:[function(e,t,r){(function(){t.exports={accepted:[!1,"start","middle","end","left","center","right"],process:function(e){var t;return(t=["left","center","right"].indexOf(e))>=0&&(e=this.accepted[t+1]),e},value:!1}}).call(this)},{}],182:[function(e,t,r){arguments[4][106][0].apply(r,arguments)},{dup:106}],183:[function(e,t,r){(function(){var r;r=e("../../util/d3selection.js"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return!1!==e&&(r(e)?e:e instanceof Array?d3.select(e[0][0]):(this.selector=e,d3.select(e)))},value:!1}}).call(this)},{"../../util/d3selection.js":206}],184:[function(e,t,r){arguments[4][110][0].apply(r,arguments)},{dup:110}],185:[function(e,t,r){(function(){var r,n;r=e("../../core/console/print.js"),n=e("../../string/format.js"),t.exports={accepted:[void 0],process:function(e,t){var a,i;return!1===this.initialized?e:(!1===t.container.value?(i=t.format.locale.value.dev.setContainer,r.warning(i,"container")):t.container.value.empty()?(i=t.format.locale.value.dev.noContainer,a=t.container.selector||"",r.warning(n(i,'"'+a+'"'),"container")):(t.dev.value&&r.time("total draw time"),t.container.value.call(t.self)),e)},value:void 0}}).call(this)},{"../../core/console/print.js":47,"../../string/format.js":171}],186:[function(e,t,r){(function(){var r,n;r=e("../../core/locale/locale.js"),n=e("../../object/merge.js"),t.exports={accepted:[Function,String],locale:{accepted:function(){return d3.keys(r)},process:function(e){var t;return"en_US",t=r.en_US,"en_US"!==e&&(t=n(t,r[e])),this.language=e,t},value:"en_US"},process:function(e,t){if(this.initialized&&"string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},value:"en_US"}}).call(this)},{"../../core/locale/locale.js":77,"../../object/merge.js":169}],187:[function(e,t,r){(function(){t.exports={accepted:[!1,Number],value:!1}}).call(this)},{}],188:[function(e,t,r){arguments[4][187][0].apply(r,arguments)},{dup:187}],189:[function(e,t,r){arguments[4][110][0].apply(r,arguments)},{dup:110}],190:[function(e,t,r){(function(){t.exports={accepted:[-180,-90,0,90,180],value:0}}).call(this)},{}],191:[function(e,t,r){(function(){t.exports={accepted:["circle","square"],value:!1}}).call(this)},{}],192:[function(e,t,r){(function(){t.exports={accepted:[Array,!1],value:!1}}).call(this)},{}],193:[function(e,t,r){(function(){t.exports={accepted:[!1,Array,Number,String],html:{accepted:[Boolean],value:!1},init:function(e){var t;return t=this.split.value,this.split.break=new RegExp("[^\\s\\"+t.join("\\")+"]+\\"+t.join("?\\")+"?","g"),!1},split:{accepted:[Array],process:function(e){return this.break=new RegExp("[^\\s\\"+e.join("\\")+"]+\\"+e.join("?\\")+"?","g"),e},value:["-","/",";",":","&"]}}}).call(this)},{}],194:[function(e,t,r){(function(){t.exports={accepted:[!1,"top","middle","bottom"],value:!1}}).call(this)},{}],195:[function(e,t,r){arguments[4][187][0].apply(r,arguments)},{dup:187}],196:[function(e,t,r){arguments[4][187][0].apply(r,arguments)},{dup:187}],197:[function(e,t,r){arguments[4][187][0].apply(r,arguments)},{dup:187}],198:[function(e,t,r){(function(){var r,n,a,i,o;r=e("../core/methods/attach.js"),a=e("./helpers/parsesize.js"),n=e("../core/console/print.js"),i=e("./helpers/parsetext.js"),o=e("./helpers/wrap.js"),t.exports=function(){var t;return r(t={self:function(e){return e.each(function(){a(t),t.size.value[0]<=t.height.inner?(i(t),o(t)):t.container.value.html(""),t.dev.value&&n.timeEnd("total draw time")}),t.self}},{align:e("./methods/align.js"),config:e("./methods/config.js"),container:e("./methods/container.js"),dev:e("./methods/dev.js"),draw:e("./methods/draw.js"),format:e("./methods/format.js"),height:e("./methods/height.js"),padding:e("./methods/padding.js"),resize:e("./methods/resize.js"),rotate:e("./methods/rotate.js"),text:e("./methods/text.js"),shape:e("./methods/shape.js"),size:e("./methods/size.js"),valign:e("./methods/valign.js"),width:e("./methods/width.js"),x:e("./methods/x.js"),y:e("./methods/y.js")}),t.self}}).call(this)},{"../core/console/print.js":47,"../core/methods/attach.js":78,"./helpers/parsesize.js":177,"./helpers/parsetext.js":178,"./helpers/wrap.js":180,"./methods/align.js":181,"./methods/config.js":182,"./methods/container.js":183,"./methods/dev.js":184,"./methods/draw.js":185,"./methods/format.js":186,"./methods/height.js":187,"./methods/padding.js":188,"./methods/resize.js":189,"./methods/rotate.js":190,"./methods/shape.js":191,"./methods/size.js":192,"./methods/text.js":193,"./methods/valign.js":194,"./methods/width.js":195,"./methods/x.js":196,"./methods/y.js":197}],199:[function(e,t,r){var n=e("../core/locale/languages/en_US.js"),a=e("../client/pointer.js"),i=e("../color/legible.js"),o=e("./move.js"),s=e("../client/prefix.js"),l=e("../client/rtl.js"),u=e("./remove.js"),c=e("../client/scroll.js"),d=e("../client/scrollbar.js"),f=e("../string/list.js"),p=e("../color/text.js");function h(){d3.selectAll("div.d3po_tooltip_data_desc").style("height","0px"),d3.selectAll("div.d3po_tooltip_data_help").style("background-color","#ccc")}t.exports=function(e){var t=e.fullscreen?250:200,r=s();e.width=e.width||t,e.max_width=e.max_width||386,e.id=e.id||"default",e.size=e.fullscreen||e.html?"large":"small",e.offset=e.offset||0,e.arrow_offset=e.arrow?8:0,e.x=e.x||0,e.y=e.y||0,e.parent=e.parent||d3.select("body"),e.curtain=e.curtain||"#fff",e.curtainopacity=e.curtainopacity||.8,e.background=e.background||"#fff",e.fontcolor=e.fontcolor||"#444",e.fontfamily=e.fontfamily||"sans-serif",e.fontweight=e.fontweight||"normal",e.fontsize=e.fontsize||"12px",e.style=e.style||"default",e.zindex="small"==e.size?2e3:500,e.locale=e.locale||n,e.stacked=e.stacked||!1;var v=e.parent?e.parent.node().offsetHeight||e.parent.node().getBoundingClientRect().height:0;if(e.iconsize||(e.iconsize="small"==e.size?22:50),e.parent.node()===document.body){e.limit=[window.innerWidth+c.x(),window.innerHeight+c.y()];var g=d();document.body.scrollHeight>window.innerHeight&&(e.limit[0]-=g)}else e.limit=[parseFloat(e.parent.style("width"),10),parseFloat(e.parent.style("height"),10)];if(e.title instanceof Array){var m=e.locale.ui.and,y=e.locale.ui.more;e.title=f(e.title,m,3,y)}if(u(e.id),e.anchor={},e.fullscreen)e.anchor.x="center",e.anchor.y="center",e.x=e.parent?e.parent.node().offsetWidth/2:window.innerWidth/2,e.y=e.parent?v/2:window.innerHeight/2;else if(e.align){var x=e.align.split(" ");e.anchor.y=x[0],x[1]?e.anchor.x=x[1]:e.anchor.x="center"}else e.anchor.x="center",e.anchor.y="top";var b=e.width-30;if(e.fullscreen)e.parent.append("div").attr("id","d3po_tooltip_curtain_"+e.id).attr("class","d3po_tooltip_curtain").style("background-color",e.curtain).style("opacity",e.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(a.click,function(){u(e.id)});var j=e.parent.append("div").datum(e).attr("id","d3po_tooltip_id_"+e.id).attr("class","d3po_tooltip d3po_tooltip_"+e.size).style("color",e.fontcolor).style("font-family",e.fontfamily).style("font-weight",e.fontweight).style("font-size",e.fontsize+"px").style(r+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").on(a.out,h);e.max_height&&j.style("max-height",e.max_height+"px"),e.fixed?(j.style("z-index",500),e.mouseevents=!0):j.style("z-index",2e3);var w=j.append("div").datum(e).attr("class","d3po_tooltip_container").style("background-color",e.background).style("padding","6px");if(e.fullscreen&&e.html&&!e.stacked){k=e.parent?.75*e.parent.node().offsetWidth:.75*window.innerWidth,I=e.parent?.75*v:.75*window.innerHeight,w.style("width",k+"px").style("height",I+"px");var _=w.append("div").attr("class","d3po_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",e.width+"px")}else{if("auto"==e.width){var k="auto";w.style("max-width",e.max_width+"px")}else k=e.width-14+"px";_=w.style("width",k)}if(e.title||e.icon)var z=_.append("div").attr("class","d3po_tooltip_header").style("position","relative").style("z-index",1);if(e.fullscreen){j.append("div").attr("class","d3po_tooltip_close").style("background-color",e.color).style("color",p(e.color)).style("position","absolute").style(r+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(a.over,function(){d3.select(this).style("cursor","pointer").style(r+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(a.out,function(){d3.select(this).style("cursor","auto").style(r+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(a.click,function(){u(e.id)});d3.select("body").on("keydown.esc_"+e.id,function(){27===d3.event.keyCode&&(u(e.id),d3.select("body").on("keydown.esc_"+e.id,null))})}if(e.mouseevents){if(!0!==e.mouseevents){var A=d3.select(e.mouseevents).on(a.out),M=function(){var t=d3.event.toElement||d3.event.relatedTarget;if(t)var r=0==("string"==typeof t.className?t.className:t.className.baseVal).indexOf("d3po_tooltip");else r=!1;t&&(O(j.node(),t)||O(e.mouseevents,t)||r)||(A(d3.select(e.mouseevents).datum()),h(),d3.select(e.mouseevents).on(a.out,A))},O=function(e,t){for(var r=t.parentNode;null!==r;){if(r==e)return!0;r=r.parentNode}return!1};d3.select(e.mouseevents).on(a.out,M),j.on(a.out,M);var S=d3.select(e.mouseevents).on(a.move);S&&j.on(a.move,S)}}else j.style("pointer-events","none");if(e.arrow)j.append("div").attr("class","d3po_tooltip_arrow").style("background-color",e.background).style(r+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom","-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(r+"transform","rotate(45deg)").style("z-index",-1);if(e.icon){var E=z.append("div").attr("class","d3po_tooltip_icon").style("width",e.iconsize+"px").style("height",e.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+e.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px");"knockout"==e.style&&E.style("background-color",e.color),b-=E.node().offsetWidth}if(e.title){var F=e.max_width-6;e.icon&&(F-=e.iconsize+6),F+="px";z.append("div").attr("class","d3po_tooltip_title").style("max-width",F).style("color",e.icon?e.fontcolor:i(e.color)).style("vertical-align","top").style("width",b+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===e.size?"18px":"16px").style("line-height","large"===e.size?"20px":"17px").style("padding","large"===e.size?"3px 6px":"3px").text(e.title)}if(e.description)_.append("div").attr("class","d3po_tooltip_description").style("font-size","12px").style("padding","6px").text(e.description);if(e.data||e.html&&!e.fullscreen)var C=_.append("div").attr("class","d3po_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(e.data){var B=0,T={},q=null;e.data.forEach(function(t,n){t.group&&q!=t.group&&(q=t.group,C.append("div").attr("class","d3po_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(t.group));var o=C.append("div").attr("class","d3po_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(t);!0===t.highlight?o.style("color",i(e.color)):(t.allColors||t.highlight!==e.color)&&o.style("color",i(t.highlight));var u=o.append("div").attr("class","d3po_tooltip_data_name").style("display","inline-block").html(t.name).on(a.out,function(){d3.event.stopPropagation()});if(t.link&&u.style("cursor","pointer").on(a.click,t.link),t.value instanceof Array){var c=e.locale.ui.and,d=e.locale.ui.more;t.value=list(t.value,c,3,d)}var f=o.append("div").attr("class","d3po_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").html(t.value).on(a.out,function(){d3.event.stopPropagation()});if(l?f.style("left","6px"):f.style("right","6px"),e.mouseevents&&t.desc){var p=o.append("div").attr("class","d3po_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(r+"transition","height 0.5s").style("width","85%").text(t.desc).on(a.out,function(){d3.event.stopPropagation()}),v=p.node().offsetHeight||p.node().getBoundingClientRect().height;p.style("height","0px");var g=u.append("div").attr("class","d3po_tooltip_data_help").style("background-color","#ccc").style(r+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size","8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(s+"transition","background-color 0.5s").text("?").on(a.over,function(){var e=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",e),p.style("height",v+"px")}).on(a.out,function(){d3.event.stopPropagation()});u.style("cursor","pointer").on(a.over,function(){h();var e=d3.select(this.parentNode).style("color");g.style("background-color",e),p.style("height",v+"px")}),o.on(a.out,function(){d3.event.stopPropagation(),h()})}var m=parseFloat(f.style("width"),10);m>e.width/2&&(m=e.width/2),m>B&&(B=m),n!=e.data.length-1&&(t.group&&t.group==e.data[n+1].group||!t.group&&!e.data[n+1].group)&&C.append("div").attr("class","d3po_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")}),C.selectAll(".d3po_tooltip_data_name").style("width",function(){return parseFloat(d3.select(this.parentNode).style("width"),10)-B-30+"px"}),C.selectAll(".d3po_tooltip_data_value").style("width",B+"px").each(function(e){var t=parseFloat(d3.select(this).style("height"),10);T[e.name]=t}),C.selectAll(".d3po_tooltip_data_name").style("min-height",function(e){return T[e.name]+"px"})}!e.html||e.fullscreen&&!e.stacked||(C.append("div").html(e.html),e.js&&e.js(w));var N=_.append("div").attr("class","d3po_tooltip_footer").style("font-size","10px").style("position","relative").style("text-align","center");if(e.footer&&N.html(e.footer),e.height=j.node().offsetHeight||j.node().getBoundingClientRect().height,e.html&&e.fullscreen&&!e.stacked){var I=e.height-12;k=j.node().offsetWidth-e.width-44;w.append("div").attr("class","d3po_tooltip_html").style("width",k+"px").style("height",I+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(e.html),e.js&&e.js(w)}if(e.width=j.node().offsetWidth,"center"!=e.anchor.y?e.height+=e.arrow_offset:e.width+=e.arrow_offset,e.data||(!e.fullscreen||e.stacked)&&e.html){if(!e.fullscreen||e.stacked){var V=e.fixed?v-e.y-10:v-10;I=e.height<V?e.height:V}else I=e.height;I-=parseFloat(w.style("padding-top"),10),I-=parseFloat(w.style("padding-bottom"),10),z&&(I-=z.node().offsetHeight||z.node().getBoundingClientRect().height,I-=parseFloat(z.style("padding-top"),10),I-=parseFloat(z.style("padding-bottom"),10)),N&&(I-=N.node().offsetHeight||N.node().getBoundingClientRect().height,I-=parseFloat(N.style("padding-top"),10),I-=parseFloat(N.style("padding-bottom"),10)),C.style("max-height",I+"px")}e.height=j.node().offsetHeight||j.node().getBoundingClientRect().height,o(e.x,e.y,e.id)}},{"../client/pointer.js":33,"../client/prefix.js":34,"../client/rtl.js":35,"../client/scroll.js":36,"../client/scrollbar.js":37,"../color/legible.js":39,"../color/text.js":45,"../core/locale/languages/en_US.js":67,"../string/list.js":172,"./move.js":200,"./remove.js":201}],200:[function(e,t,r){(function(){var r,n;n=e("../client/scroll.js"),t.exports=function(e,t,a){var i,o,s;return a||(a="default"),(s=d3.select("div#d3po_tooltip_id_"+a)).node()&&((i=s.datum()).cx=e,i.cy=t,i.fixed||(o="body"===i.parent.node().tagName.toLowerCase()?[n.x(),n.y()]:[0,0],"center"!==i.anchor.y?("right"===i.anchor.x?i.x=i.cx-i.arrow_offset-4:"center"===i.anchor.x?i.x=i.cx-i.width/2:"left"===i.anchor.x&&(i.x=i.cx-i.width+i.arrow_offset+2),"bottom"===i.anchor.y?i.flip=i.cy+i.height+i.offset<=i.limit[1]:"top"===i.anchor.y&&(i.flip=i.cy-i.height-i.offset<o[1]),i.flip?i.y=i.cy+i.offset+i.arrow_offset:i.y=i.cy-i.height-i.offset-i.arrow_offset):(i.y=i.cy-i.height/2,"right"===i.anchor.x?i.flip=i.cx+i.width+i.offset<=i.limit[0]:"left"===i.anchor.x&&(i.flip=i.cx-i.width-i.offset<o[0]),"center"===i.anchor.x?(i.flip=!1,i.x=i.cx-i.width/2):i.flip?i.x=i.cx+i.offset+i.arrow_offset:i.x=i.cx-i.width-i.offset),i.x<o[0]?i.x=o[0]:i.x+i.width>i.limit[0]&&(i.x=i.limit[0]-i.width),i.y<o[1]?i.y=o[1]:i.y+i.height>i.limit[1]&&(i.y=i.limit[1]-i.height)),s.style("top",i.y+"px").style("left",i.x+"px"),i.arrow&&s.selectAll(".d3po_tooltip_arrow").call(r)),s},r=function(e){return e.style("bottom",function(e){return"center"===e.anchor.y||e.flip?"auto":"-5px"}).style("right",function(e){return"center"!==e.anchor.y||e.flip?"auto":"-5px"}).style("top",function(e){return"center"!==e.anchor.y&&e.flip?"-5px":"center"===e.anchor.y?"50%":"auto"}).style("left",function(e){return"center"===e.anchor.y&&e.flip?"-5px":"center"!==e.anchor.y?"50%":"auto"}).style("margin-left",function(e){var t;return"center"===e.anchor.y?"auto":(t="right"===e.anchor.x?-e.width/2+e.arrow_offset/2:"left"===e.anchor.x?e.width/2-2*e.arrow_offset-5:-5,e.cx-e.width/2-5<t?(t=e.cx-e.width/2-5)<2-e.width/2&&(t=2-e.width/2):-(e.limit[0]-e.cx-e.width/2+5)>t&&(t=-(e.limit[0]-e.cx-e.width/2+5))>e.width/2-11&&(t=e.width/2-11),t+"px")}).style("margin-top",function(e){var t;return"center"!==e.anchor.y?"auto":(t="bottom"===e.anchor.y?-e.height/2+e.arrow_offset/2-1:"top"===e.anchor.y?e.height/2-2*e.arrow_offset-2:-9,e.cy-e.height/2-e.arrow_offset<t?(t=e.cy-e.height/2-e.arrow_offset)<4-e.height/2&&(t=4-e.height/2):-(e.limit[1]-e.cy-e.height/2+e.arrow_offset)>t&&(t=-(e.limit[1]-e.cy-e.height/2+e.arrow_offset))>e.height/2-22&&(t=e.height/2-22),t+"px")})}}).call(this)},{"../client/scroll.js":36}],201:[function(e,t,r){(function(){t.exports=function(e){return e?(d3.selectAll("div#d3po_tooltip_curtain_"+e).remove(),d3.selectAll("div#d3po_tooltip_id_"+e).remove()):(d3.selectAll("div.d3po_tooltip_curtain").remove(),d3.selectAll("div.d3po_tooltip").remove())}}).call(this)},{}],202:[function(e,t,r){(function(){t.exports=function(e,t){var r;return[],r=1/(t-1)*(e[1]-e[0]),d3.range(e[0],e[1]+r,r)}}).call(this)},{}],203:[function(e,t,r){(function(){var r;r=e("./d3selection.js"),t.exports=function(e,t){var n;if(!e||!t)return!1;for(r(e)&&(e=e.node()),r(e)&&(t=t.node()),n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}}).call(this)},{"./d3selection.js":206}],204:[function(e,t,r){(function(){t.exports=function(e,t){var r,n;return t.constructor===String?(n=e.indexOf(t))>-1?e[n]:e[0]:(r=e[0],e.forEach(function(e){if(Math.abs(t-e)<Math.abs(t-r))return r=e}),r)}}).call(this)},{}],205:[function(e,t,r){(function(){var r,n,a;n=e("../object/merge.js"),a=e("../object/validate.js"),r=function(e){var t;return a(e)?n(e):e instanceof Array?(t=[],e.forEach(function(e){return t.push(r(e))}),t):e},t.exports=r}).call(this)},{"../object/merge.js":169,"../object/validate.js":170}],206:[function(e,t,r){(function(){var r;r=e("../client/ie.js"),t.exports=function(e){return r?"object"==typeof e&&e instanceof Array&&"size"in e&&"select"in e:e instanceof d3.selection}}).call(this)},{"../client/ie.js":32}],207:[function(e,t,r){(function(){t.exports=function(e,t){var r;(r=new Image).src=e,r.crossOrigin="Anonymous",r.onload=function(){var e;(e=document.createElement("canvas")).width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0),t.call(this,e.toDataURL("image/png")),e=null}}}).call(this)},{}],208:[function(e,t,r){(function(){var r,n;r=e("../object/validate.js"),n=function(e,t,a,i,o,s){var l,u,c,d,f,p,h,v,g,m,y,x,b;if(void 0===e)return[];if(i&&void 0===o&&(o=i.id.value),s=!0===s&&void 0===s,e instanceof Array||(e=[e]),m=[],void 0===t)return e.reduce(function(e,t){var r;return r=JSON.stringify(t),m.indexOf(r)<0&&(e.indexOf(t)<0&&e.push(t),m.push(r)),e},[]);if(b=[],l=function(e){var t;if(null!=e&&(t=JSON.stringify(e),m.indexOf(t)<0))return b.push(e),m.push(t)},"function"==typeof a&&i)for(c=0,p=e.length;c<p;c++)for(u=e[c],d=0,h=(x=n(a(i,u,t,o))).length;d<h;d++)l(x[d]);else if("function"==typeof t)for(f=0,v=e.length;f<v;f++)l(x=t(u=e[f]));else for(y=0,g=e.length;y<g;y++)u=e[y],r(u)&&l(x=u[t]);return s?b.sort(function(e,t){return e-t}):b},t.exports=n}).call(this)},{"../object/validate.js":170}],209:[function(e,t,r){(function(){t.exports=function(e){var t,r,n,a,i;for(e.container.value.style("position",function(){var e;return e=d3.select(this).style("position"),["absolute","fixed"].indexOf(e)>=0?e:"relative"}),e.container.changed&&e.container.value.html(""),r=0,n=(a=["width","height"]).length;r<n;r++)e[i=a[r]].value||((t=function(r){var n,a;return void 0===r.tagName||["BODY","HTML"].indexOf(r.tagName)>=0?(a=window["inner"+i.charAt(0).toUpperCase()+i.slice(1)],(n=document!==r&&d3.select(r))&&("width"===i?(a-=parseFloat(n.style("margin-left"),10),a-=parseFloat(n.style("margin-right"),10),a-=parseFloat(n.style("padding-left"),10),a-=parseFloat(n.style("padding-right"),10)):(a-=parseFloat(n.style("margin-top"),10),a-=parseFloat(n.style("margin-bottom"),10),a-=parseFloat(n.style("padding-top"),10),a-=parseFloat(n.style("padding-bottom"),10))),e[i].value=a<=20?e[i].small:a):"number"==typeof(a=parseFloat(d3.select(r).style(i),10))&&a>0?e[i].value=a:"BODY"!==r.tagName?t(r.parentNode):void 0})(e.container.value.node()),1===d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"));e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px")}}).call(this)},{}],210:[function(e,t,r){(function(){var e={},r={sum:d3.sum,min:d3.min,max:d3.max,mean:d3.mean,median:d3.median};e.defaultString="sum",e.allowedStrings=Object.keys(r),e.fromString=function(t){return r[t]||r[e.defaultString]},t.exports=e}).call(this)},{}],211:[function(e,t,r){(function(){var e={},r={category10:d3.schemeCategory10,accent:d3.schemeAccent,dark2:d3.schemeDark2,paired:d3.schemePaired,pastel1:d3.schemePastel1,pastel2:d3.schemePastel2,set1:d3.schemeSet1,set2:d3.schemeSet2,set3:d3.schemeSet3,tableau10:d3.schemeTableau10};e.defaultString="category10",e.allowedStrings=Object.keys(r),e.fromString=function(t){return r[t]||r[e.defaultString]},t.exports=e}).call(this)},{}],212:[function(e,t,r){(function(){var e={},r={basis:d3.curveBasis,"basis-open":d3.curveBasisOpen,cardinal:d3.curveCardinal,"cardinal-open":d3.curveCardinalOpen,linear:d3.curveLinear,monotone:d3.curveMonotoneY,step:d3.curveStep,"step-before":d3.curveStepBefore,"step-after":d3.curveStepAfter};e.defaultString="linear",e.allowedStrings=Object.keys(r),e.fromString=function(t){return r[t]||r[e.defaultString]},t.exports=e}).call(this)},{}],213:[function(e,t,r){(function(){var e={},r={json:d3.json,xml:d3.xml,html:d3.html,csv:d3.csv,dsv:d3.dsv,tsv:d3.tsv,txt:d3.text,text:d3.text};e.defaultString="json",e.allowedStrings=Object.keys(r),e.fromString=function(t){return r[t]||r[e.defaultString]},t.exports=e}).call(this)},{}],214:[function(e,t,r){(function(){var e={},r={albers:d3.geoAlbers,albersUsa:d3.geoAlbersUsa,azimuthalEqualArea:d3.geoAzimuthalEqualArea,azimuthalEquidistant:d3.geoAzimuthalEquidistant,conicConformal:d3.geoConicConformal,conicEqualArea:d3.geoConicEqualArea,conicEquidistant:d3.geoConicEquidistant,equirectangular:d3.geoEquirectangular,gnomonic:d3.geoGnomonic,mercator:d3.geoMercator,orthographic:d3.geoOrthographic,stereographic:d3.geoStereographic,transverseMercator:d3.geoTransverseMercator};e.defaultString="mercator",e.allowedStrings=Object.keys(r),e.fromString=function(t){return r[t]||r[e.defaultString]},t.exports=e}).call(this)},{}],215:[function(e,t,r){(function(){var e={},r={linear:d3.scaleLinear,sqrt:d3.scaleSqrt,pow:d3.scalePow,log:d3.scaleLog,quantize:d3.scaleQuantize,threshold:d3.scaleThreshold,quantile:d3.scaleQuantile,identity:d3.scaleIdentity,ordinal:d3.scaleOrdinal};e.defaultString="linear",e.allowedStrings=Object.keys(r),e.fromString=function(t){return r[t]||r[e.defaultString]},t.exports=e}).call(this)},{}],216:[function(e,t,r){var n=e("../../core/data/format.js"),a=e("../../core/data/color.js"),i=e("../../core/data/keys.js"),o=e("../../core/data/load.js"),s=e("./ui/drawer.js"),l=e("./ui/legend.js"),u=e("./ui/timeline.js"),c=e("./errorCheck.js"),d=e("../../core/fetch/data.js"),f=e("./finish.js"),p=e("./focus/tooltip.js"),h=e("./ui/history.js"),v=e("../../core/parse/edges.js"),g=e("../../core/parse/nodes.js"),m=e("../../core/console/print.js"),y=e("../../tooltip/remove.js"),x=e("./types/run.js"),b=e("./shapes/draw.js"),j=e("../../string/format.js"),w=e("./svg/enter.js"),_=e("./svg/update.js"),k=e("./ui/titles.js"),z=e("../../object/validate.js");t.exports=function(e){var t=[],r=e.type.value,A=e.format.locale.value,M=A.message.ui,O=A.message.draw;if(["data","attrs","coords","nodes","edges"].forEach(function(r){e.error.value||e[r].loaded||!e[r].url||t.push({function:function(e,t){o(e,r,t)},message:A.message.loading,wait:!0})}),e.draw.update){var S=A.visualization[r]||r,E=e.types[r].setup||!1,F=e.types[r].requirements||[],C=j(A.message.initializing,S),B=A.message.data;F instanceof Array||(F=[F]),S=S.toLowerCase(),e.error.value||"function"!=typeof E||t.push({function:function(e){if(e.dev.value){var t="running "+S+" setup";m.time(t)}E(e),e.dev.value&&m.timeEnd(t)},message:C}),e.container.changed&&t.push({function:w,message:C}),r in e.g.apps||t.push({function:function(e){if(e.dev.value){var t="creating "+S+" group";m.time(t)}e.g.apps[r]=e.g.app.append("g").attr("id",r).attr("opacity",0),e.dev.value&&m.timeEnd(t)},message:C}),e.data.changed&&t.push({function:function(e){e.data.cache={},delete e.nodes.restricted,delete e.edges.restricted,i(e,"data")},message:B}),e.attrs.changed&&t.push({function:function(e){i(e,"attrs")},message:B}),t.push({function:function(e){if(!e.color.type||e.color.changed||e.data.changed||e.attrs.changed||e.id.changed||e.depth.changed||e.id.solo.changed||!e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed)){if(e.color.valueScale=!1,e.dev.value){var t="checking color type";m.time(t)}if(e.color.type=!1,e.color.value){var r=e.color.value;z(r)&&(r=r[e.id.value]?r[e.id.value]:r[d3.keys(r)[0]]),e.data.keys&&r in e.data.keys?e.color.type=e.data.keys[r]:e.attrs.keys&&r in e.attrs.keys&&(e.color.type=e.attrs.keys[r])}else e.data.keys&&(e.color.type=e.data.keys[e.id.value]);e.dev.value&&m.timeEnd(t)}},message:B}),(F.indexOf("edges")>=0&&e.edges.value&&(!e.edges.linked||e.edges.changed)||F.indexOf("nodes")>=0&&!e.nodes.value&&e.edges.value)&&t.push({function:v,message:B}),F.indexOf("nodes")>=0&&e.edges.value&&(!e.nodes.positions||e.nodes.changed||e.type.changed)&&t.push({function:g,message:B}),(e.data.changed||e.time.changed||e.time.format.changed||e.type.changed||e.id.changed||e.x.scale.changed&&[e.x.scale.value,e.x.scale.previous].indexOf("discrete")>=0||e.y.scale.changed&&[e.y.scale.value,e.y.scale.previous].indexOf("discrete")>=0)&&t.push({function:n,message:B}),e.error.value||t.push({function:function(e){var t=e.time.fixed.value?["all"]:null;if(e.dev.value){var r=t?"fetching pool data":"fetching data";m.time(r)}e.data.pool=d(e,t),e.dev.value&&m.timeEnd(r),t?(e.dev.value&&m.time("fetching data for current year"),e.data.viz=d(e),e.dev.value&&m.timeEnd("fetching data for current year")):e.data.viz=e.data.pool,e.draw.timing=e.data.viz.length<e.data.large?e.timing.transitions:0},message:B}),e.error.value||t.push({check:function(e){return e.color.value&&"number"===e.color.type&&!1===e.color.valueScale},function:a,message:B})}return t.push({function:function(e){if(e.dev.value){var t=e.format.locale.value.message.tooltipReset;m.time(t)}e.type.previous&&r!==e.type.previous&&y(e.type.previous),y(r),e.dev.value&&m.timeEnd(t)},message:M}),e.error.value||t.push({function:c,message:M}),t.push({function:function(e){if(e.margin.process(),k(e),!e.error.value)if(e.draw.update)s(e),u(e),l(e);else{e.dev.value&&m.time("calculating margins");var t=e.container.value.select("div#d3po_drawer").node().offsetHeight||e.container.value.select("div#d3po_drawer").node().getBoundingClientRect().height,r=e.g.timeline.node().getBBox();r=e.timeline.value?r.height+e.ui.padding:0;var n=e.g.legend.node().getBBox();n=e.legend.value?n.height+e.ui.padding:0,e.margin.bottom+=t+r+n,e.dev.value&&m.timeEnd("calculating margins")}h(e),e.height.viz-=e.margin.top+e.margin.bottom,e.width.viz-=e.margin.left+e.margin.right},message:M}),e.error.value||t.push({function:p,message:M}),t.push({function:_,message:O}),!e.error.value&&e.draw.update&&t.push({function:[x,b],message:O}),t.push({function:f,message:O}),t}},{"../../core/console/print.js":47,"../../core/data/color.js":49,"../../core/data/format.js":51,"../../core/data/keys.js":53,"../../core/data/load.js":54,"../../core/fetch/data.js":60,"../../core/parse/edges.js":93,"../../core/parse/nodes.js":96,"../../object/validate.js":170,"../../string/format.js":171,"../../tooltip/remove.js":201,"./errorCheck.js":217,"./finish.js":218,"./focus/tooltip.js":219,"./shapes/draw.js":229,"./svg/enter.js":242,"./svg/update.js":243,"./types/run.js":246,"./ui/drawer.js":247,"./ui/history.js":248,"./ui/legend.js":249,"./ui/timeline.js":251,"./ui/titles.js":252}],217:[function(e,t,r){var n=e("../../core/fetch/text.js"),a=e("../../core/console/print.js"),i=e("../../core/methods/rejected.js"),o=e("../../string/format.js"),s=e("../../string/list.js");t.exports=function(e){e.dev.value&&a.time("checking for errors");var t=["id"],r=e.types[e.type.value].requirements;r&&(r instanceof Array?t=t.concat(e.types[e.type.value].requirements):t.push(r));var l=[];if(t.forEach(function(t){if("string"==typeof t)e[t].value&&e[t].value.length||l.push('"'+t+'"');else if("function"==typeof t){var r=t(e);!r.status&&r.text&&l.push('"'+r.text+'"')}}),l.length>1){var u=e.format.locale.value.error.methods,c=e.format.locale.value.visualization[e.type.value]||e.type.value,d=e.format.locale.value.ui.and;l=s(l,d),e.error.internal=o(u,c,l)}else if(1===l.length){u=e.format.locale.value.error.method,c=e.format.locale.value.visualization[e.type.value]||e.type.value;e.error.internal=o(u,c,l[0])}if(!e.error.internal&&t.indexOf("edges")>=0&&t.indexOf("focus")>=0&&0==e.edges.connections(e.focus.value[0],e.id.value).length){var f=n(e,e.focus.value[0],e.depth.value);u=e.format.locale.value.error.connections;e.error.internal=o(u,'"'+f+'"')}t=["d3"];e.types[e.type.value].libs&&(t=t.concat(e.types[e.type.value].libs));l=[];if(t.forEach(function(e){window[e]||l.push('"'+e+'"')}),l.length>1){u=e.format.locale.value.error.libs,c=e.format.locale.value.visualization[e.type.value],d=e.format.locale.value.ui.and;l=s(l,d),e.error.internal=o(u,c,l)}else if(1===l.length){u=e.format.locale.value.error.lib,c=e.format.locale.value.visualization[e.type.value];e.error.internal=o(u,c,l[0])}var p=e.shape.accepted(e);p instanceof Array||(p=[p]);var h=e.shape.value;if(h&&!i(e,p,h,"shape")||e.self.shape(p[0]),"modes"in e.types[e.type.value]){var v=e.types[e.type.value].modes;v instanceof Array||(v=[v]);var g=e.type.mode.value;g&&!i(e,v,g,"mode")||e.self.type({mode:v[0]})}e.dev.value&&a.timeEnd("checking for errors")}},{"../../core/console/print.js":47,"../../core/fetch/text.js":62,"../../core/methods/rejected.js":89,"../../string/format.js":171,"../../string/list.js":172}],218:[function(e,t,r){var n=e("./shapes/edges.js"),a=e("./shapes/paths.js"),i=e("./ui/message.js"),o=e("./focus/viz.js"),s=e("../../core/methods/reset.js"),l=e("../../core/console/print.js"),u=e("./shapes/labels.js"),c=e("../../string/title.js"),d=e("./zoom/bounds.js"),f=e("./zoom/labels.js"),p=e("./zoom/mouse.js");t.exports=function(e){if(e.draw.first?setTimeout(function(){o(e)},e.draw.timing):o(e),!e.error.value){var t=e.zoom.viewport||e.zoom.bounds;e.types[e.type.value].zoom&&e.zoom.value&&t?(e.dev.value&&l.time("calculating zoom"),e.draw.first||e.zoom.reset?d(e,t,0):(e.type.changed||e.focus.changed||e.height.changed||e.width.changed||e.nodes.changed||e.legend.changed||e.timeline.changed||e.ui.changed)&&d(e,t),e.dev.value&&l.timeEnd("calculating zoom")):(e.zoom.bounds=[[0,0],[e.width.viz,e.height.viz]],e.zoom.scale=1,d(e))}var r=e.zoom.size?e.zoom.size.width:e.width.viz,h=e.zoom.size?e.zoom.size.height:e.height.viz,v=e.zoom.bounds?e.zoom.bounds[0][0]:0,g=e.zoom.bounds?e.zoom.bounds[0][1]:0;if(e.g.overlay.attr("width",r).attr("height",h).attr("x",v).attr("y",g),e.error.value||(e.draw.update?(e.edges.path?a(e):n(e),u(e,"data"),e.edges.label&&!e.edges.path&&setTimeout(function(){u(e,"edges")},e.draw.timing+200)):(e.labels.value||e.labels.changed)&&e.types[e.type.value].zoom&&e.zoom.value&&e.draw.timing&&setTimeout(function(){f(e)},e.draw.timing)),!e.error.value){var m=e.types[e.type.value].requirements||[];m instanceof Array||(m=[m]);var y=m.indexOf("data")>=0;e.error.internal||e.data.viz&&e.returned.nodes.length||!y||(e.error.internal=e.format.locale.value.error.data)}var x=e.type.previous;if(x&&e.type.value!=x&&e.g.apps[x]&&(e.dev.value&&l.time('hiding "'+x+'"'),e.draw.timing?e.g.apps[x].transition().duration(e.draw.timing).attr("opacity",0):e.g.apps[x].attr("opacity",0),e.dev.value&&l.timeEnd()),!e.error.value){var b=y&&0===e.data.viz.length||e.error.internal||e.error.value?0:e.focus.value.length&&e.types[e.type.value].zoom&&e.zoom.value?1-e.tooltip.curtain.opacity:1,j=e.draw.timing;e.group.transition().duration(j).attr("opacity",b),e.g.data.transition().duration(j).attr("opacity",b),e.g.edges.transition().duration(j).attr("opacity",b)}e.error.value?i(e,e.error.value):e.error.internal?(e.error.internal=c(e.error.internal),l.warning(e.error.internal),i(e,e.error.internal),e.error.internal=null):i(e),setTimeout(function(){s(e),e.types[e.type.value].zoom&&e.zoom.value?(e.g.zoom.datum(e).call(e.zoom.behavior.on("zoom",p)),e.zoom.scroll.value||e.g.zoom.on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null),e.zoom.click.value||e.g.zoom.on("dblclick.zoom",null),e.zoom.pan.value||e.g.zoom.on("mousedown.zoom",null).on("mousemove.zoom",null)):e.g.zoom.call(e.zoom.behavior.on("zoom",null)).on("dblclick.zoom",null).on("mousedown.zoom",null).on("mousemove.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("touchstart.zoom",null).on("wheel.zoom",null)},e.draw.timing)}},{"../../core/console/print.js":47,"../../core/methods/reset.js":91,"../../string/title.js":174,"./focus/viz.js":220,"./shapes/edges.js":230,"./shapes/labels.js":232,"./shapes/paths.js":234,"./ui/message.js":250,"./zoom/bounds.js":253,"./zoom/labels.js":255,"./zoom/mouse.js":256}],219:[function(e,t,r){(function(){var r,n,a,i;r=e("../tooltip/create.js"),n=e("../../../core/fetch/value.js"),a=e("../../../core/console/print.js"),i=e("../../../tooltip/remove.js"),t.exports=function(e){var t,o,s;o=e.focus,!e.error.internal&&1===o.value.length&&o.value.length&&!e.small&&o.tooltip.value?(e.dev.value&&a.time("drawing focus tooltip"),(t=e.data.pool.filter(function(t){return n(e,t,e.id.value)===o.value[0]})).length>=1?t=t[0]:(t={})[e.id.value]=o.value[0],s=e.labels.padding,r({anchor:"top left",arrow:!1,data:t,fullscreen:!1,id:"visualization_focus",length:"long",maxheight:e.height.viz-2*s,mouseevents:!0,offset:0,vars:e,width:e.tooltip.large,x:e.width.value-e.margin.right-s,y:e.margin.top+s}),e.width.viz-=e.tooltip.large+2*s,e.dev.value&&a.timeEnd("drawing focus tooltip")):i("visualization_focus")}}).call(this)},{"../../../core/console/print.js":47,"../../../core/fetch/value.js":63,"../../../tooltip/remove.js":201,"../tooltip/create.js":244}],220:[function(t,r,n){var a=t("../../../client/pointer.js"),i=t("../../../client/ie.js"),o=t("../../../core/fetch/value.js"),s=t("../../../core/console/print.js"),l=t("../../../util/uniques.js");r.exports=function(t){if(t.g.edge_focus.selectAll("g").remove(),t.g.data_focus.selectAll("g").remove(),t.focus.value.length&&t.types[t.type.value].zoom&&t.zoom.value){t.dev.value&&s.time("drawing focus elements");var r=t.g.edges.selectAll("g");if(r.size()>0){r.each(function(e){var r=e[t.edges.source][t.id.value],n=e[t.edges.target][t.id.value];if(r==t.focus.value[0]||n==t.focus.value[0]){var a=t.g.edge_focus.node().appendChild(this.cloneNode(!0));d3.select(a).datum(e).attr("opacity",1).selectAll("line, path").datum(e)}});var n=t.edges.arrows.value;t.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",t.color.focus).style("stroke-width",function(){return i&&t.types[t.type.value].zoom?0:t.edges.size.value?d3.select(this).style("stroke-width"):2*t.data.stroke.width}).attr("marker-start",function(e){var r=t.edges.arrows.direction.value;if("bucket"in e.d3po)var a="_"+e.d3po.bucket;else a="";return"source"==r&&n?"url(#d3po_edge_marker_focus"+a+")":"none"}).attr("marker-end",function(e){var r=t.edges.arrows.direction.value;if("bucket"in e.d3po)var a="_"+e.d3po.bucket;else a="";return"target"==r&&n?"url(#d3po_edge_marker_focus"+a+")":"none"}),t.g.edge_focus.selectAll("text").style("fill",t.color.focus)}var u=l(t.edges.connections(t.focus.value[0],t.id.value,!0),t.id.value,o,t);u.push(t.focus.value[0]);var c=[],d=[],f=[0],p=[0];t.g.data.selectAll("g").each(function(r){if(u.indexOf(r[t.id.value])>=0){var n=t.g.data_focus.node().appendChild(this.cloneNode(!0));n=d3.select(n).datum(r).attr("opacity",1);for(e in"coordinates"==t.shape.value?t.zoom.viewport=t.path.bounds(t.zoom.coords[r.d3po.id]):"d3po"in r&&("x"in r.d3po&&c.push(r.d3po.x),"y"in r.d3po&&d.push(r.d3po.y),"r"in r.d3po?(f.push(r.d3po.r),p.push(r.d3po.r)):("width"in r.d3po&&f.push(r.d3po.width/2),"height"in r.d3po&&p.push(r.d3po.height/2))),a){var i=d3.select(this).on(a[e]);i&&n.on(a[e],i)}}});if(c.length&&d.length){var h=d3.extent(c),v=d3.extent(d),g=d3.max(f),m=d3.max(p);t.zoom.viewport=[[h[0]-g,v[0]-m],[h[1]+g,v[1]+m]]}t.g.data_focus.selectAll("path").style("stroke-width",i&&t.types[t.type.value].zoom?0:2*t.data.stroke.width),t.dev.value&&s.timeEnd("drawing focus elements")}else t.zoom.viewport=!1}},{"../../../client/ie.js":32,"../../../client/pointer.js":33,"../../../core/console/print.js":47,"../../../core/fetch/value.js":63,"../../../util/uniques.js":208}],221:[function(e,t,r){(function(){var r,n,a,i;i=e("./style.js"),n=e("../../../geom/largestrectangle.js"),a=e("../../../geom/path2poly.js"),r={start:{},end:{}},t.exports=function(e,t,o,s){var l,u,c,d;l=d3.arc().innerRadius(function(e){return e.d3po.r_inner}).outerRadius(function(e){return e.d3po.r_outer}).startAngle(function(e){return e.d3po.startAngle}).endAngle(function(e){return e.d3po.endAngle}),c=function(t){var r,i;return e.labels.value&&(t.d3po.label?t.d3po_label=t.d3po.label:t.d3po.endAngle-t.d3po.startAngle>=.1?(r=a(l(t)),(i=n(r,{angle:0}))[0]?t.d3po_label={w:i[0].width,h:i[0].height,x:i[0].cx,y:i[0].cy}:delete t.d3po_label):delete t.d3po_label),[t]},e.draw.timing?(d=d3.arc().innerRadius(function(e){return e.d3po.r_inner}).outerRadius(function(e){return e.d3po.r_outer}).startAngle(function(e){return void 0===r.start[e.d3po.id]&&(r.start[e.d3po.id]=0),isNaN(r.start[e.d3po.id])&&(r.start[e.d3po.id]=e.d3po.startAngle),r.start[e.d3po.id]}).endAngle(function(e){return void 0===r.end[e.d3po.id]&&(r.end[e.d3po.id]=0),isNaN(r.end[e.d3po.id])&&(r.end[e.d3po.id]=e.d3po.endAngle),r.end[e.d3po.id]}),u=function(e,t){return e.attrTween("d",function(e){var n,a,i,o;return void 0===t?(o=e.d3po.startAngle,n=e.d3po.endAngle):0===t&&(o=0,n=0),i=d3.interpolate(r.start[e.d3po.id],o),a=d3.interpolate(r.end[e.d3po.id],n),function(t){return r.start[e.d3po.id]=i(t),r.end[e.d3po.id]=a(t),d(e)}})},o.append("path").attr("class","d3po_data").call(i,e).attr("d",d),t.selectAll("path.d3po_data").data(c).transition().duration(e.draw.timing).call(i,e).call(u),s.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(u,0)):(o.append("path").attr("class","d3po_data"),t.selectAll("path.d3po_data").data(c).call(i,e).attr("d",l))}}).call(this)},{"../../../geom/largestrectangle.js":158,"../../../geom/path2poly.js":160,"./style.js":238}],222:[function(e,t,r){var n=e("../../../core/fetch/text.js"),a=e("../../../font/sizes.js"),i=e("../../../geom/largestrectangle.js"),o=e("../d3functions/curves.js"),s=e("./style.js");t.exports=function(e,t,r,l){var u=d3.area().x(function(e){return e.d3po.x}).y0(function(e){return e.d3po.y0}).y1(function(e){return e.d3po.y}).curve(o.fromString(e.shape.interpolate.value)),c=d3.area().x(function(e){return e.d3po.x}).y0(function(e){return e.d3po.y0}).y1(function(e){return e.d3po.y0}).curve(o.fromString(e.shape.interpolate.value));r.append("path").attr("class","d3po_data").attr("d",function(e){return c(e.values)}).call(s,e);var d={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value};t.selectAll("path.d3po_data").data(function(t){if(e.labels.value&&t.values.length>1){var r=!1;if(d3.max(t.values,function(e){return e.d3po.y0-e.d3po.y})>e.labels.font.size){var o=[],s=[],l=n(e,t);t.values.forEach(function(e){o.push([e.d3po.x,e.d3po.y]),s.push([e.d3po.x,e.d3po.y0])}),o=o.concat(s.reverse());var u=null;if(l.length){var c=a(l[0],d);u=c[0].width/c[0].height}r=i(o,{angle:d3.range(-70,71,1),aspectRatio:u,tolerance:0})}if(r&&r[0]){var f={w:~~r[0].width,h:~~r[0].height,x:~~r[0].cx,y:~~r[0].cy,angle:-1*r[0].angle,padding:2,names:l};0!==r[0].angle?f.translate={x:f.x,y:f.y}:f.translate=!1,f.w>=10&&f.h>=10&&(t.d3po_label=f)}}return[t]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).attr("d",function(e){return u(e.values)}).call(s,e):t.selectAll("path.d3po_data").attr("d",function(e){return u(e.values)}).call(s,e)}},{"../../../core/fetch/text.js":62,"../../../font/sizes.js":100,"../../../geom/largestrectangle.js":158,"../d3functions/curves.js":212,"./style.js":238}],223:[function(e,t,r){e("../../../core/fetch/text.js"),e("../../../geom/largestrectangle.js");var n=e("./style.js");t.exports=function(e,t,r,a){function i(e){e.attr("transform",function(e){var t=Math.min(e.d3po.width,e.d3po.height);return"scale("+Math.floor(t/16)+")"})}r.append("path").attr("class","d3po_data").attr("d","M5-6.844L3.594-5.407L-2,0.188l-1.594-1.594L-5-2.844L-7.844,0l1.438,1.406l3,3L-2,5.843l1.406-1.438l7-7L7.844-4L5-6.844z").call(function(e){e.attr("transform","scale(1)")}).call(n,e),t.selectAll("path.d3po_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(i).call(n,e):t.selectAll("path.d3po_data").call(i).call(n,e)}},{"../../../core/fetch/text.js":62,"../../../geom/largestrectangle.js":158,"./style.js":238}],224:[function(e,t,r){(function(){var r,n,a;e("../../../core/fetch/value.js"),r=e("../../../core/fetch/color.js"),n=e("../../../color/lighter.js"),a=e("./segments.js"),t.exports=function(e,t,i){var o,s,l,u;return s=e.d3po.shape||t.shape.value,"line"===t.shape.value&&"circle"!==s?"none":"area"===t.shape.value||"active"===s||"line"===t.shape.value?r(t,e):"temp"===s?i?r(t,e):"url(#d3po_hatch_"+e.d3po.id+")":e.d3po.static?n(r(t,e),.75):(o=a(t,e,"active"),l=a(t,e,"temp"),u=a(t,e,"total"),!t.active.value&&!t.temp.value||!0===o||o&&u&&o>=u&&!l||o&&!u?r(t,e):t.active.spotlight.value?t.color.missing:n(r(t,e),.75))}}).call(this)},{"../../../color/lighter.js":40,"../../../core/fetch/color.js":59,"../../../core/fetch/value.js":63,"./segments.js":237}],225:[function(e,t,r){(function(){var r,n,a,i,o,s,l,u;r=e("../../../util/copy.js"),n=e("../../../network/distance.js"),a=e("../../../core/fetch/text.js"),i=e("../../../font/sizes.js"),s=e("../../../geom/largestrectangle.js"),l=e("../../../geom/path2poly.js"),projections=e("../d3functions/projections.js"),u=e("./style.js"),o={},t.exports=function(e,t,c,d){var f,p;return(f="function"==typeof e.coords.projection.value?e.coords.projection.value:projections.fromString(e.coords.projection.value)()).center&&f.center(e.coords.center),e.zoom.scale||(e.zoom.scale=1),e.zoom.area=1/e.zoom.scale/e.zoom.scale,e.path=d3.geoPath().projection(f),e.draw.timing?t.selectAll("path.d3po_data").attr("d",e.path).transition().duration(e.draw.timing).call(u,e):t.selectAll("path.d3po_data").attr("d",e.path).call(u,e),c.append("path").attr("id",function(e){return e.id}).attr("class","d3po_data").attr("d",e.path).call(u,e),p=e.old_height!==e.height.viz||e.height.changed||e.old_width!==e.width.viz||e.width.changed,e.old_height=e.height.viz,e.old_width=e.width.viz,e.coords.changed||p||e.coords.mute.changed||e.coords.solo.changed||e.type.changed||e.text.changed||e.coords.projection.changed||e.labels.changed?(e.zoom.bounds=null,e.zoom.reset=!0,e.zoom.coords={},t.each(function(t){var u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S;if(e.coords.simplify.value&&t.geometry.coordinates.length>1){for(m=[],c=[],u=0,b=r(t),A=r(t),t.geometry.coordinates=t.geometry.coordinates.filter(function(t,r){var n;return A.geometry.coordinates=[t],(n=e.path.area(A))>0&&(c.push(n),n>u&&(b.geometry.coordinates=[t],u=n),!0)}),p=e.path.centroid(b),y=x=0,j=(M=t.geometry.coordinates).length;x<j;y=++x)f=M[y],A.geometry.coordinates=[f],m.push(n(e.path.centroid(A),p));g=m.reduce(function(e,t,r){return t&&e.push(c[r]/t),e},[]),v=d3.quantile(g,e.coords.threshold.value),A.geometry.coordinates=t.geometry.coordinates.filter(function(e,t){var r,n;return n=m[t],r=c[t],0===n||r/n>=v}),(h=b.geometry.coordinates[0])&&"MultiPolygon"===b.geometry.type&&(h=h[0],b.geometry.coordinates[0]=h,b.geometry.type="Polygon")}else A=t,b=t,h=t.geometry.coordinates[0];return e.zoom.coords[t.d3po.id]=A,delete t.d3po_label,e.labels.value&&(w=a(e,t),h&&w.length&&(_=l(e.path(b)),S={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value},k=null,1===w[0].split(" ").length&&(k=(O=i(w[0],S)[0]).width/O.height),(z=s(_,{angle:0,aspectRatio:k}))&&(z=z[0],t.d3po_label={anchor:"middle",valign:"center",h:z.height,w:z.width,x:z.cx,y:z.cy,names:w}))),o[t.id]=t.d3po_label,d=e.path.bounds(A),e.zoom.bounds?(e.zoom.bounds[0][0]>d[0][0]&&(e.zoom.bounds[0][0]=d[0][0]),e.zoom.bounds[0][1]>d[0][1]&&(e.zoom.bounds[0][1]=d[0][1]),e.zoom.bounds[1][0]<d[1][0]&&(e.zoom.bounds[1][0]=d[1][0]),e.zoom.bounds[1][1]<d[1][1]?e.zoom.bounds[1][1]=d[1][1]:void 0):e.zoom.bounds=d})):e.focus.value.length?void 0:(e.zoom.viewport=!1,t.each(function(e){return e.d3po_label=o[e.id]}))}}).call(this)},{"../../../core/fetch/text.js":62,"../../../font/sizes.js":100,"../../../geom/largestrectangle.js":158,"../../../geom/path2poly.js":160,"../../../network/distance.js":163,"../../../util/copy.js":205,"../d3functions/projections.js":214,"./style.js":238}],226:[function(e,t,r){var n=e("./style.js");t.exports=function(e,t,r,a){function i(e){e.attr("d",d3.symbol().type(d3.symbolCross).size(function(e){var t=Math.min(e.d3po.width,e.d3po.height);return d3.scalePow().exponent(2)(t/2)}))}r.append("path").attr("class","d3po_data").call(function(e){e.attr("d",d3.symbol().type(d3.symbolCross).size(10))}).call(n,e),t.selectAll("path.d3po_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(i).call(n,e):t.selectAll("path.d3po_data").call(i).call(n,e)}},{"./style.js":238}],227:[function(e,t,r){var n=e("./style.js");t.exports=function(e,t,r,a){function i(e){e.attr("d",d3.symbol().type(d3.symbolDiamond).size(function(e){var t=Math.min(e.d3po.width,e.d3po.height);return d3.scalePow().exponent(2)(t/2)}))}r.append("path").attr("class","d3po_data").call(function(e){e.attr("d",d3.symbol().type(d3.symbolDiamond).size(10))}).call(n,e),t.selectAll("path.d3po_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(i).call(n,e):t.selectAll("path.d3po_data").call(i).call(n,e)}},{"./style.js":238}],228:[function(e,t,r){var n=e("./style.js");t.exports=function(e,t,r,a){e.arcs||(e.arcs={donut:{},active:{},temp:{}});var i=d3.arc().startAngle(0).endAngle(function(t){var r=e.arcs[t.d3po.shape][t.d3po.id].a;return r>2*Math.PI?2*Math.PI:r}).innerRadius(function(t){return t.d3po.static?0:e.arcs[t.d3po.shape][t.d3po.id].r*e.data.donut.size}).outerRadius(function(t){return e.arcs[t.d3po.shape][t.d3po.id].r});function o(t,r,n,a){if(!r)r=0;if("number"!=typeof n)n=void 0;if("number"!=typeof a)a=void 0;t.attrTween("d",function(t){if(null==n)var o=t.d3po.r?t.d3po.r:d3.max([t.d3po.width,t.d3po.height]);else o=n;if(null==a)var s=t.d3po.segments[t.d3po.shape];else s=a;e.arcs[t.d3po.shape][t.d3po.id]||(e.arcs[t.d3po.shape][t.d3po.id]={r:0},e.arcs[t.d3po.shape][t.d3po.id].a=2*Math.PI);var l=d3.interpolate(e.arcs[t.d3po.shape][t.d3po.id].r,o+r),u=d3.interpolate(e.arcs[t.d3po.shape][t.d3po.id].a,s);return function(r){return e.arcs[t.d3po.shape][t.d3po.id].r=l(r),e.arcs[t.d3po.shape][t.d3po.id].a=u(r),i(t)}})}function s(e){return e.d3po.label?e.d3po_label=e.d3po.label:delete e.d3po_label,[e]}e.draw.timing?(a.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(o,0,0).each("end",function(t){delete e.arcs[t.d3po.shape][t.d3po.id]}),t.selectAll("path.d3po_data").data(s).transition().duration(e.draw.timing).call(o).call(n,e),r.append("path").attr("class","d3po_data").transition().duration(0).call(o,0,0).call(n,e).transition().duration(e.draw.timing).call(o).call(n,e)):(a.selectAll("path.d3po_data").each(function(t){delete e.arcs[t.d3po.shape][t.d3po.id]}),r.append("path").attr("class","d3po_data"),t.selectAll("path.d3po_data").data(s).call(o).call(n,e))}},{"./style.js":238}],229:[function(e,t,r){var n=e("../../../util/child.js"),a=e("../../../util/closest.js"),i=e("../tooltip/create.js"),o=e("../../../client/pointer.js"),s=e("../../../core/fetch/value.js"),l=e("../../../core/fetch/color.js"),u=e("../../../core/fetch/text.js"),c=e("../../../color/legible.js"),d=e("../../../core/console/print.js"),f=e("../../../tooltip/remove.js"),p=e("./segments.js"),h=e("./fill.js"),v=e("../../../string/strip.js"),g=e("../../../client/touch.js"),m=e("../zoom/propagation.js"),y=e("../../../util/uniques.js"),x=e("../../../object/validate.js"),b=e("../zoom/direction.js"),j={arc:e("./arc.js"),area:e("./area.js"),check:e("./check.js"),coordinates:e("./coordinates.js"),cross:e("./cross.js"),diamond:e("./diamond.js"),donut:e("./donut.js"),line:e("./line.js"),radial:e("./radial.js"),rect:e("./rect.js"),triangle_down:e("./triangle_down.js"),triangle_up:e("./triangle_up.js"),whisker:e("./whisker.js")};t.exports=function(e){var t=e.returned.nodes||[],r=e.returned.edges||[];e.draw.timing=t.length<e.data.large&&r.length<e.edges.large?e.timing.transitions:0;var w={arc:"arc",area:"area",check:"check",circle:"rect",coordinates:"coordinates",cross:"cross",donut:"donut",diamond:"diamond",line:"line",plus:"cross",radial:"radial",rect:"rect",square:"rect",triangle_down:"triangle_down",triangle:"triangle_up",triangle_up:"triangle_up",whisker:"whisker"},_={};function k(t){if(!t.d3po.id){t.d3po.id="";for(var r=0;r<=e.depth.value;r++)t.d3po.id+=s(e,t,e.id.nesting[r])+"_";t.d3po.id+=S,["x","y","x2","y2"].forEach(function(r){if("discrete"==e[r].scale.value){var n=s(e,t,e[r].value);n.constructor===Date&&(n=n.getTime()),t.d3po.id+="_"+n}}),t.d3po.suffix&&(t.d3po.id+="_"+t.d3po.suffix),t.d3po.id=v(t.d3po.id)}return t}function z(t,r){var n=e.types[e.type.value].scale,a=1;n&&(x[n]&&e.shape.value in n?a=n[e.shape.value]:"function"==typeof n?a=n(e,e.shape.value):"number"==typeof n&&(a=n)),a=r?a:1,t.attr("transform",function(e){return["line","area","coordinates"].indexOf(S)<0?"translate("+(e.d3po.x||0)+","+(e.d3po.y||0)+")scale("+a+")":"scale("+a+")"})}function A(t){t.attr("id",function(e){return"d3po_group_"+e.d3po.id}).attr("class",function(t){var r=e.class.value?" "+s(e,t,e.class.value):"";return"d3po_"+S+r})}for(var M in t.forEach(function(t){var r=t.d3po&&t.d3po.shape?t.d3po.shape:e.shape.value;r in w&&(t.d3po&&(t.d3po.shape=r),_[r=w[r]]||(_[r]=[]),_[r].push(t))}),w)if(!(w[M]in _)||0===d3.keys(_).length){var O=e.g.data.selectAll("g.d3po_"+w[M]);e.draw.timing?O.transition().duration(e.draw.timing).attr("opacity",0).remove():O.remove()}for(var S in _){var E=e.g.data.selectAll("g.d3po_"+S).data(_[S],function(t){if(t.d3po||(t.d3po={}),"coordinates"===S)return t.d3po.id=t.id,t.id;if(!t.d3po.id)if(t.values)t.values.forEach(function(e){(e=k(e)).d3po.shape="circle"}),t.d3po.id=t.key;else if(!(t=k(t)).d3po.segments){t.d3po.segments={donut:2*Math.PI};var r=p(e,t,"active"),n=p(e,t,"temp"),a=p(e,t,"total");a&&(t.d3po.segments.active=r?r/a*(2*Math.PI):0,t.d3po.segments.temp=n?n/a*(2*Math.PI)+t.d3po.segments.active:0)}return!!t.d3po&&t.d3po.id});if(e.draw.timing)var F=E.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();else F=E.exit().remove();e.draw.timing?E.transition().duration(e.draw.timing).call(z).call(A):E.call(z).call(A);var C=e.draw.timing?0:1,B=E.enter().append("g").attr("opacity",C).call(z).call(A);e.draw.timing&&B.transition().duration(e.draw.timing).attr("opacity",1),E.order(),e.dev.value&&d.time('drawing "'+S+'" shapes'),j[S](e,E,B,F,z),e.dev.value&&d.timeEnd('drawing "'+S+'" shapes'),["rect","donut"].indexOf(S)>=0&&e.types[e.type.value].fill&&(e.dev.value&&d.time('filling "'+S+'" shapes'),h(e,E,B,F,z),e.dev.value&&d.timeEnd('filling "'+S+'" shapes'))}function T(t){if(t&&e.g.edges.selectAll("g").size()>0){e.g.edge_hover.selectAll("*").remove(),e.g.edges.selectAll("g").each(function(r){var n=t[e.id.value],a=r[e.edges.source][e.id.value],i=r[e.edges.target][e.id.value];if(a==n||a=="left_"+n||a=="right_"+n||i==n||i=="left_"+n||i=="right_"+n){var o=e.g.edge_hover.node().appendChild(this.cloneNode(!0));d3.select(o).datum(r).attr("opacity",1).selectAll("line, path").datum(r)}});var r=e.edges.arrows.value;e.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",e.color.primary).style("stroke-width",function(t){return e.edges.path&&t.dy?Math.max(1,t.dy):e.edges.size.value?d3.select(this).style("stroke-width"):2*e.data.stroke.width}).attr("marker-start",function(t){var n=e.edges.arrows.direction.value;if("bucket"in t.d3po)var a="_"+t.d3po.bucket;else a="";return"source"==n&&r?"url(#d3po_edge_marker_highlight"+a+")":"none"}).attr("marker-end",function(t){var n=e.edges.arrows.direction.value;if("bucket"in t.d3po)var a="_"+t.d3po.bucket;else a="";return"target"==n&&r?"url(#d3po_edge_marker_highlight"+a+")":"none"}),e.g.edge_hover.selectAll("text").style("fill",e.color.primary),e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",1),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",.5)):e.g.edge_hover.attr("opacity",1)}else e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",1)):e.g.edge_hover.selectAll("*").remove()}if(T(),e.tooltip.value)e.g.data.selectAll("g").on(o.over,function(t){if(g&&m(e,d3.event),d3.event.buttons||!e.mouse.value||!e.mouse.over.value||e.draw.frozen||t.d3po&&t.d3po.static)f(e.type.value);else{var r="function"!=typeof e.mouse.over.value;if("function"==typeof e.mouse.over.value&&(r=e.mouse.over.value(t,e.self)),r){var n=b(t.d3po_data||t,e),s="function"==typeof e.mouse.viz||"function"==typeof e.mouse.viz[o.click]||e.zoom.value&&(e.types[e.type.value].zoom||t.d3po.threshold&&t.d3po.merged||1===n||-1===n&&e.history.states.length&&!e.tooltip.value.long);if(d3.select(this).style("cursor",s?"pointer":"auto").transition().duration(e.timing.mouseevents).call(z,!0),d3.select(this).selectAll(".d3po_data").transition().duration(e.timing.mouseevents).attr("opacity",1),e.covered=!1,t.values&&e.axes.discrete){var l="x"===e.axes.discrete?0:1,u=d3.mouse(e.container.value.node())[l],c=y(t.values,function(t){return t.d3po[e.axes.discrete]}),d=a(c,u);t.d3po_data=t.values[c.indexOf(d)],t.d3po=t.values[c.indexOf(d)].d3po}var p=t.d3po_data?t.d3po_data:t;i({vars:e,data:p}),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3po_data||t,e):e.mouse.viz[o.over]&&e.mouse.viz[o.over](t.d3po_data||t,e),T(t)}}}).on(o.move,function(t){if(g&&m(e,d3.event),d3.event.buttons||!e.mouse.value||!e.mouse.move.value||e.draw.frozen||t.d3po&&t.d3po.static)f(e.type.value);else{var r="function"!=typeof e.mouse.move.value;if("function"==typeof e.mouse.move.value&&(r=e.mouse.move.value(t,e.self)),r){var n=b(t.d3po_data||t,e),s="function"==typeof e.mouse.viz||"function"==typeof e.mouse.viz[o.click]||e.zoom.value&&(e.types[e.type.value].zoom||t.d3po.threshold&&t.d3po.merged||1===n||-1===n&&e.history.states.length&&!e.tooltip.value.long);d3.select(this).style("cursor",s?"pointer":"auto");e.types[e.type.value].tooltip;if(t.values&&e.axes.discrete){var l="x"===e.axes.discrete?0:1,u=d3.mouse(e.container.value.node())[l],c=y(t.values,function(t){return t.d3po[e.axes.discrete]}),d=a(c,u);t.d3po_data=t.values[c.indexOf(d)],t.d3po=t.values[c.indexOf(d)].d3po}var p=t.d3po_data?t.d3po_data:t;i({vars:e,data:p}),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3po_data||t,e):e.mouse.viz[o.move]&&e.mouse.viz[o.move](t.d3po_data||t,e)}}}).on(o.out,function(t){if(g&&m(e,d3.event),!d3.event.buttons&&e.mouse.value&&e.mouse.out.value){var r="function"!=typeof e.mouse.out.value;if("function"==typeof e.mouse.out.value&&(r=e.mouse.out.value(t,e.self)),r)n(this,d3.event.toElement)||e.draw.frozen||t.d3po&&t.d3po.static||(d3.select(this).transition().duration(e.timing.mouseevents).call(z),d3.select(this).selectAll(".d3po_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),e.covered||f(e.type.value),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3po_data||t,e):e.mouse.viz[o.out]&&e.mouse.viz[o.out](t.d3po_data||t,e),T())}else f(e.type.value)});else{var q=function(){m(e,d3.event)};e.g.data.selectAll("g").on(o.over,q).on(o.move,q).on(o.out,q)}d3.select(window).on("scroll.d3po",function(){f(e.type.value)}),e.g.data.selectAll("g").on(o.click,function(t){if((!e.mouse.viz||!1!==e.mouse.viz.click)&&e.mouse.value&&e.mouse.click.value&&!d3.event.defaultPrevented&&!e.draw.frozen&&(!t.d3po||!t.d3po.static)){var r="function"!=typeof e.mouse.click.value;if("function"==typeof e.mouse.click.value&&(r=e.mouse.click.value(t,e.self)),r){if(t.values&&e.axes.discrete){var n="x"===e.axes.discrete?0:1,d=d3.mouse(e.container.value.node())[n],p=y(t.values,function(t){return t.d3po[e.axes.discrete]}),h=a(p,d);t.d3po_data=t.values[p.indexOf(h)],t.d3po=t.values[p.indexOf(h)].d3po}"function"==typeof e.mouse.viz?e.mouse.viz(t.d3po_data||t,e):e.mouse.viz[o.out]?e.mouse.viz[o.out](t.d3po_data||t,e):e.mouse.viz[o.click]&&e.mouse.viz[o.click](t.d3po_data||t,e);var v=b(t.d3po_data||t,e),g=e.id.solo.value,m=u(e,t)[0],x=c(l(e,t)),j=e.title.sub.value||!1,w=e.title.sub.font.color,_=e.title.total.font.color;if(t.d3po.threshold&&t.d3po.merged&&e.zoom.value)e.history.states.push(function(){e.self.id({solo:g}).title({sub:{font:{color:w},value:j},total:{font:{color:_}}}).draw()}),e.self.id({solo:g.concat(y(t.d3po.merged,e.id.value,s,e))}).title({sub:{font:{color:x},value:m},total:{font:{color:x}}}).draw();else if(1===v&&e.zoom.value){var k=s(e,t.d3po_data||t,e.id.value);e.history.states.push(function(){e.self.depth(e.depth.value-1).id({solo:g}).title({sub:{font:{color:w},value:j},total:{font:{color:_}}}).draw()}),e.self.depth(e.depth.value+1).id({solo:g.concat(k)}).title({sub:{font:{color:x},value:m},total:{font:{color:x}}}).draw()}else if(-1===v&&e.zoom.value&&e.history.states.length&&!e.tooltip.value.long)e.history.back();else if(e.types[e.type.value].zoom&&e.zoom.value)T(),d3.select(this).transition().duration(e.timing.mouseevents).call(z),d3.select(this).selectAll(".d3po_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),f(e.type.value),e.draw.update=!1,t&&t[e.id.value]!=e.focus.value[0]?e.self.focus(t[e.id.value]).draw():e.self.focus(!1).draw();else if(e.types[e.type.value].requirements.indexOf("focus")<0){T();var A=t.d3po_data?t.d3po_data:t;i({vars:e,data:A})}}}})}},{"../../../client/pointer.js":33,"../../../client/touch.js":38,"../../../color/legible.js":39,"../../../core/console/print.js":47,"../../../core/fetch/color.js":59,"../../../core/fetch/text.js":62,"../../../core/fetch/value.js":63,"../../../object/validate.js":170,"../../../string/strip.js":173,"../../../tooltip/remove.js":201,"../../../util/child.js":203,"../../../util/closest.js":204,"../../../util/uniques.js":208,"../tooltip/create.js":244,"../zoom/direction.js":254,"../zoom/propagation.js":257,"./arc.js":221,"./area.js":222,"./check.js":223,"./coordinates.js":225,"./cross.js":226,"./diamond.js":227,"./donut.js":228,"./fill.js":231,"./line.js":233,"./radial.js":235,"./rect.js":236,"./segments.js":237,"./triangle_down.js":239,"./triangle_up.js":240,"./whisker.js":241}],230:[function(e,t,r){var n=e("../../../util/buckets.js"),a=e("../d3functions/curves.js"),i=e("../../../geom/offset.js");t.exports=function(e){var t=e.returned.edges||[],r=e.zoom.behavior.scaleExtent()[0];if("string"==typeof e.edges.size.value){var o=d3.extent(t,function(t){return t[e.edges.size.value]}),s=d3.min(e.returned.nodes||[],function(e){return e.d3po.r})*(2*e.edges.size.scale);e.edges.scale=d3.scaleSqrt().domain(o).range([e.edges.size.min,s*r])}else{var l="number"==typeof e.edges.size.value?e.edges.size.value:e.edges.size.min;e.edges.scale=function(){return l}}var u=e.edges.opacity.value,c=typeof u;function d(t){t.attr("opacity",0).style("stroke-width",0).style("stroke",e.background.value).style("fill","none")}function f(t){var r=e.edges.arrows.value;t.attr("opacity",function(t){return"number"===c?u:"function"===c?u(t,e):e.edges.opacity.scale.value(t[u])}).style("stroke-width",function(t){return e.edges.scale(t[e.edges.size.value])}).style("stroke",e.edges.color).attr("marker-start",function(t){var n=e.edges.arrows.direction.value;if("bucket"in t.d3po)var a="_"+t.d3po.bucket;else a="";return"source"==n&&r?"url(#d3po_edge_marker_default"+a+")":"none"}).attr("marker-end",function(t){var n=e.edges.arrows.direction.value;if("bucket"in t.d3po)var a="_"+t.d3po.bucket;else a="";return"target"==n&&r?"url(#d3po_edge_marker_default"+a+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function p(t){t.attr("x1",function(t){return t[e.edges.source].d3po.edges[t[e.edges.target][e.id.value]].x}).attr("y1",function(t){return t[e.edges.source].d3po.edges[t[e.edges.target][e.id.value]].y}).attr("x2",function(t){return t[e.edges.target].d3po.edges[t[e.edges.source][e.id.value]].x}).attr("y2",function(t){return t[e.edges.target].d3po.edges[t[e.edges.source][e.id.value]].y})}e.edges.opacity.changed&&"string"===c&&e.edges.opacity.scale.value.domain(d3.extent(t,function(e){return e[u]})).range([e.edges.opacity.min.value,1]);var h=d3.line().curve(a.fromString(e.edges.interpolate.value));function v(e){e.attr("d",function(e){return h(e.d3po.spline)})}function g(t){if(delete t.d3po_label,e.g.edges.selectAll("line, path").size()<e.edges.large&&e.edges.label&&t[e.edges.label]){if("spline"in t.d3po)var r=this.getTotalLength(),n=this.getPointAtLength(r/2),a=this.getPointAtLength(r/2-.1*r),i=this.getPointAtLength(r/2+.1*r),o=Math.atan2(i.y-a.y,i.x-a.x)*(180/Math.PI),s=(this.parentNode.getBBox(),.8*r),l=n.x,u=n.y;else{this.getBBox();var c=t[e.edges.source],d=t[e.edges.target],f={x:c.d3po.edges[d[e.id.value]].x,y:c.d3po.edges[d[e.id.value]].y},p={x:d.d3po.edges[c[e.id.value]].x,y:d.d3po.edges[c[e.id.value]].y},h=p.x-f.x,v=p.y-f.y;n={x:p.x-h/2,y:p.y-v/2},o=Math.atan2(v,h)*(180/Math.PI),s=r=Math.sqrt(h*h+v*v),l=n.x,u=n.y}s+=2*e.labels.padding;var g=0;e.edges.arrows.value&&(g="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,s-=2*(g/=e.zoom.behavior.scaleExtent()[1])),(o<-90||o>90)&&(o-=180),s*e.zoom.behavior.scaleExtent()[0]>20&&(t.d3po_label={x:l,y:u,translate:{x:l,y:u},w:s,h:15+2*e.labels.padding,angle:o,anchor:"middle",valign:"center",color:e.edges.color,resize:!1,names:[e.format.value(t[e.edges.label])],background:1})}}var m=e.edges.arrows.value?"string"==typeof e.edges.size.value?["default_0","default_1","default_2","highlight_0","highlight_1","highlight_2","focus_0","focus_1","focus_2"]:["default","highlight","focus"]:[];if("string"==typeof e.edges.size.value)for(var y=n(e.edges.scale.range(),4),x=[],b=0;b<3;b++)x.push(y[b+1]+(y[1]-y[0])*(b+2)*2);else{var j="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8;x="number"==typeof e.edges.size.value?e.edges.size.value/j:j}var w=e.defs.selectAll(".d3po_edge_marker").data(m,String),_=function(t){t.attr("d",function(t){var r=t.split("_");if(2==r.length&&e.edges.scale){r=parseInt(r[1]);var n=x[r]}else n=x;return"target"==e.edges.arrows.direction.value?"M 0,-"+n/2+" L "+.85*n+",0 L 0,"+n/2+" L 0,-"+n/2:"M 0,-"+n/2+" L -"+.85*n+",0 L 0,"+n/2+" L 0,-"+n/2}).attr("fill",function(t){var r=t.split("_")[0];return"default"==r?e.edges.color:"focus"==r?e.color.focus:e.color.primary}).attr("transform","scale("+1/r+")")};e.draw.timing?(w.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),w.select("path").transition().duration(e.draw.timing).attr("opacity",1).call(_)):(w.exit().remove(),w.select("path").attr("opacity",1).call(_));var k=e.draw.timing?0:1,z=w.enter().append("marker").attr("id",function(e){return"d3po_edge_marker_"+e}).attr("class","d3po_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",k).attr("vector-effect","non-scaling-stroke").call(_);e.draw.timing&&z.transition().duration(e.draw.timing).attr("opacity",1);var A="string"==typeof e.edges.size.value?n(e.edges.scale.domain(),4):null,M=e.edges.arrows.direction.value,O=t.filter(function(t){if(t.d3po||(t.d3po={}),t.d3po.id="edge_"+t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],!0!==t.d3po.spline){if(A){var n=t[e.edges.size.value];t.d3po.bucket=n<A[1]?0:n<A[2]?1:2;var a=.85*x[t.d3po.bucket]/r}else{delete t.d3po.bucket;a=.85*x/r}var o=t[e.edges.source],s=t[e.edges.target];if(!o.d3po||!s.d3po)return!1;var l=Math.atan2(o.d3po.y-s.d3po.y,o.d3po.x-s.d3po.x),u=Math.atan2(s.d3po.y-o.d3po.y,s.d3po.x-o.d3po.x),c="source"==M&&e.edges.arrows.value?o.d3po.r+a:o.d3po.r,d="target"==M&&e.edges.arrows.value?s.d3po.r+a:s.d3po.r,f=i(l,c,e.shape.value),p=i(u,d,e.shape.value);return"edges"in o.d3po||(o.d3po.edges={}),o.d3po.edges[s[e.id.value]]={x:o.d3po.x-f.x,y:o.d3po.y-f.y},"edges"in s.d3po||(s.d3po.edges={}),s.d3po.edges[o[e.id.value]]={x:s.d3po.x-p.x,y:s.d3po.y-p.y},!0}return!1}),S=e.g.edges.selectAll("g.d3po_edge_line").data(O,function(e){return e.d3po.id}),E=t.filter(function(t){if(t.d3po.spline){if(A){var n=t[e.edges.size.value];t.d3po.bucket=n<A[1]?0:n<A[2]?1:2;var a=.85*x[t.d3po.bucket]/r}else{delete t.d3po.bucket;a=.85*x/r}var o=t[e.edges.source],s=t[e.edges.target],l=o.d3po.edges&&o.d3po.edges[s[e.id.value]]||{},u=s.d3po.edges&&s.d3po.edges[o[e.id.value]]||{},c=e.edges.arrows.value&&"source"==M?a:0,d=e.edges.arrows.value&&"target"==M?a:0,f=o.d3po.x>s.d3po.x?.9:1.1,p=o.d3po.x>s.d3po.x?1.1:.9,h="number"==typeof l.angle?l.angle:Math.atan2(o.d3po.y-s.d3po.y,o.d3po.x-s.d3po.x)*f,v=i(h,o.d3po.r+c,e.shape.value),g="number"==typeof u.angle?u.angle:Math.atan2(s.d3po.y-o.d3po.y,s.d3po.x-o.d3po.x)*p,m=i(g,s.d3po.r+d,e.shape.value),y=[o.d3po.x-v.x,o.d3po.y-v.y],b=!!l.offset&&i(h,l.offset),j=b?[y[0]-b.x,y[1]-b.y]:y,w=[s.d3po.x-m.x,s.d3po.y-m.y],_=!!u.offset&&i(g,u.offset),k=_?[w[0]-_.x,w[1]-_.y]:w,z=k[0]-j[0],O=k[1]-j[1],S="number"==typeof l.radius?l.radius:Math.sqrt(z*z+O*O)/4,E="number"==typeof u.radius?u.radius:Math.sqrt(z*z+O*O)/4,F=i(h,S-o.d3po.r-2*c),C=i(g,E-s.d3po.r-2*d);t.d3po.spline=[y,w];var B=Math.abs(Math.atan2(o.d3po.y-s.d3po.y,o.d3po.x-s.d3po.x)).toFixed(5),T=Math.abs(h).toFixed(5),q=Math.abs(g-Math.PI).toFixed(5);return(T!==q||[T,q].indexOf(B)<0)&&(t.d3po.spline.splice(1,0,[j[0]-F.x,j[1]-F.y],[k[0]-C.x,k[1]-C.y]),b&&t.d3po.spline.splice(1,0,j),_&&t.d3po.spline.splice(t.d3po.spline.length-1,0,k)),!0}return!1}),F=e.g.edges.selectAll("g.d3po_edge_path").data(E,function(e){return e.d3po.id});e.draw.timing?(S.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),F.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),S.selectAll("text.d3po_label, rect.d3po_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),F.selectAll("text.d3po_label, rect.d3po_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),S.selectAll("line").data(function(e){return[e]}).transition().duration(e.draw.timing).call(p).call(f).each("end",g),F.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(v).call(f).each("end",g),S.enter().append("g").attr("class","d3po_edge_line").append("line").call(p).call(d).transition().duration(e.draw.timing).call(f).each("end",g),F.enter().append("g").attr("class","d3po_edge_path").append("path").call(v).call(d).transition().duration(e.draw.timing).call(f).each("end",g)):(S.exit().remove(),F.exit().remove(),S.selectAll("text.d3po_label, rect.d3po_label_bg").remove(),F.selectAll("text.d3po_label, rect.d3po_label_bg").remove(),S.selectAll("line").data(function(e){return[e]}).call(p).call(f).call(g),F.selectAll("path").data(function(e){return[e]}).call(v).call(f).call(g),S.enter().append("g").attr("class","d3po_edge_line").append("line").call(p).call(d).call(f).call(g),F.enter().append("g").attr("class","d3po_edge_path").append("path").call(v).call(d).call(f).call(g))}},{"../../../geom/offset.js":159,"../../../util/buckets.js":202,"../d3functions/curves.js":212}],231:[function(e,t,r){var n=e("../../../util/copy.js"),a=e("../../../core/fetch/color.js"),i=(e("../../../core/fetch/value.js"),e("./segments.js")),o=e("./style.js");t.exports=function(e,t,r,s){function l(e){e.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function u(t,r){r||(r=0),t.attr("x",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.width)/2-r/2}).attr("y",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.height)/2-r/2}).attr("width",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.width)+r}).attr("height",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.height)+r}).attr("rx",function(t){var n=t.d3po.r?2*t.d3po.r:t.d3po.width;return["circle","donut"].indexOf(e.shape.value)>=0?(n+r)/2:0}).attr("ry",function(t){var n=t.d3po.r?2*t.d3po.r:t.d3po.height;return["circle","donut"].indexOf(e.shape.value)>=0?(n+r)/2:0}).attr("shape-rendering",function(t){return["square"].indexOf(e.shape.value)>=0?e.shape.rendering.value:"auto"})}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var c=d3.arc().startAngle(0).endAngle(function(t){var r=e.arcs[t.d3po.shape][t.d3po.id].a;return r>2*Math.PI?2*Math.PI:r}).innerRadius(function(t){return t.d3po.static||"donut"!==e.shape.value?0:e.arcs[t.d3po.shape][t.d3po.id].r*e.data.donut.size}).outerRadius(function(t){var r=e.arcs[t.d3po.shape][t.d3po.id].r;return"donut"===e.shape.value?r:2*r});function d(t,r,n,a){r||(r=0),"number"!=typeof n&&(n=void 0),"number"!=typeof a&&(a=void 0),t.attrTween("d",function(t){if(void 0===n)var i=t.d3po.r?t.d3po.r:d3.max([t.d3po.width,t.d3po.height]);else i=n;if(void 0===a)var o=t.d3po.segments[t.d3po.shape];else o=a;e.arcs[t.d3po.shape][t.d3po.id]||(e.arcs[t.d3po.shape][t.d3po.id]={r:0},e.arcs[t.d3po.shape][t.d3po.id].a="donut"===t.d3po.shape?2*Math.PI:0);var s=d3.interpolate(e.arcs[t.d3po.shape][t.d3po.id].r,i+r),l=d3.interpolate(e.arcs[t.d3po.shape][t.d3po.id].a,o);return function(r){return e.arcs[t.d3po.shape][t.d3po.id].r=s(r),e.arcs[t.d3po.shape][t.d3po.id].a=l(r),c(t)}})}t.each(function(t){var r=i(e,t,"active"),s=i(e,t,"temp"),c=i(e,t,"total"),f=d3.select(this),p=a(e,t),h=[],v=[];if(c&&e.types[e.type.value].fill){var g;if(s)(g=n(t)).d3po.shape="temp",h.push(g),v=["temp"];if(r&&(r<c||s))(g=n(t)).d3po.shape="active",h.push(g)}function m(t){t.attr("stroke",p).attr("stroke-width",1).attr("shape-rendering",e.shape.rendering.value)}var y=e.defs.selectAll("pattern#d3po_hatch_"+t.d3po.id).data(v);e.draw.timing?(y.selectAll("rect").transition().duration(e.draw.timing).style("fill",p),y.selectAll("line").transition().duration(e.draw.timing).style("stroke",p)):(y.selectAll("rect").style("fill",p),y.selectAll("line").style("stroke",p));var x=y.enter().append("pattern").attr("id","d3po_hatch_"+t.d3po.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");x.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",p).attr("fill-opacity",.25),x.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(m),x.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(m),x.append("line").attr("x1","9").attr("x2","11").attr("y1","-1").attr("y2","1").call(m);var b=h.length?[t]:[],j=f.selectAll("#d3po_clip_"+t.d3po.id).data(b);j.enter().insert("clipPath",".d3po_mouse").attr("id","d3po_clip_"+t.d3po.id).append("rect").attr("class","d3po_clipping").call(l),e.draw.timing?(j.selectAll("rect").transition().duration(e.draw.timing).call(u),j.exit().transition().delay(e.draw.timing).remove()):(j.selectAll("rect").call(u),j.exit().remove());var w=f.selectAll("path.d3po_fill").data(h);w.transition().duration(e.draw.timing).call(o,e).call(d),w.enter().insert("path","rect.d3po_mouse").attr("class","d3po_fill").attr("clip-path","url(#d3po_clip_"+t.d3po.id+")").transition().duration(0).call(o,e).call(d,0,void 0,0).transition().duration(e.draw.timing).call(d).call(o,e),w.exit().transition().duration(e.draw.timing).call(d,0,void 0,0).remove()})}},{"../../../core/fetch/color.js":59,"../../../core/fetch/value.js":63,"../../../util/copy.js":205,"./segments.js":237,"./style.js":238}],232:[function(e,t,r){e("../../../util/copy.js");var n=e("../../../core/fetch/text.js"),a=e("../../../core/fetch/value.js"),i=e("../../../color/mix.js"),o=e("../../../core/console/print.js"),s=(e("../../../client/rtl.js"),e("./segments.js")),l=e("./color.js"),u=e("../../../string/list.js"),c=e("../../../color/text.js"),d=e("../../../textwrap/textwrap.js");t.exports=function(e,t){var r=e.types[e.type.value].zoom?e.zoom.behavior.scaleExtent():[1,1],f=e.g[t].selectAll("g"),p=function(t){t.attr("opacity",function(t){var n=parseFloat(d3.select(this).attr("font-size"),10);return t.visible=n*(e.zoom.scale/r[1])>=2,t.visible?1:0})},h=function(t){e.draw.timing?t.transition().duration(e.draw.timing).attr("opacity",0).remove():t.remove()},v=function(t){e.labels.valign.value;t.attr("font-weight",e.labels.font.weight).attr("font-family",e.labels.font.family.value).attr("stroke","none").attr("pointer-events",function(e){return e.mouse?"auto":"none"}).attr("fill",function(t){if(t.color)return t.color;var r=l(t.parent,e),n=c(r),a=t.text?0:1;return i(r,n,.2,a)}).each(function(t){if(t.resize instanceof Array)t.resize[0],t.resize[1];var n=t.resize,a=!0;t.resize instanceof Array||(n=[7,r[1]/r[0]*40],a=t.resize);var i="bottom"===e.labels.valign.value?t.share:0;isNaN(t.percentage)?d().align(t.anchor||e.labels.align.value).container(d3.select(this)).height(t.h*r[1]-t.share).padding(t.padding/2).resize(a).size(n).shape(t.shape||"square").text(t.names).valign(e.labels.valign.value).width(t.w*r[1]).x(t.x-t.w*r[1]/2+t.padding/2).y(t.y-t.h*r[1]/2+t.padding/2+i).draw():d().align(t.anchor||e.labels.align.value).container(d3.select(this)).height(t.h*r[1]-t.share).padding(t.padding/2).resize(a).size(n).shape(t.shape||"square").text(t.names+"\n"+e.format.value(100*t.percentage,{key:"share",vars:e})).valign(e.labels.valign.value).width(t.w*r[1]).x(t.x-t.w*r[1]/2+t.padding/2).y(t.y-t.h*r[1]/2+t.padding/2+i).draw()}).attr("transform",function(e){var t=d3.select(this).attr("transform")||"",n=e.angle||0,a=e.translate&&e.translate.x?e.translate.x:0,i=e.translate&&e.translate.y?e.translate.y:0;return t.length&&(t=t.split(")").slice(-3).join(")")),"rotate("+n+","+a+","+i+")scale("+1/r[1]+")translate("+(e.x*r[1]-e.x)+","+(e.y*r[1]-e.y)+")"+t})};if("edges"===t||e.labels.value){if(e.dev.value){var g="drawing "+t+" labels";o.time(g)}f.each(function(t){var i=t.d3po&&"label"in t.d3po&&!t.d3po.label,o=t.d3po_label||null,l=t.d3po.text?t.d3po.text:o&&o.names?o.names:e.labels.text.value?a(e,t,e.labels.text.value):n(e,t),c=o&&"group"in o?o.group:d3.select(this),d=e.types[e.type.value].fill;if(l instanceof Array||(l=[l]),o)if(["line","area"].indexOf(e.shape.value)>=0)var f=!0;else if(t&&"d3po"in t){var g=s(e,t,"active"),m=s(e,t,"temp"),y=s(e,t,"total");f=!m&&!g||g>=y||!g&&m>=y}if(i||!(o&&o.force||f)&&d)delete t.d3po_label,d3.select(this).selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(h),e.g.labels.selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(h);else if(o&&(o.resize=!1!==e.labels.resize.value&&(!(o&&"resize"in o)||o.resize),o.padding="number"==typeof o.padding?o.padding:e.labels.padding),o&&o.w*r[1]-o.padding>=20&&o.h*r[1]-o.padding>=10&&l.length){for(var x=e.format.locale.value.ui.and,b=e.format.locale.value.ui.more,j=0;j<l.length;j++)l[j]instanceof Array&&(l[j]=u(l[j],x,3,b));o.names=l,o.share=0,o.percentage=t.d3po.share,o.parent=t;var w=c.selectAll("text#d3po_label_"+t.d3po.id).data([o],function(e){return!!e&&e.names}),_=o.resize?void 0:e.labels.font.size*r[0]+"px";if(e.draw.timing&&1===e.zoom.scale?(w.transition().duration(e.draw.timing/2).call(v).call(p),w.enter().append("text").attr("font-size",_).attr("id","d3po_label_"+t.d3po.id).attr("class","d3po_label").attr("opacity",0).call(v).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).call(p)):(w.attr("opacity",1).call(v).call(p),w.enter().append("text").attr("font-size",_).attr("id","d3po_label_"+t.d3po.id).attr("class","d3po_label").call(v).call(p)),w.exit().call(h),0===w.size()||0===w.selectAll("tspan").size())delete t.d3po_label,d3.select(this).selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(h),e.g.labels.selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(h);else{if(o.background){var k=["background"],z=w.node().getBBox();(M={height:z.height,width:z.width,x:z.x,y:z.y>0?z.y:-z.height/2}).width+=e.labels.padding*r[0],M.height+=e.labels.padding*r[0],M.x-=e.labels.padding*r[0]/2,M.y-=e.labels.padding*r[0]/2;var A=w.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];(A=(A=A.replace(/([^a-z])\s([^a-z])/gi,"$1,$2")).split(",")).length>1&&(A=(A=A[A.length-1]).substring(0,A.length-1),M.y+=parseFloat(A))}else{k=[];var M={}}var O=c.selectAll("rect#d3po_label_bg_"+t.d3po.id).data(k),S="number"==typeof o.background?o.background:"string"==typeof o.background?1:.6;function E(t){var r="string"==typeof o.background?o.background:"none"===e.background.value?"#ffffff":e.background.value,n="string"==typeof o.background?o.background:r,a=w.attr("transform").split(")");a.pop(),a.pop(),a.push(""),a=a.join(")"),t.attr("fill",n).attr(M).attr("transform",a)}e.draw.timing?(O.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),O.transition().duration(e.draw.timing).attr("opacity",S).call(E),O.enter().insert("rect",".d3po_label").attr("id","d3po_label_bg_"+t.d3po.id).attr("class","d3po_label_bg").attr("opacity",0).call(E).transition().duration(e.draw.timing).attr("opacity",S)):(O.exit().remove(),O.enter().insert("rect",".d3po_label").attr("id","d3po_label_bg_"+t.d3po.id).attr("class","d3po_label_bg"),O.attr("opacity",S).call(E))}}else delete t.d3po_label,d3.select(this).selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(h),e.g.labels.selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(h)}),e.dev.value&&o.timeEnd(g)}else{if(e.dev.value){g="removing "+t+" labels";o.time(g)}f.selectAll("text.d3po_label, rect.d3po_label_bg").call(h),e.g.labels.selectAll("text.d3po_label, rect.d3po_label_bg").call(h),e.dev.value&&o.timeEnd(g)}}},{"../../../client/rtl.js":35,"../../../color/mix.js":41,"../../../color/text.js":45,"../../../core/console/print.js":47,"../../../core/fetch/text.js":62,"../../../core/fetch/value.js":63,"../../../string/list.js":172,"../../../textwrap/textwrap.js":198,"../../../util/copy.js":205,"./color.js":224,"./segments.js":237}],233:[function(e,t,r){var n=e("../../../util/copy.js"),a=e("../../../util/closest.js"),i=e("../../../client/pointer.js"),o=e("../d3functions/curves.js"),s=e("./style.js"),l=e("../../../core/fetch/value.js");function u(e){e.attr("x",function(e){return e.d3po.x}).attr("y",function(e){return e.d3po.y}).attr("width",0).attr("height",0)}function c(e,t){void 0===t&&(t=0),e.attr("x",function(e){var r=e.d3po.r?2*e.d3po.r:e.d3po.width;return e.d3po.x-(r/2+t/2)}).attr("y",function(e){var r=e.d3po.r?2*e.d3po.r:e.d3po.height;return e.d3po.y-(r/2+t/2)}).attr("width",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.width)+t}).attr("height",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.height)+t}).attr("rx",function(e){return((e.d3po.r?2*e.d3po.r:e.d3po.width)+t)/2}).attr("ry",function(e){return((e.d3po.r?2*e.d3po.r:e.d3po.height)+t)/2})}function d(e,t,r,n){var a=e.draw.timing?e.timing.mouseevents:0;void 0===n&&(n=0),a?(d3.select(t.parentNode).selectAll("path.d3po_line").transition().duration(a).style("stroke-width",function(t){var a=r;if(a.constructor!==Number){var i=l(e,t,r);a=i&&i.length?d3.max(i):e.data.stroke.width}return a+n}),d3.select(t.parentNode).selectAll("rect").transition().duration(a).style("stroke-width",function(t){var n=r;if(n.constructor!==Number){var a=l(e,t,r);n=a&&a.length?d3.max(a):e.data.stroke.width}return n}).call(c,n)):(d3.select(t.parentNode).selectAll("path.d3po_line").style("stroke-width",function(t){var a=r;if(a.constructor!==Number){var i=l(e,t,r);a=i&&i.length?d3.max(i):e.data.stroke.width}return a+n}),d3.select(t.parentNode).selectAll("rect").style("stroke-width",function(t){var n=r;if(n.constructor!==Number){var a=l(e,t,r);n=a&&a.length?d3.max(a):e.data.stroke.width}return n}).call(c,n))}t.exports=function(e,t,r,f){var p=d3.line().x(function(e){return e.d3po.x}).y(function(e){return e.d3po.y}).curve(o.fromString(e.shape.interpolate.value)),h=e.size.value||e.data.stroke.width,v=e[e.axes.discrete],g=function(t){var r=h;if(r.constructor!==Number){var n=l(e,t,h);r=n&&n.length?d3.max(n):e.data.stroke.width}return r<15?15:r},m=v.ticks.values.map(function(e){return e.constructor===Date?e.getTime():e});t.each(function(t){var r=!1,o=[],f=[],y=n(t),x=d3.select(this);y.values=[],y.segment_key=y.key,t.values.forEach(function(i,s,u){var c=l(e,i,v.value);c.constructor===Date&&(c=c.getTime());var d=m.indexOf(a(m,c));!1===r||r===d-1?(y.values.push(i),y.segment_key+="_"+d):(y.values.length>1?o.push(y):f.push(y.values[0]),(y=n(t)).values=[i]),s===u.length-1&&(y.values.length>1?o.push(y):f.push(y.values[0])),r=d});var b=x.selectAll("path.d3po_line").data(o,function(e){return e.d3po||(e.d3po={}),e.d3po.shape="line",e.segment_key}),j=x.selectAll("rect.d3po_anchor").data(f,function(e){return e.d3po||(e.d3po={}),e.d3po.r=h,e.d3po.id});e.draw.timing?(b.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),b.transition().duration(e.draw.timing).attr("d",function(e){return p(e.values)}).call(s,e),b.enter().append("path").attr("class","d3po_line").style("stroke-linecap","round").attr("d",function(e){return p(e.values)}).call(s,e).attr("opacity",0).transition().duration(e.draw.timing).attr("opacity",1),j.enter().append("rect").attr("class","d3po_anchor").attr("id",function(e){return e.d3po.id}).call(u).call(s,e),j.transition().duration(e.draw.timing).call(c).call(s,e),j.exit().transition().duration(e.draw.timing).call(u).remove()):(b.exit().remove(),b.enter().append("path").attr("class","d3po_line").style("stroke-linecap","round"),b.attr("d",function(e){return p(e.values)}).call(s,e),j.enter().append("rect").attr("class","d3po_anchor").attr("id",function(e){return e.d3po.id}),j.exit().remove(),j.call(c).call(s,e));var w=x.selectAll("path.d3po_mouse").data(o,function(e){return e.segment_key});w.enter().append("path").attr("class","d3po_mouse").attr("d",function(e){return p(e.values)}).style("stroke","black").style("stroke-width",g).style("fill","none").style("stroke-linecap","round").attr("opacity",0),w.on(i.over,function(t){!e.draw.frozen&&e.mouse.value&&e.mouse.over.value&&d(e,this,h,2)}).on(i.out,function(t){!e.draw.frozen&&e.mouse.value&&e.mouse.out.value&&d(e,this,h,0)}),e.draw.timing?w.transition().duration(e.draw.timing).attr("d",function(e){return p(e.values)}).style("stroke-width",g):w.attr("d",function(e){return p(e.values)}).style("stroke-width",g),w.exit().remove()})}},{"../../../client/pointer.js":33,"../../../core/fetch/value.js":63,"../../../util/closest.js":204,"../../../util/copy.js":205,"../d3functions/curves.js":212,"./style.js":238}],234:[function(e,t,r){t.exports=function(e){var t=e.returned.edges||[],r=e.g.edges.selectAll("g.d3po_edge_path").data(t,function(t){return t.d3po.id="path_"+t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],t.d3po.id});function n(t){t.attr("d",e.edges.path).style("stroke-width",function(e){return Math.max(1,e.dy)}).style("stroke","#ddd").style("fill","none").attr("transform",function(e){return"translate("+e.d3po.x+","+e.d3po.y+")"})}e.draw.timing?(r.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),r.selectAll("text.d3po_label, rect.d3po_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),r.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(n),r.enter().append("g").attr("class","d3po_edge_path").append("path").style("stroke-width",0).transition().duration(e.draw.timing).call(n)):(r.exit().remove(),r.selectAll("text.d3po_label, rect.d3po_label_bg").remove(),r.selectAll("path").data(function(e){return[e]}).call(n),r.enter().append("g").attr("class","d3po_edge_path").append("path").call(n))}},{}],235:[function(e,t,r){(function(){var r,n,a,i;i=e("./style.js"),a={},r={},n={r:{},a:{}},t.exports=function(e,t,o,s){var l,u,c,d,f;c=e.id.nesting[e.depth.value+1],d=d3.lineRadial().curve(d3.curveLinearClosed).radius(function(e){return e.d3po.r}).angle(function(e){return e.d3po.a}),l=function(t){return e.labels.value&&(t.d3po.label?t.d3po_label=t.d3po.label:delete t.d3po_label),[t]},e.draw.timing?(t.each(function(t){var r,n,a,i,o;for(o=[],n=0,a=(i=t[c]).length;n<a;n++)r=i[n],o.push(r.d3po.id=r[e.id.value]+"_"+r[c]);return o}),u=d3.lineRadial().curve(d3.curveLinearClosed).radius(function(e,t){return void 0===a[e.d3po.id]&&(a[e.d3po.id]=0),isNaN(a[e.d3po.id])&&(a[e.d3po.id]=e.d3po.r),a[e.d3po.id]}).angle(function(e,t){return void 0===r[e.d3po.id]&&(r[e.d3po.id]=e.d3po.a),isNaN(r[e.d3po.id])&&(r[e.d3po.id]=e.d3po.a),r[e.d3po.id]}),f=function(e,t){return e.attrTween("d",function(e){var i,o,s,l,d,f,p;for(p=e[c],s=l=0,d=p.length;l<d;s=++l)i=(o=p[s]).d3po.a,void 0===t?f=o.d3po.r:0===t&&(f=0),n.a[o.d3po.id]=d3.interpolate(r[o.d3po.id],i),n.r[o.d3po.id]=d3.interpolate(a[o.d3po.id],f);return function(t){var i,l,d;for(d=e[c],s=i=0,l=d.length;i<l;s=++i)o=d[s],r[o.d3po.id]=n.a[o.d3po.id](t),a[o.d3po.id]=n.r[o.d3po.id](t);return u(e[c])}})},o.append("path").attr("class","d3po_data").call(i,e).attr("d",function(e){return u(e[c])}),t.selectAll("path.d3po_data").data(l).transition().duration(e.draw.timing).call(i,e).call(f),s.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(f,0)):(o.append("path").attr("class","d3po_data"),t.selectAll("path.d3po_data").data(l).call(i,e).attr("d",function(e){return d(e[c])}))}}).call(this)},{"./style.js":238}],236:[function(e,t,r){(function(){var r;r=e("./style.js"),t.exports=function(e,t,n,a){var i,o,s;return i=function(t){var r,n;return e.labels.value&&!t.d3po.label?(n=t.d3po.r?2*t.d3po.r:t.d3po.width,r=t.d3po.r?2*t.d3po.r:t.d3po.height,t.d3po_label={w:n,h:r,x:0,y:0},t.d3po_share={w:n,h:r,x:0,y:0},t.d3po_label.shape="circle"===t.d3po.shape?"circle":"square"):t.d3po.label?t.d3po_label=t.d3po.label:delete t.d3po_label,[t]},o=function(e){return e.attr("x",function(e){return e.d3po.init&&"x"in e.d3po.init?e.d3po.init.x:e.d3po.init&&"width"in e.d3po.init?-e.d3po.width/2:0}).attr("y",function(e){return e.d3po.init&&"y"in e.d3po.init?e.d3po.init.y:e.d3po.init&&"height"in e.d3po.init?-e.d3po.height/2:0}).attr("width",function(e){return e.d3po.init&&"width"in e.d3po.init?e.d3po.init.width:0}).attr("height",function(e){return e.d3po.init&&"height"in e.d3po.init?e.d3po.init.height:0})},s=function(t){return t.attr("x",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.width)/2}).attr("y",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.height)/2}).attr("width",function(e){return e.d3po.r?2*e.d3po.r:e.d3po.width}).attr("height",function(e){return e.d3po.r?2*e.d3po.r:e.d3po.height}).attr("rx",function(e){var t,r;return t="circle"===e.d3po.shape,r=e.d3po.r?2*e.d3po.r:e.d3po.width,t?(r+2)/2:0}).attr("ry",function(e){var t,r;return r="circle"===e.d3po.shape,t=e.d3po.r?2*e.d3po.r:e.d3po.height,r?(t+2)/2:0}).attr("transform",function(e){return"rotate"in e.d3po?"rotate("+e.d3po.rotate+")":""}).attr("shape-rendering",function(t){return"square"!==t.d3po.shape||"rotate"in t.d3po?"auto":e.shape.rendering.value})},e.draw.timing?(n.append("rect").attr("class","d3po_data").call(o).call(r,e),t.selectAll("rect.d3po_data").data(i).transition().duration(e.draw.timing).call(s).call(r,e),a.selectAll("rect.d3po_data").transition().duration(e.draw.timing).call(o)):(n.append("rect").attr("class","d3po_data"),t.selectAll("rect.d3po_data").data(i).call(s).call(r,e))}}).call(this)},{"./style.js":238}],237:[function(e,t,r){(function(){var r;r=e("../../../core/fetch/value.js"),t.exports=function(e,t,n){var a;return(a=e[n].value)?n in t.d3po?t.d3po[n]:r(e,t,a):t.d3po[n]}}).call(this)},{"../../../core/fetch/value.js":63}],238:[function(e,t,r){(function(){var r,n,a;r=e("./color.js"),n=e("../../../client/ie.js"),a=e("../../../core/fetch/value.js"),t.exports=function(e,t){return e.attr("fill",function(e){return e.d3po&&e.d3po.spline?"none":r(e,t)}).style("stroke",function(e){var n;return e.d3po&&e.d3po.stroke?e.d3po.stroke:(n=e.values?r(e.values[0],t):r(e,t,!0),d3.rgb(n).darker(.6).formatHex())}).style("stroke-width",function(e){var r;if(n&&t.types[t.type.value].zoom)return 0;if("line"===e.d3po.shape&&t.size.value){if(t.size.value.constructor===Number)return t.size.value;if((r=a(t,e,t.size.value))&&r.length)return d3.max(r)}return t.data.stroke.width}).attr("opacity",t.data.opacity).attr("vector-effect","non-scaling-stroke")}}).call(this)},{"../../../client/ie.js":32,"../../../core/fetch/value.js":63,"./color.js":224}],239:[function(e,t,r){var n=e("./style.js");t.exports=function(e,t,r,a){function i(e){e.attr("d",d3.symbol().type(d3.symbolTriangle).size(function(e){var t=Math.min(e.d3po.width,e.d3po.height);return d3.scalePow().exponent(2)(t/2)})).attr("transform","rotate(180)")}r.append("path").attr("class","d3po_data").call(function(e){e.attr("d",d3.symbol().type(d3.symbolTriangle).size(10)).attr("transform","rotate(180)")}).call(n,e),t.selectAll("path.d3po_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(i).call(n,e):t.selectAll("path.d3po_data").call(i).call(n,e)}},{"./style.js":238}],240:[function(e,t,r){var n=e("./style.js");t.exports=function(e,t,r,a){function i(e){e.attr("d",d3.symbol().type(d3.symbolTriangle).size(function(e){var t=Math.min(e.d3po.width,e.d3po.height);return d3.scalePow().exponent(2)(t/2)}))}r.append("path").attr("class","d3po_data").call(function(e){e.attr("d",d3.symbol().type(d3.symbolTriangle).size(10))}).call(n,e),t.selectAll("path.d3po_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(i).call(n,e):t.selectAll("path.d3po_data").call(i).call(n,e)}},{"./style.js":238}],241:[function(e,t,r){(function(){t.exports=function(e,t,r,n){var a,i,o,s,l,u,c,d,f;i=function(e){return e.d3po.text?e.d3po_label={w:d,h:d,x:0,y:0,background:"#fff",resize:!1,angle:["left","right"].indexOf(e.d3po.position)>=0?90:0}:e.d3po.label?e.d3po_label=e.d3po.label:delete e.d3po_label,[e]},f=function(t){return t.style("stroke-width",e.data.stroke.width).style("stroke","#444").attr("fill","none").attr("shape-rendering",e.shape.rendering.value)},o=function(e){return e.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0)},c=function(e){return e.attr("x1",function(e){var t,r;return["top","bottom"].indexOf(e.d3po.position)>=0?0:(t=e.d3po.offset||0,r=e.d3po.width||0,(t<0?-r:r)+t)}).attr("x2",function(e){return["top","bottom"].indexOf(e.d3po.position)>=0?0:e.d3po.offset||0}).attr("y1",function(e){var t,r;return["left","right"].indexOf(e.d3po.position)>=0?0:(r=e.d3po.offset||0,t=e.d3po.height||0,(r<0?-t:t)+r)}).attr("y2",function(e){return["left","right"].indexOf(e.d3po.position)>=0?0:e.d3po.offset||0}).attr("marker-start","url(#d3po_whisker_marker)")},(s=e.defs.selectAll("#d3po_whisker_marker").data([0])).enter().append("marker").attr("id","d3po_whisker_marker").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("line"),(a=t.datum())?(u=a.d3po.position,l=["top","bottom"].indexOf(u)>=0?"horizontal":"vertical",d="horizontal"===l?a.d3po.width:a.d3po.height):(l="horizontal",d=0),s.select("line").attr("x1","horizontal"===l?-d/2:0).attr("x2","horizontal"===l?d/2:0).attr("y1","vertical"===l?-d/2:0).attr("y2","vertical"===l?d/2:0).call(f).style("stroke-width",2*e.data.stroke.width),e.draw.timing?(r.append("line").attr("class","d3po_data").call(f).call(o),t.selectAll("line.d3po_data").data(i).transition().duration(e.draw.timing).call(f).call(c),n.selectAll("line.d3po_data").transition().duration(e.draw.timing).call(o)):(r.append("line").attr("class","d3po_data"),t.selectAll("line.d3po_data").data(i).call(f).call(c))}}).call(this)},{}],242:[function(e,t,r){var n=e("../../../client/pointer.js"),a=e("../../../client/prefix.js"),i=e("../../../core/console/print.js"),o=e("../../../client/touch.js"),s=e("../zoom/propagation.js");t.exports=function(e){e.dev.value&&i.time("creating SVG elements"),e.svg=e.container.value.selectAll("svg#d3po").data([0]),e.svg.enter().insert("svg","#d3po_message").attr("id","d3po").attr("width",e.width.value).attr("height",e.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink"),e.g.bg=e.svg.selectAll("rect#bg").data(["bg"]),e.g.bg.enter().append("rect").attr("id","bg").attr("fill",e.background.value).attr("stroke","none").attr("width",e.width.value).attr("height",e.height.value),e.g.timeline=e.svg.selectAll("g#timeline").data(["timeline"]),e.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+e.height.value+")"),e.g.legend=e.svg.selectAll("g#key").data(["key"]),e.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+e.height.value+")"),e.g.footer=e.svg.selectAll("g#footer").data(["footer"]),e.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+e.height.value+")");var t="clipping_"+e.container.id;e.g.clipping=e.svg.selectAll("#clipping").data(["clipping"]),e.g.clipping.enter().append("clipPath").attr("id",t).append("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container=e.svg.selectAll("g#container").data(["container"]),e.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#"+t+")").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),e.g.zoom=e.g.container.selectAll("g#zoom").data(["zoom"]),e.g.zoom.enter().append("g").attr("id","zoom"),e.g.viz=e.g.zoom.selectAll("g#d3po_viz").data(["d3po_viz"]),e.g.viz.enter().append("g").attr("id","d3po_viz"),e.g.overlay=e.g.viz.selectAll("rect#d3po_overlay").data([{id:"d3po_overlay"}]),e.g.overlay.enter().append("rect").attr("id","d3po_overlay").attr("width",e.width.value).attr("height",e.height.value).attr("opacity",0),e.g.overlay.on(n.move,function(t){o&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",a()+"grab"):d3.select(this).style("cursor","auto")}).on(n.up,function(t){o&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",a()+"grab"):d3.select(this).style("cursor","auto")}).on(n.down,function(t){o&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",a()+"grabbing"):d3.select(this).style("cursor","auto")}),e.g.app=e.g.viz.selectAll("g#app").data(["app"]),e.g.app.enter().append("g").attr("id","app"),e.g.edges=e.g.viz.selectAll("g#edges").data(["edges"]),e.g.edges.enter().append("g").attr("id","edges").attr("opacity",0),e.g.edge_focus=e.g.viz.selectAll("g#focus").data(["focus"]),e.g.edge_focus.enter().append("g").attr("id","focus"),e.g.edge_hover=e.g.viz.selectAll("g#edge_hover").data(["edge_hover"]),e.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0),e.g.data=e.g.viz.selectAll("g#data").data(["data"]),e.g.data.enter().append("g").attr("id","data").attr("opacity",0),e.g.data_focus=e.g.viz.selectAll("g#data_focus").data(["data_focus"]),e.g.data_focus.enter().append("g").attr("id","data_focus"),e.g.labels=e.g.viz.selectAll("g#d3po_labels").data(["d3po_labels"]),e.g.labels.enter().append("g").attr("id","d3po_labels"),e.defs=e.svg.selectAll("defs").data(["defs"]),e.defs.enter().append("defs"),e.dev.value&&i.timeEnd("creating SVG elements")}},{"../../../client/pointer.js":33,"../../../client/prefix.js":34,"../../../client/touch.js":38,"../../../core/console/print.js":47,"../zoom/propagation.js":257}],243:[function(e,t,r){var n=e("../../../core/console/print.js");t.exports=function(e){e.dev.value&&n.time("updating SVG elements"),e.draw.timing?(e.container.value.transition().duration(e.draw.timing).style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value),e.g.bg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").transition().duration(e.draw.timing).attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.transition().duration(e.draw.timing).attr("transform","translate("+e.margin.left+","+e.margin.top+")")):(e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.attr("width",e.width.value).attr("height",e.height.value),e.g.bg.attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.attr("transform","translate("+e.margin.left+","+e.margin.top+")")),e.dev.value&&n.timeEnd("updating SVG elements")}},{"../../../core/console/print.js":47}],244:[function(e,t,r){var n=e("../../../array/sort.js"),a=e("../../../tooltip/create.js"),i=e("../../../core/data/nest.js"),o=e("./data.js"),s=e("../../../core/fetch/color.js"),l=e("../../../core/fetch/text.js"),u=e("../../../core/fetch/value.js"),c=e("../../../object/merge.js"),d=e("../../../tooltip/remove.js"),f=e("../shapes/segments.js"),p=e("../../../client/scroll.js"),h=e("../../../util/uniques.js"),v=e("../../../object/validate.js"),g=e("../zoom/direction.js");t.exports=function(e){"d3po"in e.data||(e.data.d3po={});var t=e.vars,r=e.data,m="d3po"in r&&"depth"in r.d3po?r.d3po.depth:t.depth.value,y=(e.ex,!!e.mouseevents&&e.mouseevents),x=!("arrow"in e)||e.arrow,b=u(t,r,t.id.value),j=e.id||t.type.value;if(!d3.event||"click"!=d3.event.type||!t.tooltip.html.value&&!t.tooltip.value.long||"fullscreen"in e){A=!1;var w=e.anchor||t.tooltip.anchor,_=(M=e.length||"short",g(r,t));if(-1===_){var k=t.id.nesting[m-1];u(t,b,k)}var z="";if(t.mouse.click.value&&(!t.mouse.viz||!1!==t.mouse.viz.click))if(1===_&&t.zoom.value)z=t.format.value(t.format.locale.value.ui.expand);else if(-1===_&&t.zoom.value&&t.history.states.length&&!t.tooltip.value.long)z=t.format.value(t.format.locale.value.ui.collapse);else if(t.small||"short"!=M||!t.tooltip.html.value&&!t.tooltip.value.long||1===t.focus.value.length&&t.focus.value[0]==b){if("long"==M)z=t.footer.value||""}else var z=t.format.locale.value.ui.moreInfo;O=!!z.length&&t.format.value(z,{key:"footer",vars:t})}else{var A=!0,M=(x=!1,y=!0,"long"),O=t.footer.value;t.covered=!0}if("x"in e)var S=e.x;else if("static"===t.types[t.type.value].tooltip){S=r.d3po.x;t.zoom.translate&&t.zoom.scale&&(S=t.zoom.translate[0]+S*t.zoom.scale),S+=t.margin.left,"long"!==e.length&&(E+=p.x(),S+=t.container.value.node().getBoundingClientRect().left,S+=parseFloat(t.container.value.style("padding-left"),10))}else S=d3.mouse(d3.select("html").node())[0];if("y"in e)var E=e.y;else if("static"==t.types[t.type.value].tooltip){E=r.d3po.y;t.zoom.translate&&t.zoom.scale&&(E=t.zoom.translate[1]+E*t.zoom.scale),E+=t.margin.top,"long"!==e.length&&(E+=p.y(),E+=t.container.value.node().getBoundingClientRect().top,E+=parseFloat(t.container.value.style("padding-top"),10))}else E=d3.mouse(d3.select("html").node())[1];if("offset"in e)var F=e.offset;else if("static"==t.types[t.type.value].tooltip){F=r.d3po.r?r.d3po.r:r.d3po.height/2;t.zoom.scale&&(F*=t.zoom.scale)}else F=3;function C(p){var g,b="depth"in e?e.depth:m,_={},k=t.id.nesting[b+1]in r?b+1:b,z=t.id.nesting[k],C="merged"in r.d3po?r.d3po.merged:r[z];C instanceof Array||(C=[C]);var B=u(t,r,t.size.value);if(t.tooltip.children.value){if((C=C.slice(0)).length>1&&v(C[0])&&(C=i(t,C,[z])),t.size.value&&v(C[0])){var T=[],q=C.filter(function(e){if(!(null===u(t,e,t.size.value)||"d3po"in e&&e.d3po.merged))return!0;T.push(e)});n(q,t.size.value,"desc",[],t),C=q.concat(T)}var N=!0===t.tooltip.children.value?3:t.tooltip.children.value,I="short"===M?N:t.data.large,V=C.length,D=d3.min([V,I]);g={values:[]};for(var P=0;P<D&&C.length;P++){var U=C.shift(),R=l(t,U,k)[0],L=v(U)?u(t,U,z,k):U;if(L!==r[t.id.nesting[b]]&&R&&!g[R]){var H=v(U)?u(t,U,t.size.value,z):null,Y=s(t,U,z);g[R]=!H||H instanceof Array?"":t.format.value(H,{key:t.size.value,vars:t,data:U});var X={};X[R]=g[R],g.values.push(X),Y&&(g.d3po_colors||(g.d3po_colors={}),g.d3po_colors[R]=Y)}else P--}V>D&&(g.d3poMore=V-D)}function G(e){return"string"==typeof t[e].value?t[e].value:t.format.locale.value.method[e]}r.d3po.tooltip&&(_=c(_,r.d3po.tooltip)),t.tooltip.size.value&&(B&&"number"!=typeof t.size.value&&(_[G("size")]=B),t.axes.opposite&&t[t.axes.opposite].value!==t.size.value&&(_[G(t.axes.opposite)]=u(t,r,t[t.axes.opposite].value)),t.axes.opposite&&t[t.axes.opposite+"2"].value!==t.size.value&&(_[G(t.axes.opposite+"2")]=u(t,r,t[t.axes.opposite+"2"].value)),t.color.valueScale&&(_[G("color")]=u(t,r,t.color.value)));var J=f(t,r,"active"),Q=f(t,r,"temp"),W=f(t,r,"total");"number"==typeof J&&J>0&&W&&(_[G("active")]=J+"/"+W+" ("+t.format.value(J/W*100,{key:"share",vars:t,data:r})+")"),"number"==typeof Q&&Q>0&&W&&(_[G("temp")]=Q+"/"+W+" ("+t.format.value(Q/W*100,{key:"share",vars:t,data:r})+")"),t.tooltip.share.value&&r.d3po.share&&(_.share=t.format.value(100*r.d3po.share,{key:"share",vars:t,data:r}));k="depth"in e?e.depth:m;var K=e.title||l(t,r,k)[0],Z=h(r,t.icon.value,u,t,t.id.nesting[k]),$=e.titleOnly?[]:o(t,r,M,_,g,k);if(Z=1===Z.length&&"string"==typeof Z[0]&&Z[0],$.length>0||O||!r.d3po_label&&"short"==M&&K||r.d3po_label&&(!("visible"in r.d3po_label)||"visible"in r.d3po_label&&!1===r.d3po_label.visible)){if(K||(K=t.format.value(L,{key:t.id.value,vars:t})),(k="d3po"in r&&"merged"in r.d3po?m-1:"depth"in e?e.depth:m)<0&&(k=0),k=t.id.nesting[k],"string"==typeof t.icon.style.value)var ee=t.icon.style.value;else if("object"==typeof t.icon.style.value&&t.icon.style.value[k])ee=t.icon.style.value[k];else ee="default";var te=t.tooltip.small;e.width?te=e.width:A&&(te=t.tooltip.large);var re=!A&&"long"!==e.length||A&&t.tooltip.fullscreen.value?d3.select("body"):t.container.value;!e.description&&r&&t.tooltip.sub.value&&(e.description=u(t,r,t.tooltip.sub.value)),a({align:w,arrow:x,locale:t.format.locale.value,background:t.tooltip.background,curtain:t.tooltip.curtain.color,curtainopacity:t.tooltip.curtain.opacity,fontcolor:t.tooltip.font.color,fontfamily:t.tooltip.font.family.value,fontsize:t.tooltip.font.size,fontweight:t.tooltip.font.weight,data:$,color:s(t,r),allColors:!0,footer:!1===e.footer?e.footer:O,fullscreen:A,html:p,js:e.js,icon:Z,id:j,max_height:e.maxheight,max_width:te,mouseevents:y,offset:F,parent:re,stacked:t.tooltip.stacked.value,style:ee,title:K,description:e.description,width:e.width||A||0!=$.length?te:"auto",x:S,y:E})}else d(j)}if(A||"long"===e.length)if("string"==typeof t.tooltip.html.value)C(t.tooltip.html.value);else if("function"==typeof t.tooltip.html.value)C(t.tooltip.html.value(b));else if(t.tooltip.html.value&&"object"==typeof t.tooltip.html.value&&t.tooltip.html.value.url){var B=t.tooltip.html.value.url;"function"==typeof B&&(B=B(b)),d3.json(B).then(function(e){C(t.tooltip.html.value.callback?t.tooltip.html.value.callback(e):e)})}else C(e.html);else C(e.html)}},{"../../../array/sort.js":29,"../../../client/scroll.js":36,"../../../core/data/nest.js":56,"../../../core/fetch/color.js":59,"../../../core/fetch/text.js":62,"../../../core/fetch/value.js":63,"../../../object/merge.js":169,"../../../object/validate.js":170,"../../../tooltip/create.js":199,"../../../tooltip/remove.js":201,"../../../util/uniques.js":208,"../shapes/segments.js":237,"../zoom/direction.js":254,"./data.js":245}],245:[function(e,t,r){var n=e("../../../util/copy.js"),a=e("../../../core/fetch/value.js"),i=e("../../../core/fetch/color.js"),o=e("../../../core/fetch/text.js"),s=e("../../../color/legible.js"),l=e("../../../object/merge.js"),u=e("../../../client/prefix.js"),c=e("../../../string/format.js"),d=e("../../../object/validate.js");t.exports=function(e,t,r,f,p,h){if(e.small)return[];if(!r)r="long";if("long"==r)var v="short";else v="long";var g={};if(f&&"string"==typeof f)f=[f];else if(f&&"object"==typeof f){g=l(g,f);f=[];for(var m in g)f.push(m)}else if(!f)f=[];var y=[];if(e.tooltip.value instanceof Array)var x=e.tooltip.value;else if("string"==typeof e.tooltip.value)x=[e.tooltip.value];else{if(e.tooltip.value[e.id.nesting[h]])x=e.tooltip.value[e.id.nesting[h]];else x=e.tooltip.value;x instanceof Array||(x=x[r]?x[r]:x[v]?[]:l({"":[]},x)),"string"==typeof x?x=[x]:x instanceof Array||(x=l({"":[]},x))}function b(r,n){if(e.attrs.value[n])var i=n;else i=null;n&&(n=e.format.value(n));var o=g[r]||a(e,t,r,i);if(d(o))j.push({name:e.format.value(r),value:e.format.value(o.value,{key:o.key,vars:e}),group:n});else if(null!=o&&"undefined"!=o&&!(o instanceof Array)&&("string"==typeof o&&o.indexOf("d3po_other")<0||"string"!=typeof o)){var s=e.format.locale.value.ui[r]?e.format.value(e.format.locale.value.ui[r]):e.format.value(r),l=y.indexOf(r)>=0;o instanceof Array?o.forEach(function(n){n=e.format.value(n,{key:r,vars:e,data:t})}):o=e.format.value(o,{key:r,vars:e,data:t});var u={name:s,value:o,highlight:l,group:n};if(e.descs.value)if("function"==typeof e.descs.value){var c=e.descs.value(r);"string"==typeof c&&(u.desc=c)}else r in e.descs.value&&(u.desc=e.descs.value[r]);j.push(u)}}var j=[];if(x.constructor===Array&&(x={"":x}),e.id.nesting.length&&h<e.id.nesting.length-1){x=n(x);e.id.nesting.forEach(function(e,t){t>h&&x[e]&&delete x[e]})}for(var w in x){x[w].constructor!==Array&&(x[w]=[x[w]]);for(var _=f.length;_>0;_--)x[w].indexOf(f[_-1])>=0&&f.splice(_-1,1)}if(e.tooltip.value.long&&"object"==typeof e.tooltip.value.long){for(var w in e.tooltip.value.long)for(_=f.length;_>0;_--){var k=f[_-1];e.tooltip.value.long[w].indexOf(k)>=0&&(x[w]||(x[w]=[]),x[w].push(k),f.splice(_-1,1))}}for(var w in f.length&&(x[""]||(x[""]=[]),x[""]=x[""].concat(f)),x)x[w].forEach(function(e){b(e,w)});if(p){var z=e.format.locale.value.ui.including,A=p.d3po_colors;p.values.forEach(function(t){var r=d3.keys(t)[0];j.push({group:e.format.value(z),highlight:!(!A||!A[r])&&A[r],name:r,value:t[r]})}),p.d3poMore&&j.push({group:e.format.value(z),highlight:!0,name:c(e.format.locale.value.ui.more,p.d3poMore),value:""})}if(e.tooltip.connections.value&&"long"===r){var M=e.edges.connections(t[e.id.value],e.id.value,!0);M.length&&M.forEach(function(t){var r=(r=e.data.viz.filter(function(r){return r[e.id.value]===t[e.id.value]})).length?r[0]:t,n=o(e,r)[0],a=i(e,r),l=e.tooltip.font.size,c="square"==e.shape.value?0:l;styles=["background-color: "+a,"border-color: "+s(a),"border-style: solid","border-width: "+e.data.stroke.width+"px","display: inline-block","height: "+l+"px","left: 0px","position: absolute","width: "+l+"px","top: 0px",u()+"border-radius: "+c+"px"],node="<div style='"+styles.join("; ")+";'></div>";j.push({group:e.format.value(e.format.locale.value.ui.primary),highlight:!1,link:function(){e.self.focus([r[e.id.value]]).draw()},name:"<div id='d3potooltipfocuslink_"+r[e.id.value]+"' class='d3po_tooltip_focus_link' style='position:relative;padding-left:"+1.5*l+"px;'>"+node+n+"</div>"})})}return j}},{"../../../client/prefix.js":34,"../../../color/legible.js":39,"../../../core/fetch/color.js":59,"../../../core/fetch/text.js":62,"../../../core/fetch/value.js":63,"../../../object/merge.js":169,"../../../object/validate.js":170,"../../../string/format.js":171,"../../../util/copy.js":205}],246:[function(e,t,r){(function(){var r;r=e("../../../core/console/print.js"),t.exports=function(e){var t,n,a,i,o,s,l,u,c;if(e.group=e.g.apps[e.type.value],e.mouse.viz=!1,e.edges.path=!1,i=!(a=((c=e.types[e.type.value]).requirements||[]).indexOf("data")>=0)||a&&e.data.viz.length,!e.error.internal&&i){for(t=e.format.locale.value.visualization[e.type.value],e.dev.value&&r.time("running "+t),o=0,s=(l=e.data.viz).length;o<s;o++)(n=l[o]).d3po&&(delete n.d3po.shape,delete n.d3po.label,delete n.d3po.rotate,delete n.d3po.share);u=c(e),e.dev.value&&r.timeEnd("running "+t)}else u=null;e.returned={nodes:[],edges:null},u instanceof Array?e.returned.nodes=u:u&&(u.nodes&&(e.returned.nodes=u.nodes),u.edges&&(e.returned.edges=u.edges))}}).call(this)},{"../../../core/console/print.js":47}],247:[function(e,t,r){var n=e("../../../util/copy.js"),a=e("../../../form/form.js"),i=e("../../../core/console/print.js"),o=e("../../../object/validate.js");t.exports=function(e){var t=e.ui.value&&e.ui.value.length,r=e.ui.position.value;e.dev.value&&t&&i.time("drawing custom UI elements");var s=e.container.value.selectAll("div#d3po_drawer").data(["d3po_drawer"]);s.enter().append("div").attr("id","d3po_drawer");var l={};e.ui.position.accepted.forEach(function(t){l[t]=t==r?e.margin.bottom+"px":"auto"}),s.style("text-align",e.ui.align.value).style("position","absolute").style("width",e.width.value-2*e.ui.padding+"px").style("height","auto").style(l);var u=s.selectAll("div.d3po_drawer_ui").data(t?e.ui.value:[],function(e){return e.method||!1});u.exit().remove(),u.enter().append("div").attr("class","d3po_drawer_ui").style("display","inline-block"),u.style("padding",e.ui.padding+"px").each(function(t){var r,i;t.form||(t.form=a().container(d3.select(this)).data({sort:!1}).id("id").text("text")),"string"==typeof t.method&&t.method in e?(r=e[t.method].value,i=function(r){r!==e[t.method].value&&e.self[t.method](r).draw()}):(r=t.focus||t.value[0],o(r)&&(r=r[d3.keys(r)[0]]),"function"==typeof t.method&&(i=function(n){n!==r&&(r=n,t.focus=n,t.method(n,e.self))}));var s,l=[];t.label?s=t.label:"string"==typeof t.method&&t.method in e&&(s=e.format.locale.value.method[t.method]||t.method),t.value.forEach(function(t){var r={};o(t)?(r.id=t[d3.keys(t)[0]],r.text=e.format.value(d3.keys(t)[0])):(r.id=t,r.text=e.format.value(t)),l.push(r)});var u=n(e.ui.font);u.align=n(e.font.align),u.secondary=n(u),t.form.data(l).font(u).focus(t.value.length>1&&r).focus({callback:i}).format(e.format.locale.language).format({number:e.format.number.value,text:e.format.text.value}).title(e.format.value(s)).type(t.type||"auto").ui({align:e.ui.align.value,border:e.ui.border,color:{primary:e.ui.color.primary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding,margin:0}).width(t.width||!1).draw()});var c=s.node().offsetHeight||s.node().getBoundingClientRect().height;c&&(e.margin[r]+=c),e.dev.value&&t&&i.timeEnd("drawing custom UI elements")}},{"../../../core/console/print.js":47,"../../../form/form.js":102,"../../../object/validate.js":170,"../../../util/copy.js":205}],248:[function(e,t,r){(function(){var r,n,a,i;r=e("../../../client/pointer.js"),n=e("../../../color/lighter.js"),a=e("../../../core/console/print.js"),i=e("../../../client/css.js"),t.exports=function(e){var t,o,s,l,u,c,d,f,p,h,v,g,m,y;return!e.small&&e.history.value&&e.history.states.length>0?(e.dev.value&&a.time("drawing back button"),t=e.container.value.selectAll("div#d3po_back_button").data(["d3po_back_button"]).style("position","relative").style("z-index",1900),f=e.title.sub.font.size,o=e.title.sub.font.color,l=e.title.sub.font.family.value,y=e.title.sub.font.weight,d=e.title.sub.padding,v=!1,e.title.sub.value&&["start","left"].indexOf(e.title.sub.font.align)<0?v="sub":e.title.total.value&&["start","left"].indexOf(e.title.total.font.align)<0?v="total":e.title.value&&["start","left"].indexOf(e.title.font.align)<0&&(v="title"),v?(p=function(e){var t;return t=(t=(t=(t=e.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0]).replace(/([^a-z])\s([^a-z])/gi,"$1,$2")).split(","))[t.length-1],parseFloat(t.substring(0,t.length-1))},g=e.svg.select(".d3po_title."+v),m=p(g)+p(g.select("text"))):(m=e.margin.top-e.title.padding,c=f+2*d,e.margin.top+=c),s=parseFloat(e.container.value.style("padding-top"),10),m+=s,s=parseFloat(e.container.value.style("padding-left"),10),u=e.margin.left+f/2+s,h=function(e){return e.style("position","absolute").style("left",u+"px").style("top",m+"px").style("color",o).style("font-family",l).style("font-weight",y).style("font-size",f+"px")},t.enter().append("div").attr("id","d3po_back_button").style("opacity",0).call(h).html(function(){var t;return i("font-awesome")&&0===e.icon.back.value.indexOf("fa-")?(t="<i class='fa "+e.icon.back.value,t+="' style='margin-top:2px;margin-right:4px;'></i>"):t=e.icon.back.value+" ",t+e.format.value(e.format.locale.value.ui.back)}),t.on(r.over,function(){if(!e.small&&e.history.states.length>0)return d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("color",n(o,.25))}).on(r.out,function(){if(!e.small&&e.history.states.length>0)return d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("color",o)}).on(r.click,function(){return e.history.back()}).transition().duration(e.draw.timing).style("opacity",1).call(h),e.dev.value?a.timeEnd("drawing back button"):void 0):e.container.value.selectAll("div#d3po_back_button").transition().duration(e.draw.timing).style("opacity",0).remove()}}).call(this)},{"../../../client/css.js":31,"../../../client/pointer.js":33,"../../../color/lighter.js":40,"../../../core/console/print.js":47}],249:[function(e,t,r){var n=e("../../../array/sort.js"),a=e("../../../util/buckets.js"),i=e("../../../util/copy.js"),o=e("../tooltip/create.js"),s=e("../../../core/data/nest.js"),l=e("../../../util/dataurl.js"),u=e("../../../client/pointer.js"),c=e("../../../core/fetch/value.js"),d=e("../../../core/fetch/color.js"),f=e("../../../core/fetch/text.js"),p=e("../../../core/console/print.js"),h=e("../../../tooltip/remove.js"),v=e("../../../color/text.js"),g=e("../../../util/uniques.js"),m=e("../../../client/scroll.js"),y=e("../../../string/strip.js"),x=e("../../../textwrap/textwrap.js"),b=(e("../../../client/touch.js"),e("../../../object/validate.js"));t.exports=function(e){var t=!0,r=0;if(!e.error.internal&&e.color.value&&!e.small&&e.legend.value)if(e.color.valueScale)if(e.color.valueScale){e.dev.value&&p.time("drawing color scale"),e.g.legend.selectAll("g.d3po_color").transition().duration(e.draw.timing).attr("opacity",0).remove();var j=e.color.valueScale.domain();U=e.color.valueScale.range();j.length<=2&&(j=a(j,6));var w=e.g.legend.selectAll("g.d3po_scale").data(["scale"]);w.enter().append("g").attr("class","d3po_scale").attr("opacity",0);var _=e.container.id+"_legend_heatmap",k=w.selectAll("#"+_).data(["heatmap"]);k.enter().append("linearGradient").attr("id",_).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");var z=k.selectAll("stop").data(d3.range(0,U.length));z.enter().append("stop").attr("stop-opacity",1),z.attr("offset",function(e){return Math.round(e/(U.length-1)*100)+"%"}).attr("stop-color",function(e){return U[e]}),z.exit().remove();var A=w.selectAll("rect#gradient").data(["gradient"]);A.enter().append("rect").attr("id","gradient").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.legend.gradient.height).attr("stroke",e.legend.font.color).attr("stroke-width",1).style("fill","url(#"+_+")");var M=w.selectAll("text.d3po_tick").data(d3.range(0,j.length));M.enter().append("text").attr("class","d3po_tick").attr("stroke","none").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding});var O=0;if(M.order().attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("font-size",e.legend.font.size+"px").style("text-anchor",e.legend.font.align).attr("fill",e.legend.font.color).text(function(t){return e.format.value(j[t],{key:e.color.value,vars:e})}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding}).each(function(e){var t=Math.ceil(this.getBBox().width);t>O&&(O=t)}),O+=2*e.labels.padding,(L=O*(j.length-1))+O<e.width.value){L+O<e.width.value/2&&(L=e.width.value/2,O=L/j.length,L-=O),X="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?e.width.value-e.ui.padding-L:e.width.value/2-L/2,M.transition().duration(e.draw.timing).attr("x",function(e){return X+O*e}),M.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();var S=w.selectAll("rect.d3po_tick").data(d3.range(0,j.length));S.enter().append("rect").attr("class","d3po_tick").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),S.transition().duration(e.draw.timing).attr("x",function(e){return X+O*e-(0===e?1:0)}).attr("y",e.ui.padding).attr("width",1).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),S.exit().transition().duration(e.draw.timing).attr("width",0).remove(),A.transition().duration(e.draw.timing).attr("x",function(t){return"middle"==e.legend.align?e.width.value/2-L/2:"end"==e.legend.align?e.width.value-L-e.ui.padding:e.ui.padding}).attr("y",e.ui.padding).attr("width",L).attr("height",e.legend.gradient.height),w.transition().duration(e.draw.timing).attr("opacity",1),e.dev.value&&p.timeEnd("drawing color scale")}else t=!1}else t=!1;else{var E;if(e.dev.value&&p.time("grouping data by colors"),e.nodes.value&&e.types[e.type.value].requirements.indexOf("nodes")>=0){if(E=i(e.nodes.restriced||e.nodes.value),e.data.viz.length)for(var F=0;F<E.length;F++){var C=e.data.viz.filter(function(t){return t[e.id.value]===E[F][e.id.value]});C.length&&(E[F]=C[0])}}else E=e.data.viz;E.length&&"key"in E[0]&&"values"in E[0]&&(E=d3.merge(E.map(function(e){return e.values})));var B=function(t){return d(e,t,T)},T=0,q=e.id.value,N=e.id.nesting.indexOf(e.color.value);if(N>=0)T=N,q=e.id.nesting[N];else for(var I=0;I<=e.depth.value;I++){T=I,q=e.id.nesting[I];var V=g(E,function(t){return c(e,t,q)}),D=g(E,B);if(V.length>=D.length&&D.length>1)break}var P=[e.color.value],U=s(e,E,P,!1);e.dev.value&&p.timeEnd("grouping data by color");var R=e.width.value,L=(r=e.legend.size)*U.length+e.ui.padding*(U.length+1);if(r instanceof Array){e.dev.value&&p.time("calculating legend size");for(F=r[1];F>=r[0];F--)if(R>=(L=F*U.length+e.ui.padding*(U.length+1))){r=F;break}e.dev.value&&p.timeEnd("calculating legend size")}else"number"!=typeof r&&!1!==r&&(r=30);if(R<L||1==U.length)t=!1;else{if(L-=2*e.ui.padding,e.dev.value&&p.time("sorting legend"),"function"==typeof e.legend.order.value)U=e.legend.order.value(U);else{var H=e[e.legend.order.value].value,Y=e.color.value;H?"color"!==e.legend.order.value&&(Y=[]):H=e[e.color.value].value,n(U,H,e.legend.order.sort.value,Y,e,T)}var X;function G(t){t.attr("transform",function(t,n){return"translate("+(X+n*(e.ui.padding+r))+","+e.ui.padding+")"})}function J(t){t.attr("width",r).attr("height",r).attr("fill",function(t){d3.select(this.parentNode).select("text").remove();var n,a=g(t,e.icon.value,c,e,q),i=d(e,t,q);if(e.legend.icons.value&&1===a.length&&"string"==typeof a[0]){a=a[0];var o=y(a+"_"+i),s=e.icon.style.value,u=e.defs.selectAll("pattern#"+o).data([o]);i="knockout"==("string"==typeof s?e.icon.style.value:b(s)&&s[q]?s[q]:"default")?i:"none",u.select("rect").transition().duration(e.draw.timing).attr("fill",i).attr("width",r).attr("height",r),u.select("image").transition().duration(e.draw.timing).attr("width",r).attr("height",r);var p=u.enter().append("pattern").attr("id",o).attr("width",r).attr("height",r);return p.append("rect").attr("fill",i).attr("stroke","none").attr("width",r).attr("height",r),p.append("image").attr("xlink:href",a).attr("width",r).attr("height",r).each(function(e){0===a.indexOf("/")||a.indexOf(window.location.hostname)>=0?l(a,function(e){u.select("image").attr("xlink:href",e)}):u.select("image").attr("xlink:href",a)}),"url(#"+o+")"}if(e.legend.labels.value&&1===(n=e.legend.text.value?[c(e,t,e.legend.text.value,T)]:f(e,t,T)).length&&!(n[0]instanceof Array)&&n[0].length){var h=d3.select(this.parentNode).append("text"),m=e.legend.font.size;m instanceof Array||(m=[m]),h.attr("font-size",m[m.length-1]+"px").attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("stroke","none").attr("fill",v(i)).attr("x",0).attr("y",0).each(function(t){x().align("middle").container(d3.select(this)).height(r).padding(e.ui.padding).resize(m.length>1).size(m).text(n[0]).width(r).valign("middle").draw()}),h.select("tspan").empty()&&h.remove()}return i})}e.dev.value&&p.timeEnd("sorting legend"),e.dev.value&&p.time("drawing legend"),X="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?R-e.ui.padding-L:R/2-L/2,e.g.legend.selectAll("g.d3po_scale").transition().duration(e.draw.timing).attr("opacity",0).remove();var Q={},W=e.g.legend.selectAll("g.d3po_color").data(U,function(t){var r=d(e,t,q);return r in Q||(Q[r]=-1),Q[r]++,Q[r]+"_"+r});W.enter().append("g").attr("class","d3po_color").attr("opacity",0).call(G).append("rect").attr("class","d3po_color").attr("stroke","none").call(J),W.order().transition().duration(e.draw.timing).call(G).attr("opacity",1).selectAll("rect.d3po_color").call(J),W.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.legend.tooltip.value&&W.on(u.over,function(t,n){d3.select(this).style("cursor","pointer");var a,i,s,l=this.getBoundingClientRect(),d=l.left+r/2+m.x(),p=l.top+r/2+m.y()+5,h=c(e,t,q),v=e.id.nesting.indexOf(q);if(a=e.legend.title.value?c(e,t,e.legend.title.value,T):v>=0?f(e,t,v)[0]:e.format.value(c(e,t,e.color.value,q),{key:e.color.value,vars:e,data:t}),e.legend.filters.value&&!(h instanceof Array)){i="<div style='text-align:center;'>";var g=e.format.locale.value;i+="<div class='mute'>"+e.format.value(g.method.mute)+"</div>",i+="<div class='solo'>"+e.format.value(g.method.solo)+"</div>",i+="</div>",s=function(t){var r={border:"1px solid #ccc",display:"inline-block",margin:"1px 2px",padding:"3px 5px"};t.select(".mute").style(r).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var t=e.id.mute.value;e.history.states.push(function(){e.self.id({mute:t}).draw()}),e.self.id({mute:h}).draw()}),t.select(".solo").style(r).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var t=e.id.solo.value;e.history.states.push(function(){e.self.id({solo:t}).draw()}),e.self.id({solo:h}).draw()})}}o({data:t,html:i,js:s,depth:T,footer:!1,vars:e,x:d,y:p,mouseevents:this,title:a,titleOnly:!e.legend.data.value,offset:.4*r})}).on(u.out,function(t){h(e.type.value)}),e.dev.value&&p.timeEnd("drawing legend")}}else t=!1;if(e.legend.value&&key&&t){if(e.dev.value&&p.time("positioning legend"),r)var K=r+e.ui.padding;else{var Z=e.g.legend.node().getBBox();K=Z.height+Z.y}0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=K,e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+(e.height.value-e.margin.bottom)+")"),e.dev.value&&p.timeEnd("positioning legend")}else e.dev.value&&p.time("hiding legend"),e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")"),e.dev.value&&p.timeEnd("hiding legend")}},{"../../../array/sort.js":29,"../../../client/pointer.js":33,"../../../client/scroll.js":36,"../../../client/touch.js":38,"../../../color/text.js":45,"../../../core/console/print.js":47,"../../../core/data/nest.js":56,"../../../core/fetch/color.js":59,"../../../core/fetch/text.js":62,"../../../core/fetch/value.js":63,"../../../object/validate.js":170,"../../../string/strip.js":173,"../../../textwrap/textwrap.js":198,"../../../tooltip/remove.js":201,"../../../util/buckets.js":202,"../../../util/copy.js":205,"../../../util/dataurl.js":207,"../../../util/uniques.js":208,"../tooltip/create.js":244}],250:[function(e,t,r){e("../../../client/pointer.js");var n=e("../../../color/text.js");t.exports=function(e,t){t=e.messages.value?t:null;var r=e.messages.style.value||(t===e.error.internal?"large":e.messages.style.backup);if("large"===r)var a=e.messages,i="center";else{if(e.footer.value)a=e.footer;else if(e.title.value)a=e.title;else if(e.title.sub.value)a=e.title.sub;else if(e.title.total.value)a=e.title.total;else a=e.title.sub;i=a.position}a={color:a.font.color,"font-family":a.font.family.value,"font-weight":a.font.weight,"font-size":a.font.size+"px",padding:a.padding+"px"};var o=e.messages.background.value;o||"none"!==(o=e.background.value)&&"transparent"!==o||(o=n(a.color)),e.g.message=e.container.value.selectAll("div#d3po_message").data(["message"]),e.g.message.enter().append("div").attr("id","d3po_message").attr("opacity",0).append("div").attr("class","d3po_message_text").style("display","block"),e.g.message.select(".d3po_message_text").text(t||e.g.message.text());navigator.onLine;e.g.message.style("display",t?"inline-block":"none").call(function(t){t.style(a).style("position","absolute").style("background-color",o).style("text-align","center").style("left",function(){return"center"==i?"50%":"0px"}).style("width",function(){return"center"==i?"auto":e.width.value+"px"}).style("margin-left",function(){return"center"==i?-this.offsetWidth/2+"px":"0px"}).style("top",function(){return"center"==i?"50%":"top"==i?"0px":"auto"}).style("bottom",function(){return"bottom"==i?"0px":"auto"}).style("margin-top",function(){return"large"==r?-(this.offsetHeight||this.getBoundingClientRect().height)/2+"px":"0px"})}).style("opacity",t?1:0)}},{"../../../client/pointer.js":33,"../../../color/text.js":45}],251:[function(e,t,r){(function(){var r,n,a,i,o,s,l,u,c;r=e("../../../util/closest.js"),n=e("../../../client/css.js"),e("../../../font/sizes.js"),a=e("../../../client/pointer.js"),i=e("../../../color/mix.js"),s=e("../../../client/prefix.js"),l=e("../../../core/console/print.js"),u=e("../../../color/text.js"),c=e("../../../core/data/time.js"),o=!1,t.exports=function(e){var t,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T,q,N,I,V,D,P,U,R,L,H,Y,X,G,J,Q,W,K,Z,$,ee,te,re,ne,ae,ie,oe;if(!e.timeline.value||e.error.internal&&e.data.missing||e.small||!e.data.time||!(e.data.time.values.length>1))return e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")");if(e.dev.value&&l.time("drawing timeline"),Y={"font-weight":e.ui.font.weight,"font-family":e.ui.font.family.value,"font-size":e.ui.font.size+"px","text-anchor":"middle"},oe=e.data.time.ticks.map(function(e){return new Date(e)}),W=c(e,{values:oe,style:Y}),te=W.values.map(Number),Q=W.format,e.time.solo.value.length)for(j=d3.extent(e.time.solo.value),b=w=0,z=j.length;w<z;b=++w)(m=j[b]).constructor!==Date&&(4===(m+="").length&&parseInt(m)+""===m&&(m+="/01/01"),m=new Date(m),j[b]=m);else j=d3.extent(oe);if(ie=oe.slice(),ne=d3.max(W.sizes.map(function(e){return e.height})),_=1+~~d3.max(W.sizes.map(function(e){return e.width})),_+=2*e.ui.padding,Z=e.timeline.height.value||ne+2*e.ui.padding,ee=_*oe.length,N=Z,R=Z-2*e.ui.padding>=ne,t=e.width.value-2*e.ui.padding,R&&e.timeline.play.value&&(t-=N+e.ui.padding),!R||te.length<oe.length||t<_*te.length){for(S=_,ee=(_=(t-_)/oe.length)*oe.length,$=1,G=1+~~(S/(ee/te.length));G<te.length-1&&(te.length-1)%G!=0;)G++;te=te.filter(function(e,t){return t%G==0})}else $=0,(M=new Date(oe[0]))["set"+(P=e.data.time.stepType)](M["get"+P]()+oe.length),ie.push(M);return V=new Date(j[0]),V=r(ie,V),y=new Date(j[1]),$||y["set"+e.data.time.stepType](y["get"+e.data.time.stepType]()+1),y=r(ie,y),ae=ie.map(Number),O=ae.indexOf(+V),A=ae.indexOf(+y),p=[V,y],D="start"===e.timeline.align?e.ui.padding:"end"===e.timeline.align?e.width.value-e.ui.padding-ee:e.width.value/2-ee/2,R&&e.timeline.play.value&&(D+=(N+e.ui.padding)/2),U=function(){return clearInterval(o),o=!1,F.call(C,"icon")},v=function(){var e,t,n;if(null!==d3.event.sourceEvent){if(o&&U(),p=f.extent(),(n=r(ie,p[0]))===(t=r(ie,p[1]))&&(O=ae.indexOf(+n),n<p[0]||0===O?t=ie[O+1]:n=ie[O-1]),O=ae.indexOf(+n),(A=ae.indexOf(+t))-O>=1)e=[n,t];else if(O+1<=oe.length)e=[n,ie[O+1]];else{for(e=[n],b=1;b<=1;)O+b<=oe.length?e.push(ie[O+b]):e.unshift(ie[O-(O+b-oe.length)]),b++;e=[e[0],e[e.length-1]]}return p=e,L.attr("fill",H),d3.select(this).call(f.extent(e))}},I=function(){var t;return t=A-O==oe.length-$?[]:(t=ae.filter(function(e,t){return t>=O&&t<A+$})).map(function(e){return new Date(e)}),q(),e.self.time({solo:t}).draw()},g=function(){var t,n,a,i;if(null!==d3.event.sourceEvent&&(e.time.solo.value.length?(i=d3.extent(e.time.solo.value),a=ae.indexOf(+r(ie,i[0])),n=ae.indexOf(+r(ie,i[1])),t=a!==O||n!==A):t=A-O!=oe.length-$,t))return I()},T=function(t){return t.attr("width",N+1).attr("height",Z+1).attr("fill",e.ui.color.primary.value).attr("stroke",e.ui.color.primary.value).attr("stroke-width",1).attr("x",D-N-1-e.ui.padding).attr("y",e.ui.padding)},(E=e.g.timeline.selectAll("rect.d3po_timeline_play").data(R&&e.timeline.play.value?[0]:[])).enter().append("rect").attr("class","d3po_timeline_play").attr("shape-rendering","crispEdges").attr("opacity",0).call(T),E.transition().duration(e.draw.timing).call(T),E.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),F=e.g.timeline.selectAll("text.d3po_timeline_playIcon").data(R&&e.timeline.play.value?[0]:[]),C=function(t,r){var a;return r=e.timeline.play[r],n("font-awesome")?(r=r.awesome,a="FontAwesome"):(r=r.fallback,a="inherit"),t.style("font-family",a).text(r)},B=function(t){var r;return r=Z/2+e.ui.padding+1,t.attr("fill",u(e.ui.color.primary.value)).attr("stroke","none").attr(Y).attr("x",D-(N-1)/2-e.ui.padding).attr("y",r).attr("dy","0.5ex").call(C,o?"pause":"icon")},F.enter().append("text").attr("class","d3po_timeline_playIcon").call(B).style("pointer-events","none").attr("opacity",0),F.call(B).transition().duration(e.draw.timing).attr("opacity",1),F.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),(q=function(){return A-O==oe.length-$?(E.on(a.hover,null).on(a.click,null).transition().duration(e.draw.timing).attr("opacity",.3),F.transition().duration(e.draw.timing).attr("opacity",.3)):(E.on(a.over,function(){return d3.select(this).style("cursor","pointer")}).on(a.out,function(){return d3.select(this).style("cursor","auto")}).on(a.click,function(){return o?U():(F.call(C,"pause"),A===oe.length?(A-=O,O=0):(O++,A++),I(),o=setInterval(function(){return A===oe.length-$?U():(O++,A++,I())},e.timeline.play.timing.value))}).transition().duration(e.draw.timing).attr("opacity",1),F.transition().duration(e.draw.timing).attr("opacity",1))})(),H=function(t){var r,n,a;return n=$?t<=p[1]:t<p[1],t>=p[0]&&n?(a=1,r=u(e.ui.color.secondary.value)):(a=.5,r=u(e.ui.color.primary.value)),$&&e.background.value&&"none"!==e.background.value&&(r=d3.rgb(u(e.background.value))),"rgba("+(r=d3.rgb(r)).r+","+r.g+","+r.b+","+a+")"},(d=e.g.timeline.selectAll("rect.d3po_timeline_background").data(["background"])).enter().append("rect").attr("class","d3po_timeline_background").attr("shape-rendering","crispEdges").attr("width",ee+2).attr("height",Z+2).attr("fill",e.ui.color.primary.value).attr("x",D-1).attr("y",e.ui.padding),d.transition().duration(e.draw.timing).attr("width",ee+2).attr("height",Z+2).attr("fill",e.ui.color.primary.value).attr("x",D-1).attr("y",e.ui.padding),(J=e.g.timeline.selectAll("g#ticks").data(["ticks"])).enter().append("g").attr("id","ticks").attr("transform","translate("+e.width.value/2+","+e.ui.padding+")"),(h=e.g.timeline.selectAll("g#brush").data(["brush"])).enter().append("g").attr("id","brush"),(k=e.g.timeline.selectAll("g#labels").data(["labels"])).enter().append("g").attr("id","labels"),(L=k.selectAll("text").data(oe,function(e,t){return t})).enter().append("text").attr("stroke","none").attr("y",0).attr("dy","0.5ex").attr("x",0),re=d3.scaleTime().domain(d3.extent(ie)).rangeRound([0,ee]),L.order().attr(Y).text(function(e,t){return te.indexOf(+e)>=0?Q(e):""}).attr("opacity",function(t,r){return e.data.time.dataSteps.indexOf(r)>=0?1:.4}).attr("fill",H).attr("transform",function(t,r){var n,a;return n=D+re(t),$||(n+=_/2),a=Z/2+e.ui.padding+1,$&&(a+=Z/2+ne),"translate("+Math.round(n)+","+Math.round(a)+")"}),L.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),f=d3.svg.brush().x(re).extent(p).on("brush",v).on("brushend",g),X=e.axes.discrete&&e[e.axes.discrete].value===e.time.value?e[e.axes.discrete].ticks.color:e.x.ticks.color,J.attr("transform","translate("+D+","+(e.ui.padding+1)+")").transition().duration(e.draw.timing).call(d3.axisTop().scale(re).ticks(function(){return ie}).tickFormat("").tickSize(-Z).tickPadding(0)).selectAll("line").attr("stroke-width",1).attr("shape-rendering","crispEdges").attr("stroke",function(t){return te.indexOf(+t)>=0?X:i(X,e.background.value,.4,1)}),J.selectAll("path").attr("fill","none"),h.attr("transform","translate("+D+","+(e.ui.padding+1)+")").attr("opacity",1).call(f),L.attr("pointer-events","none"),h.selectAll("rect.background").attr("fill","none").style("visibility","visible").attr("height",Z).attr("shape-rendering","crispEdges").on(a.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=s()+t),d3.select(this).style("cursor",t)}),h.selectAll("rect.extent").attr("opacity",.75).attr("height",Z).attr("fill",e.ui.color.secondary.value).attr("shape-rendering","crispEdges").on(a.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=s()+t),d3.select(this).style("cursor",t)}),e.timeline.handles.value?((x=h.selectAll("g.resize").selectAll("rect.d3po_handle").data(["d3po_handle"])).enter().insert("rect","rect").attr("class","d3po_handle"),x.attr("fill",e.timeline.handles.color).attr("transform",function(t){return"translate("+("resize e"===this.parentNode.className.baseVal?-e.timeline.handles.size:0)+",0)"}).attr("width",e.timeline.handles.size).style("visibility","visible").attr("shape-rendering","crispEdges").attr("opacity",e.timeline.handles.opacity),h.selectAll("g.resize").selectAll("rect").attr("height",Z)):h.selectAll("g.resize").remove(),K=e.g.timeline.node().getBBox(),0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=K.height+K.y,e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+Math.round(e.height.value-e.margin.bottom-e.ui.padding/2)+")"),e.margin.bottom+=e.ui.padding,e.dev.value?l.time("drawing timeline"):void 0}}).call(this)},{"../../../client/css.js":31,"../../../client/pointer.js":33,"../../../client/prefix.js":34,"../../../color/mix.js":41,"../../../color/text.js":45,"../../../core/console/print.js":47,"../../../core/data/time.js":58,"../../../font/sizes.js":100,"../../../util/closest.js":204}],252:[function(e,t,r){var n=e("../d3functions/aggs.js"),a=e("../../../client/pointer.js"),i=e("../../../core/fetch/value.js"),o=e("../../../core/console/print.js"),s=e("../../../client/rtl.js"),l=e("../../../textwrap/textwrap.js");t.exports=function(e){var t=e.size.value?e.size.value:"number"===e.color.type&&e.color.value;if(e.data.viz&&e.title.total.value&&!e.small)if(t){e.dev.value&&o.time("calculating total value");var r=e.data.pool;e.focus.value.length&&(r=e.data.viz.filter(function(t){return t[e.id.value]==e.focus.value[0]}));var u=e.aggs.value[t]||"sum";if(u.constructor===Function?h=u(r):(r=r.reduce(function(r,n){var a=i(e,n,t);return a instanceof Array?r=r.concat(a):r.push(a),r},[]),h=n.fromString(u)(r)),0!==h&&null!=h||(h=!1),"number"==typeof h){var c="";if(e.data.mute.length||e.data.solo.length||e.focus.value.length){var d=d3.sum(e.data.value,function(r){if(e.time.solo.value.length>0)var n=e.time.solo.value.indexOf(i(e,r,e.time.value))>=0;else if(e.time.mute.value.length>0)n=e.time.solo.value.indexOf(i(e,r,e.time.value))<0;else n=!0;if(n)return i(e,r,t)});if(d>h){c=h/d*100;var f=e.format.value(d,{key:e.size.value,vars:e});c=" ("+e.format.value(c,{key:"share",vars:e})+" "+e.format.locale.value.dev.of+" "+f+")"}}h=e.format.value(h,{key:e.size.value,vars:e});var p=e.title.total.value;h=(p.prefix||e.format.value(e.format.locale.value.ui.total)+": ")+h,p.suffix&&(h+=p.suffix),h+=c}e.dev.value&&o.timeEnd("calculating total value")}else h=!1;else var h=!1;var v=[];if(e.footer.value&&v.push({link:e.footer.link,style:e.footer,type:"footer",value:e.footer.value}),!e.small){var g;if(e.title.value)"function"==typeof(g=e.title.value)&&(g=g(e.self)),v.push({link:e.title.link,style:e.title,type:"title",value:g});if(e.title.sub.value)"function"==typeof(g=e.title.sub.value)&&(g=g(e.self)),v.push({link:e.title.sub.link,style:e.title.sub,type:"sub",value:g});e.title.total.value&&h&&v.push({link:e.title.total.link,style:e.title.total,type:"total",value:h})}function m(t){t.attr("font-size",function(e){return e.style.font.size}).attr("fill",function(t){return t.link?e.links.font.color:t.style.font.color}).attr("font-family",function(t){return t.link?e.links.font.family.value:t.style.font.family.value}).attr("font-weight",function(t){return t.link?e.links.font.weight:t.style.font.weight}).style("text-decoration",function(t){return t.link?e.links.font.decoration.value:t.style.font.decoration.value}).style("text-transform",function(t){return t.link?e.links.font.transform.value:t.style.font.transform.value})}e.dev.value&&o.time("drawing titles");var y=e.svg.selectAll("g.d3po_title").data(v,function(e){return e.type}),x=e.title.width||e.width.value-e.margin.left-e.margin.right;function b(e){var t=e.style.font.align;return"center"==t?"middle":"left"==t&&!s||"right"==t&&s?"start":"left"==t&&s||"right"==t&&!s?"end":t}y.enter().append("g").attr("class",function(e){return"d3po_title "+e.type}).attr("opacity",0).append("text").attr("stroke","none").call(m),y.each(function(t){var r=d3.select(this).select("text").call(m),n=b(t);l().align(n).container(r).height(e.height.value/2).size(!1).text(t.value).width(x).draw(),t.y=e.margin[t.style.position],e.margin[t.style.position]+=this.getBBox().height+2*t.style.padding}).on(a.over,function(t){t.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",e.links.hover.color).attr("font-family",e.links.hover.family.value).attr("font-weight",e.links.hover.weight).style("text-decoration",e.links.hover.decoration.value).style("text-transform",e.links.hover.transform.value)}).on(a.out,function(t){t.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","auto").select("text").call(m)}).on(a.click,function(e){if(e.link){var t="/"!=e.link.charAt(0)?"_blank":"_self";window.open(e.link,t)}}).attr("opacity",1).attr("transform",function(t){var r=t.style.position,n="top"==r?0+t.y:e.height.value-t.y;"bottom"==r?n-=this.getBBox().height+t.style.padding:n+=t.style.padding;var a=b(t);if("start"===a)var i=e.margin.left+e.title.padding;else{d3.select(this).select("text").node().getBBox().width;i="middle"===a?e.width.value/2-x/2:e.width.value-x-e.margin.right-e.title.padding}return"translate("+i+","+n+")"}),y.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.margin.top>0&&(e.margin.top+=e.title.padding),e.margin.bottom>0&&(e.margin.bottom+=e.title.padding);var j=e.title.height;j&&e.margin[e.title.position]<j&&(e.margin[e.title.position]=j),e.dev.value&&o.timeEnd("drawing titles")}},{"../../../client/pointer.js":33,"../../../client/rtl.js":35,"../../../core/console/print.js":47,"../../../core/fetch/value.js":63,"../../../textwrap/textwrap.js":198,"../d3functions/aggs.js":210}],253:[function(e,t,r){(function(){var r,n;r=e("./labels.js"),n=e("./transform.js"),t.exports=function(e,t,a){var i,o,s,l,u,c,d,f;return t||(t=e.zoom.bounds),"number"!=typeof a&&(a=e.timing.transitions),e.zoom.size={height:t[1][1]-t[0][1],width:t[1][0]-t[0][0]},f=e.types[e.type.value],i="auto"===(s=e.coords.fit.value)||f.requirements.indexOf("coords")<0?d3.max([e.zoom.size.width/e.width.viz,e.zoom.size.height/e.height.viz]):e.zoom.size[s]/e["app_"+s],c=((u=d3.min([e.width.viz,e.height.viz]))-(f.zoom?2*e.coords.padding:0))/u/i,(o=e.zoom.behavior.scaleExtent())[0]!==o[1]&&t!==e.zoom.bounds||e.zoom.behavior.scaleExtent([c,16*c]),c>(l=e.zoom.behavior.scaleExtent()[1])&&(c=l),e.zoom.scale=c,d=[e.width.viz/2-e.zoom.size.width*c/2-t[0][0]*c,e.height.viz/2-e.zoom.size.height*c/2-t[0][1]*c],e.zoom.translate=d,e.zoom.behavior.translate(d).scale(c),e.zoom.size={height:e.zoom.bounds[1][1]-e.zoom.bounds[0][1],width:e.zoom.bounds[1][0]-e.zoom.bounds[0][0]},e.zoom.reset=!1,(e.labels.value||e.labels.changed)&&r(e),n(e,a)}}).call(this)},{"./labels.js":255,"./transform.js":258}],254:[function(e,t,r){(function(){t.exports=function(e,t){var r,n,a;return n=t.id.nesting.length-1,r=t.depth.value,a=t.id.nesting[r+1],!1===t.types[t.type.value].nesting?0:(e.d3po.merged||a in e&&r<n)&&(!e||a in e)?1:!(r===n&&r>0||e&&a&&!(a in e))||!t.small&&t.tooltip.html.value?0:-1}}).call(this)},{}],255:[function(e,t,r){(function(){var r;r=e("../../../core/console/print.js"),t.exports=function(e){var t,n;if(e.dev.value&&r.time("determining label visibility"),n=e.zoom.behavior.scaleExtent(),t=function(t){return t.attr("opacity",function(t){var r;return t||(t={}),r=parseFloat(d3.select(this).attr("font-size"),10),t.visible=r*(e.zoom.scale/n[1])>=2,t.visible?1:0})},e.draw.timing?e.g.viz.selectAll("text.d3po_label").transition().duration(e.draw.timing).call(t):e.g.viz.selectAll("text.d3po_label").call(t),e.dev.value)return r.timeEnd("determining label visibility")}}).call(this)},{"../../../core/console/print.js":47}],256:[function(e,t,r){(function(){var r,n,a;r=e("./labels.js"),n=e("../../../tooltip/remove.js"),a=e("./transform.js"),t.exports=function(e){var t,i,o,s,l,u,c,d,f,p,h;return i=d3.event.sourceEvent?d3.event.sourceEvent.type:null,l=d3.event.translate,s=d3.event.scale,o=e.zoom.bounds,c=(d=(e.width.viz-e.zoom.size.width*s)/2)>0?d:0,u=d>0?e.width.viz-d:e.width.viz,p=(h=(e.height.viz-e.zoom.size.height*s)/2)>0?h:0,f=h>0?e.height.viz-h:e.height.viz,l[0]+o[0][0]*s>c?l[0]=-o[0][0]*s+c:l[0]+o[1][0]*s<u&&(l[0]=u-o[1][0]*s),l[1]+o[0][1]*s>p?l[1]=-o[0][1]*s+p:l[1]+o[1][1]*s<f&&(l[1]=f-o[1][1]*s),e.zoom.behavior.translate(l).scale(s),e.zoom.translate=l,e.zoom.scale=s,"wheel"===i&&n(e.type.value),(e.labels.value||e.labels.changed)&&("wheel"===i?(t=e.draw.timing?100:250,clearTimeout(e.zoom.wheel),e.zoom.wheel=setTimeout(function(){return r(e)},t)):r(e)),a(e,"dblclick"===i?e.timing.transitions:0)}}).call(this)},{"../../../tooltip/remove.js":201,"./labels.js":255,"./transform.js":258}],257:[function(e,t,r){(function(){t.exports=function(e,t){var r,n,a;n=e.zoom,t||(t=d3.event),a=n.scale>n.behavior.scaleExtent()[0],r=e.types[e.type.value].zoom&&n.value&&n.scroll.value,t.touches&&t.touches.length>1&&r||a||t.stopPropagation()}}).call(this)},{}],258:[function(e,t,r){(function(){t.exports=function(e,t){var r;return"number"!=typeof t&&(t=e.timing.transitions),r="translate("+e.zoom.translate+")",r+="scale("+e.zoom.scale+")",t?e.g.viz.transition().duration(t).attr("transform",r):e.g.viz.attr("transform",r)}}).call(this)},{}],259:[function(e,t,r){(function(){var r;r=e("../../core/methods/filter.js"),t.exports={accepted:[!1,Function,Object,String],mute:r(!0),solo:r(!0),spotlight:{accepted:[Boolean],value:!1},value:!1}}).call(this)},{"../../core/methods/filter.js":79}],260:[function(e,t,r){(function(){t.exports={accepted:[Object],objectAccess:!1,value:{}}}).call(this)},{}],261:[function(e,t,r){(function(){var r;r=e("../../core/methods/process/data.js"),t.exports={accepted:[!1,Array,Object,String],delimiter:{accepted:String,value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},keys:{},process:r,value:!1}}).call(this)},{"../../core/methods/process/data.js":85}],262:[function(e,t,r){(function(){var r,n;r=e("../../core/methods/process/margin.js"),n=e("../../core/methods/rendering.js"),t.exports={background:{color:"#fafafa",rendering:n(),stroke:{color:"#ccc",width:1}},margin:{accepted:[Number,Object,String],process:function(e){var t;return void 0===e&&(e=this.value),t=e,r(e,this),t},value:10},mirror:{accepted:[Boolean],value:!1},ticks:{accepted:[Boolean],value:!0}}}).call(this)},{"../../core/methods/process/margin.js":88,"../../core/methods/rendering.js":90}],263:[function(e,t,r){(function(){t.exports={accepted:[String],value:"#ffffff"}}).call(this)},{}],264:[function(e,t,r){(function(){t.exports={accepted:[Function,String],value:!1}}).call(this)},{}],265:[function(e,t,r){(function(){var r,n;r=e("../../core/methods/filter.js"),n=e("../../color/scale.js"),colorScales=e("../helpers/d3functions/colorscales.js"),t.exports={accepted:[!1,Array,Function,Object,String],domain:{accepted:[!1,Array],value:!1},focus:"#444444",heatmap:["#282F6B","#419391","#AFD5E8","#EACE3F","#B35C1E","#B22200"],missing:"#eeeeee",mute:r(!0),primary:"#d74b03",range:["#B22200","#FFEE8D","#759143"],scale:{accepted:[Array,Function,"d3po"].concat(colorScales.allowedStrings),process:function(e){return e instanceof Array?d3.scaleOrdinal().range(e):"d3po"===e?n:"string"==typeof e?colorScales.fromString(e)():e},value:"d3po"},solo:r(!0),secondary:"#e5b3bb",value:!1}}).call(this)},{"../../color/scale.js":43,"../../core/methods/filter.js":79,"../helpers/d3functions/colorscales.js":211}],266:[function(e,t,r){t.exports={accepted:[Array,Function,String],index:{accepted:[Boolean],value:!0},process:function(e,t){return"string"==typeof e&&(e=[e]),e},value:!1}},{}],267:[function(e,t,r){arguments[4][106][0].apply(r,arguments)},{dup:106}],268:[function(e,t,r){(function(){var r;r=e("../../util/d3selection.js"),t.exports={accepted:[!1,Array,Object,String],id:"default",process:function(e,t){return!1!==e&&("default"===t.container.id&&t.self.container({id:"d3po_"+ +new Date}),r(e)?e.append("div"):e instanceof Array?d3.select(e[0][0]).append("div"):(this.selector=e,d3.select(e).append("div")))},value:!1}}).call(this)},{"../../util/d3selection.js":206}],269:[function(e,t,r){(function(){var r,n;r=e("../../core/methods/filter.js"),n=e("../../core/methods/process/data.js"),projections=e("../helpers/d3functions/projections.js"),t.exports={accepted:[!1,Array,Function,Object,String],center:[0,0],filetype:{accepted:["json"],value:"json"},fit:{accepted:["auto","height","width"],value:"auto"},key:!1,mute:r(!1),padding:20,process:n,projection:{accepted:projections.allowedStrings.concat([Function]),value:projections.defaultString},simplify:{accepted:[Boolean],value:!0},solo:r(!1),threshold:{accepted:[Number],value:.9},value:!1}}).call(this)},{"../../core/methods/filter.js":79,"../../core/methods/process/data.js":85,"../helpers/d3functions/projections.js":214}],270:[function(e,t,r){(function(){var r,n,a;r=e("../../core/fetch/value.js"),n=e("../../client/ie.js"),a=e("../../string/strip.js"),t.exports={accepted:[void 0,!0,Array,String],chainable:!1,data:[],process:function(e,t){var i,o,s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T,q,N,I,V,D;if(void 0===t.returned)return[];if((e=e||t.cols.value)instanceof Array?l=e:"string"==typeof e&&(l=[e]),c=[],I=[],t.title.value?("function"==typeof(N=t.title.value)&&(N=N(t.self)),250,N=(N=a(N)).substr(0,250)):N="d3po Visualization Data",!0===e)for(l=d3.keys(t.data.keys),c.push(l),h=0,m=(C=t.data.value).length;h<m;h++){for(d=C[h],q=[],v=0,y=l.length;v<y;v++)D=d[o=l[v]],"string"===t.data.keys[o]&&(D='"'+D+'"'),q.push(D);c.push(q)}else{for(l||(l=[t.id.value],t.time.value&&l.push(t.time.value),t.size.value&&l.push(t.size.value),t.text.value&&l.push(t.text.value)),g=0,x=l.length;g<x;g++)o=l[g],I.push(t.format.value(o));for(c.push(I),A=0,b=(B=t.returned.nodes).length;A<b;A++)if(null!=(O=B[A]).values&&O.values instanceof Array)for(M=0,j=(T=O.values).length;M<j;M++){for(D=T[M],q=[],S=0,w=l.length;S<w;S++)s=l[S],"string"==typeof(D=r(t,D,s))&&(D='"'+D+'"'),q.push(D);c.push(q)}else{for(q=[],E=0,_=l.length;E<_;E++)s=l[E],q.push(r(t,O,s));c.push(q)}}for(u="",p=F=0,k=c.length;F<k;p=++F)f=(o=c[p]).join(","),u+=p<c.length?f+"\n":f;return i=new Blob([u],{type:"text/csv;charset=utf-8;"}),n?navigator.msSaveBlob(i,N+".csv"):(z=document.createElement("a"),V=URL.createObjectURL(i),z.setAttribute("href",V),z.setAttribute("download",N+".csv"),z.style="visibility:hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z)),this.data=c,l},value:void 0}}).call(this)},{"../../client/ie.js":32,"../../core/fetch/value.js":63,"../../string/strip.js":173}],271:[function(e,t,r){(function(){var r;r=e("../../core/methods/process/data.js"),t.exports={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},donut:{size:.35},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],keys:{},mute:[],large:400,opacity:.9,padding:{accepted:[Number],value:1},process:function(e,t){return r(e,t,this)},solo:[],stroke:{width:1},value:!1}}).call(this)},{"../../core/methods/process/data.js":85}],272:[function(e,t,r){(function(){t.exports={accepted:[Function,Number],value:0}}).call(this)},{}],273:[function(e,t,r){(function(){t.exports={accepted:[!1,Function,Object],value:!1}}).call(this)},{}],274:[function(e,t,r){arguments[4][110][0].apply(r,arguments)},{dup:110}],275:[function(e,t,r){var n=e("../../core/console/print.js"),a=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(!1===this.initialized)return this.initialized=!0,e;if(void 0===e&&"function"==typeof this.value&&(e=this.value),!1===t.container.value){var r=t.format.locale.value.dev.setContainer;n.warning(r,"container")}else if(t.container.value.empty()){r=t.format.locale.value.dev.noContainer;var i=t.container.selector||"";n.warning(a(r,'"'+i+'"'),"container")}else t.dev.value&&n.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var o={};t.history.chain.forEach(function(e){var t=e.method;delete e.method,o[t]=e}),e(o),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.js":47,"../../string/format.js":171}],276:[function(e,t,r){var n=e("../../core/methods/process/data.js");t.exports={accepted:[!1,Array,Function,String],arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",connections:function(e,t,r){var n=this;if(!n.value)return[];if(!t)t="id";var a=n.restricted||n.value,i=[];if(!e)return a;var o=a.filter(function(a){var o=!1;return a[n.source][t]==e?(o=!0,r&&i.push(a[n.target])):a[n.target][t]==e&&(o=!0,r&&i.push(a[n.source])),o});return r?i:o},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},interpolate:{accepted:["basis","cardinal","linear","monotone","step"],value:"basis"},label:!1,large:100,limit:{accepted:[!1,Function,Number],value:!1},opacity:{accepted:[Function,Number,String],min:{accepted:[Number],value:.25},scale:{accepted:[Function],value:d3.scaleLinear()},value:1},process:n,size:{accepted:[!1,Number,String],min:1,scale:.5,value:!1},source:"source",strength:{accepted:[!1,Function,Number,String],value:!1},target:"target",value:!1}},{"../../core/methods/process/data.js":85}],277:[function(e,t,r){(function(){t.exports={accepted:[Boolean,String],value:!1}}).call(this)},{}],278:[function(e,t,r){(function(){t.exports={accepted:[!1,Array,Function,Number,String],process:function(e){return!1===e?[]:e instanceof Array?e:[e]},tooltip:{accepted:[Boolean],value:!0},value:[]}}).call(this)},{}],279:[function(e,t,r){(function(){var r,n,a,i;r=e("../../core/methods/font/align.js"),n=e("../../core/methods/font/decoration.js"),a=e("../../core/methods/font/family.js"),i=e("../../core/methods/font/transform.js"),t.exports={align:r(),color:"#444444",decoration:n(),family:a(),secondary:{align:r(),color:"#444444",decoration:n(),family:a(),size:12,spacing:0,transform:i(),weight:400},size:12,spacing:0,transform:i(),weight:400}}).call(this)},{"../../core/methods/font/align.js":80,"../../core/methods/font/decoration.js":81,"../../core/methods/font/family.js":82,"../../core/methods/font/transform.js":84}],280:[function(e,t,r){(function(){var r,n,a;n=e("../../core/methods/font/family.js"),r=e("../../core/methods/font/decoration.js"),a=e("../../core/methods/font/transform.js"),t.exports={accepted:[!1,Number,String],font:{align:"center",color:"#444",decoration:r(),family:n(),size:11,transform:a(),weight:400},link:!1,padding:0,position:"bottom",value:!1}}).call(this)},{"../../core/methods/font/decoration.js":81,"../../core/methods/font/family.js":82,"../../core/methods/font/transform.js":84}],281:[function(e,t,r){(function(){var r,n,a,i;r=e("../../number/format.js"),n=e("../../core/locale/locale.js"),a=e("../../object/merge.js"),i=e("../../string/title.js"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},locale:{accepted:function(){return d3.keys(n)},process:function(e){var t;return"en_US",t=n.en_US,"en_US"!==e&&(t=a(t,n[e])),this.language=e,t},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,a;return t||(t={}),t.locale||(t.locale=this.locale.value),(a=t.vars||{}).time&&a.time.value&&t.key===a.time.value?(n=e.constructor===Date?e:new Date(e),a.data.time.format(n)):"number"==typeof e?(this.number.value||r)(e,t):"string"==typeof e?(this.text.value||i)(e,t):JSON.stringify(e)}}}).call(this)},{"../../core/locale/locale.js":77,"../../number/format.js":168,"../../object/merge.js":169,"../../string/title.js":174}],282:[function(e,t,r){(function(){t.exports={accepted:[!1,Number],max:600,secondary:!1,small:200,value:!1}}).call(this)},{}],283:[function(e,t,r){(function(){var r,n,a,i,o,s,l,u;r=e("../../../core/methods/font/align.js"),n=e("../../../core/methods/font/decoration.js"),a=e("../../../core/methods/font/family.js"),i=e("../../../core/methods/filter.js"),s=e("../../../core/methods/font/position.js"),l=e("../../../core/methods/rendering.js"),u=e("../../../core/methods/font/transform.js"),o={x:"bottom",x2:"top",y:"left",y2:"right"},t.exports=function(e){return{accepted:[Array,Boolean,Function,Object,String],affixes:{accepted:[Boolean],separator:{accepted:[Boolean,Array],value:!0},value:!1},axis:{accepted:[Boolean],color:"#444",font:{color:!1,decoration:n(!1),family:a(""),size:!1,spacing:0,transform:u(!1),weight:!1},rendering:l(),value:!0},dataFilter:!0,domain:{accepted:[!1,Array],value:!1},grid:{accepted:[Boolean],color:"#ccc",rendering:l(),value:!0},label:{accepted:[Boolean,String],fetch:function(t){return!0===this.value?t.format.value(t[e].value,{key:e,vars:t}):this.value},font:{color:"#444",decoration:n(),family:a(),size:12,spacing:0,transform:u(),weight:400},padding:3,value:!0},lines:{accept:[!1,Array,Number,Object],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=(e=e.filter(function(e){return!isNaN(e)})).length?e.join(", "):"none"),e},value:"10, 10"},color:"#888",font:{align:r("right"),color:"#444",background:{accepted:[Boolean],value:!0},decoration:n(),family:a(),padding:{accepted:[Number],value:10},position:s("middle"),size:12,transform:u(),weight:400},process:Array,rendering:l(),width:1,value:[]},mouse:{accept:[Boolean],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=(e=e.filter(function(e){return!isNaN(e)})).length?e.join(", "):"none"),e},value:"none"},rendering:l(),width:2,value:!0},mute:i(!0),orient:{accepted:["top","right","bottom","left"],value:o[e]},padding:{accepted:[Number],value:.1},persist:{position:{accepted:[Boolean],value:!1},size:{accepted:[Boolean],value:!0}},range:{accepted:[!1,Array],value:!1},scale:{accepted:["linear","log","discrete","share"],process:function(t,r){var n,a,i,o;for(n=0,a=(i=["log","discrete","share"]).length;n<a;n++)(o=i[n])===t?r.axes[o]=e:r.axes[o]===e&&(r.axes[o]=!1);return"discrete"===t&&(r.axes.opposite=0===e.indexOf("x")?"y":"x"),t},value:"linear"},solo:i(!0),stacked:{accepted:[Boolean],process:function(t,r){return t||r.axes.stacked!==e?t&&(r.axes.stacked=e):r.axes.stacked=!1,t},value:!1},ticks:{accepted:[!1,Array],color:"#ccc",font:{color:"#666",decoration:n(),family:a(),size:10,spacing:0,transform:u(),weight:400},labels:{accepted:[Boolean,Array],value:!0},rendering:l(),size:10,width:1,value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}}).call(this)},{"../../../core/methods/filter.js":79,"../../../core/methods/font/align.js":80,"../../../core/methods/font/decoration.js":81,"../../../core/methods/font/family.js":82,"../../../core/methods/font/position.js":83,"../../../core/methods/font/transform.js":84,"../../../core/methods/rendering.js":90}],284:[function(e,t,r){(function(){t.exports={accepted:[Boolean],back:function(){if(this.states.length)return this.states.pop()()},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[],value:!0}}).call(this)},{}],285:[function(e,t,r){(function(){var r;r=e("../../core/methods/process/icon.js"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:r,rotate:0,value:"fa-angle-left"},style:{accepted:[Object,String],value:"default"},value:!1}}).call(this)},{"../../core/methods/process/icon.js":87}],286:[function(e,t,r){(function(){var r;r=e("../../core/methods/filter.js"),t.exports={accepted:[Array,String],dataFilter:!0,grouping:{accepted:[Boolean],value:!0},mute:r(!0),nesting:["id"],solo:r(!0),value:"id"}}).call(this)},{"../../core/methods/filter.js":79}],287:[function(e,t,r){(function(){var r,n,a;r=e("../../core/methods/font/decoration.js"),n=e("../../core/methods/font/family.js"),a=e("../../core/methods/font/transform.js"),t.exports={accepted:[Boolean],align:{accepted:["start","middle","end","left","center","right"],process:function(e){var t;return(t=["left","center","right"].indexOf(e))>=0&&(e=this.accepted[t]),e},value:"middle"},color:{accepted:[!1,String],value:!1},font:{decoration:r(),family:n(),size:11,transform:a(),weight:400},padding:7,resize:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},segments:2,valign:{accepted:[!1,"top","middle","bottom"],value:"middle"},value:!0}}).call(this)},{"../../core/methods/font/decoration.js":81,"../../core/methods/font/family.js":82,"../../core/methods/font/transform.js":84}],288:[function(e,t,r){(function(){var r;r=e("../../core/methods/font/family.js"),t.exports={accepted:[Boolean],align:"middle",data:{accepted:[Boolean],value:!0},filters:{accepted:[Boolean],value:!1},font:{align:"middle",color:"#444444",family:r(),size:[8,14],weight:400},gradient:{height:10},icons:{accepted:[Boolean],value:!0},labels:{accepted:[Boolean],value:!0},order:{accepted:["color","id","size","text",Function],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30],tooltip:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},title:{accepted:[!1,Function,String],value:!1},value:!0}}).call(this)},{"../../core/methods/font/family.js":82}],289:[function(e,t,r){(function(){var r,n,a;r=e("../../core/methods/font/decoration.js"),n=e("../../core/methods/font/family.js"),a=e("../../core/methods/font/transform.js"),t.exports={font:{color:"#444444",decoration:r(),family:n(),transform:a(),weight:400},hover:{color:"#444444",decoration:r(),family:n(),transform:a(),weight:400}}}).call(this)},{"../../core/methods/font/decoration.js":81,"../../core/methods/font/family.js":82,"../../core/methods/font/transform.js":84}],290:[function(e,t,r){arguments[4][121][0].apply(r,arguments)},{"../../core/methods/process/margin.js":88,dup:121}],291:[function(e,t,r){(function(){var r,n,a;r=e("../../core/methods/font/decoration.js"),n=e("../../core/methods/font/family.js"),a=e("../../core/methods/font/transform.js"),t.exports={accepted:[Boolean,String],background:{accepted:[!1,String],value:!1},font:{color:"#444",decoration:r(),family:n(),size:16,transform:a(),weight:400},padding:5,style:{accepted:[!1,"small","large"],value:!1},value:!0}}).call(this)},{"../../core/methods/font/decoration.js":81,"../../core/methods/font/family.js":82,"../../core/methods/font/transform.js":84}],292:[function(e,t,r){(function(){t.exports={accepted:[Boolean],click:{accepted:[Boolean,Function],value:!0},move:{accepted:[Boolean,Function],value:!0},out:{accepted:[Boolean,Function],value:!0},over:{accepted:[Boolean,Function],value:!0},value:!0}}).call(this)},{}],293:[function(e,t,r){(function(){var r;r=e("../../core/methods/process/data.js"),t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},overlap:.6,process:r,value:!1}}).call(this)},{"../../core/methods/process/data.js":85}],294:[function(e,t,r){(function(){t.exports={accepted:[Boolean,Function,String],agg:{accepted:[!1,Function,"sum","min","max","mean","median"],value:!1},sort:{accepted:["asc","desc"],value:"desc"},value:!1}}).call(this)},{}],295:[function(e,t,r){(function(){t.exports={accepted:[Boolean],value:!1,timeout:400,process:function(e,t){var r,n,a;return!!e&&(r=null,n=function(){var e,r,n;if(n=(r=t.container.value.node().parentNode.getBoundingClientRect()).width,e=r.height,t.self.width(n),t.self.height(e),t.width.changed||t.height.changed)return t.self.draw()},d3.select(window).on("resize."+t.container.id,(a=this,function(e){return clearTimeout(r),r=setTimeout(n,a.timeout)})),e)}}}).call(this)},{}],296:[function(e,t,r){(function(){var r;r=e("../../core/methods/rendering.js"),t.exports={accepted:function(e){var t;return!(t=e.types[e.type.value].shapes)||t instanceof Array||(t=[t]),t.length?t:["square"]},interpolate:{accepted:["basis","basis-open","cardinal","cardinal-open","linear","monotone","step","step-before","step-after"],value:"linear"},rendering:r(),value:!1}}).call(this)},{"../../core/methods/rendering.js":90}],297:[function(e,t,r){(function(){var r;r=e("../../core/methods/filter.js"),t.exports={accepted:[!1,Function,Number,Object,String],dataFilter:!0,mute:r(!0),scale:{accepted:[Function],domain:{min:{accepted:[!1,Number],value:!1},max:{accepted:[!1,Number],value:!1}},range:{max:{accepted:[Function,Number],value:function(e){return Math.floor(d3.max([d3.min([e.width.viz,e.height.viz])/15,6]))}},min:{accepted:[Function,Number],value:3}},value:d3.scaleSqrt()},solo:r(!0),threshold:{accepted:[Boolean,Function,Number],value:!1},value:!1}}).call(this)},{"../../core/methods/filter.js":79}],298:[function(e,t,r){(function(){t.exports={value:!1}}).call(this)},{}],299:[function(e,t,r){(function(){var r;r=e("../../core/methods/filter.js"),t.exports={accepted:[!1,Function,Object,String],mute:r(!0),solo:r(!0),value:!1}}).call(this)},{"../../core/methods/filter.js":79}],300:[function(e,t,r){(function(){var r;r=e("../../core/methods/filter.js"),t.exports={accepted:[Array,Boolean,Function,Object,String],nesting:!0,mute:r(!0),solo:r(!0),value:!1}}).call(this)},{"../../core/methods/filter.js":79}],301:[function(e,t,r){(function(){var r;r=e("../../core/methods/filter.js"),t.exports={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,fixed:{accepted:[Boolean],value:!1},format:{accepted:[!1,Array,Function,String],value:!1},mute:r(!1),solo:r(!1),value:!1}}).call(this)},{"../../core/methods/filter.js":79}],302:[function(e,t,r){(function(){t.exports={accepted:[Boolean],align:"middle",hover:{accepted:["all-scroll","col-resize","crosshair","default","grab","grabbing","move","pointer"],value:"pointer"},handles:{accepted:[Boolean],color:"#666",opacity:1,size:3,stroke:"#666",value:!0},height:{accepted:[!1,Number],value:!1},play:{accepted:[Boolean],icon:{accepted:[!1,String],awesome:"",fallback:""},pause:{accepted:[!1,String],awesome:"",fallback:""},timing:{accepted:[Number],value:1500},value:!0},value:!0}}).call(this)},{}],303:[function(e,t,r){(function(){t.exports={mouseevents:60,transitions:600,ui:200}}).call(this)},{}],304:[function(e,t,r){(function(){var r,n,a,i;r=e("../../core/methods/font/decoration.js"),n=e("../../core/methods/font/family.js"),i=e("../../core/methods/font/transform.js"),a=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:r(),family:n(),size:16,transform:i(),weight:400},height:!1,link:!1,padding:2,position:"top",process:function(e,t){var r;return 0===t.container.id.indexOf("default")&&e&&(r=a(e).toLowerCase(),t.self.container({id:r})),e},sub:{accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:r(),family:n(),size:12,transform:i(),weight:400},link:!1,padding:1,position:"top",value:!1},total:{accepted:[Boolean,Object],font:{align:"center",color:"#444444",decoration:r(),family:n(),size:12,transform:i(),weight:400,value:!1},link:!1,padding:1,position:"top",value:!1},width:!1,value:!1}}).call(this)},{"../../core/methods/font/decoration.js":81,"../../core/methods/font/family.js":82,"../../core/methods/font/transform.js":84,"../../string/strip.js":173}],305:[function(e,t,r){(function(){var r,n;r=e("../../core/methods/font/family.js"),n=e("../../core/methods/font/transform.js"),t.exports={accepted:[Boolean,Array,Function,Object,String],anchor:"top center",background:"#ffffff",children:{accepted:[Boolean,Number],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},extent:{accepted:[Boolean],value:!0},font:{color:"#444",family:r(),size:12,transform:n(),weight:400},fullscreen:{accepted:[Boolean],value:!1},html:{accepted:[!1,Function,Object,String],value:!1},iqr:{accepted:[Boolean],value:!0},large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225,stacked:{accepted:[Boolean],value:!1},sub:{accepted:[!1,Function,String],value:!1},value:!0}}).call(this)},{"../../core/methods/font/family.js":82,"../../core/methods/font/transform.js":84}],306:[function(e,t,r){arguments[4][299][0].apply(r,arguments)},{"../../core/methods/filter.js":79,dup:299}],307:[function(e,t,r){(function(){t.exports={accepted:function(e){return d3.keys(e.types)},mode:{accepted:function(e){return e.types[e.type.value].modes||[!1]},value:!1},value:"treemap"}}).call(this)},{}],308:[function(e,t,r){(function(){var r,n,a,i;a=e("../../core/methods/font/family.js"),r=e("../../core/methods/font/align.js"),n=e("../../core/methods/font/decoration.js"),i=e("../../core/methods/font/transform.js"),t.exports={accepted:[Array,Boolean],align:r("center"),border:1,color:{primary:{process:function(e,t){var r;return r=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(r).darker(.75).formatHex()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:n(),family:a(),size:11,transform:i(),weight:400},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"},value:!1}}).call(this)},{"../../core/methods/font/align.js":80,"../../core/methods/font/decoration.js":81,"../../core/methods/font/family.js":82,"../../core/methods/font/transform.js":84}],309:[function(e,t,r){(function(){t.exports={accepted:[!1,Number],secondary:!1,small:200,value:!1}}).call(this)},{}],310:[function(e,t,r){t.exports={accepted:[Boolean],behavior:d3.zoom().scaleExtent([1,1]).duration(0),click:{accepted:[Boolean],value:!0},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],value:!0},value:!0}},{}],311:[function(e,t,r){(function(){var r,n,a,i,o,s,l;e("../../util/closest.js"),n=e("../../core/fetch/value.js"),a=e("./helpers/graph/draw.js"),i=e("./helpers/graph/nest.js"),o=e("../../array/sort.js"),s=e("./helpers/graph/stack.js"),l=e("../../core/data/threshold.js"),(r=function(e){var t,r,i,l,u,c,d,f,p,h;if(a(e,{buffer:e.axes.opposite,zero:!0}),e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0)return[];for(r=o(e.data.viz,null,null,null,e),i=e[e.axes.discrete],f=e[e.axes.opposite],l=0,c=r.length;l<c;l++)for((p=r[l]).d3po||(p.d3po={}),u=0,d=(h=p.values).length;u<d;u++)(t=h[u]).d3po||(t.d3po={}),t.d3po.x=i.scale.viz(n(e,t,i.value)),t.d3po.x+=e.axes.margin.viz.left,t.d3po.y=f.scale.viz(n(e,t,f.value)),t.d3po.y+=e.axes.margin.viz.top,t.d3po.merged instanceof Array&&(p.d3po.merged||(p.d3po.merged=[]),p.d3po.merged=p.d3po.merged.concat(t.d3po.merged)),t.d3po.text&&!p.d3po.text&&(p.d3po.text=t.d3po.text);return s(e,r)}).filter=function(e,t){return i(e,l(e,t,e[e.axes.discrete].value))},r.requirements=["data","x","y"],r.setup=function(e){var t,r,n;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),e[e.axes.discrete].zerofill.value||e.self[e.axes.discrete]({zerofill:!0}),e[e.axes.opposite].stacked.value||"stacked"!==e.type.value||e.self[e.axes.opposite]({stacked:!0}),n=e[e.axes.opposite],r=e.size,!n.value&&r.value||r.changed&&r.previous===n.value?e.self[e.axes.opposite](r.value):!r.value&&n.value||n.changed&&n.previous===r.value?e.self.size(n.value):void 0},r.shapes=["area"],r.threshold=function(e){return 20/e.height.viz},r.tooltip="static",t.exports=r}).call(this)},{"../../array/sort.js":29,"../../core/data/threshold.js":57,"../../core/fetch/value.js":63,"../../util/closest.js":204,"./helpers/graph/draw.js":319,"./helpers/graph/nest.js":325,"./helpers/graph/stack.js":326}],312:[function(e,t,r){(function(){var r,n,a,i,o,s,l,u=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};n=e("../../util/buckets.js"),a=e("../../core/fetch/value.js"),i=e("./helpers/graph/draw.js"),o=e("./helpers/graph/nest.js"),s=e("./helpers/graph/stack.js"),l=e("../../util/uniques.js"),(r=function(e){var t,r,o,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T,q,N,I,V,D,P,U,R,L,H,Y;if(v="x"===(f=e.axes.discrete)?"height":"width",L="x"===f?"width":"height",q=e.axes.opposite,o="x"===f?"left":"top",E="x"===f?"top":"left",i(e,{buffer:!0,zero:q}),e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0)return[];if(O=e.data.viz,e.axes.stacked)for(y=0,j=O.length;y<j;y++)V=O[y],s(e,V.values);for(U=e.axes[L]/e[e.axes.discrete].ticks.values.length,(I=e[e.axes.discrete].padding.value)<1&&(I*=U),2*I>U&&(I=.1*U),A=U-2*I,e.axes.stacked||(e[f].persist.position.value?(D=e[f].value,F=U/2-(A/=h=u.call(e.id.nesting,D)>=0?d3.max(O,function(e){return e.values.length}):l(O,e.id.value,a,e).length)/2-I,H=d3.scaleOrdinal(),1===h?H.domain([0]).range([0]):H.domain([0,h-1]).range([-F,F])):H=d3.scaleLinear()),d=[],C=(B=e[q]).scale.viz.domain().slice(),0===q.indexOf("y")&&(C=C.reverse()),C[0]<=0&&C[1]>=0?Y=0:C[0]<0?Y(d3.max(C)):Y=d3.min(C),e[f].persist.position.value&&!e.axes.stacked&&(m=l(d3.merge(O.map(function(e){return e.values})),e.id.value,a,e,e.id.value,!1),H.domain(m),1===m.length?H.range([0]):H.range(n(H.range(),m.length))),z=d3.max(O,function(e){return e.values.length}),x=0,w=O.length;x<w;x++)for(N=O[x],e.axes.stacked?(t=1,S=A):e[f].persist.position.value?(t=h,S=A):(t=N.values.length,F=e[f].persist.size.value?U/2-(S=A/z)/2*(z-t)-S/2-I:U/2-(S=A/t)/2-I,H.domain([0,t-1]),H.range([-F,F])),g=b=0,_=(P=N.values).length;b<_;g=++b){if(c=P[g],B=e[q],M=e.axes.stacked?0:e[f].persist.position.value?H(a(e,c,e.id.value)):H(g%t),e.axes.stacked)R=c.d3po[q],r=c.d3po[q+"0"];else{if(null===(T=a(e,c,B.value))&&(B=e[q+"2"],T=a(e,c,B.value)),0===T)continue;"log"===B.scale.value&&(Y=T<0?-1:1),R=B.scale.viz(T),r=B.scale.viz(Y)}p=a(e,c,e[f].value),c.d3po[f]=e[f].scale.viz(p),c.d3po[f]+=e.axes.margin.viz[o]+M,k=r-R,c.d3po[q]=r-k/2,e.axes.stacked||(c.d3po[q]+=e.axes.margin.viz[E]),delete c.d3po.r,c.d3po[L]=S,c.d3po[v]=Math.abs(k),c.d3po.init={},c.d3po.init[q]=B.scale.viz(Y),c.d3po.init[q]-=c.d3po[q],c.d3po.init[q]+=e.axes.margin.viz[E],c.d3po.init[L]=c.d3po[L],e.text.value?delete c.d3po.label:c.d3po.label=!1,d.push(c)}return d}).filter=function(e,t){return o(e,t,e[e.axes.discrete].value)},r.requirements=["data","x","y"],r.setup=function(e){var t,r,n;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),n=e[e.axes.opposite],r=e.size,!n.value&&r.value||r.changed&&r.previous===n.value?e.self[e.axes.opposite](r.value):!r.value&&n.value||n.changed&&n.previous===r.value?e.self.size(n.value):void 0},r.shapes=["square"],t.exports=r}).call(this)},{"../../core/fetch/value.js":63,"../../util/buckets.js":202,"../../util/uniques.js":208,"./helpers/graph/draw.js":319,"./helpers/graph/nest.js":325,"./helpers/graph/stack.js":326}],313:[function(e,t,r){(function(){var r,n,a,i,o,s;n=e("../../core/fetch/value.js"),a=e("./helpers/graph/draw.js"),i=e("../../string/format.js"),o=e("../../string/strip.js"),s=e("../../util/uniques.js"),(r=function(e){var t,r,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M;return a(e,{buffer:!0}),e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0?[]:(l=e.axes.discrete,x=e.axes.opposite,r="x"===l?e.axes.margin.viz.left:e.axes.margin.viz.top,y="x"===x?e.axes.margin.viz.left:e.axes.margin.viz.top,u="x"===l?"height":"width",M="x"===l?"width":"height",z=e.axes[M]/e[l].ticks.values.length,k="number"==typeof(k=e.size.value)?k:100,z=d3.min([z-2*e.labels.padding,k]),(g=e.type.mode.value)instanceof Array||(g=[g,g]),h=function(t){var r,a,i;for(r in a={},e.data.keys)i=s(t,r,n,e),a[r]=1===i.length?i[0]:i;return a},m=!1,f=[],c=e.format.value(e.format.locale.value.ui.iqr),d=e.format.value(e.format.locale.value.ui.max),v=e.format.value(e.format.locale.value.ui.min),b=e.format.value(e.format.locale.value.ui.percentile),t=e.format.value(e.format.locale.value.ui.tukey_bottom),A=e.format.value(e.format.locale.value.ui.tukey_top),j=e.format.value(e.format.locale.value.ui.quartile_first),w=e.format.value(e.format.locale.value.ui.quartile_third),p=e.format.value(e.format.locale.value.ui.median),_=[],d3.nest().key(function(t){return n(e,t,e[l].value)}).rollup(function(a){var k,O,S,E,F,C,B,T,q,N,I,V,D,P,U,R,L,H,Y,X,G,J,Q,W,K,Z,$,ee,te;for(X=e[x].scale.viz,($=a.map(function(t){return n(e,t,e[x].value)})).sort(function(e,t){return e-t}),s($),T=d3.quantile($,.25),U=d3.quantile($,.5),G=d3.quantile($,.75),J={},"tukey"===g[1]?(Q=G-1.5*(T-G),W=A):"extent"===g[1]?(Q=d3.max($),W=d):"number"==typeof g[1]&&(Q=d3.quantile($,(100-g[1])/100),W=i(b,g[1])),Q=d3.min([d3.max($),Q]),e.tooltip.extent.value&&(J[W]={key:e[x].value,value:Q}),e.tooltip.iqr.value&&(J[w]={key:e[x].value,value:G},J[p]={key:e[x].value,value:U},J[j]={key:e[x].value,value:T}),"tukey"===g[0]?(k=T+1.5*(T-G),O=t):"extent"===g[0]?(k=d3.min($),O=v):"number"==typeof g[0]&&(k=d3.quantile($,g[0]/100),W=i(b,g[0])),k=d3.max([d3.min($),k]),e.tooltip.extent.value&&(J[O]={key:e[x].value,value:k}),E=[],S=[],K=[],Y=[],q=0,D=a.length;q<D;q++)F=a[q],(Z=n(e,F,e[x].value))>=T&&Z<=G?E.push(F):Z>=k&&Z<T?S.push(F):Z<=Q&&Z>G?K.push(F):Y.push(F);for(I=n(e,a[0],e[l].value),ee=e[l].scale.viz(I),ee+=r,V=e.format.value(I,{key:e[l].value,vars:e}),I.constructor===Date&&(I=I.getTime()),I=o(I),(E=h(E)).d3po={color:"white",id:"box_"+I,init:{},label:!1,shape:"square",stroke:"#444",text:i(c,V)},E.d3po[M]=z,E.d3po.init[M]=z,E.d3po[u]=Math.abs(X(T)-X(G)),E.d3po[l]=ee,te=d3.min([X(T),X(G)])+E.d3po[u]/2,te+=y,E.d3po[x]=te,E.d3po.tooltip=J,_.push(E),L={d3po:{id:"median_line_"+I,position:"height"===u?"top":"right",shape:"whisker",static:!0}},V={background:"#fff",names:[e.format.value(U,{key:e[x].value,vars:e})],padding:0,resize:!1,x:0,y:0},C=Math.abs(X(U)-X(T)),B=Math.abs(X(U)-X(G)),H=2*d3.min([C,B]),R=2*e.data.stroke.width+2*e.labels.padding,V["width"===M?"w":"h"]=z-R,V["width"===u?"w":"h"]=H-R,L.d3po.label=V,L.d3po[M]=z,L.d3po[l]=ee,L.d3po[x]=X(U)+y,_.push(L),(S=h(S)).d3po={id:"bottom_whisker_line_"+I,offset:E.d3po[u]/2,position:"height"===u?"bottom":"left",shape:"whisker",static:!0},"x"===x&&(S.d3po.offset*=-1),S.d3po[u]=Math.abs(X(k)-X(T)),S.d3po[M]=z,S.d3po[l]=ee,S.d3po[x]=te,_.push(S),(K=h(K)).d3po={id:"top_whisker_line_"+I,offset:E.d3po[u]/2,position:"height"===u?"top":"right",shape:"whisker",static:!0},"y"===x&&(K.d3po.offset*=-1),K.d3po[u]=Math.abs(X(Q)-X(G)),K.d3po[M]=z,K.d3po[l]=ee,K.d3po[x]=te,_.push(K),N=0,P=Y.length;N<P;N++)(F=Y[N]).d3po[l]=ee,F.d3po[x]=X(n(e,F,e.y.value)),F.d3po[x]+=y,F.d3po.r=4,F.d3po.shape=e.shape.value;return m=!Y.length&&Q-k==0,f.push(U),_=_.concat(Y),a}).entries(e.data.viz),m&&1===s(f).length?[]:_)}).modes=["tukey","extent",Array,Number],r.requirements=["data","x","y"],r.shapes=["circle","check","cross","diamond","square","triangle","triangle_up","triangle_down"],r.setup=function(e){var t;if(!e.axes.discrete)return t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})},t.exports=r}).call(this)},{"../../core/fetch/value.js":63,"../../string/format.js":171,"../../string/strip.js":173,"../../util/uniques.js":208,"./helpers/graph/draw.js":319}],314:[function(e,t,r){(function(){var r,n,a,i,o,s,l;r=e("../../array/sort.js"),o=e("../../core/fetch/value.js"),a=e("../../core/fetch/color.js"),i=e("../../core/fetch/text.js"),l=e("../../color/legible.js"),s=e("../../core/data/group.js"),(n=function(e){var t,n,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T,q,N,I,V,D,P;if(v=s(e,e.data.viz),(f=(v=r(v,null,null,null,e)).length)<4?(u=f,M=1):(O=e.width.viz/e.height.viz,u=Math.ceil(Math.sqrt(f*O)),M=Math.ceil(Math.sqrt(f/O))),f>0)for(;(M-1)*u>=f;)M--;for(n=e.width.viz/u,t=e.height.viz/M,e.size.value?(q=e.size.scale.domain.min.value,T=e.size.scale.domain.max.value,p=["number"==typeof q?q:d3.min(e.data.viz,function(t){return o(e,t,e.size.value,e.id.value,"min")}),"number"==typeof T?T:d3.max(e.data.viz,function(t){return o(e,t,e.size.value,e.id.value)})]):p=[0,0],5,E=d3.min([n,t])/2-10,E-=b=e.labels.value&&!e.small&&E>=40?d3.max([20,d3.min([.25*E,50])]):0,F=d3.min([E,e.size.scale.range.min.value]),S=e.size.scale.value.domain(p).rangeRound([F,E]),z=d3.layout.pack().children(function(e){return e.values}).padding(5).radius(function(e){return S(e)}).size([n-10,t-10-b]).value(function(e){return e.value}),d=[],A=0,g=m=0,j=v.length;m<j;g=++m){for(c=v[g],B=z.nodes(c),I=n*g%e.width.viz,P=t*A,y=0,w=B.length;y<w;y++)(C=B[y]).children?(k={d3po:{}})[e.id.value]=C.key:k=C.d3po,k.d3po.depth=e.id.grouping.value?C.depth:e.depth.value,k.d3po.x=C.x,k.d3po.xOffset=I,k.d3po.y=C.y,k.d3po.yOffset=P+b,k.d3po.r=C.r,d.push(k);(g+1)%u==0&&A++}for(h=E/d3.max(d,function(e){return e.d3po.r}),N=z.size()[0]/2,D=z.size()[1]/2,x=0,_=d.length;x<_;x++)(c=d[x]).d3po.x=(c.d3po.x-N)*h+N+c.d3po.xOffset,c.d3po.y=(c.d3po.y-D)*h+D+c.d3po.yOffset,c.d3po.r=c.d3po.r*h,delete c.d3po.xOffset,delete c.d3po.yOffset,c.d3po.static=c.d3po.depth<e.depth.value&&e.id.grouping.value,!b||0!==c.d3po.depth&&!1!==e.id.grouping.value?delete c.d3po.label:(c.d3po.text=i(e,c[e.id.value],c.d3po.depth),V=b>3*e.labels.padding?e.labels.padding:0,c.d3po.label={x:0,y:-(E+V+b/2),w:2*E,h:b-V,padding:0,resize:!0,color:l(a(e,c,c.d3po.depth)),force:!0});return d.sort(function(e,t){return e.d3po.depth-t.d3po.depth})}).fill=!0,n.requirements=["data"],n.scale=1.05,n.shapes=["circle","donut"],t.exports=n}).call(this)},{"../../array/sort.js":29,"../../color/legible.js":39,"../../core/data/group.js":52,"../../core/fetch/color.js":59,"../../core/fetch/text.js":62,"../../core/fetch/value.js":63}],315:[function(e,t,r){(function(){var r,n,a,i;r=e("../../array/comparator.js"),n=e("../../core/data/threshold.js"),i=e("../../core/data/group.js"),(a=function(e){var t,n,a,o,s,l,u;for(n=d3.pie().value(function(e){return e.value}).sort(function(t,n){return e.order.value?r(t.d3po,n.d3po,[e.order.value],e.order.sort.value,[],e):e.id.nesting.length>1?r(t.d3po,n.d3po,e.id.nesting.concat([e.size.value]),void 0,[],e):r(t.d3po,n.d3po,[e.size.value],"desc",[],e)})(i(e,e.data.viz,[])),u=[],l=d3.min([e.width.viz,e.height.viz])/2-2*e.labels.padding,a=0,s=n.length;a<s;a++)(o=(t=n[a]).data.d3po).d3po.startAngle=t.startAngle,o.d3po.endAngle=t.endAngle,o.d3po.r_inner=l/3,o.d3po.r_outer=l,o.d3po.x=e.width.viz/2,o.d3po.y=e.height.viz/2,o.d3po.share=(t.endAngle-t.startAngle)/(2*Math.PI),u.push(o);return u}).filter=n,a.requirements=["data","size"],a.shapes=["arc"],a.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=a}).call(this)},{"../../array/comparator.js":27,"../../core/data/group.js":52,"../../core/data/threshold.js":57}],316:[function(e,t,r){(function(){var e;(e=function(e){var t,r,n,a,i;return t=e.coords.value,n=e.coords.key||d3.keys(t.objects)[0],r=topojson.feature(t,t.objects[n]).features,i=e.coords.solo.value,a=e.coords.mute.value,r=r.filter(function(t){return t[e.id.value]=t.id,i.length?i.indexOf(t.id)>=0:!a.length||a.indexOf(t.id)<0})}).libs=["topojson"],e.nesting=!1,e.requirements=["coords"],e.scale=1,e.shapes=["coordinates"],e.zoom=!0,t.exports=e}).call(this)},{}],317:[function(e,t,r){(function(){var r,n,a,i;r=e("../../array/comparator.js"),n=e("../../core/data/threshold.js"),a=e("../../core/data/group.js"),(i=function(e){var t,n,i,o,s,l,u;for(n=d3.pie().value(function(e){return e.value}).startAngle(function(e){return Math.PI/180*-90}).endAngle(function(e){return Math.PI/180*90}).sort(function(t,n){return e.order.value?r(t.d3po,n.d3po,[e.order.value],e.order.sort.value,[],e):e.id.nesting.length>1?r(t.d3po,n.d3po,e.id.nesting.concat([e.size.value]),void 0,[],e):r(t.d3po,n.d3po,[e.size.value],"desc",[],e)})(a(e,e.data.viz,[])),u=[],l=d3.min([e.width.viz/2,e.height.viz])-2*e.labels.padding,i=0,s=n.length;i<s;i++)(o=(t=n[i]).data.d3po).d3po.startAngle=t.startAngle,o.d3po.endAngle=t.endAngle,o.d3po.r_inner=l/3,o.d3po.r_outer=l,o.d3po.x=e.width.viz/2,o.d3po.y=e.height.viz,o.d3po.share=(t.endAngle-t.startAngle)/(2*Math.PI),u.push(o);return u}).filter=n,i.requirements=["data","size"],i.shapes=["arc"],i.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=i}).call(this)},{"../../array/comparator.js":27,"../../core/data/group.js":52,"../../core/data/threshold.js":57}],318:[function(e,t,r){(function(){var r,n,a;r=e("../../../../core/fetch/color.js"),n=e("../../../../color/legible.js"),a=e("../../../../core/console/print.js"),t.exports=function(e){var t,i,o,s,l,u,c,d,f,p,h,v;for(t=e.axes,c=e.axes.margin.viz,v=2*(s=t.stacked||!t.ticks.value?[]:e.data.viz).length>e.data.large?0:e.draw.timing,f=function(a,i){return 0===i.indexOf("y")?a.attr("x1",-2).attr("x2",-8).attr("y1",function(e){return e.d3po.y-c.top}).attr("y2",function(e){return e.d3po.y-c.top}):a.attr("x1",function(e){return e.d3po.x-c.left}).attr("x2",function(e){return e.d3po.x-c.left}).attr("y1",t.height+2).attr("y2",t.height+8),a.style("stroke",function(t){return n(r(e,t))}).style("stroke-width",e.data.stroke.width).attr("shape-rendering",e.shape.rendering.value)},e.dev.value&&a.time("creating axis tick groups"),(h=e.group.select("g#d3po_graph_plane").selectAll("g.d3po_data_tick").data(s,function(r){var n;return n=t.discrete?"_"+r.d3po[t.discrete]:"","tick_"+r[e.id.value]+"_"+r.d3po.depth+n})).enter().append("g").attr("class","d3po_data_tick").attr("opacity",0),e.dev.value&&a.timeEnd("creating axis tick groups"),l=0,u=(d=["x","y"]).length;l<u;l++)i=d[l],e.dev.value&&v&&a.time("creating "+i+" ticks"),o=v&&i!==t.discrete?s:[],p=h.selectAll("line.d3po_data_"+i).data(o,function(t){return"tick_"+t[e.id.value]+"_"+t.d3po.depth}),e.dev.value&&v&&a.timeEnd("creating "+i+" ticks"),e.dev.value&&v&&a.time("styling "+i+" ticks"),v>0?p.transition().duration(v).call(f,i):p.call(f,i),p.enter().append("line").attr("class","d3po_data_"+i).call(f,i),e.dev.value&&v&&a.timeEnd("styling "+i+" ticks");v>0?(h.transition().duration(v).attr("opacity",1),h.exit().transition().duration(v).attr("opacity",0).remove()):(h.attr("opacity",1),h.exit().remove())}}).call(this)},{"../../../../color/legible.js":39,"../../../../core/console/print.js":47,"../../../../core/fetch/color.js":59}],319:[function(e,t,r){(function(){var r,n,a,i;r=e("./includes/axes.js"),n=e("./includes/svg.js"),a=e("./includes/mouse.js"),i=e("./includes/plot.js"),t.exports=function(e,t){void 0===t&&(t={}),r(e,t),i(e,t),n(e,t),e.mouse.viz=!0===t.mouse&&a}}).call(this)},{"./includes/axes.js":320,"./includes/mouse.js":322,"./includes/plot.js":323,"./includes/svg.js":324}],320:[function(e,t,r){(function(){var r,n,a,i,o,s,l,u,c,d,f,p,h;r=e("../../../../helpers/d3functions/aggs.js"),n=e("../../../../../array/sort.js"),o=e("./buffer.js"),i=e("../../../../../util/buckets.js"),l=e("../../../../../core/fetch/data.js"),u=e("../../../../../core/fetch/value.js"),f=e("../../../../../core/console/print.js"),scales=e("../../../../helpers/d3functions/scales.js"),h=e("../../../../../util/uniques.js"),t.exports=function(e,t){var r,n,i,l,v,g,m,y,x,b,j,w;for(!(i=s(e))&&e.axes.dataset||(e.axes.dataset=c(e)),e.axes.scale=!(!t.buffer||!0===t.buffer)&&p(e,t.buffer),v=0,m=(r=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"]).length;v<m;v++)x=0===(n=r[v]).indexOf("x")?"y":"x",j=e.order.changed||e.order.sort.changed||!0===e.order.value&&e[x].changed,e[n].value&&(!e[n].ticks.values||i||j||e[n].value===e.time.value&&e.time.fixed.value)&&(e.dev.value&&f.time("calculating "+n+" axis"),e[n].reset=!0,e[n].ticks.values=!1,n===e.axes.discrete&&e[n].value!==e.time.value&&(e[n].ticks.values=h(e.axes.dataset,e[n].value,u,e)),w=!0===t.zero||0===n.indexOf(t.zero),b=a(e,n,w),0===n.indexOf("y")&&(b=b.reverse()),e[n].scale.viz=d(e,n,b),e[n].domain.viz=b,e.dev.value&&f.timeEnd("calculating "+n+" axis"));if(e.axes.mirror.value&&(l=d3.extent(e.y.domain.viz.concat(e.x.domain.viz)),e.x.domain.viz=l,e.x.scale.viz.domain(l),l=l.slice().reverse(),e.y.domain.viz=l,e.y.scale.viz.domain(l)),t.buffer)for(g=0,y=r.length;g<y;g++)(n=r[g])!==e.axes.discrete&&o(e,n,t.buffer)},s=function(e){var t,r,n,a,i,o,s,l,u,c,d,f;if((r=!e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed))||(r=e.id.solo.changed||e.id.mute.changed),r)return r;for(a=0,s=(n=["data","time","id","depth","type","width","height","x","y","x2","y2"]).length;a<s;a++)if(e[n[a]].changed){r=!0;break}if(r)return r;for(f=["mute","range","scale","solo","stacked","zerofill"],i=0,l=(c=["x","y","x2","y2"]).length;i<l;i++)for(t=c[i],o=0,u=f.length;o<u;o++)if(d=f[o],e[t][d].changed){r=!0;break}return r},c=function(e){var t,r;return e.time.fixed.value?(r=d3.range(0,e.id.nesting.length),d3.merge(d3.merge([function(){var n,a,i;for(i=[],n=0,a=r.length;n<a;n++)t=r[n],i.push(l(e,"all",t));return i}()]))):e.data.viz},a=function(e,t,a,i){var o,s,l,c,d,f,p,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T,q;if(z=0===t.indexOf("x")?"y":"x",e[t].range.value&&2===e[t].range.value.length)return e[t].range.value.slice();if("share"===e[t].scale.value)return e[t].ticks.values=d3.range(0,1.1,.1),[0,1];if(e[t].stacked.value){for(C=[],v=0,x=(A=e.axes.dataset).length;v<x;v++)(p=A[v]).values?C=C.concat(p.values):C.push(p);return d=d3.nest().key(function(t){return u(e,t,e[z].value)}).rollup(function(r){var n;return n=d3.sum(r,function(r){var n;return(n=u(e,r,e[t].value))>0?n:0}),[d3.sum(r,function(r){var n;return(n=u(e,r,e[t].value))<0?n:0}),n]}).entries(C),q=d3.merge(d.map(function(e){return e.values})),d3.extent(q)}if(e[t].value===e.time.value)return e.time.solo.value.length?d3.extent(e.time.solo.value).map(function(e){return e.constructor!==Date?(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e)):e}):d3.extent(e.data.time.ticks);for(q=[],g=0,b=(M=e.axes.dataset).length;g<b;g++)p=M[g],(T=u(e,p,e[t].value))instanceof Array?q=q.concat(T):q.push(T);if(q=q.filter(function(e){return null!==e}),t===e.axes.discrete){if(F=!0===e.order.value?e[z].value:e.order.value){for(E=e.order.sort.value,s=typeof(o=e.order.agg.value||e.aggs.value[F]||"max"),f=q.reduce(function(e,t){return e[t]=[],e},{}),y=0,j=(O=e.axes.dataset).length;y<j;y++)if((p=O[y]).values)for(_=0,w=(S=p.values).length;_<w;_++)B=S[_],f[u(e,B,e[t].value)].push(u(e,B,F));else f[u(e,p,e[t].value)].push(u(e,p,F));for(m in f)B=f[m],"string"===s?f[m]=r.fromString(o)(B):"function"===s&&(f[m]=o(B,F));return f=(f=n(d3.entries(f),"value",E)).reduce(function(e,t){return e.push(t.key),e},[])}return q[0].constructor===String?h(q).sort(function(e,t){return""+e.localeCompare(""+t)}):h(q).sort(function(e,t){return e-t})}return q.sort(function(e,t){return e-t}),"log"===e[t].scale.value&&(0===q[0]&&(q[0]=1),0===q[q.length-1]&&(q[q.length-1]=-1)),a&&(c=q.every(function(e){return e>0}),l=q.every(function(e){return e<0}),(c||l)&&(k=c?1:-1,q.push("log"===e[t].scale.value?k:0))),d3.extent(q)},d=function(e,t,r){var n,a,o,s,l;return a=0===t.indexOf("x")?e.width.viz:e.height.viz,s=e[t].scale.value,["discrete","share"].indexOf(s)>=0&&(s="linear"),l=10,"string"==typeof r[0]?(s="ordinal",n=i([0,a],r.length)):(n=[0,a],"linear"===e[t].scale.value&&(l=Math.floor(a/(4*e[t].ticks.font.size)))),e[t].scale.ticks=l,"clamp"in(o=scales.fromString(s)().domain(r).range(n))&&o.clamp(!0),o},p=function(e,t){var r,n,a;return!0===t&&(t="size"),t in e&&(t=e[t].value),"function"==typeof(a=e.size.scale.range.min.value)&&(a=a(e)),"function"==typeof(n=e.size.scale.range.max.value)&&(n=n(e)),!1===t?e.size.scale.value.domain([0,1]).rangeRound([n,n]):"number"==typeof t?e.size.scale.value.domain([0,1]).rangeRound([t,t]):t?(e.dev.value&&f.time("calculating buffer scale"),(r=d3.extent(e.axes.dataset,function(r){return u(e,r,t)||0}))[0]===r[1]&&(a=n),e.dev.value&&f.timeEnd("calculating buffer scale"),e.size.scale.value.domain(r).rangeRound([a,n])):void 0}}).call(this)},{"../../../../../array/sort.js":29,"../../../../../core/console/print.js":47,"../../../../../core/fetch/data.js":60,"../../../../../core/fetch/value.js":63,"../../../../../util/buckets.js":202,"../../../../../util/uniques.js":208,"../../../../helpers/d3functions/aggs.js":210,"../../../../helpers/d3functions/scales.js":215,"./buffer.js":321}],321:[function(e,t,r){(function(){var r,n;r=e("../../../../../util/buckets.js"),n=e("../../../../../util/closest.js"),t.exports=function(e,t,a){var i,o,s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T;if("share"!==e[t].scale.value&&!e[t].range.value&&e[t].reset){if("clamp"in(O=e[t].scale.viz.copy())&&O.clamp(!1),t===e.axes.discrete){if("string"==typeof(p=O.domain())[0]){for(m=p.length;m>=0;)p.splice(m,0,"d3po_buffer_"+m),m--;return k=O.range(),k=r(d3.extent(k),p.length),e[t].scale.viz.domain(p).range(k)}if(0===t.indexOf("y")&&(p=p.slice().reverse()),1===e[t].ticks.values.length)p=[p[0],p[0]],e[t].value===e.time.value&&1!==e.data.time.ticks.length?(u=n(e.data.time.ticks,p[0]),(S=e.data.time.ticks.indexOf(u))>0?p[0]=e.data.time.ticks[S-1]:(f=e.data.time.ticks[S+1]-u,p[0]=new Date(u.getTime()-f)),S<e.data.time.ticks.length-1?p[1]=e.data.time.ticks[S+1]:(f=u-e.data.time.ticks[S-1],p[1]=new Date(u.getTime()+f))):(p[0]-=1,p[1]+=1);else if(e.axes.scale)o=Math.abs(p[1]-p[0])/(e[t].ticks.values.length-1),o/=2,z=O.range()[1],w=1.5*e.axes.scale.range()[1],g=O.invert(-w),v=O.invert(z+w),p[0]-o<g?(p[0]=p[0]-o,p[p.length-1]=p[p.length-1]+o):(p=[g,v],0===t.indexOf("y")&&(p=p.reverse()),(h=(h=O.domain())[1]-h[0])||(p[0]-=1,p[1]+=1));else if(e[t].value===e.time.value)o=Math.abs(p[1]-p[0])/(e[t].ticks.values.length-1),o/=2,p[0]=p[0]-o,p[1]=p[1]+o;else{for(i=Math.abs(p[1]-p[0])/2,m=p.length,_=p.slice();m>=0;)d=m?_[m-1]+i:_[m]-i,p.splice(m,0,d),m--;k=O.range(),k=r(d3.extent(k),p.length),e[t].scale.viz.domain(p).range(k)}return 0===t.indexOf("y")&&(p=p.reverse()),e[t].scale.viz.domain(p)}if("x"===a&&0===t.indexOf("x")||"y"===a&&0===t.indexOf("y")||!0===a)return l=(p=O.domain())[0]>=0&&p[1]>=0,s=p[0]<=0&&p[1]<=0,"log"===e[t].scale.value?(T=l?1:-1,l&&0===t.indexOf("y")&&(p=p.slice().reverse()),b=Math.pow(10,parseInt(Math.abs(p[0])).toString().length-1)*T,y=x=p[0]%b,x&&y/b<=.1&&(y+=b*T),j=0===x?b:y,p[0]-=j,0===p[0]&&(p[0]=T),C=Math.pow(10,parseInt(Math.abs(p[1])).toString().length-1)*T,F=p[1]%C,E=Math.abs(C-F),F&&E/C<=.1&&(E+=C*T),B=0===F?C:E,p[1]+=B,0===p[1]&&(p[1]=T),l&&0===t.indexOf("y")&&(p=p.reverse())):(T=0,0===t.indexOf("y")&&(p=p.slice().reverse()),M=p.filter(function(e){return e.constructor===String}),o=.05*Math.abs(p[1]-p[0])||1,M.length||(p[0]=p[0]-o,p[1]=p[1]+o,(l&&p[0]<T||s&&p[0]>T)&&(p[0]=T),(l&&p[1]<T||s&&p[1]>T)&&(p[1]=T)),0===t.indexOf("y")&&(p=p.reverse())),e[t].scale.viz.domain(p);if(e.axes.scale)return c=!1,e.axes.mirror.value&&(c=e[0===t.indexOf("y")?"x":"y"].scale.viz,A=e.width.viz>e.height.viz?"x":"y"),t===A&&c?p=c.domain().slice().reverse():(z=O.range()[1],w=e.axes.scale.range()[1],p=[g=O.invert(1.5*-w),v=O.invert(z+1.5*w)],0===t.indexOf("y")&&(p=p.reverse()),(h=(h=O.domain())[1]-h[0])||(p[0]-=1,p[1]+=1),0===t.indexOf("y")&&(p=p.reverse())),e[t].scale.viz.domain(p)}}}).call(this)},{"../../../../../util/buckets.js":202,"../../../../../util/closest.js":204}],322:[function(e,t,r){(function(){var r,n,a,i,o;e("../../../../../util/copy.js"),r=e("../../../../../client/pointer.js"),n=e("../../../../../core/fetch/color.js"),a=e("../../../../../core/fetch/value.js"),i=e("../../../../../color/legible.js"),o=e("../../../../../color/text.js"),t.exports=function(e,t){var s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z;return s=d3.event.type===r.click&&(t.tooltip.value.long||t.tooltip.html.value),u=[r.over,r.move].indexOf(d3.event.type)>=0,k=e.d3po.x,z=e.d3po.y,m=e.d3po.r||0,b=t.types[t.type.value].scale||1,m*=b,c=t.axes,g=t.axes.margin.viz,_=t.draw.timing?t.timing.mouseevents:0,!s&&u?(l=i(n(t,e)),d=["x","y","x2","y2"].filter(function(r){var n;return(n=a(t,e,t[r].value))&&!(n instanceof Array)&&r!==t.axes.stacked&&t[r].mouse.value})):d=[],f=function(e){return e.attr("x1",function(e){return 0===e.indexOf("x")?k:k-m}).attr("y1",function(e){return 0===e.indexOf("y")?z:z+m}).attr("x2",function(e){return 0===e.indexOf("x")?k:k-m}).attr("y2",function(e){return 0===e.indexOf("y")?z:z+m}).attr("opacity",0)},p=function(e){return e.style("stroke",function(e){return"area"===t.shape.value?"white":l}).attr("stroke-dasharray",function(e){return t[e].mouse.dasharray.value}).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},h=function(r){return r.attr("x1",function(e){return 0===e.indexOf("x")?k:k-m}).attr("y1",function(e){return 0===e.indexOf("y")?z:z+m}).attr("x2",function(r){return 0===r.indexOf("x")?k:e.d3po.x0?e.d3po.x0:"y"===r?g.left-t[r].ticks.size:g.left+c.width+t[r].ticks.size}).attr("y2",function(r){return 0===r.indexOf("y")?z:e.d3po.y0?e.d3po.y0:"x"===r?c.height+g.top+t[r].ticks.size:g.top-t[r].ticks.size}).style("opacity",1)},v=t.g.labels.selectAll("line.d3po_mouse_axis_label").data(d),_?(v.enter().append("line").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").call(f).call(p),v.transition().duration(_).call(h).call(p),v.exit().transition().duration(_).call(f).remove()):(v.call(h).call(p),v.enter().append("line").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").call(f).call(p),v.exit().remove()),j=function(r){return r.attr("font-size",function(e){return t[e].ticks.font.size+"px"}).attr("font-family",function(e){return t[e].ticks.font.family.value}).attr("font-weight",function(e){return t[e].ticks.font.weight}).attr("x",function(e){return 0===e.indexOf("x")?k:"y"===e?g.left-5-t[e].ticks.size:g.left+c.width+5+t[e].ticks.size}).attr("y",function(r){return 0===r.indexOf("y")?z:e.d3po.y0?e.d3po.y+(e.d3po.y0-e.d3po.y)/2+g.top-6:"x"===r?c.height+g.top+5+t[r].ticks.size:g.top-5-t[r].ticks.size-1.35*t[r].ticks.font.size}).attr("fill","area"===t.shape.value?"white":o(l))},(w=t.g.labels.selectAll("text.d3po_mouse_axis_label").data(d)).enter().append("text").attr("class","d3po_mouse_axis_label").attr("id",function(e){return e+"_d3pomouseaxislabel"}).attr("dy",function(e){return 0===e.indexOf("y")?.35*t[e].ticks.font.size:t[e].ticks.font.size}).style("text-anchor",function(e){return"y"===e?"end":"y2"===e?"start":"middle"}).attr("opacity",0).attr("pointer-events","none").call(j),w.text(function(r){var n,i;return n=t.axes.stacked||r,i=a(t,e,t[n].value),t.format.value(i,{key:t[n].value,vars:t,labels:t[n].affixes.value})}),_?(w.transition().duration(_).delay(_).attr("opacity",1).call(j),w.exit().transition().duration(_).attr("opacity",0).remove()):(w.attr("opacity",1).call(j),w.exit().remove()),y=function(r){var n;return n=function(e){var t;return(t=d3.select("text#"+e+"_d3pomouseaxislabel")).size()?t.node().getBBox():{width:0,height:0}},r.attr("x",function(e){var r;return r=n(e).width,0===e.indexOf("x")?k-r/2-5:"y"===e?g.left-t[e].ticks.size-r-10:g.left+c.width+t[e].ticks.size}).attr("y",function(r){var a;return a=n(r).height,0===r.indexOf("y")?z-(a/2+5):e.d3po.y0?e.d3po.y+(e.d3po.y0-e.d3po.y)/2+g.top-(a/2+5):"x"===r?c.height+g.top+t[r].ticks.size:g.top-t[r].ticks.size-a-10}).attr("width",function(e){return n(e).width+10}).attr("height",function(e){return n(e).height+10}).style("stroke","area"===t.shape.value?"transparent":l).attr("fill",l).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},x=t.g.labels.selectAll("rect.d3po_mouse_axis_label").data(d),_?(x.enter().insert("rect","text.d3po_mouse_axis_label").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").attr("opacity",0).call(y),x.transition().duration(_).delay(_).attr("opacity",1).call(y),x.exit().transition().duration(_).attr("opacity",0).remove()):(x.attr("opacity",1).call(y),x.enter().insert("rect","text.d3po_mouse_axis_label").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").call(y),x.exit().remove())}}).call(this)},{"../../../../../client/pointer.js":33,"../../../../../color/legible.js":39,"../../../../../color/text.js":45,"../../../../../core/fetch/color.js":59,"../../../../../core/fetch/value.js":63,"../../../../../util/copy.js":205}],323:[function(e,t,r){(function(){var r,n,a,i,o,s,l,u,c;r=e("../../../../../util/buckets.js"),n=e("./buffer.js"),i=e("../../../../../core/fetch/value.js"),o=e("../../../../../font/sizes.js"),u=e("../../../../../textwrap/textwrap.js"),c=e("../../../../../core/data/time.js"),e("../../../../../util/uniques.js"),t.exports=function(e,t){var r,o,s,u,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A;for(e.axes.margin.viz={top:e.axes.margin.top,right:e.axes.margin.right,bottom:e.axes.margin.bottom,left:e.axes.margin.left},e.axes.height=e.height.viz,e.axes.width=e.width.viz,d=0,h=(r=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"]).length;d<h;d++)if(e[o=r[d]].value){if(!1===e[o].ticks.values)if(e[o].value===e.time.value){for(k=(k=e.time.solo.value).length?k.map(function(e){return e.constructor!==Date&&(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),e}):e.data.time.values,u=d3.extent(k),j=e.data.time.stepType,k=[u[0]],_=u[0];_<u[1];)m=new Date(_),_=new Date(m["set"+j](m["get"+j]()+1)),k.push(_);e[o].ticks.values=k}else 1===o.indexOf("2")?(x=e[o.slice(0,1)].scale.viz,b=e[o].scale.viz,k=e[o.slice(0,1)].scale.ticks,e[o].ticks.values=x.ticks(k).map(function(e){return parseFloat(d3.format(".5f")(b.invert(x(e))))})):e[o].ticks.values=e[o].scale.viz.ticks(e[o].scale.ticks);e[o].ticks.values.length||((A=i(e,e.data.viz,e[o].value))instanceof Array||(A=[A]),e[o].ticks.values=A),y=0===o.indexOf("x")?"y":"x",(1===e[o].ticks.values.length||t.buffer&&t.buffer!==y&&o===e.axes.discrete&&!0===e[o].reset)&&n(e,o,t.buffer),e[o].reset=!1,e[o].value===e.time.value?(s={"font-family":e[o].ticks.font.family.value,"font-weight":e[o].ticks.font.weight,"font-size":e[o].ticks.font.size+"px","text-transform":e[o].ticks.font.transform.value,"letter-spacing":e[o].ticks.font.spacing+"px"},z=c(e,{values:e[o].ticks.values,limit:e.width.viz,style:s}),e[o].ticks.value?e[o].ticks.visible=e[o].ticks.value.map(Number):e[o].ticks.labels.value.constructor===Array?e[o].ticks.visible=e[o].ticks.labels.value.map(Number):e[o].ticks.visible=z.values.map(Number),e[o].ticks.format=z.format):e[o].ticks.value?(e[o].ticks.values=e[o].ticks.value,e[o].ticks.labels.value.constructor===Array?e[o].ticks.visible=e[o].ticks.labels.value:e[o].ticks.visible=e[o].ticks.value):e[o].ticks.labels.value.constructor===Array?e[o].ticks.visible=e[o].ticks.labels.value:"log"===e[o].scale.value?(w=(k=e[o].ticks.values).filter(function(e){return"1"===Math.abs(e).toString().charAt(0)})).length<3?e[o].ticks.visible=k:e[o].ticks.visible=w:e[o].ticks.visible=e[o].ticks.values,e[o].value===e.time.value&&(e[o].ticks.visible=e[o].ticks.visible.map(function(e){return e.constructor===Number&&(""+e).length>4?e:(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e).getTime())}))}if(e.small)for(e.axes.width-=e.axes.margin.viz.left+e.axes.margin.viz.right,e.axes.height-=e.axes.margin.viz.top+e.axes.margin.viz.bottom,f=0,v=r.length;f<v;f++)e[o=r[f]].label.height=0;else e.small||l(e);for(p=0,g=r.length;p<g;p++)e[o=r[p]].axis.svg=a(e,o)},l=function(e){var t,n,a,i,l,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T;for(b=e.x.scale.viz.domain(),E=e.y.scale.viz.domain(),e.x2.value&&(g=e.x2.scale.viz.domain()),e.y2.value&&(M=e.y2.scale.viz.domain()),n=0,l=(f=["y","y2"]).length;n<l;n++)e[t=f[n]].value&&(d="y"===t?"left":"right",O={"font-size":e[t].ticks.font.size+"px","font-family":e[t].ticks.font.family.value,"font-weight":e[t].ticks.font.weight,"text-transform":e[t].ticks.font.transform.value,"letter-spacing":e[t].ticks.font.spacing+"px"},T=e[t].ticks.visible,"log"===e[t].scale.value?B=T.map(function(e){return s(e)}):"share"===e[t].scale.value?B=T.map(function(r){return e.format.value(100*r,{key:"share",vars:e,output:t})}):e[t].value===e.time.value?B=T.map(function(r,n){return e[t].ticks.format(new Date(r))}):("string"==typeof T[0]&&(T=e[t].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3po_buffer_")})),B=T.map(function(r){return e.format.value(r,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t})})),e[t].ticks.labels.value?(e[t].ticks.hidden=!1,(S=d3.max(o(B,O),function(e){return e.width}))&&(S=Math.ceil(S+e.labels.padding),e.axes.margin.viz[d]+=S)):e[t].ticks.hidden=!0,(F=e[t].label.fetch(e))?(C={"font-family":e[t].label.font.family.value,"font-weight":e[t].label.font.weight,"font-size":e[t].label.font.size+"px","text-transform":e[t].label.font.transform.value,"letter-spacing":e[t].label.font.spacing+"px"},e[t].label.height=o([F],C)[0].height):e[t].label.height=0,e[t].label.value&&(e.axes.margin.viz[d]+=e[t].label.height,e.axes.margin.viz[d]+=2*e[t].label.padding));for(e.axes.width-=e.axes.margin.viz.left+e.axes.margin.viz.right,e.x.scale.viz.range(r([0,e.axes.width],b.length)),g&&e.x2.scale.viz.range(r([0,e.axes.width],g.length)),a=0,c=(p=["x","x2"]).length;a<c;a++)e[t=p[a]].value&&(d="x"===t?"bottom":"top",e[t].ticks.labels.value?(e[t].ticks.hidden=!1,m={"font-size":e[t].ticks.font.size+"px","font-family":e[t].ticks.font.family.value,"font-weight":e[t].ticks.font.weight,"text-transform":e[t].ticks.font.transform.value,"letter-spacing":e[t].ticks.font.spacing+"px"},A=e[t].ticks.visible,"log"===e[t].scale.value?z=A.map(function(e){return s(e)}):"share"===e[t].scale.value?z=A.map(function(r){return e.format.value(100*r,{key:"share",vars:e,output:t})}):e[t].value===e.time.value?z=A.map(function(r,n){return e[t].ticks.format(new Date(r))}):("string"==typeof A[0]&&(A=e[t].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3po_buffer_")})),z=A.map(function(r){return e.format.value(r,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t})})),k=o(z,m),x=d3.max(k,function(e){return e.width}),y=d3.max(k,function(e){return e.height}),1===A.length?_=e.axes.width:(_=e[t].scale.viz(A[1])-e[t].scale.viz(A[0]),_=Math.abs(_)),x>_&&z.join("").indexOf(" ")>0?(e[t].ticks.wrap=!0,k=o(z,m,{mod:function(t){return u().container(d3.select(t)).height(e.axes.height/2).width(_).draw()}}),x=d3.max(k,function(e){return e.width}),y=d3.max(k,function(e){return e.height})):e[t].ticks.wrap=!1,e[t].ticks.baseline="auto",x<=_?e[t].ticks.rotate=0:x<e.axes.height/2?(k=o(z,m,{mod:function(t){return u().container(d3.select(t)).width(e.axes.height/2).height(_).draw()}}),y=d3.max(k,function(e){return e.width}),x=d3.max(k,function(e){return e.height}),e[t].ticks.rotate=-90):(x=0,y=0),x&&y||(e[t].ticks.hidden=!0,e[t].ticks.rotate=0),x=Math.ceil(x),y=Math.ceil(y),e[t].ticks.maxHeight=y,e[t].ticks.maxWidth=x,y&&(e.axes.margin.viz[d]+=y+e.labels.padding),i=e[t].ticks.visible[e[t].ticks.visible.length-1],h=e[t].scale.viz(i),(h+=x/2+e.axes.margin.viz.left)>e.width.value&&(v=h-e.width.value+e.axes.margin.viz.right,e.axes.width-=v,e.axes.margin.viz.right+=v)):e[t].ticks.hidden=!0,(j=e[t].label.fetch(e))?(w={"font-family":e[t].label.font.family.value,"font-weight":e[t].label.font.weight,"font-size":e[t].label.font.size+"px","text-transform":e[t].label.font.transform.value,"letter-spacing":e[t].label.font.spacing+"px"},e[t].label.height=o([j],w)[0].height):e[t].label.height=0,e[t].label.value&&(e.axes.margin.viz[d]+=e[t].label.height,e.axes.margin.viz[d]+=2*e[t].label.padding));if(e.axes.height-=e.axes.margin.viz.top+e.axes.margin.viz.bottom,e.x.scale.viz.range(r([0,e.axes.width],b.length)),g&&e.x2.scale.viz.range(r([0,e.axes.width],g.length)),e.y.scale.viz.range(r([0,e.axes.height],E.length)),M)return e.y2.scale.viz.range(r([0,e.axes.height],M.length))},a=function(e,t){return d3.svg.axis().tickSize(e[t].ticks.size).tickPadding(5).orient(e[t].orient.value).scale(e[t].scale.viz).tickValues(e[t].ticks.values).tickFormat(function(r,n){var a,i;return e[t].ticks.hidden?null:(i=e[t].scale.value,a=r.constructor===Date?+r:r,e[t].ticks.visible.indexOf(a)>=0?"share"===i?e.format.value(100*r,{key:"share",vars:e,labels:e[t].affixes.value,output:t}):r.constructor===Date?e[t].ticks.format(r):"log"===i?s(r):e.format.value(r,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t}):null)})},s=function(e){var t,r,n;return r=Math.round(Math.log(Math.abs(e))/Math.LN10),n=Math.abs(e).toString().charAt(0),t="10 "+(r+"").split("").map(function(e){return""[e]}).join(""),"1"!==n&&(t=n+" x "+t),e<0?"-"+t:t}}).call(this)},{"../../../../../core/data/time.js":58,"../../../../../core/fetch/value.js":63,"../../../../../font/sizes.js":100,"../../../../../textwrap/textwrap.js":198,"../../../../../util/buckets.js":202,"../../../../../util/uniques.js":208,"./buffer.js":321}],324:[function(e,t,r){(function(){var r,n,a;r=e("../../../../../color/mix.js"),n=e("../../../../../textwrap/textwrap.js"),a=e("../../../../../object/validate.js"),t.exports=function(e){var t,i,o,s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T,q,N,I,V,D,P,U,R,L,H,Y,X,G,J,Q,W,K,Z,$,ee,te,re,ne,ae,ie,oe,se,le;if(e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0)return null;for(d={width:e.axes.width,height:e.axes.height,fill:e.axes.background.color,stroke:e.axes.background.stroke.color,"stroke-width":e.axes.background.stroke.width,"shape-rendering":e.axes.background.rendering.value},i={left:"start",center:"middle",right:"end"},s=e.small?[]:[0],ae=function(t,r){return t.attr("x1",function(t){return 0===r.indexOf("x")?e.x.scale.viz(t):0}).attr("x2",function(t){return 0===r.indexOf("x")?e.x.scale.viz(t):e.axes.width}).attr("y1",function(t){return 0===r.indexOf("y")?e.y.scale.viz(t):0}).attr("y2",function(t){return 0===r.indexOf("y")?e.y.scale.viz(t):e.axes.height})},ie=function(t,n,a){var i,o,s;return i=a?e[n].grid.color:e[n].ticks.color,o="log"===e[n].scale.value,s=e[n].ticks.visible||[],t.attr("stroke",function(t){return 0===t?e[n].axis.color:(t.constructor===Date&&(t=+t),!(s.indexOf(t)>=0)||o&&"1"!==Math.abs(t).toString().charAt(0)?a&&"transparent"!==e.axes.background.color?r(i,e.axes.background.color,.4,1):"transparent"!==e.background.value?r(i,e.background.value,.4,1):r(i,"white",.4,1):i)}).attr("stroke-width",e[n].ticks.width).attr("shape-rendering",e[n].ticks.rendering.value)},h=function(t,r,n){var a;return a=0===r?"axis":"ticks",(r=e[t][a].font[n])&&(r.length||"number"==typeof r)?r:e[t].ticks.font[n]},ne=function(t,n){var a;return a="log"===e[n].scale.value,t.attr("font-size",function(e){return h(n,e,"size")+"px"}).attr("stroke","none").attr("fill",function(t){var i;return i=h(n,t,"color"),a&&"1"!==Math.abs(t).toString().charAt(0)?r(i,e.background.value,.4,1):i}).attr("font-family",function(e){return h(n,e,"family").value}).attr("font-weight",function(e){return h(n,e,"weight")}).style("text-transform",function(e){return h(n,e,"transform").value}).style("letter-spacing",function(e){return h(n,e,"spacing")+"px"})},T=function(t,r){var n,a;return n=0===r.indexOf("x")?"height":"width",a=0===r.indexOf("x")?"y":"x",t.attr(a+"1",0).attr(a+"2",e.axes[n]).attr(r+"1",function(e){return e.coords.line}).attr(r+"2",function(e){return e.coords.line}).attr("stroke",function(t){return t.color||e[r].lines.color}).attr("stroke-width",e[r].lines.width).attr("shape-rendering",e[r].lines.rendering.value).attr("stroke-dasharray",e[r].lines.dasharray.value)},F=function(t,r){var n;return n=0===r.indexOf("x")?"y":"x",t.attr(n,function(e){return e.coords.text[n]+"px"}).attr(r,function(e){return e.coords.text[r]+"px"}).attr("dy",e[r].lines.font.position.value).attr("text-anchor",i[e[r].lines.font.align.value]).attr("transform",function(e){return e.transform}).attr("font-size",e[r].lines.font.size+"px").attr("fill",function(t){return t.color||e[r].lines.color}).attr("font-family",e[r].lines.font.family.value).attr("font-weight",e[r].lines.font.weight)},R="translate("+e.axes.margin.viz.left+","+e.axes.margin.viz.top+")",(U=e.group.selectAll("g#d3po_graph_plane").data([0])).transition().duration(e.draw.timing).attr("transform",R),U.enter().append("g").attr("id","d3po_graph_plane").attr("transform",R),(c=U.selectAll("rect#d3po_graph_background").data([0])).transition().duration(e.draw.timing).attr(d),c.enter().append("rect").attr("id","d3po_graph_background").attr("x",0).attr("y",0).attr(d),(V=U.selectAll("path#d3po_graph_mirror").data([0])).enter().append("path").attr("id","d3po_graph_mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0),V.transition().duration(e.draw.timing).attr("opacity",function(){return e.axes.mirror.value?1:0}).attr("d",function(){var e,t;return"M "+(t=d.width)+" "+(e=d.height)+" L 0 "+e+" L "+t+" 0 Z"}),K=0!==e.x.ticks.rotate,se=function(t,r){var a,i;return i="x"===r?e.axes.height:0,(a=t.attr("transform","translate(0,"+i+")").call(e[r].axis.svg.scale(e[r].scale.viz)).selectAll("g.tick")).selectAll("line").attr("y2",function(t){var n;return t.constructor===Date&&(t=+t),n=d3.select(this).attr("y2"),e[r].ticks.visible.indexOf(t)>=0?n:n/2}),a.select("text").style("text-anchor",K&&"x"===r?"end":K?"start":"middle").call(ne,r).each(function(t){if(d3.select(this).attr("dy","0px").attr("font-size",function(e){return h(r,e,"size")+"px"}),t.constructor===Date&&(t=+t),!e[r].ticks.hidden&&e[r].ticks.visible.indexOf(t)>=0)return n().container(d3.select(this)).rotate(e[r].ticks.rotate).align(K?"end":"center").valign(K?"middle":"x"===r?"top":"bottom").width(e[r].ticks.maxWidth+2).height(e[r].ticks.maxHeight).padding(0).x(-e[r].ticks.maxWidth/2).y("x2"===r?-(e[r].ticks.maxHeight+2*e.labels.padding):0).draw()})},le=function(t,r){var n,a;return a="y2"===r?e.axes.width:0,(n=t.attr("transform","translate("+a+", 0)").call(e[r].axis.svg.scale(e[r].scale.viz)).selectAll("g.tick")).selectAll("line").attr("y2",function(t){var r;return t.constructor===Date&&(t=+t),r=d3.select(this).attr("y2"),e.x.ticks.visible.indexOf(t)>=0?r:r/2}),n.select("text").call(ne,r)},y=0,k=(G=["x","x2","y","y2"]).length;y<k;y++)$=0===(o=G[y]).indexOf("x")?se:le,H=s.length&&e[o].value?[0]:[],(l=U.selectAll("g#d3po_graph_"+o+"ticks").data(H)).transition().duration(e.draw.timing).call($,o),l.selectAll("line").transition().duration(e.draw.timing).call(ie,o),(m=l.enter().append("g").attr("id","d3po_graph_"+o+"ticks").call($,o)).selectAll("path").attr("fill","none").attr("stroke","none"),m.selectAll("line").call(ie,o),l.exit().transition().duration(e.data.timing).attr("opacity",0).remove();for(_=function(t,r){return t.attr("x",0===r.indexOf("x")?e.width.viz/2:-(e.axes.height/2+e.axes.margin.viz.top)).attr("y","x"===r?e.height.viz-e[r].label.height/2-e[r].label.padding:"y2"===r?e.width.viz-e[r].label.height/2-e[r].label.padding:e[r].label.height/2+e[r].label.padding).attr("transform",0===r.indexOf("y")?"rotate(-90)":null).attr("font-family",e[r].label.font.family.value).attr("font-weight",e[r].label.font.weight).attr("font-size",e[r].label.font.size+"px").attr("fill",e[r].label.font.color).style("text-anchor","middle").attr("dominant-baseline","central").style("text-transform",e[r].label.font.transform.value).style("letter-spacing",e[r].label.font.spacing+"px")},x=0,z=(J=["x","y"]).length;x<z;x++)e[o=J[x]].grid.value?g=e[o].ticks.value?e[o].ticks.value:e[o].ticks.values:(g=[],P="x"===o?"y":"x",e[o].ticks.values.indexOf(0)>=0&&e[P].axis.value&&(g=[0])),e[o].value===e.time.value&&(g=g.map(function(e){return 4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e).getTime()})),(v=U.selectAll("g#d3po_graph_"+o+"grid").data([0])).enter().append("g").attr("id","d3po_graph_"+o+"grid"),(q=v.selectAll("line").data(g,function(e,t){return e.constructor===Date?e.getTime():e})).transition().duration(e.draw.timing).call(ae,o).call(ie,o,!0),q.enter().append("line").style("opacity",0).call(ae,o).call(ie,o,!0).transition().duration(e.draw.timing).delay(e.draw.timing/2).style("opacity",1),q.exit().transition().duration(e.draw.timing/2).style("opacity",0).remove();for(b=0,A=(Q=["x","x2","y","y2"]).length;b<A;b++)e[o=Q[b]].value?(u=e[o].label.fetch(e),w=s&&u&&!e.small?[0]:[],t=e.format.affixes.value[e[o].value],u&&!e[o].affixes.value&&t&&(!0===(Z=e[o].affixes.separator.value)?Z=["[","]"]:!1===Z&&(Z=["",""]),u+=" "+Z[0]+t[0]+" "+t[1]+Z[1])):(u="",w=[]),(j=e.group.selectAll("text#d3po_graph_"+o+"label").data(w)).text(u).transition().duration(e.draw.timing).call(_,o),j.enter().append("text").attr("stroke","none").attr("id","d3po_graph_"+o+"label").text(u).call(_,o),j.exit().transition().duration(e.data.timing).attr("opacity",0).remove();for(I=0,M=(W=["x","y","x2","y2"]).length;I<M;I++)if(e[o=W[I]].value){for((C=U.selectAll("g#d3po_graph_"+o+"_userlines").data([0])).enter().append("g").attr("id","d3po_graph_"+o+"_userlines"),p=e[o].scale.viz.domain(),0===o.indexOf("y")&&(p=p.slice().reverse()),ee=[],E=[],D=0,O=(oe=e[o].lines.value||[]).length;D<O;D++)S=oe[D],f=a(S)?S.position:S,(o===e.axes.discrete?p.indexOf(f)>=0:f>=p[0]&&f<=p[1])&&((f=a(S)?S:{position:f}).coords={line:e[o].scale.viz(f.position)},E.push(f),f.text&&(f.axis=o,f.padding=.5*e[o].lines.font.padding.value,f.align=e[o].lines.font.align.value,te="middle"===(L=e[o].lines.font.position.text)?0:2*f.padding,"top"===L&&(te=-te),0===o.indexOf("x")?(re="left"===f.align?e.axes.height:"center"===f.align?e.axes.height/2:0,"left"===f.align&&(re-=2*f.padding),"right"===f.align&&(re+=2*f.padding)):(re="left"===f.align?0:"center"===f.align?e.axes.width/2:e.axes.width,"right"===f.align&&(re-=2*f.padding),"left"===f.align&&(re+=2*f.padding)),f.coords.text={},f.coords.text[0===o.indexOf("x")?"y":"x"]=re,f.coords.text[o]=e[o].scale.viz(f.position)+te,f.transform=0===o.indexOf("x")?"rotate(-90,"+f.coords.text.x+","+f.coords.text.y+")":null,ee.push(f)));(q=C.selectAll("line.d3po_graph_"+o+"line").data(E,function(e){return e.position})).enter().append("line").attr("class","d3po_graph_"+o+"line").attr("opacity",0).call(T,o),q.transition().duration(e.draw.timing).attr("opacity",1).call(T,o),q.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),(N=C.selectAll("text.d3po_graph_"+o+"line_text").data(ee,function(e){return e.position})).enter().append("text").attr("class","d3po_graph_"+o+"line_text").attr("id",function(e){var t;return t=(t=(t=e.position+"").replace("-","neg")).replace(".","p"),"d3po_graph_"+o+"line_text_"+t}).attr("opacity",0).call(F,o),N.text(function(e){return e.text}).transition().duration(e.draw.timing).attr("opacity",1).call(F,o),N.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),X=function(t){var r;return r=function(e){var t;return t=(t=(t=e.position+"").replace("-","neg")).replace(".","p"),U.select("text#d3po_graph_"+e.axis+"line_text_"+t).node().getBBox()},t.attr("x",function(e){return r(e).x-e.padding}).attr("y",function(e){return r(e).y-e.padding}).attr("transform",function(e){return e.transform}).attr("width",function(e){return r(e).width+2*e.padding}).attr("height",function(e){return r(e).height+2*e.padding}).attr("fill","transparent"!==e.axes.background.color?e.axes.background.color:"white")},Y=e[o].lines.font.background.value?ee:[],(B=C.selectAll("rect.d3po_graph_"+o+"line_rect").data(Y,function(e){return e.position})).enter().insert("rect","text.d3po_graph_"+o+"line_text").attr("class","d3po_graph_"+o+"line_rect").attr("pointer-events","none").attr("opacity",0).call(X),B.transition().delay(e.draw.timing).each("end",function(t){return d3.select(this).transition().duration(e.draw.timing).attr("opacity",1).call(X)}),B.exit().transition().duration(e.draw.timing).attr("opacity",0).remove()}}}).call(this)},{"../../../../../color/mix.js":41,"../../../../../object/validate.js":170,"../../../../../textwrap/textwrap.js":198}],325:[function(e,t,r){(function(){var r,n,a;r=e("../../../../core/fetch/value.js"),n=e("../../../../string/strip.js"),a=e("../../../../util/uniques.js"),t.exports=function(e,t,i){var o,s,l,u,c,d,f;return void 0===i?i=e.id.nesting.slice(0,e.depth.value+1):i.constructor!==Array&&(i=[i]),void 0===s&&(s=[]),t||(t=e.data.viz),o=e[e.axes.discrete],u=e[e.axes.opposite],(f=o.value===e.time.value)?(d=e.data.time.ticks,l=e.time.solo.value.length?"solo":"mute",e.time[l].value.length&&(c=e.time[l].value.slice().map(function(e){return e.constructor!==Date&&(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),+e}),d=d.filter(function(e){return"solo"===l?c.indexOf(+e)>=0:c.indexOf(+e)<0}))):d=o.ticks.values?o.ticks.values:a(t,o.value,r,e),d3.nest().key(function(t){var a,o,s,l,u;for(l="nesting",o=0,s=i.length;o<s;o++)a=i[o],(u=r(e,t,a))instanceof Array&&(u=u.join("_")),l+="_"+n(u);return l}).rollup(function(t){var n,i,s,c,p,h,v,g,m,y,x;if((n=a(t,o.value,r,e)).length&&n[0].constructor===Date&&(n=n.map(Number)),o.zerofill.value)for(i="log"===o.scale.value?u.scale.viz.domain().every(function(e){return e<0})?-1:1:0,s=c=0,h=d.length;c<h;s=++c)if(x=d[s],y=f?+x:x,n.indexOf(y)<0){for(g={d3po:{}},p=0,v=(m=e.id.nesting).length;p<v;p++)(l=m[p])in t[0]&&(g[l]=t[0][l]);g[o.value]=x,g[u.value]=0,g[u.value]=i,t.splice(s,0,g)}return"string"==typeof t[0][o.value]?t:t.sort(function(t,n){var a;return(a=r(e,t,o.value)-r(e,n,o.value))?a:r(e,t,u.value)-r(e,n,u.value)})}).entries(t)}}).call(this)},{"../../../../core/fetch/value.js":63,"../../../../string/strip.js":173,"../../../../util/uniques.js":208}],326:[function(e,t,r){(function(){var r;r=e("../../../../core/fetch/value.js"),t.exports=function(e,t){var n,a,i,o,s,l,u,c,d,f,p,h,v,g,m,y;for(m=e.axes.stacked||e.axes.opposite,a=e[m].scale.viz(0),v=e[m].scale.value,p="x"===m?"y":"x",u="y"===m?e.axes.margin.viz.top:e.axes.margin.viz.left,f="share"===v?"expand":"zero",g=d3.layout.stack().values(function(e){return e.values||[e]}).offset(f).x(function(e){return e.d3po[p]}).y(function(t){return a-e[m].scale.viz(r(e,t,e[m].value))}).out(function(t,n,i){return r(e,t,e[m].value)<0,"share"===v?(t.d3po[m+"0"]=(1-n)*a,t.d3po[m]=t.d3po[m+"0"]-i*a):(t.d3po[m+"0"]=a,e.axes.stacked&&(t.d3po[m+"0"]-=n),t.d3po[m]=t.d3po[m+"0"]-i),t.d3po[m]+=u,t.d3po[m+"0"]+=u}),h=[],d=[],i=0,s=t.length;i<s;i++)if(n=t[i],(y=r(e,n,e[m].value))instanceof Array){for(c=!0,o=0,l=y.length;o<l;o++)if(y[o]>=0){c=!1;break}c?d.push(n):h.push(n)}else y>=0&&h.push(n),y<0&&d.push(n);return 0===h.length||0===d.length?g(t):(h.length&&(h=g(h)),d.length&&(d=g(d)),h.concat(d))}}).call(this)},{"../../../../core/fetch/value.js":63}],327:[function(e,t,r){(function(){var r,n,a,i,o,s;r=e("../../core/fetch/value.js"),n=e("./helpers/graph/draw.js"),i=e("./helpers/graph/nest.js"),o=e("../../array/sort.js"),s=e("./helpers/graph/stack.js"),(a=function(e){var t,a,i,l,u,c,d,f,p;if(n(e,{buffer:e.axes.opposite,mouse:!0}),e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0)return[];for(i=0,u=(a=o(e.data.viz,null,null,null,e)).length;i<u;i++)for(l=0,c=(d=a[i].values).length;l<c;l++)t=d[l],null!==(f=r(e,t,e.x.value))?(t.d3po.x2=!1,t.d3po.x=e.x.scale.viz(f)):(t.d3po.x2=!0,t.d3po.x=e.x2.scale.viz(r(e,t,e.x2.value))),t.d3po.x+=e.axes.margin.viz.left,null!==(p=r(e,t,e.y.value))?(t.d3po.y2=!1,t.d3po.y=e.y.scale.viz(p)):(t.d3po.y2=!0,t.d3po.y=e.y2.scale.viz(r(e,t,e.y2.value))),t.d3po.y+=e.axes.margin.viz.top;return e.axes.stacked?s(e,a):a}).filter=function(e,t){return i(e,t)},a.requirements=["data","x","y"],a.setup=function(e){var t;e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"}))},a.shapes=["line"],a.tooltip="static",t.exports=a}).call(this)},{"../../array/sort.js":29,"../../core/fetch/value.js":63,"./helpers/graph/draw.js":319,"./helpers/graph/nest.js":325,"./helpers/graph/stack.js":326}],328:[function(e,t,r){var n=e("../../network/smallestgap.js"),a=e("../../core/fetch/value.js"),i=function(e){var t=e.nodes.restricted||e.nodes.value,r=e.edges.restricted||e.edges.value||[],i=d3.extent(t,function(e){return e.x}),o=d3.extent(t,function(e){return e.y}),s=[1,1];if("number"==typeof e.size.value?s=[e.size.value,e.size.value]:e.size.value&&(s=d3.extent(t,function(t){var r=a(e,t,e.size.value);return 0===r?null:r})),void 0===s[0]&&(s=[1,1]),"number"==typeof e.size.value)var l=e.size.value,u=e.size.value;else{var c=(l=n(t,{accessor:function(e){return[e.x,e.y]}}))/2;if(l*=e.size.value?e.nodes.overlap:.4,e.edges.arrows.value&&(l*=.5),s[0]===s[1]){u=c;l=c}else{var d=i[1]+1.1*l-(i[0]-1.1*l),f=o[1]+1.1*l-(o[0]-1.1*l),p=d/f;if(e.width.viz/e.height.viz>p)var h=e.height.viz/f;else h=e.width.viz/d;(u=.25*l)*h<2&&(u=2/h)}}var v=e.size.scale.value.domain(s).range([u,l]);e.zoom.bounds=[[i[0]-1.1*l,o[0]-1.1*l],[i[1]+1.1*l,o[1]+1.1*l]];var g=[],m={};return t.forEach(function(t){var r=e.data.viz.filter(function(r){return r[e.id.value]==t[e.id.value]})[0]||{};r[e.id.value]=t[e.id.value],r.d3po={},r.d3po.x=t.x,r.d3po.y=t.y;var n=a(e,r,e.size.value);r.d3po.r=n?v(n):v.range()[0],m[r[e.id.value]]={x:r.d3po.x,y:r.d3po.y,r:r.d3po.r},g.push(r)}),g.sort(function(e,t){return t.d3po.r-e.d3po.r}),r.forEach(function(t,r){t.d3po&&delete t.d3po.spline,t[e.edges.source].d3po={};var n=m[t[e.edges.source][e.id.value]];void 0!==n?(t[e.edges.source].d3po.r=n.r,t[e.edges.source].d3po.x=n.x,t[e.edges.source].d3po.y=n.y):delete t[e.edges.source].d3po,t[e.edges.target].d3po={};var a=m[t[e.edges.target][e.id.value]];void 0!==a?(t[e.edges.target].d3po.r=a.r,t[e.edges.target].d3po.x=a.x,t[e.edges.target].d3po.y=a.y):delete t[e.edges.target].d3po}),{nodes:g,edges:r}};i.nesting=!1,i.requirements=["nodes"],i.scale=1.05,i.shapes=["circle"],i.tooltip="static",i.zoom=!0,t.exports=i},{"../../core/fetch/value.js":63,"../../network/smallestgap.js":166}],329:[function(e,t,r){(function(){var r,n,a,i,o=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};n=e("../../network/shortestpath.js"),r=e("../../core/fetch/value.js"),a=e("../../util/uniques.js"),(i=function(e){var t,n,a,s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T,q,N,I,V,D,P,U,R,L,H,Y,X,G,J,Q,W,K,Z,$,ee,te,re,ne,ae,ie,oe,se,le,ue,ce,de;for(h=[],(H={})[e.focus.value[0]]=0,H[e.focus.value[1]]=0,Y={all:[[e.focus.value[0]],[e.focus.value[1]]]},L=m=0,_=(Q=i.paths).length;m<_;L=++m)for(R=Q[L],h=h.concat(R.edges),w=e.focus.value[0],Y[L]=[w],p=y=0,k=(W=R.edges).length;y<k;p=++y)(f=W[p])[e.edges.source]=e.data.viz.filter(function(t){return f[e.edges.source][e.id.value]===t[e.id.value]})[0],f[e.edges.target]=e.data.viz.filter(function(t){return f[e.edges.target][e.id.value]===t[e.id.value]})[0],N=f[e.edges.source][e.id.value]===w?"target":"source",void 0===H[I=f[e.edges[N]][e.id.value]]&&(H[I]=L),Y[L].push(I),w=I;for(L in ae=0,Y)if(R=Y[L],"all"!==L){for(T=0,v=x=0,z=R.length;x<z;v=++x)if(g=R[v],0!==v&&v!==R.length-1&&H[g]===parseFloat(L)){for(T=1,X=R[v-1],q=R[v+1],G=null,V=null,u=F=0,A=(K=Y.all).length;F<A;u=++F)l=K[u],o.call(l,X)>=0&&(G=u),o.call(l,q)>=0&&(V=u);null!==G&&null===V?G+1===Y.all.length-1?Y.all.splice(G+1,0,[g]):Y.all[G+1].push(g):V-G==1?Y.all.splice(V,0,[g]):V-G>1&&Y.all[V-1].push(g)}ae+=T}for(ne=Math.floor(e.height.viz/ae),de=[],v=0;v<ae;)v%2==0?de.push(v):de.unshift(v),v++;for(b=e.size.value&&!e.small?30:0,ce=d3.scaleOrdinal().domain(de).range(d3.range(ne/2-b,e.height.viz+ne/2-b,(e.height.viz-ne)/(ae-1))),d=Y.all.length,c=Math.floor(e.width.viz/d),le=d3.scaleLinear().domain([0,d-1]).rangeRound([c/2,e.width.viz-c/2]),5,C=.4*d3.min([c,ne-b]),oe=d3.extent(e.data.viz,function(t){return r(e,t,e.size.value)||0}),ie=e.size.scale.value.domain(oe).rangeRound([5,C]),B=0,M=(Z=e.data.viz).length;B<M;B++){for(null==(D=Z[B]).d3po&&(D.d3po={}),u=P=0,O=($=Y.all).length;P<O;u=++P)l=$[u],ee=D[e.id.value],o.call(l,ee)>=0&&(D.d3po.x=le(u));D.d3po.y=ce(H[D[e.id.value]]),e.size.value?(se=r(e,D,e.size.value),D.d3po.r=se?ie(se):5):D.d3po.r=C,D.d3po.r<.1*c&&!e.small?D.d3po.label={x:0,y:D.d3po.r+2*e.labels.padding,w:.6*c,h:b+C-D.d3po.r,resize:!1}:delete D.d3po.label}for(L=U=0,S=(te=i.paths).length;U<S;L=++U)for(R=te[L],w=e.focus.value[0],p=J=0,E=(re=R.edges).length;J<E;p=++J)j="target"===(N=(f=re[p])[e.edges.source][e.id.value]===w?"target":"source")?"source":"target",I=f[e.edges[N]][e.id.value],H[w]!==H[I]?(f.d3po={spline:!0},null==(t=f[e.edges.source]).d3po&&(t.d3po={}),null==(n=f[e.edges.source].d3po).edges&&(n.edges={}),null==(a=f[e.edges.target]).d3po&&(a.d3po={}),null==(s=f[e.edges.target].d3po).edges&&(s.edges={}),ue=f[N].d3po.x-f[j].d3po.x,f[j].d3po.edges[f[N][e.id.value]]={angle:Math.PI,radius:c/2},f[N].d3po.edges[f[j][e.id.value]]={angle:0,radius:c/2,offset:ue-c}):delete f.d3po,w=I;return{nodes:e.data.viz,edges:h}}).filter=function(e,t){var o,s,l,u,c,d,f,p,h,v,g,m,y,x,b,j,w,_;for(u=e.edges.filtered||e.edges.value,i.paths=n(u,e.focus.value[0],{target:e.focus.value[1],distance:e.edges.size.value||void 0,nodeid:e.id.value,startpoint:e.edges.source,endpoint:e.edges.target,K:e.edges.limit.value||5}),i.nodes=[],o=[],f=0,v=(x=i.paths).length;f<v;f++)for(p=0,g=(b=x[f].edges).length;p<g;p++)w=(l=b[p])[e.edges.source],_=l[e.edges.target],o.indexOf(w[e.id.value])<0&&(i.nodes.push(w),o.push(w[e.id.value])),o.indexOf(_[e.id.value])<0&&(i.nodes.push(_),o.push(_[e.id.value]));for(j=[],h=0,m=(d=a(i.nodes,e.id.value,r,e)).length;h<m;h++)c=d[h],(s=t.filter(function(t){return t[e.id.value]===c}))[0]?j.push(s[0]):((y={d3po:{}})[e.id.value]=c,j.push(y));return j},i.nesting=!1,i.requirements=[function(e){return{status:2===e.focus.value.length,text:e.format.locale.value.method.focus+" x 2"}},"edges"],i.scale=1,i.shapes=["circle","square","donut"],i.tooltip="static",t.exports=i}).call(this)},{"../../core/fetch/value.js":63,"../../network/shortestpath.js":165,"../../util/uniques.js":208}],330:[function(e,t,r){(function(){var r,n,a,i;r=e("../../array/comparator.js"),n=e("../../core/data/threshold.js"),a=e("../../core/data/group.js"),(i=function(e){var t,n,i,o,s,l,u;for(s=d3.pie().value(function(e){return e.value}).sort(function(t,n){return e.order.value?r(t.d3po,n.d3po,[e.order.value],e.order.sort.value,[],e):e.id.nesting.length>1?r(t.d3po,n.d3po,e.id.nesting.concat([e.size.value]),void 0,[],e):r(t.d3po,n.d3po,[e.size.value],"desc",[],e)})(a(e,e.data.viz,[])),u=[],l=d3.min([e.width.viz,e.height.viz])/2-2*e.labels.padding,n=0,o=s.length;n<o;n++)(i=(t=s[n]).data.d3po).d3po.startAngle=t.startAngle,i.d3po.endAngle=t.endAngle,i.d3po.r_inner=0,i.d3po.r_outer=l,i.d3po.x=e.width.viz/2,i.d3po.y=e.height.viz/2,i.d3po.share=(t.endAngle-t.startAngle)/(2*Math.PI),u.push(i);return u}).filter=n,i.requirements=["data","size"],i.shapes=["arc"],i.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=i}).call(this)},{"../../array/comparator.js":27,"../../core/data/group.js":52,"../../core/data/threshold.js":57}],331:[function(e,t,r){(function(){var r,n,a,i,o,s,l,u;e("../../array/comparator.js"),e("../../array/sort.js"),e("../../core/data/threshold.js"),n=e("../../core/fetch/text.js"),a=e("../../core/fetch/value.js"),i=e("../../font/sizes.js"),o=e("../../geom/offset.js"),l=e("../../textwrap/textwrap.js"),r=e("../../util/buckets.js"),u=e("../../util/uniques.js"),(s=function(e){var t,s,c,d,f,p,h,v,g,m,y,x,b,j,w,_,k,z,A,M,O,S,E,F,C,B,T,q,N,I,V,D,P,U,R,L,H,Y,X,G,J,Q,W,K,Z,$,ee,te,re,ne,ae;for(g=e.data.viz,R=e.depth.value+1,L=e.id.nesting[R],h=function(){var e,t,r;for(r=[],e=0,t=g.length;e<t;e++)v=g[e],r.push(v[L]);return r}(),ae=function(){var t,r,n;for(n=[],t=0,r=g.length;t<r;t++)v=g[t],n.push(u(g,L,a,e,R));return n}(),ae=u(d3.merge(ae)).length,d=2*Math.PI/ae,P=d3.min([e.width.viz,e.height.viz])/2,S=0,C=0,B=function(){var t,r,a;for(a=[],t=0,r=h.length;t<r;t++)p=h[t],a.push(n(e,p,R)[0]);return a}(),B=u(d3.merge(B)),e.labels.value&&(m=o(Math.PI/2,P),$=o(d+Math.PI/2,P),S=m.x-$.x-2*e.labels.padding,re={fill:e.x.ticks.font.color,"font-family":e.x.ticks.font.family.value,"font-weight":e.x.ticks.font.weight,"font-size":e.x.ticks.font.size+"px"},ee=i(B,re,{mod:function(t){return l().container(d3.select(t)).width(e.height.viz/8).height(S).draw()}}),P-=C=d3.max(ee,function(e){return e.width}),P-=2*e.labels.padding),D=function(){var t,r,n;for(n=[],t=0,r=h.length;t<r;t++)p=h[t],n.push(function(){var t,r,n;for(n=[],t=0,r=p.length;t<r;t++)v=p[t],n.push(a(e,v,e.size.value));return n}());return n}(),D=d3.max(d3.merge(D)),X=d3.scaleLinear().domain([0,D]).range([0,P]),w=function(){var t,r,n;for(n=[],t=0,r=h.length;t<r;t++)p=h[t],n.push(a(e,p,L));return n}(),w=u(d3.merge(w)),j=d3.scaleOrdinal().domain(w).range(d3.range(0,w.length)),k=0,T=g.length;k<T;k++)for((v=g[k]).d3po.x=e.width.viz/2+e.margin.top,v.d3po.y=e.height.viz/2+e.margin.left,b=z=0,q=(G=v[L]).length;z<q;b=++z)(t=G[b]).d3po||(t.d3po={}),t.d3po.r=X(a(e,t,e.size.value)),t.d3po.a=j(a(e,t,L))*d;for(_=1,V=0,N=(J=[10,5,4,2]).length;V<N;V++)if(P/(b=J[V])>=20){_=b;break}for((W=r([P/_,P],_-1).reverse()).length===_&&W.shift(),K=function(t){return t.attr("fill",function(t,r){return 0===r?e.axes.background.color:"transparent"}).attr("cx",e.width.viz/2+e.margin.top).attr("cy",e.height.viz/2+e.margin.left).attr("stroke",e.x.grid.value?e.x.grid.color:"transparent")},(Z=e.group.selectAll(".d3po_radar_rings").data(W,function(e,t){return t})).enter().append("circle").attr("class","d3po_radar_rings").call(K).attr("r",0),Z.transition().duration(e.draw.timing).call(K).attr("r",function(e){return e}),Z.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),E=d3.scaleOrdinal().domain(B).range(d3.range(0,B.length)),M=[],U=0,I=B.length;U<I;U++)(t=(s=d*E(A=B[U])-Math.PI/2)*(180/Math.PI))<-90||t>90?(t-=180,f=-(P+2*e.labels.padding+C),c="end"):(f=P+2*e.labels.padding,c="start"),ne=s<0||s>Math.PI,Q=s<Math.PI/2,Y=P,e.labels.value&&(Y+=e.labels.padding),(H=o(s,Y)).x,H.y,Q||C,ne&&S,[0,Math.PI].indexOf(d*E(A))>=0&&C/2,M.push({text:A,angle:t,x:f,anchor:c,offset:H});return(O=e.group.selectAll("g.d3po_radar_label_group").data([0])).enter().append("g").attr("class","d3po_radar_label_group").attr("transform","translate("+e.width.viz/2+","+e.height.viz/2+")"),O.transition().duration(e.draw.timing).attr("transform","translate("+e.width.viz/2+","+e.height.viz/2+")"),F=function(e){return e.attr(re).each(function(e,t){return l().container(d3.select(this)).height(S).width(C).align(e.anchor).text(e.text).padding(0).valign("middle").x(e.x).y(-S/2).draw()}).attr("transform",function(e){var t;return(t=d3.select(this).attr("transform")||"").length&&(t=t.split(")").slice(-3).join(")")),"rotate("+e.angle+")"+t})},(te=O.selectAll(".d3po_radar_labels").data(e.labels.value?M:[],function(e,t){return t})).call(F),te.enter().append("text").attr("class","d3po_radar_labels").attr("opacity",0).call(F).transition().duration(e.draw.timing).attr("opacity",1),te.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),x=function(t){return t.attr("stroke",e.x.grid.color).attr("x1",e.width.viz/2+e.margin.left).attr("y1",e.height.viz/2+e.margin.top)},(y=e.group.selectAll(".d3po_radar_lines").data(M,function(e,t){return t})).enter().append("line").attr("class","d3po_radar_lines").call(x).attr("x2",e.width.viz/2+e.margin.left).attr("y2",e.height.viz/2+e.margin.top),y.transition().duration(e.draw.timing).call(x).attr("x2",function(t){return e.width.viz/2+e.margin.left+t.offset.x}).attr("y2",function(t){return e.height.viz/2+e.margin.top+t.offset.y}),y.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.mouse.viz={click:!1},g}).requirements=["data","size"],s.shapes=["radial"],t.exports=s}).call(this)},{"../../array/comparator.js":27,"../../array/sort.js":29,"../../core/data/threshold.js":57,"../../core/fetch/text.js":62,"../../core/fetch/value.js":63,"../../font/sizes.js":100,"../../geom/offset.js":159,"../../textwrap/textwrap.js":198,"../../util/buckets.js":202,"../../util/uniques.js":208}],332:[function(e,t,r){var n=e("../../array/sort.js"),i=e("../../client/pointer.js"),o=e("../../core/fetch/value.js"),s=e("../../core/fetch/color.js"),l=e("../../color/legible.js"),u=e("../../tooltip/remove.js"),c=e("../../network/smallestgap.js"),d=e("../../color/text.js"),f=e("../../util/uniques.js"),p=function(e){var t=d3.min([e.height.viz,e.width.viz])/2,r=e.small||!e.labels.value?(t-2*e.labels.padding)/2:t/3,p=e.small||!e.labels.value?1.4*r:r,h=2*r,v=[],g=[],m=e.data.viz.filter(function(t){return t[e.id.value]===e.focus.value[0]})[0];m||((m={d3po:{}})[e.id.value]=e.focus.value[0]),m.d3po.x=e.width.viz/2,m.d3po.y=e.height.viz/2,m.d3po.r=.65*p;var y=[],x=[e.focus.value[0]];e.edges.connections(e.focus.value[0],e.id.value).forEach(function(t){var r=t[e.edges.source][e.id.value]==e.focus.value[0]?t[e.edges.target]:t[e.edges.source],n=e.data.viz.filter(function(t){return t[e.id.value]===r[e.id.value]})[0];n||((n={d3po:{}})[e.id.value]=r[e.id.value]),n.d3po.edges=e.edges.connections(n[e.id.value],e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!=e.focus.value[0]&&t[e.edges.target][e.id.value]!=e.focus.value[0]}),n.d3po.edge=t,x.push(n[e.id.value]),y.push(n)});var b=e.order.value||e.color.value||e.size.value||e.id.value;y.sort(function(t,r){var a=t.d3po.edges.length-r.d3po.edges.length;return a||n([t,r],b,e.order.sort.value,e.color.value||[],e)}),"number"==typeof e.edges.limit.value?y=y.slice(0,e.edges.limit.value):"function"==typeof e.edges.limit.value&&(y=e.edges.limit.value(y));var j=[],w=0;y.forEach(function(t){var r=t[e.id.value];t.d3po.edges=t.d3po.edges.filter(function(t){var n=t[e.edges.source][e.id.value],a=t[e.edges.target][e.id.value];return x.indexOf(n)<0&&a==r||x.indexOf(a)<0&&n==r}),w+=t.d3po.edges.length||1,t.d3po.edges.forEach(function(t){var n=t[e.edges.source],a=t[e.edges.target],i=a[e.id.value]==r?n:a;x.push(i[e.id.value])})}),n(y,b,e.order.sort.value,e.color.value||[],e);var _=0,k=2*Math.PI;y.forEach(function(t,r){var i=t.d3po.edges.length||1,o=k/w*i;0==r&&(s,_-=o/2);var s=_+o/2;s-=k/4,t.d3po.radians=s,t.d3po.x=e.width.viz/2+p*Math.cos(s),t.d3po.y=e.height.viz/2+p*Math.sin(s),_+=o,t.d3po.edges.sort(function(r,a){r=r[e.edges.source][e.id.value]==t[e.id.value]?r[e.edges.target]:r[e.edges.source],a=a[e.edges.source][e.id.value]==t[e.id.value]?a[e.edges.target]:a[e.edges.source];return n([r,a],b,e.order.sort.value,e.color.value||[],e)}),t.d3po.edges.forEach(function(r,n){var o=r[e.edges.source][e.id.value]==t[e.id.value]?r[e.edges.target]:r[e.edges.source],l=k/w,u=e.data.viz.filter(function(t){return t[e.id.value]===o[e.id.value]})[0];u||((u={d3po:{}})[e.id.value]=o[e.id.value]),a=s-l*i/2+l/2+l*n,u.d3po.radians=a,u.d3po.x=e.width.viz/2+h*Math.cos(a),u.d3po.y=e.height.viz/2+h*Math.sin(a),j.push(u)})});var z=c(y,{accessor:function(e){return[e.d3po.x,e.d3po.y]}}),A=c(j,{accessor:function(e){return[e.d3po.x,e.d3po.y]}});if(z||(z=r/2),A||(A=r/4),z/2-4<8)var M=d3.min([z/2,8]);else M=z/2-4;if(A/2-4<4)var O=d3.min([A/2,4]);else O=A/2-4;O>r/10&&(O=r/10),O>M&&O>10&&(O=.75*M),M>1.5*O&&(M=1.5*O),M=Math.floor(M),O=Math.floor(O);var S=f(y,e.id.value,o,e);(S=S.concat(f(j,e.id.value,o,e))).push(e.focus.value[0]);var E=e.data.viz.filter(function(t){return S.indexOf(t[e.id.value])>=0});if(e.size.value){var F=d3.extent(E,function(t){return o(e,t,e.size.value)});F[0]==F[1]&&(F[0]=0);t=d3.scaleLinear().domain(F).rangeRound([3,d3.min([M,O])]);var C=o(e,m,e.size.value);m.d3po.r=t(C)}else{t=d3.scaleLinear().domain([1,2]).rangeRound([M,O]);e.edges.label&&(m.d3po.r=1.5*t(1))}j.forEach(function(r){r.d3po.ring=2;var n=e.size.value?o(e,r,e.size.value):2;r.d3po.r=t(n)}),y.forEach(function(r){r.d3po.ring=1;var n=e.size.value?o(e,r,e.size.value):1;r.d3po.r=t(n)}),g=[m].concat(y).concat(j),y.forEach(function(t,n){var a=[e.edges.source,e.edges.target],i=t.d3po.edge;a.forEach(function(t){i[t]=g.filter(function(r){return r[e.id.value]==i[t][e.id.value]})[0]}),delete i.d3po,v.push(i),e.edges.connections(t[e.id.value],e.id.value).forEach(function(n){var a=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source];if(a[e.id.value]!=m[e.id.value]){var i=j.filter(function(t){return t[e.id.value]==a[e.id.value]})[0];if(i);else{i=y.filter(function(t){return t[e.id.value]==a[e.id.value]})[0]}if(i)n.d3po={spline:!0,translate:{x:e.width.viz/2,y:e.height.viz/2}},[e.edges.source,e.edges.target].forEach(function(a,o){n[a]=g.filter(function(t){return t[e.id.value]==n[a][e.id.value]})[0],void 0===n[a].d3po.edges&&(n[a].d3po.edges={});var s=0===o?n[e.edges.target][e.id.value]:n[e.edges.source][e.id.value];n[a][e.id.value]==t[e.id.value]?n[a].d3po.edges[s]={angle:t.d3po.radians+Math.PI,radius:r/2}:n[a].d3po.edges[s]={angle:i.d3po.radians,radius:r/2}}),v.push(n)}})});var B=!1;return e.background.value&&["transparent","none"].indexOf(e.background.value)<0&&d3.hsl(e.background.value).l<.5&&(B=d(e.background.value)),g.forEach(function(t){if(!e.small&&e.labels.value)if(t[e.id.value]!=e.focus.value[0]){t.d3po.rotate=t.d3po.radians*(180/Math.PI);var n=t.d3po.rotate,a=r-3*e.labels.padding-t.d3po.r;if(n<-90||n>90){n-=180;var i=-(t.d3po.r+a/2+e.labels.padding),o="end"}else i=t.d3po.r+a/2+e.labels.padding,o="start";var u=y.indexOf(t)>=0,c=1==t.d3po.ring?z:A;t.d3po.label={x:i,y:0,w:a,h:c,angle:n,anchor:o,valign:"center",color:B||l(s(e,t)),resize:[8,e.labels.font.size],background:u,mouse:!0}}else if(e.size.value||e.edges.label){c=p-2*t.d3po.r-2*e.labels.padding;t.d3po.label={x:0,y:t.d3po.r+c/2,w:p,h:c,color:B||l(s(e,t)),resize:[10,40],background:!0,mouse:!0}}else delete t.d3po.rotate,delete t.d3po.label;else delete t.d3po.rotate,delete t.d3po.label}),e.mouse.viz={},e.mouse.viz[i.click]=function(t){if(t[e.id.value]!=e.focus.value[0]){u(e.type.value);var r=e.focus.value[0];e.history.states.push(function(){e.self.focus(r).draw()}),e.self.focus(t[e.id.value]).draw()}},{edges:v,nodes:g,data:E}};p.filter=function(e,t){var r=e.edges.connections(e.focus.value[0],e.id.value,!0),n=[];r.forEach(function(t){n=n.concat(e.edges.connections(t[e.id.value],e.id.value,!0))});var a=r.concat(n),i=f(a,e.id.value,o,e),s=[];return i.forEach(function(r){var n=t.filter(function(t){return t[e.id.value]==r})[0];if(n)s.push(n);else{var a={d3po:{}};a[e.id.value]=r,s.push(a)}}),s},p.nesting=!1,p.scale=1,p.shapes=["circle","square","donut"],p.requirements=["edges","focus"],p.tooltip="static",t.exports=p},{"../../array/sort.js":29,"../../client/pointer.js":33,"../../color/legible.js":39,"../../color/text.js":45,"../../core/fetch/color.js":59,"../../core/fetch/value.js":63,"../../network/smallestgap.js":166,"../../tooltip/remove.js":201,"../../util/uniques.js":208}],333:[function(e,t,r){(function(){var r,n,a,i;r=e("./sankey.js"),n=e("../../client/pointer.js"),a=e("../../tooltip/remove.js"),e("../../util/uniques.js"),(i=function(e){var t,i,o,s,l,u,c,d,f,p,h,v,g,m;for(o=e.focus.value[0],h=2*e.data.stroke.width,m=e.size.value.constructor===Number?e.size.value:20,i=e.edges.connections(o,e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!==o||t[e.edges.target][e.id.value]!==o}),p=[],v=[],i=i.map(function(t){var r,n;return t[e.edges.target][e.id.value]===o?(r={id:"left_"+t[e.edges.source][e.id.value],dupe:"left",data:t[e.edges.source],value:t[e.edges.strength.value]},n=t[e.edges.target]):(r=t[e.edges.source],n={id:"right_"+t[e.edges.target][e.id.value],dupe:"right",data:t[e.edges.target],value:t[e.edges.strength.value]}),v.indexOf(r.id)<0&&p.push(r),v.indexOf(n.id)<0&&p.push(n),v.push(r.id),v.push(n.id),{source:r,target:n,value:t[e.edges.strength.value]||1}}),u=r().nodeWidth(m).nodePadding(e.data.padding.value).size([e.width.viz-2*h,e.height.viz-2*h]).nodes(p).links(i).layout(2),g=[],s=0,c=p.length;s<c;s++)(t={id:(t=(f=p[s]).data||f)[e.id.value]}).d3po={x:f.x+f.dx/2+h,y:f.y+f.dy/2+h,width:f.dx,height:f.dy,suffix:f.dupe},t.id!==o&&(t[e.edges.strength.value]=f.value),g.push(t);for(e.edges.path=u.link(),l=0,d=i.length;l<d;l++)i[l].d3po={x:h,y:h};return e.mouse.viz={},e.mouse.viz[n.click]=function(t){var r;if(t[e.id.value]!==e.focus.value[0])return a(e.type.value),r=e.focus.value[0],e.history.states.push(function(){return e.self.focus(r).draw()}),e.self.focus(t[e.id.value]).draw()},{nodes:g,edges:i}}).requirements=["edges","focus","nodes"],i.shapes=["square"],t.exports=i}).call(this)},{"../../client/pointer.js":33,"../../tooltip/remove.js":201,"../../util/uniques.js":208,"./sankey.js":333}],334:[function(e,t,r){(function(){var r,n,a,i,o;r=e("../../core/fetch/value.js"),n=e("./helpers/graph/draw.js"),e("../../core/console/print.js"),i=e("../../array/sort.js"),o=e("./helpers/graph/dataticks.js"),(a=function(e){var t,a,s,l;if(n(e,{buffer:"size",mouse:!0}),e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0)return[];for(a=0,s=(l=e.data.viz).length;a<s;a++)(t=l[a]).d3po.x=e.x.scale.viz(r(e,t,e.x.value)),t.d3po.x+=e.axes.margin.viz.left,t.d3po.y=e.y.scale.viz(r(e,t,e.y.value)),t.d3po.y+=e.axes.margin.viz.top,"number"!=typeof e.size.value&&e.size.value?t.d3po.r=e.axes.scale(r(e,t,e.size.value)):t.d3po.r=e.axes.scale(0);return o(e),i(e.data.viz,e.order.value||e.size.value||e.id.value,"desc"===e.order.sort.value?"asc":"desc",e.color.value||[],e)}).fill=!0,a.requirements=["data","x","y"],a.scale=1.1,a.setup=function(e){if(e.time.value&&!e.axes.discrete&&(e.time.value===e.x.value&&e.self.x({scale:"discrete"}),e.time.value===e.y.value))return e.self.y({scale:"discrete"})},a.shapes=["circle"],a.tooltip="static",t.exports=a}).call(this)},{"../../array/sort.js":29,"../../core/console/print.js":47,"../../core/fetch/value.js":63,"./helpers/graph/dataticks.js":318,"./helpers/graph/draw.js":319}],335:[function(e,t,r){var n=e("../../core/fetch/value.js"),a=e("../../util/uniques.js"),i=e("../../util/copy.js"),o=e("../../color/random.js"),s=function(e){var t=a(e.data.viz,e.id.value,n,e),r=a(e.cols.value);r.indexOf("label")<0&&e.cols.index.value&&r.unshift("label");var s=e.height.viz/(t.length+1),l=e.width.viz/r.length;e.group.selectAll("rect").data([0]).enter().append("rect").attr("class","background").attr("height",e.height.viz).attr("width",e.width.viz).style("fill",e.color.missing);var u=e.group.selectAll("line.horiz").data(e.data.viz);u.enter().append("line").attr("class","horiz"),u.attr("x1",0).attr("y1",function(e,t){return s*t+s}).attr("x2",e.width.viz).attr("y2",function(e,t){return s*t+s}).style("fill","#fff").style("stroke","#fff"),u.exit().remove();var c=e.group.selectAll("line.vert").data(r);c.enter().append("line").attr("class","vert"),c.attr("x1",function(e,t){return l*t+l}).attr("y1",0).attr("x2",function(e,t){return l*t+l}).attr("y2",e.height.viz).style("fill","#fff").style("stroke","#fff"),c.exit().remove();var d=[],f={};return r.forEach(function(t,r){var n={d3po:{x:l*r+l/2,y:s/2,width:l,height:s,id:"d3p_header_"+t.toString().replace(/ /g,"_"),shape:"square",color:"#fff",text:e.format.value(t)}};if(t==e.id.value&&(n.d3po.color="#fff"),"label"==t&&(n.d3po.label=!1,n.d3po.color="#fff",n.d3po.stroke="#fff"),d.push(n),"number"==e.data.keys[t]){var a=d3.extent(e.data.viz,function(e){return e[t]});a[0]==a[1]&&(a=[a[0]-1,a[1]]),f[t]=d3.scaleLinear().domain(a).range([e.color.missing,o(t)])}else"boolean"==e.data.keys[t]&&(f[t]=function(r){return r?o(t):e.color.missing})}),e.data.viz.forEach(function(t,n){n+=1,r.forEach(function(r,a){var o=i(t);o.d3po.id="d3p_"+o[e.id.value].toString().replace(/ /g,"_")+"_"+r,o.d3po.x=l*a+l/2,o.d3po.y=s*n+s/2,o.d3po.width=l,o.d3po.height=s,"label"==r&&(o.d3po.shape="square",o.d3po.color="#fff",d.push(o)),d3.keys(t).indexOf(r)>=0&&r in t&&(f[r]&&(o.d3po.color=f[r](o[r])),o.d3po.text=e.format.value(o[r]),"boolean"==e.data.keys[r]?o.d3po.label=!1:"string"==e.data.keys[r]&&(o.d3po.color=e.color.missing,o.d3po.stroke="#fff",o.d3po.shape="square"),d.push(o))})}),d};s.shapes=["check","cross","diamond","square","triangle","triangle_up","triangle_down"],s.requirements=["data","cols"],t.exports=s},{"../../color/random.js":42,"../../core/fetch/value.js":63,"../../util/copy.js":205,"../../util/uniques.js":208}],336:[function(e,t,r){(function(){var r,n,a,i;r=e("../../core/data/threshold.js"),n=e("../../core/data/group.js"),a=e("../../object/merge.js"),(i=function(e){var t,r,i,o,s,l,u;if(i=n(e,e.data.viz),(r=d3.layout.treemap().mode(e.type.mode.value).round(!0).size([e.width.viz,e.height.viz]).children(function(e){return e.values}).padding(e.data.padding.value).sort(function(e,t){var r;return 0===(r=e.value-t.value)?e.id<t.id:r}).nodes({name:"root",values:i}).filter(function(e){return!e.values&&e.area})).length){for(u=r[0];u.parent;)u=u.parent;for(l=[],o=0,s=r.length;o<s;o++)(t=r[o]).d3po.d3po=a(t.d3po.d3po,{x:t.x+t.dx/2,y:t.y+t.dy/2,width:t.dx,height:t.dy,share:t.value/u.value}),l.push(t.d3po)}return l}).filter=r,i.modes=["squarify","slice","dice","slice-dice"],i.requirements=["data","size"],i.shapes=["square"],i.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=i}).call(this)},{"../../core/data/group.js":52,"../../core/data/threshold.js":57,"../../object/merge.js":169}],337:[function(e,t,r){(function(){var r,n,a,i,o,s;r=e("../core/methods/attach.js"),n=e("./methods/helpers/axis.js"),i=e("./helpers/ui/message.js"),o=e("./helpers/drawSteps.js"),s=e("../core/console/print.js"),a=e("./helpers/container.js"),e("../object/validate.js"),t.exports=function(){var t;return(t={g:{apps:{}},types:{area:e("./types/area.js"),bar:e("./types/bar.js"),bubbles:e("./types/bubbles.js"),box:e("./types/box.js"),donut:e("./types/donut.js"),geomap:e("./types/geomap.js"),halfdonut:e("./types/halfdonut.js"),line:e("./types/line.js"),network:e("./types/network.js"),paths:e("./types/paths.js"),pie:e("./types/pie.js"),radar:e("./types/radar.js"),rings:e("./types/rings.js"),sankey:e("./types/sankey.js"),scatter:e("./types/scatter.js"),stacked:e("./types/area.js"),table:e("./types/table.js"),treemap:e("./types/treemap.js")}}).self=function(e){return e.each(function(){var e,r,n,l,u,c,d;t.draw.frozen=!0,t.error.internal=null,"timing"in t.draw||(t.draw.timing=t.timing.transitions),t.error.value&&(t.draw.timing=0),a(t),c=t.width.value<=t.width.small,u=t.height.value<=t.height.small,t.small=c||u,t.width.viz=t.width.value,t.height.viz=t.height.value,e=!1,r=function(){d.length?l():t.dev.value&&(s.groupEnd(),s.timeEnd("total draw time"),s.log("\n"))},n=function(e,n){e[n=n||"function"]instanceof Array?e[n].forEach(function(e){e(t,r)}):"function"==typeof e[n]&&e[n](t,r),e.wait||r()},l=function(){var a,o,l,u;u=d.shift(),l=t.g.message&&e===u.message,"function"==typeof(o=!("check"in u)||u.check)&&(o=o(t)),o?l?n(u):(t.dev.value&&(!1!==e&&s.groupEnd(),s.group(u.message)),"string"==typeof t.messages.value?(e=t.messages.value,a=t.messages.value):(e=u.message,a=t.format.value(u.message)),t.draw.update?(i(t,a),t.error.value?n(u):setTimeout(function(){return n(u)},10)):n(u)):"otherwise"in u?t.error.value?n(u,"otherwise"):setTimeout(function(){return n(u,"otherwise")},10):r()},t.messages.style.backup=t.group&&"1"===t.group.attr("opacity")?"small":"large",d=o(t),l()}),t.self},r(t,{active:e("./methods/active.js"),aggs:e("./methods/aggs.js"),attrs:e("./methods/attrs.js"),axes:e("./methods/axes.js"),background:e("./methods/background.js"),class:e("./methods/class.js"),color:e("./methods/color.js"),cols:e("./methods/cols.js"),config:e("./methods/config.js"),container:e("./methods/container.js"),coords:e("./methods/coords.js"),csv:e("./methods/csv.js"),data:e("./methods/data.js"),depth:e("./methods/depth.js"),descs:e("./methods/descs.js"),dev:e("./methods/dev.js"),draw:e("./methods/draw.js"),edges:e("./methods/edges.js"),error:e("./methods/error.js"),focus:e("./methods/focus.js"),font:e("./methods/font.js"),footer:e("./methods/footer.js"),format:e("./methods/format.js"),height:e("./methods/height.js"),history:e("./methods/history.js"),icon:e("./methods/icon.js"),id:e("./methods/id.js"),labels:e("./methods/labels.js"),legend:e("./methods/legend.js"),links:e("./methods/links.js"),margin:e("./methods/margin.js"),messages:e("./methods/messages.js"),mouse:e("./methods/mouse.js"),nodes:e("./methods/nodes.js"),order:e("./methods/order.js"),resize:e("./methods/resize.js"),shape:e("./methods/shape.js"),size:e("./methods/size.js"),style:e("./methods/style.js"),temp:e("./methods/temp.js"),text:e("./methods/text.js"),time:e("./methods/time.js"),timeline:e("./methods/timeline.js"),timing:e("./methods/timing.js"),title:e("./methods/title.js"),tooltip:e("./methods/tooltip.js"),total:e("./methods/total.js"),type:e("./methods/type.js"),ui:e("./methods/ui.js"),width:e("./methods/width.js"),x:n("x"),x2:n("x2"),y:n("y"),y2:n("y2"),zoom:e("./methods/zoom.js")}),t.self}}).call(this)},{"../core/console/print.js":47,"../core/methods/attach.js":78,"../object/validate.js":170,"./helpers/container.js":209,"./helpers/drawSteps.js":216,"./helpers/ui/message.js":250,"./methods/active.js":259,"./methods/aggs.js":260,"./methods/attrs.js":261,"./methods/axes.js":262,"./methods/background.js":263,"./methods/class.js":264,"./methods/color.js":265,"./methods/cols.js":266,"./methods/config.js":267,"./methods/container.js":268,"./methods/coords.js":269,"./methods/csv.js":270,"./methods/data.js":271,"./methods/depth.js":272,"./methods/descs.js":273,"./methods/dev.js":274,"./methods/draw.js":275,"./methods/edges.js":276,"./methods/error.js":277,"./methods/focus.js":278,"./methods/font.js":279,"./methods/footer.js":280,"./methods/format.js":281,"./methods/height.js":282,"./methods/helpers/axis.js":283,"./methods/history.js":284,"./methods/icon.js":285,"./methods/id.js":286,"./methods/labels.js":287,"./methods/legend.js":288,"./methods/links.js":289,"./methods/margin.js":290,"./methods/messages.js":291,"./methods/mouse.js":292,"./methods/nodes.js":293,"./methods/order.js":294,"./methods/resize.js":295,"./methods/shape.js":296,"./methods/size.js":297,"./methods/style.js":298,"./methods/temp.js":299,"./methods/text.js":300,"./methods/time.js":301,"./methods/timeline.js":302,"./methods/timing.js":303,"./methods/title.js":304,"./methods/tooltip.js":305,"./methods/total.js":306,"./methods/type.js":307,"./methods/ui.js":308,"./methods/width.js":309,"./methods/zoom.js":310,"./types/area.js":311,"./types/bar.js":312,"./types/box.js":313,"./types/bubbles.js":314,"./types/donut.js":315,"./types/geomap.js":316,"./types/halfdonut.js":317,"./types/line.js":327,"./types/network.js":328,"./types/paths.js":329,"./types/pie.js":330,"./types/radar.js":331,"./types/rings.js":332,"./types/sankey.js":333,"./types/scatter.js":334,"./types/table.js":335,"./types/treemap.js":336}]},{},[161]);