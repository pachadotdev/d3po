[
  {
    "title": "daes",
    "url": "reference/daes.html",
    "content": "daes Aesthetics daes(x, y, ...) xx-axis mapping. y y-axis mapping. ... Other aesthetic mappings. See the 'Aesthetics' section. Aesthetics for the plots such as axis (x,y), group, color and/or size Aesthetics of the chart. Aesthetics Valid aesthetics (depending on the geom) x, y: cartesian coordinates. group: grouping data. subgroup: subgrouping data (for treemaps). name: name data. color: color of geom. size: size of geom. stack: TRUE or FALSE to indicate if the geom should be stacked (for bar charts). tiling: \"squarify\" (default), \"dice\", \"slice\", \"slice-dice\" (for treemaps). layout: \"fr\", \"kk\", or any other supported in igraph to set the geom layout (for network charts). gradient: TRUE or FALSE to indicate if color should be treated as a gradient palette (for geomaps). sort: ordering hint for discrete categories. Accepts one of \"asc-x\", \"desc-x\" (sort by the numeric x/value), or \"asc-y\", \"desc-y\" (sort by the category/label). Use \"none\" to keep input order.",
    "type": "function"
  },
  {
    "title": "po_box",
    "url": "reference/po_box.html",
    "content": "po_box Boxplot po_box(d3po, ..., data = NULL, inherit_daes = TRUE) d3poEither the output of d3po() or d3po_proxy(). ... Aesthetics, see daes(). data Any dataset to use for plot, overrides data passed to d3po(). inherit_daes Whether to inherit aesthetics previous specified. an 'htmlwidgets' object with the desired interactive plot Draw a boxplot. if (interactive()) trade_continent \\% po_box(daes( x = reporter_continent, y = trade, color = my_pal, tooltip = reporter_continent )) \\%>\\% po_labels( x = \"Continent\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter Continent\" )",
    "type": "function"
  },
  {
    "title": "po_treemap",
    "url": "reference/po_treemap.html",
    "content": "po_treemap Treemap po_treemap(d3po, ..., data = NULL, inherit_daes = TRUE) d3poEither the output of d3po() or d3po_proxy(). ... Aesthetics, see daes(). data Any dataset to use for plot, overrides data passed to d3po(). inherit_daes Whether to inherit aesthetics previous specified. an 'htmlwidgets' object with the desired interactive plot Plot a treemap if (interactive()) trade_by_continent \\% po_treemap(daes( size = trade, group = reporter_continent, color = my_pal, tiling = \"Squarify\" )) \\%>\\% po_labels(title = \"Trade Share by Continent in 2023\")",
    "type": "function"
  },
  {
    "title": "po_pie",
    "url": "reference/po_pie.html",
    "content": "po_pie Pie po_pie(d3po, ..., data = NULL, inherit_daes = TRUE) d3poEither the output of d3po() or d3po_proxy(). ... Aesthetics, see daes(). data Any dataset to use for plot, overrides data passed to d3po(). inherit_daes Whether to inherit aesthetics previous specified. an 'htmlwidgets' object with the desired interactive plot Plot a pie if (interactive()) trade_by_continent \\% po_pie(daes(size = trade, group = reporter_continent, color = my_pal)) \\%>\\% po_labels(title = \"Trade Share by Reporter Continent in 2023\")",
    "type": "function"
  },
  {
    "title": "po_donut",
    "url": "reference/po_donut.html",
    "content": "po_donut Donut po_donut(d3po, ..., data = NULL, inherit_daes = TRUE) d3poEither the output of d3po() or d3po_proxy(). ... Aesthetics, see daes(). data Any dataset to use for plot, overrides data passed to d3po(). inherit_daes Whether to inherit aesthetics previous specified. an 'htmlwidgets' object with the desired interactive plot Plot a donut if (interactive()) trade_by_continent \\% po_donut(daes(size = trade, group = reporter_continent, inner_radius = 0.3, color = color)) \\%>\\% po_labels(title = \"Trade Share by Reporter Continent in 2023\")",
    "type": "function"
  },
  {
    "title": "po_area",
    "url": "reference/po_area.html",
    "content": "po_area Area po_area(d3po, ..., data = NULL, inherit_daes = TRUE) d3poEither the output of d3po() or d3po_proxy(). ... Aesthetics, see daes(). data Any dataset to use for plot, overrides data passed to d3po(). inherit_daes Whether to inherit aesthetics previous specified. an 'htmlwidgets' object with the desired interactive plot Plot an area chart. if (interactive()) trade_by_continent \\% po_area(daes( x = year, y = trade, group = reporter_continent, color = my_pal )) \\%>\\% po_labels( x = \"Year\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter Continent in 2019 and 2023\" )",
    "type": "function"
  },
  {
    "title": "po_bar",
    "url": "reference/po_bar.html",
    "content": "po_bar Bar po_bar(d3po, ..., data = NULL, inherit_daes = TRUE) d3poEither the output of d3po() or d3po_proxy(). ... Aesthetics, see daes(). data Any dataset to use for plot, overrides data passed to d3po(). inherit_daes Whether to inherit aesthetics previous specified. an 'htmlwidgets' object with the desired interactive plot Draw a bar chart. if (interactive()) trade_by_continent \\% po_bar(daes(x = reporter_continent, y = trade, color = my_pal)) \\%>\\% po_labels( x = \"Continent\", y = \"Trade (USD billion)\", title = \"Total Trade by Reporter Continent in 2023\" )",
    "type": "function"
  },
  {
    "title": "po_line",
    "url": "reference/po_line.html",
    "content": "po_line Line po_line(d3po, ..., data = NULL, inherit_daes = TRUE) d3poEither the output of d3po() or d3po_proxy(). ... Aesthetics, see daes(). data Any dataset to use for plot, overrides data passed to d3po(). inherit_daes Whether to inherit aesthetics previous specified. an 'htmlwidgets' object with the desired interactive plot Plot an line chart. if (interactive()) trade_by_continent \\% po_line(daes(x = year, y = trade, group = reporter_continent, color = my_pal)) \\%>\\% po_labels( x = \"Year\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter Continent in 2019 and 2023\" )",
    "type": "function"
  },
  {
    "title": "po_scatter",
    "url": "reference/po_scatter.html",
    "content": "po_scatter Scatter po_scatter(d3po, ..., data = NULL, inherit_daes = TRUE) d3poEither the output of d3po() or d3po_proxy(). ... Aesthetics, see daes(). data Any dataset to use for plot, overrides data passed to d3po(). inherit_daes Whether to inherit aesthetics previous specified. an 'htmlwidgets' object with the desired interactive plot Plot an scatter chart. if (interactive()) # Create a wide dataset with x = 2019 and y = 2023 trade values trade_wide_2019 \\% po_scatter(daes(x = trade_2019, y = trade_2023, group = reporter, color = my_pal)) \\%>\\% po_labels( x = \"Trade in 2019 (USD billion)\", y = \"Trade in 2023 (USD billion)\", title = \"Trade Volume by Country in 2019 and 2023\" )",
    "type": "function"
  },
  {
    "title": "po_tooltip",
    "url": "reference/po_tooltip.html",
    "content": "po_tooltip Tooltip po_tooltip(d3po, template) d3poEither the output of d3po() or d3po_proxy(). template A character string template or formatter expression. Appends tooltip settings to an 'htmlwidgets' object Set a custom tooltip template for a chart. The template can be a literal string (e.g. \\name\\Value: \\value\\) which will be evaluated server-side by substituting column values.",
    "type": "function"
  },
  {
    "title": "po_format",
    "url": "reference/po_format.html",
    "content": "po_format Format po_format(d3po, ...) d3poEither the output of d3po() or d3po_proxy(). ... Named formatting expressions (as quosures). Each name should correspond to an aesthetic (e.g. x, y, tooltip, etc.). Precompute formatted label columns from expressions and attach them to the widget data. Accepts named expressions like x = round(varx, 2) or y = format(varY, big.mark = \",\"). The formatted columns are added to d3po$x$data with names __label_ and registered in d3po$x$formatted_cols for the renderer to use.",
    "type": "function"
  },
  {
    "title": "po_labels",
    "url": "reference/po_labels.html",
    "content": "po_labels Labels po_labels( d3po, x = NULL, y = NULL, title = NULL, subtitle = NULL, labels = NULL, align = \"left-top\" ) d3poEither the output of d3po() or d3po_proxy(). x Optional x-axis label. y Optional y-axis label. title Optional title for the chart. subtitle Optional subtitle for the chart. labels Optional character vector or JavaScript function for custom label fields for treemaps. align Label alignment for treemaps. Must be one of \"left-top\", \"center-middle\", or \"right-top\". Appends custom labels to an 'htmlwidgets' object Edit labels positioning in a treemap.",
    "type": "function"
  },
  {
    "title": "po_font",
    "url": "reference/po_font.html",
    "content": "po_font Font po_font(d3po, family = \"Fira Sans\", size = 16, transform = \"none\") d3poEither the output of d3po() or d3po_proxy(). family family font to use (\"Roboto\", \"Merriweather\", etc.). size size to use (10, 11, 12, etc. overrides auto-sizing). transform transformation to use for the title (\"lowercase\", \"uppercase\", \"capitalize\", \"none\"). Appends custom font to an 'htmlwidgets' object Edit the font used in a chart.",
    "type": "function"
  },
  {
    "title": "po_theme",
    "url": "reference/po_theme.html",
    "content": "po_theme Theme po_theme(d3po, axis = NULL, tooltips = NULL, background = NULL) d3poEither the output of d3po() or d3po_proxy(). axis Hex color string for axis lines and axis/label/title fill (e.g. \"#fff\"). tooltips Hex color string for tooltip / download menu background (e.g. \"#000\"). background Hex color string for chart background (e.g. \"#fff\"). Appends theme settings to an 'htmlwidgets' object Manually set colors used by D3po for axis/axis-labels/title, tooltips/download menu background, and chart background. This allows you to override page themes (Tabler/Shiny) and force D3po to render with readable contrast.",
    "type": "function"
  },
  {
    "title": "po_download",
    "url": "reference/po_download.html",
    "content": "po_download Download po_download(d3po, show = TRUE) d3poA 'd3po' or 'd3proxy' object. show Logical indicating whether to show (TRUE) or hide (FALSE) the download button. Appends download button settings to an 'htmlwidgets' object Show/hide the download button.",
    "type": "function"
  },
  {
    "title": "po_network",
    "url": "reference/po_network.html",
    "content": "po_network Network po_network(d3po, ..., data = NULL, inherit_daes = TRUE) d3poEither the output of d3po() or d3po_proxy(). ... Aesthetics, see daes(). data Any dataset to use for plot, overrides data passed to d3po(). inherit_daes Whether to inherit aesthetics previous specified. Appends nodes arguments to a network-specific 'htmlwidgets' object Draw a network graph showing relationships between entities. Requires an igraph object with nodes (vertices) and links (edges). Node size can represent counts or other metrics. if (interactive()) trade_network \\% po_network(daes(size = trade_volume, color = color, layout = \"fr\")) \\%>\\% po_labels(title = \"Trade Network by Country in 2023\")",
    "type": "function"
  },
  {
    "title": "po_geomap",
    "url": "reference/po_geomap.html",
    "content": "po_geomap Geomap po_geomap(d3po, ..., data = NULL, inherit_daes = TRUE) d3poEither the output of d3po() or d3po_proxy(). ... Aesthetics, see daes(). data Any dataset to use for plot, overrides data passed to d3po(). inherit_daes Whether to inherit aesthetics previous specified. an 'htmlwidgets' object with the desired interactive plot Plot a geomap using sf spatial objects if (interactive()) world \\% po_geomap(daes(group = country, size = trade, color = my_pal, tooltip = country)) \\%>\\% po_labels(title = \"Trade Volume by Country in 2023\")",
    "type": "function"
  },
  {
    "title": "d3po",
    "url": "reference/d3po.html",
    "content": "package d3po An htmlwidget interface to the d3po javascript chart library d3po(data = NULL, ..., width = NULL, height = NULL, element_id = NULL) datad3po need explicit specified data objects formatted as JSON, and this parameter passed it from R. ... Aesthetics to pass, see daes() width Must be a valid CSS unit (like '100\\%', '400px', 'auto') or a number, which will be coerced to a string and have 'px' appended. height Same as width parameter. element_id Dummy string parameter. Useful when you have two or more charts on the same page. Creates a basic 'htmlwidget' object for simple visualization Apache licensed alternative to 'Highcharter' which provides functions for both fast and beautiful interactive visualization for 'Markdown' and 'Shiny'. Provides 'd3po' methods from R console Useful links: https://pacha.dev/d3po/ Report bugs at https://github.com/pachadotdev/d3po/issues Maintainer: Mauricio Vargas Sepulveda m.vargas.sepulveda@gmail.com (https://orcid.org/0000-0003-1017-7574ORCID) [copyright holder] Authors: John Coene Other contributors: Ariel Alvarado contributor Sylvain Lesage contributor Curran Kelleher contributor Fernando Becerra contributor Natural Earth [data contributor] R Consortium (Funded for the 2016-2017 ISC grants cycle) funder internal",
    "type": "function"
  },
  {
    "title": "'d3po' worked examples",
    "url": "vignettes/examples.html",
    "content": "knitr::opts_chunk$set( collapse = TRUE, warning = FALSE, message = FALSE, comment = \"#>\" ) Load the 'd3po' package and also 'sf' (geomaps) and 'igraph' (networks): library(d3po) library(sf) library(igraph) These examples are organized by chart type. Each section is self-contained and can be run independently. A 'd3po' object can be created with the following minimal syntax or variations of it depending on the chart type: ```r d3po(DATASET) %>% po_TYPE(daes(x = X-AXIS, ...)) Bar Charts Bar 1: Trade by Continent with Color Vector (Vertical Bars) trade_by_continent <- d3po::trade[d3po::trade$year == 2023L, ] trade_by_continent <- aggregate( trade ~ reporter_continent, data = d3po::trade, FUN = sum ) Assign colors to continents my_pal <- tintin::tintin_pal()(7) names(my_pal) <- c( \"Africa\", \"Antarctica\", \"Asia\", \"Europe\", \"North America\", \"Oceania\", \"South America\" ) d3po(trade_by_continent, width = 800, height = 600) %>% po_bar(daes(x = reporter_continent, y = trade, color = my_pal)) %>% po_labels( x = \"Continent\", y = \"Trade (USD billion)\", title = \"Total Trade by Reporter Continent in 2023\" ) Bar 2: Trade by Continent with Color Column (Horizontal Bars) trade_by_continent$color <- my_pal[trade_by_continent$reporter_continent] d3po(trade_by_continent, width = 800, height = 600) %>% po_bar(daes(x = trade, y = reporter_continent, color = color)) %>% po_labels( x = \"Trade (USD billion)\", y = \"Continent\", title = \"Total Trade by Reporter Continent in 2023\" ) Bar 3: Trade by Reporter and Partner Continent (Stacked Bars) trade_stacked <- d3po::trade trade_stacked <- aggregate(trade ~ reporter_continent + partner_continent, data = trade_stacked, FUN = sum) trade_stacked$color <- ifelse(trade_stacked$partner_continent == \"Africa\", my_pal[\"Africa\"], NA) trade_stacked$color <- ifelse(trade_stacked$partner_continent == \"Antarctica\", my_pal[\"Antarctica\"], trade_stacked$color) trade_stacked$color <- ifelse(trade_stacked$partner_continent == \"Asia\", my_pal[\"Asia\"], trade_stacked$color) trade_stacked$color <- ifelse(trade_stacked$partner_continent == \"Europe\", my_pal[\"Europe\"], trade_stacked$color) trade_stacked$color <- ifelse(trade_stacked$partner_continent == \"North America\", my_pal[\"North America\"], trade_stacked$color) trade_stacked$color <- ifelse(trade_stacked$partner_continent == \"Oceania\", my_pal[\"Oceania\"], trade_stacked$color) trade_stacked$color <- ifelse(trade_stacked$partner_continent == \"South America\", my_pal[\"South America\"], trade_stacked$color) d3po(trade_stacked, width = 800, height = 600) %>% po_bar(daes( x = reporter_continent, y = trade, group = partner_continent, color = color, stack = TRUE )) %>% po_labels( x = \"Reporter Continent\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter and Partner Continent in 2023\" ) Bar 4: Bar 1 with Customised Theme d3po(trade_by_continent, width = 800, height = 600) %>% po_bar(daes(x = reporter_continent, y = trade, color = my_pal)) %>% po_labels( x = \"Reporter Continent\", y = \"Trade (USD billion)\", title = \"Total Trade by Reporter Continent in 2023\" ) %>% po_theme(axis = \"#012169\", tooltip = \"#101418\", background = \"#cccccc\") %>% po_font(\"Liberation Serif\", 12, \"uppercase\") %>% po_download(FALSE) Pie/Donut Chart Pie 1: Trade Share by Continent with Color Vector trade_by_continent <- d3po::trade[d3po::trade$year == 2023L, ] trade_by_continent <- aggregate( trade ~ reporter_continent, data = d3po::trade, FUN = sum ) Assign colors to continents my_pal <- tintin::tintin_pal(option = \"The Black Island\")(7) names(my_pal) <- c( \"Africa\", \"Antarctica\", \"Asia\", \"Europe\", \"North America\", \"Oceania\", \"South America\" ) d3po(trade_by_continent, width = 800, height = 600) %>% po_pie(daes(size = trade, group = reporter_continent, color = my_pal)) %>% po_labels(title = \"Trade Share by Reporter Continent in 2023\") Donut 1: Donut Chart with Color Column trade_by_continent$color <- my_pal[trade_by_continent$reporter_continent] d3po(trade_by_continent, width = 800, height = 600) %>% po_donut(daes(size = trade, group = reporter_continent, inner_radius = 0.3, color = color)) %>% po_labels(title = \"Trade Share by Reporter Continent in 2023\") Pie 2: Pie 1 with Customised Theme d3po(trade_by_continent, width = 800, height = 600) %>% po_pie(daes(size = trade, group = reporter_continent, color = my_pal)) %>% po_labels(title = \"Trade Share by Reporter Continent in 2023\") %>% po_theme(tooltip = \"#101418\", background = \"#cccccc\") %>% po_font(\"Liberation Serif\", 12, \"uppercase\") %>% po_download(FALSE) Area Charts Area 1: Trade by Continent and Year with Color Vector (Non-Stacked) trade_by_continent <- d3po::trade trade_by_continent <- aggregate( trade ~ year + reporter_continent, data = trade_by_continent, FUN = sum ) Assign colors to continents my_pal <- tintin::tintin_pal(option = \"Cigars of the Pharaoh\")(7) names(my_pal) <- c( \"Africa\", \"Antarctica\", \"Asia\", \"Europe\", \"North America\", \"Oceania\", \"South America\" ) d3po(trade_by_continent, width = 800, height = 600) %>% po_area(daes( x = year, y = trade, group = reporter_continent, color = my_pal )) %>% po_labels( x = \"Year\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter Continent in 2019 and 2023\" ) Area 2: Trade by Continent and Year with Color Column (Non-Stacked) trade_by_continent$color <- my_pal[trade_by_continent$reporter_continent] d3po(trade_by_continent, width = 800, height = 600) %>% po_area(daes( x = year, y = trade, group = reporter_continent, color = color )) %>% po_labels( x = \"Year\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter Continent in 2019 and 2023\" ) Area 3: Trade Proportions by Continent and Year with Color Vector (Stacked) trade_by_continent$proportion <- ave( trade_by_continent$trade, trade_by_continent$year, FUN = function(x) x / sum(x) ) d3po(trade_by_continent, width = 800, height = 600) %>% po_area(daes( x = year, y = proportion, group = reporter_continent, color = my_pal, stack = TRUE )) %>% po_labels( x = \"Year\", y = \"Proportion of Trade\", title = \"Trade Proportions by Reporter Continent in 2019 and 2023\" ) Area 4: Trade Proportions by Continent and Year with Color Column (Stacked) d3po(trade_by_continent, width = 800, height = 600) %>% po_area(daes( x = year, y = proportion, group = reporter_continent, color = color, stack = TRUE )) %>% po_labels( x = \"Year\", y = \"Proportion of Trade\", title = \"Trade Proportions by Reporter Continent in 2019 and 2023\" ) Area 5: Area 1 with Customised Theme d3po(trade_by_continent, width = 800, height = 600) %>% po_area(daes( x = year, y = trade, group = reporter_continent, color = my_pal )) %>% po_labels( x = \"Year\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter Continent in 2019 and 2023\" ) %>% po_theme(axis = \"#012169\", tooltip = \"#101418\", background = \"#cccccc\") %>% po_font(\"Liberation Serif\", 12, \"uppercase\") %>% po_download(FALSE) Line Charts Line 1: Trade by Continent and Year with Color Vector trade_by_continent <- d3po::trade trade_by_continent <- aggregate( trade ~ year + reporter_continent, data = trade_by_continent, FUN = sum ) Assign colors to continents my_pal <- tintin::tintin_pal(option = \"The Broken Ear\")(7) names(my_pal) <- c( \"Africa\", \"Antarctica\", \"Asia\", \"Europe\", \"North America\", \"Oceania\", \"South America\" ) d3po(trade_by_continent, width = 800, height = 600) %>% po_line(daes(x = year, y = trade, group = reporter_continent, color = my_pal)) %>% po_labels( x = \"Year\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter Continent in 2019 and 2023\" ) Line 2: Trade by Continent and Year with Color Column trade_by_continent$color <- my_pal[trade_by_continent$reporter_continent] d3po(trade_by_continent, width = 800, height = 600) %>% po_line(daes(x = year, y = trade, group = reporter_continent, color = color)) %>% po_labels( x = \"Year\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter Continent in 2019 and 2023\" ) Line 3: Line 1 with Customised Theme d3po(trade_by_continent, width = 800, height = 600) %>% po_line(daes(x = year, y = trade, group = reporter_continent, color = my_pal)) %>% po_labels( x = \"Year\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter Continent in 2019 and 2023\" ) %>% po_theme(axis = \"#012169\", tooltip = \"#101418\", background = \"#cccccc\") %>% po_font(\"Liberation Serif\", 12, \"uppercase\") %>% po_download(FALSE) Scatter Plots Scatter 1: Trade in 2019 and 2023 by Country with Color Vector Create a wide dataset with x = 2019 and y = 2023 trade values trade_wide_2019 <- d3po::trade[d3po::trade$year == 2019L, c(\"reporter\", \"trade\")] trade_wide_2019 <- aggregate(trade ~ reporter, data = trade_wide_2019, FUN = sum) trade_wide_2023 <- d3po::trade[d3po::trade$year == 2023L, c(\"reporter\", \"trade\")] trade_wide_2023 <- aggregate(trade ~ reporter, data = trade_wide_2023, FUN = sum) trade_wide <- merge( trade_wide_2019, trade_wide_2023, by = \"reporter\", suffixes = c(\"_2019\", \"_2023\") ) my_pal <- tintin::tintin_pal(option = \"red_rackhams_treasure\")(7) d3po(trade_wide, width = 800, height = 600) %>% po_scatter(daes(x = trade_2019, y = trade_2023, group = reporter, color = my_pal)) %>% po_labels( x = \"Trade in 2019 (USD billion)\", y = \"Trade in 2023 (USD billion)\", title = \"Trade Volume by Country in 2019 and 2023\" ) Scatter 2: Trade in 2019 and 2023 by Country with Color Column trade_wide$color <- sample(my_pal, nrow(trade_wide), replace = TRUE) d3po(trade_wide, width = 800, height = 600) %>% po_scatter(daes(x = trade_2019, y = trade_2023, group = reporter, color = color)) %>% po_labels( x = \"Trade in 2019 (USD billion)\", y = \"Trade in 2023 (USD billion)\", title = \"Trade Volume by Country in 2019 and 2023\" ) Scatter 3: Trade in 2019 and 2023 by Country Weighted by Trade Volume trade_wide$size <- (trade_wide$trade_2019 + trade_wide$trade_2023) / 2 d3po(trade_wide, width = 800, height = 600) %>% po_scatter(daes( x = trade_2019, y = trade_2023, group = reporter, color = color, size = size )) %>% po_labels( x = \"Trade in 2019 (USD billion)\", y = \"Trade in 2023 (USD billion)\", title = \"Trade Volume by Country in 2019 and 2023\" ) Scatter 4: Scatter 1 with Customised Theme d3po(trade_wide, width = 800, height = 600) %>% po_scatter(daes(x = trade_2019, y = trade_2023, group = reporter, color = my_pal)) %>% po_labels( x = \"Trade in 2019 (USD billion)\", y = \"Trade in 2023 (USD billion)\", title = \"Trade Volume by Country in 2019 and 2023\" ) %>% po_theme(axis = \"#012169\", tooltip = \"#101418\", background = \"#cccccc\") %>% po_font(\"Liberation Serif\", 12, \"uppercase\") %>% po_download(FALSE) Box Plots Box 1: Trade Distribution by Continent with Color Vector trade_continent <- d3po::trade trade_continent <- aggregate( trade ~ reporter_continent + reporter, data = trade_continent, FUN = sum ) my_pal <- tintin::tintin_pal(option = \"Destination Moon\")(7) names(my_pal) <- c( \"Africa\", \"Antarctica\", \"Asia\", \"Europe\", \"North America\", \"Oceania\", \"South America\" ) d3po(trade_continent, width = 800, height = 600) %>% po_box(daes(x = reporter_continent, y = trade, color = my_pal, tooltip = reporter_continent)) %>% po_labels( x = \"Continent\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter Continent\" ) Box 2: Trade Distribution by Continent with Color Column (Horizontal) trade_continent$color <- my_pal[trade_continent$reporter_continent] d3po(trade_continent, width = 800, height = 600) %>% po_box(daes(y = reporter_continent, x = trade, color = color, tooltip = reporter_continent)) %>% po_labels( y = \"Continent\", x = \"Trade (USD billion)\", title = \"Trade Distribution by Continents with Custom Colors\" ) Box 3: Box 1 with Customised Theme d3po(trade_continent, width = 800, height = 600) %>% po_box(daes(x = reporter_continent, y = trade, color = my_pal, tooltip = reporter_continent)) %>% po_labels( x = \"Continent\", y = \"Trade (USD billion)\", title = \"Trade Distribution by Reporter Continent\" ) %>% po_theme(axis = \"#012169\", tooltip = \"#101418\", background = \"#cccccc\") %>% po_font(\"Liberation Serif\", 12, \"uppercase\") %>% po_download(FALSE) Treemaps Treemap 1: Trade by Continent with Color Vector (Single Level, Squarify) trade_by_continent <- d3po::trade[d3po::trade$year == 2023L, ] trade_by_continent <- aggregate(trade ~ reporter_continent, data = trade_by_continent, FUN = sum) my_pal <- tintin::tintin_pal(option = \"The Secret of the Unicorn\")(7) names(my_pal) <- c( \"Africa\", \"Antarctica\", \"Asia\", \"Europe\", \"North America\", \"Oceania\", \"South America\" ) d3po(trade_by_continent, width = 800, height = 600) %>% po_treemap(daes(size = trade, group = reporter_continent, color = my_pal, tiling = \"squarify\")) %>% po_labels(title = \"Trade Share by Continent in 2023\") Treemap 2: Trade by Continent with Color Column (Single Level, Slice-Dice) trade_by_continent$color <- my_pal[trade_by_continent$reporter_continent] d3po(trade_by_continent, width = 800, height = 600) %>% po_treemap(daes(size = trade, group = reporter_continent, color = color, tiling = \"slice-dice\")) %>% po_labels(title = \"Trade Share by Continent in 2023\") Treemap 3: Two-Level (Continent and Top Countries) trade_twolevel <- d3po::trade[d3po::trade$year == 2023L, ] trade_twolevel <- aggregate(trade ~ reporter_continent + reporter, data = trade_twolevel, FUN = sum) trade_twolevel$color <- my_pal[trade_twolevel$reporter_continent] d3po(trade_twolevel, width = 800, height = 600) %>% po_treemap(daes( size = trade, group = reporter_continent, subgroup = reporter, color = color, tiling = \"squarify\" )) %>% po_labels(title = \"Trade Share by Continent in 2023 (click to see the countries)\") Treemap 4: Treemap 3 with Customised Theme and Tooltip d3po(trade_twolevel, width = 800, height = 600) %>% po_treemap(daes( size = trade, group = reporter_continent, subgroup = reporter, color = color, tiling = \"squarify\" )) %>% po_theme(background = \"#cccccc\") %>% po_font(\"Liberation Serif\", 12, \"uppercase\") %>% po_download(FALSE) %>% po_labels( align = \"center-middle\", labels = JS( \"function(percentage, row) { var pct = (percentage).toFixed(2) + '%'; // Show reporter (country) if available, otherwise show reporter_continent var name = (row && row.reporter) ? row.reporter : (row && row.reporter_continent ? row.reporter_continent : ''); var count = row && (row.trade != null ? row.trade : (row.value != null ? row.value : '')); count = (count).toFixed(2) + 'B'; return '<i>' + name + '<\/i><br/>Trade: ' + (count || '') + '<br/>Percentage: ' + pct;\\n }\" ), title = \"Trade Share by Continent in 2023 (click to see the countries)\", subtitle = JS( \"function(_v, row) { // row.mode is 'aggregated' | 'flat' | 'drilled' if (row && row.mode === 'drilled') return 'Displaying Countries'; return 'Displaying Continents';\\ }\" ) ) %>% po_tooltip(JS( \"function(percentage, row) { var pct = (percentage).toFixed(2) + '%'; var count = row && row.count != null ? row.count : ''; count = (count).toFixed(2) + 'B'; if (!row || !row.reporter) { var t1 = row && (row.reporter_continent || row.reporter) ? (row.reporter_continent || row.reporter) : ''; return '<i>Continent: ' + t1 + '<\/i><br/>Trade: ' + count + '<br/>Percentage: ' + pct; } return '<i>Continent: ' + (row.reporter_continent || '') + '<br/>Country: ' + (row.reporter || '') + '<\/i><br/>Trade: ' + count + '<br/>Percentage: ' + pct; }\" )) Geomaps Geomap 1: Trade Volume by Country with Color Vector (World) world <- d3po::national Fix geometries that cross the antimeridian (date line) to avoid horizontal lines This affects Russia, Fiji, and other countries spanning the 180Â° meridian world$geometry <- sf::st_wrap_dateline(world$geometry, options = c(\"WRAPDATELINE=YES\")) total_trade <- d3po::trade[d3po::trade$year == 2023L, c(\"reporter\", \"reporter_continent\", \"trade\")] total_trade <- aggregate(trade ~ reporter, data = total_trade, FUN = sum) colnames(total_trade) <- c(\"country\", \"trade\") world <- merge( world, total_trade, by = \"country\", all.x = TRUE, all.y = FALSE ) my_pal <- tintin::tintin_pal(option = \"The Calculus Affair\")(7) names(my_pal) <- c( \"Africa\", \"Antarctica\", \"Asia\", \"Europe\", \"North America\", \"Oceania\", \"South America\" ) d3po(world, width = 800, height = 600) %>% po_geomap(daes(group = country, size = trade, color = my_pal, tooltip = country)) %>% po_labels(title = \"Trade Volume by Country in 2023\") Geomap 2: Trade Volume by Country with Color Column (World) world$color <- my_pal[world$continent] d3po(world, width = 800, height = 600) %>% po_geomap(daes(group = country, size = trade, color = color, tooltip = country)) %>% po_labels(title = \"Trade Volume by Country in 2023\") Geomap 3: Trade Volume by Country with Custom Color Vector (Europe) europe <- world[world$continent == \"Europe\", ] Filter to continental Europe + Iceland using bounding box This excludes overseas territories like Canary Islands, French Guiana, etc. bbox <- sf::st_bbox(c(xmin = -27, ymin = 30, xmax = 40, ymax = 72), crs = sf::st_crs(europe)) europe <- sf::st_crop(europe, bbox) europe$color <- my_pal[europe$continent] my_color <- c(\"#e74c3c\", \"#3498db\", \"#2ecc71\") d3po(europe, width = 800, height = 600) %>% po_geomap(daes(group = country, size = trade, color = my_color, tooltip = country)) %>% po_labels(title = \"Trade Volume by Country in 2023\") Geomap 4: Trade Volume by Country with Gradient Coloring (Europe) d3po(europe, width = 800, height = 600) %>% po_geomap(daes(group = country, size = trade, gradient = TRUE, tooltip = country)) %>% po_labels(title = \"Trade Volume by Country in 2023\") Geomap 5: Gradient coloring with custom palette d3po(europe, width = 800, height = 600) %>% po_geomap(daes(group = country, size = trade, color = my_color, gradient = TRUE, tooltip = country)) %>% po_labels(title = \"Trade Volume by Country in 2023\") Geomap 6: Geomap 5 with Customised Theme d3po(europe, width = 800, height = 600) %>% po_geomap(daes(group = country, size = trade, color = my_color, gradient = TRUE, tooltip = country)) %>% po_labels(title = \"Trade Volume by Country in 2023\") %>% po_theme(axis = \"#012169\", tooltip = \"#101418\", background = \"#cccccc\") %>% po_font(\"Liberation Serif\", 12, \"uppercase\") %>% po_download(FALSE) Network Network 1: Connections Between Countries with Color Vector (Fruchterman-Reingold Layout) trade_network <- d3po::trade[d3po::trade$year == 2023L, ] trade_network <- aggregate(trade ~ reporter_iso + partner_iso + reporter_continent + partner_continent, data = trade_network, FUN = sum ) subset to 5 largest connection per reporter country trade_network <- do.call( rbind, lapply( split(trade_network, trade_network$reporter_iso), function(df) head(df[order(-df$trade), ], 5) ) ) Create vertex (node) attributes for coloring and sizing Get unique countries with their continents and trade volumes vertices <- unique(rbind( data.frame( name = trade_network$reporter_iso, continent = trade_network$reporter_continent, stringsAsFactors = FALSE ), data.frame( name = trade_network$partner_iso, continent = trade_network$partner_continent, stringsAsFactors = FALSE ) )) Remove duplicates vertices <- vertices[!duplicated(vertices$name), ] Calculate total trade volume per country (as reporter) trade_volume <- aggregate(trade ~ reporter_iso, data = trade_network, FUN = sum) colnames(trade_volume) <- c(\"name\", \"trade_volume\") Merge trade volume with vertices vertices <- merge(vertices, trade_volume, by = \"name\", all.x = TRUE) vertices$trade_volume[is.na(vertices$trade_volume)] <- 0 Assign colors to continents my_pal <- tintin::tintin_pal(option = \"The Blue Lotus\")(7) names(my_pal) <- c( \"Africa\", \"Antarctica\", \"Asia\", \"Europe\", \"North America\", \"Oceania\", \"South America\" ) Add color column based on continent vertices$color <- my_pal[vertices$continent] Create igraph object with vertex attributes g <- graph_from_data_frame(trade_network, directed = TRUE, vertices = vertices) Create the network visualization d3po(g, width = 800, height = 600) %>% po_network(daes(size = trade_volume, color = color, layout = \"fr\")) %>% po_labels(title = \"Trade Network by Country in 2023\") Network 2: Connections Between Countries with Color Vector (Kamada-Kawai Layout) Use a different color palette my_pal <- tintin::tintin_pal(option = \"Explorers on the Moon\")(7) names(my_pal) <- c( \"Africa\", \"Antarctica\", \"Asia\", \"Europe\", \"North America\", \"Oceania\", \"South America\" ) Update colors with new palette vertices$color <- my_pal[vertices$continent] Create network with Kamada-Kawai layout d3po(g, width = 800, height = 600) %>% po_network(daes(size = trade_volume, color = color, layout = \"kk\")) %>% po_labels(title = \"Trade Network by Country in 2023\") Network 3: Network 1 with Custom Theme d3po(g, width = 800, height = 600) %>% po_network(daes(size = trade_volume, color = color, layout = \"fr\")) %>% po_labels(title = \"Trade Network by Country in 2023\") %>% po_theme(tooltip = \"#101418\", background = \"#cccccc\") %>% po_font(\"Liberation Serif\", 12, \"uppercase\") %>% po_download(FALSE)",
    "type": "vignette"
  }
]
